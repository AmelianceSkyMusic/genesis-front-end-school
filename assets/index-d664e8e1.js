function Qh(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const C=Object.getOwnPropertyDescriptor(n,i);C&&Object.defineProperty(e,i,C.get?C:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const C of i)if(C.type==="childList")for(const k of C.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&n(k)}).observe(document,{childList:!0,subtree:!0});function r(i){const C={};return i.integrity&&(C.integrity=i.integrity),i.referrerPolicy&&(C.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?C.credentials="include":i.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function n(i){if(i.ep)return;i.ep=!0;const C=r(i);fetch(i.href,C)}})();var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ss(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var X={},Zh={get exports(){return X},set exports(e){X=e}},os={},ae={},Jh={get exports(){return ae},set exports(e){ae=e}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=Symbol.for("react.element"),qh=Symbol.for("react.portal"),ev=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),rv=Symbol.for("react.profiler"),nv=Symbol.for("react.provider"),iv=Symbol.for("react.context"),av=Symbol.for("react.forward_ref"),sv=Symbol.for("react.suspense"),ov=Symbol.for("react.memo"),lv=Symbol.for("react.lazy"),_u=Symbol.iterator;function uv(e){return e===null||typeof e!="object"?null:(e=_u&&e[_u]||e["@@iterator"],typeof e=="function"?e:null)}var ac={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sc=Object.assign,oc={};function Hn(e,t,r){this.props=e,this.context=t,this.refs=oc,this.updater=r||ac}Hn.prototype.isReactComponent={};Hn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lc(){}lc.prototype=Hn.prototype;function hl(e,t,r){this.props=e,this.context=t,this.refs=oc,this.updater=r||ac}var vl=hl.prototype=new lc;vl.constructor=hl;sc(vl,Hn.prototype);vl.isPureReactComponent=!0;var Su=Array.isArray,uc=Object.prototype.hasOwnProperty,gl={current:null},fc={key:!0,ref:!0,__self:!0,__source:!0};function cc(e,t,r){var n,i={},C=null,k=null;if(t!=null)for(n in t.ref!==void 0&&(k=t.ref),t.key!==void 0&&(C=""+t.key),t)uc.call(t,n)&&!fc.hasOwnProperty(n)&&(i[n]=t[n]);var R=arguments.length-2;if(R===1)i.children=r;else if(1<R){for(var o=Array(R),b=0;b<R;b++)o[b]=arguments[b+2];i.children=o}if(e&&e.defaultProps)for(n in R=e.defaultProps,R)i[n]===void 0&&(i[n]=R[n]);return{$$typeof:Ki,type:e,key:C,ref:k,props:i,_owner:gl.current}}function fv(e,t){return{$$typeof:Ki,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ki}function cv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xu=/\/+/g;function Rs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cv(""+e.key):t.toString(36)}function pa(e,t,r,n,i){var C=typeof e;(C==="undefined"||C==="boolean")&&(e=null);var k=!1;if(e===null)k=!0;else switch(C){case"string":case"number":k=!0;break;case"object":switch(e.$$typeof){case Ki:case qh:k=!0}}if(k)return k=e,i=i(k),e=n===""?"."+Rs(k,0):n,Su(i)?(r="",e!=null&&(r=e.replace(xu,"$&/")+"/"),pa(i,t,r,"",function(b){return b})):i!=null&&(pl(i)&&(i=fv(i,r+(!i.key||k&&k.key===i.key?"":(""+i.key).replace(xu,"$&/")+"/")+e)),t.push(i)),1;if(k=0,n=n===""?".":n+":",Su(e))for(var R=0;R<e.length;R++){C=e[R];var o=n+Rs(C,R);k+=pa(C,t,r,o,i)}else if(o=uv(e),typeof o=="function")for(e=o.call(e),R=0;!(C=e.next()).done;)C=C.value,o=n+Rs(C,R++),k+=pa(C,t,r,o,i);else if(C==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return k}function Ji(e,t,r){if(e==null)return e;var n=[],i=0;return pa(e,n,"","",function(C){return t.call(r,C,i++)}),n}function dv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},ma={transition:null},hv={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:ma,ReactCurrentOwner:gl};xe.Children={map:Ji,forEach:function(e,t,r){Ji(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ji(e,function(){t++}),t},toArray:function(e){return Ji(e,function(t){return t})||[]},only:function(e){if(!pl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=Hn;xe.Fragment=ev;xe.Profiler=rv;xe.PureComponent=hl;xe.StrictMode=tv;xe.Suspense=sv;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hv;xe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=sc({},e.props),i=e.key,C=e.ref,k=e._owner;if(t!=null){if(t.ref!==void 0&&(C=t.ref,k=gl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var R=e.type.defaultProps;for(o in t)uc.call(t,o)&&!fc.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&R!==void 0?R[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){R=Array(o);for(var b=0;b<o;b++)R[b]=arguments[b+2];n.children=R}return{$$typeof:Ki,type:e.type,key:i,ref:C,props:n,_owner:k}};xe.createContext=function(e){return e={$$typeof:iv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nv,_context:e},e.Consumer=e};xe.createElement=cc;xe.createFactory=function(e){var t=cc.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:av,render:e}};xe.isValidElement=pl;xe.lazy=function(e){return{$$typeof:lv,_payload:{_status:-1,_result:e},_init:dv}};xe.memo=function(e,t){return{$$typeof:ov,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=ma.transition;ma.transition={};try{e()}finally{ma.transition=t}};xe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xe.useCallback=function(e,t){return vt.current.useCallback(e,t)};xe.useContext=function(e){return vt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return vt.current.useEffect(e,t)};xe.useId=function(){return vt.current.useId()};xe.useImperativeHandle=function(e,t,r){return vt.current.useImperativeHandle(e,t,r)};xe.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return vt.current.useMemo(e,t)};xe.useReducer=function(e,t,r){return vt.current.useReducer(e,t,r)};xe.useRef=function(e){return vt.current.useRef(e)};xe.useState=function(e){return vt.current.useState(e)};xe.useSyncExternalStore=function(e,t,r){return vt.current.useSyncExternalStore(e,t,r)};xe.useTransition=function(){return vt.current.useTransition()};xe.version="18.2.0";(function(e){e.exports=xe})(Jh);const vv=ss(ae),co=Qh({__proto__:null,default:vv},[ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv=ae,pv=Symbol.for("react.element"),mv=Symbol.for("react.fragment"),yv=Object.prototype.hasOwnProperty,Ev=gv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tv={key:!0,ref:!0,__self:!0,__source:!0};function dc(e,t,r){var n,i={},C=null,k=null;r!==void 0&&(C=""+r),t.key!==void 0&&(C=""+t.key),t.ref!==void 0&&(k=t.ref);for(n in t)yv.call(t,n)&&!Tv.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:pv,type:e,key:C,ref:k,props:i,_owner:Ev.current}}os.Fragment=mv;os.jsx=dc;os.jsxs=dc;(function(e){e.exports=os})(Zh);var Ia={},_v={get exports(){return Ia},set exports(e){Ia=e}},Pt={},ho={},Sv={get exports(){return ho},set exports(e){ho=e}},hc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(y,s){var _=y.length;y.push(s);e:for(;0<_;){var F=_-1>>>1,P=y[F];if(0<i(P,s))y[F]=s,y[_]=P,_=F;else break e}}function r(y){return y.length===0?null:y[0]}function n(y){if(y.length===0)return null;var s=y[0],_=y.pop();if(_!==s){y[0]=_;e:for(var F=0,P=y.length,B=P>>>1;F<B;){var K=2*(F+1)-1,j=y[K],W=K+1,H=y[W];if(0>i(j,_))W<P&&0>i(H,j)?(y[F]=H,y[W]=_,F=W):(y[F]=j,y[K]=_,F=K);else if(W<P&&0>i(H,_))y[F]=H,y[W]=_,F=W;else break e}}return s}function i(y,s){var _=y.sortIndex-s.sortIndex;return _!==0?_:y.id-s.id}if(typeof performance=="object"&&typeof performance.now=="function"){var C=performance;e.unstable_now=function(){return C.now()}}else{var k=Date,R=k.now();e.unstable_now=function(){return k.now()-R}}var o=[],b=[],A=1,N=null,O=3,U=!1,M=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function a(y){for(var s=r(b);s!==null;){if(s.callback===null)n(b);else if(s.startTime<=y)n(b),s.sortIndex=s.expirationTime,t(o,s);else break;s=r(b)}}function D(y){if(S=!1,a(y),!M)if(r(o)!==null)M=!0,E(T);else{var s=r(b);s!==null&&u(D,s.startTime-y)}}function T(y,s){M=!1,S&&(S=!1,p(d),d=-1),U=!0;var _=O;try{for(a(s),N=r(o);N!==null&&(!(N.expirationTime>s)||y&&!L());){var F=N.callback;if(typeof F=="function"){N.callback=null,O=N.priorityLevel;var P=F(N.expirationTime<=s);s=e.unstable_now(),typeof P=="function"?N.callback=P:N===r(o)&&n(o),a(s)}else n(o);N=r(o)}if(N!==null)var B=!0;else{var K=r(b);K!==null&&u(D,K.startTime-s),B=!1}return B}finally{N=null,O=_,U=!1}}var c=!1,l=null,d=-1,f=5,x=-1;function L(){return!(e.unstable_now()-x<f)}function h(){if(l!==null){var y=e.unstable_now();x=y;var s=!0;try{s=l(!0,y)}finally{s?m():(c=!1,l=null)}}else c=!1}var m;if(typeof v=="function")m=function(){v(h)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,g=I.port2;I.port1.onmessage=h,m=function(){g.postMessage(null)}}else m=function(){w(h,0)};function E(y){l=y,c||(c=!0,m())}function u(y,s){d=w(function(){y(e.unstable_now())},s)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(y){y.callback=null},e.unstable_continueExecution=function(){M||U||(M=!0,E(T))},e.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):f=0<y?Math.floor(1e3/y):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(y){switch(O){case 1:case 2:case 3:var s=3;break;default:s=O}var _=O;O=s;try{return y()}finally{O=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(y,s){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var _=O;O=y;try{return s()}finally{O=_}},e.unstable_scheduleCallback=function(y,s,_){var F=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?F+_:F):_=F,y){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=_+P,y={id:A++,callback:s,priorityLevel:y,startTime:_,expirationTime:P,sortIndex:-1},_>F?(y.sortIndex=_,t(b,y),r(o)===null&&y===r(b)&&(S?(p(d),d=-1):S=!0,u(D,_-F))):(y.sortIndex=P,t(o,y),M||U||(M=!0,E(T))),y},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(y){var s=O;return function(){var _=O;O=s;try{return y.apply(this,arguments)}finally{O=_}}}})(hc);(function(e){e.exports=hc})(Sv);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vc=ae,Dt=ho;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gc=new Set,_i={};function sn(e,t){kn(e,t),kn(e+"Capture",t)}function kn(e,t){for(_i[e]=t,e=0;e<t.length;e++)gc.add(t[e])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=Object.prototype.hasOwnProperty,xv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cu={},Lu={};function Cv(e){return vo.call(Lu,e)?!0:vo.call(Cu,e)?!1:xv.test(e)?Lu[e]=!0:(Cu[e]=!0,!1)}function Lv(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dv(e,t,r,n){if(t===null||typeof t>"u"||Lv(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,r,n,i,C,k){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=C,this.removeEmptyString=k}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ml=/[\-:]([a-z])/g;function yl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ml,yl);st[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ml,yl);st[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ml,yl);st[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function El(e,t,r,n){var i=st.hasOwnProperty(t)?st[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dv(t,r,i,n)&&(r=null),n||i===null?Cv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gr=vc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qi=Symbol.for("react.element"),hn=Symbol.for("react.portal"),vn=Symbol.for("react.fragment"),Tl=Symbol.for("react.strict_mode"),go=Symbol.for("react.profiler"),pc=Symbol.for("react.provider"),mc=Symbol.for("react.context"),_l=Symbol.for("react.forward_ref"),po=Symbol.for("react.suspense"),mo=Symbol.for("react.suspense_list"),Sl=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),yc=Symbol.for("react.offscreen"),Du=Symbol.iterator;function Yn(e){return e===null||typeof e!="object"?null:(e=Du&&e[Du]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,Is;function oi(e){if(Is===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Is=t&&t[1]||""}return`
`+Is+e}var Os=!1;function Ms(e,t){if(!e||Os)return"";Os=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var n=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){n=b}e.call(t.prototype)}else{try{throw Error()}catch(b){n=b}e()}}catch(b){if(b&&n&&typeof b.stack=="string"){for(var i=b.stack.split(`
`),C=n.stack.split(`
`),k=i.length-1,R=C.length-1;1<=k&&0<=R&&i[k]!==C[R];)R--;for(;1<=k&&0<=R;k--,R--)if(i[k]!==C[R]){if(k!==1||R!==1)do if(k--,R--,0>R||i[k]!==C[R]){var o=`
`+i[k].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=k&&0<=R);break}}}finally{Os=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?oi(e):""}function Pv(e){switch(e.tag){case 5:return oi(e.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 2:case 15:return e=Ms(e.type,!1),e;case 11:return e=Ms(e.type.render,!1),e;case 1:return e=Ms(e.type,!0),e;default:return""}}function yo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vn:return"Fragment";case hn:return"Portal";case go:return"Profiler";case Tl:return"StrictMode";case po:return"Suspense";case mo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mc:return(e.displayName||"Context")+".Consumer";case pc:return(e._context.displayName||"Context")+".Provider";case _l:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sl:return t=e.displayName||null,t!==null?t:yo(e.type)||"Memo";case _r:t=e._payload,e=e._init;try{return yo(e(t))}catch{}}return null}function Av(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yo(t);case 8:return t===Tl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ec(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rv(e){var t=Ec(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,C=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(k){n=""+k,C.call(this,k)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(k){n=""+k},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ea(e){e._valueTracker||(e._valueTracker=Rv(e))}function Tc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ec(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Oa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Eo(e,t){var r=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Nr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _c(e,t){t=t.checked,t!=null&&El(e,"checked",t,!1)}function To(e,t){_c(e,t);var r=Nr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_o(e,t.type,r):t.hasOwnProperty("defaultValue")&&_o(e,t.type,Nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Au(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _o(e,t,r){(t!=="number"||Oa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var li=Array.isArray;function Pn(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Nr(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function So(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ru(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ue(92));if(li(r)){if(1<r.length)throw Error(ue(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Nr(r)}}function Sc(e,t){var r=Nr(t.value),n=Nr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Iu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ta,Cc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ta=ta||document.createElement("div"),ta.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ta.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Si(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iv=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(e){Iv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ci[t]=ci[e]})});function Lc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ci.hasOwnProperty(e)&&ci[e]?(""+t).trim():t+"px"}function Dc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Lc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Ov=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Co(e,t){if(t){if(Ov[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function Lo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Do=null;function xl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Po=null,An=null,Rn=null;function Ou(e){if(e=Hi(e)){if(typeof Po!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=ds(t),Po(e.stateNode,e.type,t))}}function Pc(e){An?Rn?Rn.push(e):Rn=[e]:An=e}function Ac(){if(An){var e=An,t=Rn;if(Rn=An=null,Ou(e),t)for(e=0;e<t.length;e++)Ou(t[e])}}function Rc(e,t){return e(t)}function Ic(){}var ws=!1;function Oc(e,t,r){if(ws)return e(t,r);ws=!0;try{return Rc(e,t,r)}finally{ws=!1,(An!==null||Rn!==null)&&(Ic(),Ac())}}function xi(e,t){var r=e.stateNode;if(r===null)return null;var n=ds(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ue(231,t,typeof r));return r}var Ao=!1;if(fr)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Ao=!1}function Mv(e,t,r,n,i,C,k,R,o){var b=Array.prototype.slice.call(arguments,3);try{t.apply(r,b)}catch(A){this.onError(A)}}var di=!1,Ma=null,wa=!1,Ro=null,wv={onError:function(e){di=!0,Ma=e}};function kv(e,t,r,n,i,C,k,R,o){di=!1,Ma=null,Mv.apply(wv,arguments)}function bv(e,t,r,n,i,C,k,R,o){if(kv.apply(this,arguments),di){if(di){var b=Ma;di=!1,Ma=null}else throw Error(ue(198));wa||(wa=!0,Ro=b)}}function on(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Mc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mu(e){if(on(e)!==e)throw Error(ue(188))}function Fv(e){var t=e.alternate;if(!t){if(t=on(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var C=i.alternate;if(C===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===C.child){for(C=i.child;C;){if(C===r)return Mu(i),e;if(C===n)return Mu(i),t;C=C.sibling}throw Error(ue(188))}if(r.return!==n.return)r=i,n=C;else{for(var k=!1,R=i.child;R;){if(R===r){k=!0,r=i,n=C;break}if(R===n){k=!0,n=i,r=C;break}R=R.sibling}if(!k){for(R=C.child;R;){if(R===r){k=!0,r=C,n=i;break}if(R===n){k=!0,n=C,r=i;break}R=R.sibling}if(!k)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?e:t}function wc(e){return e=Fv(e),e!==null?kc(e):null}function kc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kc(e);if(t!==null)return t;e=e.sibling}return null}var bc=Dt.unstable_scheduleCallback,wu=Dt.unstable_cancelCallback,Nv=Dt.unstable_shouldYield,Uv=Dt.unstable_requestPaint,Ye=Dt.unstable_now,Bv=Dt.unstable_getCurrentPriorityLevel,Cl=Dt.unstable_ImmediatePriority,Fc=Dt.unstable_UserBlockingPriority,ka=Dt.unstable_NormalPriority,Kv=Dt.unstable_LowPriority,Nc=Dt.unstable_IdlePriority,ls=null,Zt=null;function jv(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(ls,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Gv,Wv=Math.log,Hv=Math.LN2;function Gv(e){return e>>>=0,e===0?32:31-(Wv(e)/Hv|0)|0}var ra=64,na=4194304;function ui(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ba(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,C=e.pingedLanes,k=r&268435455;if(k!==0){var R=k&~i;R!==0?n=ui(R):(C&=k,C!==0&&(n=ui(C)))}else k=r&~i,k!==0?n=ui(k):C!==0&&(n=ui(C));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,C=t&-t,i>=C||i===16&&(C&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kt(t),i=1<<r,n|=e[r],t&=~i;return n}function Vv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zv(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,C=e.pendingLanes;0<C;){var k=31-Kt(C),R=1<<k,o=i[k];o===-1?(!(R&r)||R&n)&&(i[k]=Vv(R,t)):o<=t&&(e.expiredLanes|=R),C&=~R}}function Io(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uc(){var e=ra;return ra<<=1,!(ra&4194240)&&(ra=64),e}function ks(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ji(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function $v(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Kt(r),C=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~C}}function Ll(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kt(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Re=0;function Bc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kc,Dl,jc,Wc,Hc,Oo=!1,ia=[],Ar=null,Rr=null,Ir=null,Ci=new Map,Li=new Map,xr=[],Yv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(e,t){switch(e){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Ci.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(t.pointerId)}}function Qn(e,t,r,n,i,C){return e===null||e.nativeEvent!==C?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:C,targetContainers:[i]},t!==null&&(t=Hi(t),t!==null&&Dl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Xv(e,t,r,n,i){switch(t){case"focusin":return Ar=Qn(Ar,e,t,r,n,i),!0;case"dragenter":return Rr=Qn(Rr,e,t,r,n,i),!0;case"mouseover":return Ir=Qn(Ir,e,t,r,n,i),!0;case"pointerover":var C=i.pointerId;return Ci.set(C,Qn(Ci.get(C)||null,e,t,r,n,i)),!0;case"gotpointercapture":return C=i.pointerId,Li.set(C,Qn(Li.get(C)||null,e,t,r,n,i)),!0}return!1}function Gc(e){var t=Yr(e.target);if(t!==null){var r=on(t);if(r!==null){if(t=r.tag,t===13){if(t=Mc(r),t!==null){e.blockedOn=t,Hc(e.priority,function(){jc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Mo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Do=n,r.target.dispatchEvent(n),Do=null}else return t=Hi(r),t!==null&&Dl(t),e.blockedOn=r,!1;t.shift()}return!0}function bu(e,t,r){ya(e)&&r.delete(t)}function Qv(){Oo=!1,Ar!==null&&ya(Ar)&&(Ar=null),Rr!==null&&ya(Rr)&&(Rr=null),Ir!==null&&ya(Ir)&&(Ir=null),Ci.forEach(bu),Li.forEach(bu)}function Zn(e,t){e.blockedOn===t&&(e.blockedOn=null,Oo||(Oo=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Qv)))}function Di(e){function t(i){return Zn(i,e)}if(0<ia.length){Zn(ia[0],e);for(var r=1;r<ia.length;r++){var n=ia[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ar!==null&&Zn(Ar,e),Rr!==null&&Zn(Rr,e),Ir!==null&&Zn(Ir,e),Ci.forEach(t),Li.forEach(t),r=0;r<xr.length;r++)n=xr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<xr.length&&(r=xr[0],r.blockedOn===null);)Gc(r),r.blockedOn===null&&xr.shift()}var In=gr.ReactCurrentBatchConfig,Fa=!0;function Zv(e,t,r,n){var i=Re,C=In.transition;In.transition=null;try{Re=1,Pl(e,t,r,n)}finally{Re=i,In.transition=C}}function Jv(e,t,r,n){var i=Re,C=In.transition;In.transition=null;try{Re=4,Pl(e,t,r,n)}finally{Re=i,In.transition=C}}function Pl(e,t,r,n){if(Fa){var i=Mo(e,t,r,n);if(i===null)Gs(e,t,n,Na,r),ku(e,n);else if(Xv(i,e,t,r,n))n.stopPropagation();else if(ku(e,n),t&4&&-1<Yv.indexOf(e)){for(;i!==null;){var C=Hi(i);if(C!==null&&Kc(C),C=Mo(e,t,r,n),C===null&&Gs(e,t,n,Na,r),C===i)break;i=C}i!==null&&n.stopPropagation()}else Gs(e,t,n,null,r)}}var Na=null;function Mo(e,t,r,n){if(Na=null,e=xl(n),e=Yr(e),e!==null)if(t=on(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Mc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Na=e,null}function Vc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bv()){case Cl:return 1;case Fc:return 4;case ka:case Kv:return 16;case Nc:return 536870912;default:return 16}default:return 16}}var Lr=null,Al=null,Ea=null;function zc(){if(Ea)return Ea;var e,t=Al,r=t.length,n,i="value"in Lr?Lr.value:Lr.textContent,C=i.length;for(e=0;e<r&&t[e]===i[e];e++);var k=r-e;for(n=1;n<=k&&t[r-n]===i[C-n];n++);return Ea=i.slice(e,1<n?1-n:void 0)}function Ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function aa(){return!0}function Fu(){return!1}function At(e){function t(r,n,i,C,k){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=C,this.target=k,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(r=e[R],this[R]=r?r(C):C[R]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?aa:Fu,this.isPropagationStopped=Fu,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=At(Gn),Wi=Ve({},Gn,{view:0,detail:0}),qv=At(Wi),bs,Fs,Jn,us=Ve({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jn&&(Jn&&e.type==="mousemove"?(bs=e.screenX-Jn.screenX,Fs=e.screenY-Jn.screenY):Fs=bs=0,Jn=e),bs)},movementY:function(e){return"movementY"in e?e.movementY:Fs}}),Nu=At(us),e0=Ve({},us,{dataTransfer:0}),t0=At(e0),r0=Ve({},Wi,{relatedTarget:0}),Ns=At(r0),n0=Ve({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=At(n0),a0=Ve({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),s0=At(a0),o0=Ve({},Gn,{data:0}),Uu=At(o0),l0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=f0[e])?!!t[e]:!1}function Il(){return c0}var d0=Ve({},Wi,{key:function(e){if(e.key){var t=l0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(e){return e.type==="keypress"?Ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),h0=At(d0),v0=Ve({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=At(v0),g0=Ve({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),p0=At(g0),m0=Ve({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),y0=At(m0),E0=Ve({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),T0=At(E0),_0=[9,13,27,32],Ol=fr&&"CompositionEvent"in window,hi=null;fr&&"documentMode"in document&&(hi=document.documentMode);var S0=fr&&"TextEvent"in window&&!hi,$c=fr&&(!Ol||hi&&8<hi&&11>=hi),Ku=String.fromCharCode(32),ju=!1;function Yc(e,t){switch(e){case"keyup":return _0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gn=!1;function x0(e,t){switch(e){case"compositionend":return Xc(t);case"keypress":return t.which!==32?null:(ju=!0,Ku);case"textInput":return e=t.data,e===Ku&&ju?null:e;default:return null}}function C0(e,t){if(gn)return e==="compositionend"||!Ol&&Yc(e,t)?(e=zc(),Ea=Al=Lr=null,gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $c&&t.locale!=="ko"?null:t.data;default:return null}}var L0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!L0[e.type]:t==="textarea"}function Qc(e,t,r,n){Pc(n),t=Ua(t,"onChange"),0<t.length&&(r=new Rl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var vi=null,Pi=null;function D0(e){od(e,0)}function fs(e){var t=yn(e);if(Tc(t))return e}function P0(e,t){if(e==="change")return t}var Zc=!1;if(fr){var Us;if(fr){var Bs="oninput"in document;if(!Bs){var Hu=document.createElement("div");Hu.setAttribute("oninput","return;"),Bs=typeof Hu.oninput=="function"}Us=Bs}else Us=!1;Zc=Us&&(!document.documentMode||9<document.documentMode)}function Gu(){vi&&(vi.detachEvent("onpropertychange",Jc),Pi=vi=null)}function Jc(e){if(e.propertyName==="value"&&fs(Pi)){var t=[];Qc(t,Pi,e,xl(e)),Oc(D0,t)}}function A0(e,t,r){e==="focusin"?(Gu(),vi=t,Pi=r,vi.attachEvent("onpropertychange",Jc)):e==="focusout"&&Gu()}function R0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fs(Pi)}function I0(e,t){if(e==="click")return fs(t)}function O0(e,t){if(e==="input"||e==="change")return fs(t)}function M0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:M0;function Ai(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!vo.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function Vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zu(e,t){var r=Vu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vu(r)}}function qc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ed(){for(var e=window,t=Oa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Oa(e.document)}return t}function Ml(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w0(e){var t=ed(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&qc(r.ownerDocument.documentElement,r)){if(n!==null&&Ml(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,C=Math.min(n.start,i);n=n.end===void 0?C:Math.min(n.end,i),!e.extend&&C>n&&(i=n,n=C,C=i),i=zu(r,C);var k=zu(r,n);i&&k&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==k.node||e.focusOffset!==k.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),C>n?(e.addRange(t),e.extend(k.node,k.offset)):(t.setEnd(k.node,k.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var k0=fr&&"documentMode"in document&&11>=document.documentMode,pn=null,wo=null,gi=null,ko=!1;function $u(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ko||pn==null||pn!==Oa(n)||(n=pn,"selectionStart"in n&&Ml(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gi&&Ai(gi,n)||(gi=n,n=Ua(wo,"onSelect"),0<n.length&&(t=new Rl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=pn)))}function sa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var mn={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Ks={},td={};fr&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete mn.animationend.animation,delete mn.animationiteration.animation,delete mn.animationstart.animation),"TransitionEvent"in window||delete mn.transitionend.transition);function cs(e){if(Ks[e])return Ks[e];if(!mn[e])return e;var t=mn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in td)return Ks[e]=t[r];return e}var rd=cs("animationend"),nd=cs("animationiteration"),id=cs("animationstart"),ad=cs("transitionend"),sd=new Map,Yu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){sd.set(e,t),sn(t,[e])}for(var js=0;js<Yu.length;js++){var Ws=Yu[js],b0=Ws.toLowerCase(),F0=Ws[0].toUpperCase()+Ws.slice(1);Br(b0,"on"+F0)}Br(rd,"onAnimationEnd");Br(nd,"onAnimationIteration");Br(id,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(ad,"onTransitionEnd");kn("onMouseEnter",["mouseout","mouseover"]);kn("onMouseLeave",["mouseout","mouseover"]);kn("onPointerEnter",["pointerout","pointerover"]);kn("onPointerLeave",["pointerout","pointerover"]);sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(fi));function Xu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,bv(n,t,void 0,e),e.currentTarget=null}function od(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var C=void 0;if(t)for(var k=n.length-1;0<=k;k--){var R=n[k],o=R.instance,b=R.currentTarget;if(R=R.listener,o!==C&&i.isPropagationStopped())break e;Xu(i,R,b),C=o}else for(k=0;k<n.length;k++){if(R=n[k],o=R.instance,b=R.currentTarget,R=R.listener,o!==C&&i.isPropagationStopped())break e;Xu(i,R,b),C=o}}}if(wa)throw e=Ro,wa=!1,Ro=null,e}function Ue(e,t){var r=t[Bo];r===void 0&&(r=t[Bo]=new Set);var n=e+"__bubble";r.has(n)||(ld(t,e,2,!1),r.add(n))}function Hs(e,t,r){var n=0;t&&(n|=4),ld(r,e,n,t)}var oa="_reactListening"+Math.random().toString(36).slice(2);function Ri(e){if(!e[oa]){e[oa]=!0,gc.forEach(function(r){r!=="selectionchange"&&(N0.has(r)||Hs(r,!1,e),Hs(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oa]||(t[oa]=!0,Hs("selectionchange",!1,t))}}function ld(e,t,r,n){switch(Vc(t)){case 1:var i=Zv;break;case 4:i=Jv;break;default:i=Pl}r=i.bind(null,t,r,e),i=void 0,!Ao||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Gs(e,t,r,n,i){var C=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var k=n.tag;if(k===3||k===4){var R=n.stateNode.containerInfo;if(R===i||R.nodeType===8&&R.parentNode===i)break;if(k===4)for(k=n.return;k!==null;){var o=k.tag;if((o===3||o===4)&&(o=k.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;k=k.return}for(;R!==null;){if(k=Yr(R),k===null)return;if(o=k.tag,o===5||o===6){n=C=k;continue e}R=R.parentNode}}n=n.return}Oc(function(){var b=C,A=xl(r),N=[];e:{var O=sd.get(e);if(O!==void 0){var U=Rl,M=e;switch(e){case"keypress":if(Ta(r)===0)break e;case"keydown":case"keyup":U=h0;break;case"focusin":M="focus",U=Ns;break;case"focusout":M="blur",U=Ns;break;case"beforeblur":case"afterblur":U=Ns;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=t0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=p0;break;case rd:case nd:case id:U=i0;break;case ad:U=y0;break;case"scroll":U=qv;break;case"wheel":U=T0;break;case"copy":case"cut":case"paste":U=s0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Bu}var S=(t&4)!==0,w=!S&&e==="scroll",p=S?O!==null?O+"Capture":null:O;S=[];for(var v=b,a;v!==null;){a=v;var D=a.stateNode;if(a.tag===5&&D!==null&&(a=D,p!==null&&(D=xi(v,p),D!=null&&S.push(Ii(v,D,a)))),w)break;v=v.return}0<S.length&&(O=new U(O,M,null,r,A),N.push({event:O,listeners:S}))}}if(!(t&7)){e:{if(O=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",O&&r!==Do&&(M=r.relatedTarget||r.fromElement)&&(Yr(M)||M[cr]))break e;if((U||O)&&(O=A.window===A?A:(O=A.ownerDocument)?O.defaultView||O.parentWindow:window,U?(M=r.relatedTarget||r.toElement,U=b,M=M?Yr(M):null,M!==null&&(w=on(M),M!==w||M.tag!==5&&M.tag!==6)&&(M=null)):(U=null,M=b),U!==M)){if(S=Nu,D="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(S=Bu,D="onPointerLeave",p="onPointerEnter",v="pointer"),w=U==null?O:yn(U),a=M==null?O:yn(M),O=new S(D,v+"leave",U,r,A),O.target=w,O.relatedTarget=a,D=null,Yr(A)===b&&(S=new S(p,v+"enter",M,r,A),S.target=a,S.relatedTarget=w,D=S),w=D,U&&M)t:{for(S=U,p=M,v=0,a=S;a;a=ln(a))v++;for(a=0,D=p;D;D=ln(D))a++;for(;0<v-a;)S=ln(S),v--;for(;0<a-v;)p=ln(p),a--;for(;v--;){if(S===p||p!==null&&S===p.alternate)break t;S=ln(S),p=ln(p)}S=null}else S=null;U!==null&&Qu(N,O,U,S,!1),M!==null&&w!==null&&Qu(N,w,M,S,!0)}}e:{if(O=b?yn(b):window,U=O.nodeName&&O.nodeName.toLowerCase(),U==="select"||U==="input"&&O.type==="file")var T=P0;else if(Wu(O))if(Zc)T=O0;else{T=R0;var c=A0}else(U=O.nodeName)&&U.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(T=I0);if(T&&(T=T(e,b))){Qc(N,T,r,A);break e}c&&c(e,O,b),e==="focusout"&&(c=O._wrapperState)&&c.controlled&&O.type==="number"&&_o(O,"number",O.value)}switch(c=b?yn(b):window,e){case"focusin":(Wu(c)||c.contentEditable==="true")&&(pn=c,wo=b,gi=null);break;case"focusout":gi=wo=pn=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,$u(N,r,A);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":$u(N,r,A)}var l;if(Ol)e:{switch(e){case"compositionstart":var d="onCompositionStart";break e;case"compositionend":d="onCompositionEnd";break e;case"compositionupdate":d="onCompositionUpdate";break e}d=void 0}else gn?Yc(e,r)&&(d="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(d="onCompositionStart");d&&($c&&r.locale!=="ko"&&(gn||d!=="onCompositionStart"?d==="onCompositionEnd"&&gn&&(l=zc()):(Lr=A,Al="value"in Lr?Lr.value:Lr.textContent,gn=!0)),c=Ua(b,d),0<c.length&&(d=new Uu(d,e,null,r,A),N.push({event:d,listeners:c}),l?d.data=l:(l=Xc(r),l!==null&&(d.data=l)))),(l=S0?x0(e,r):C0(e,r))&&(b=Ua(b,"onBeforeInput"),0<b.length&&(A=new Uu("onBeforeInput","beforeinput",null,r,A),N.push({event:A,listeners:b}),A.data=l))}od(N,t)})}function Ii(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ua(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,C=i.stateNode;i.tag===5&&C!==null&&(i=C,C=xi(e,r),C!=null&&n.unshift(Ii(e,C,i)),C=xi(e,t),C!=null&&n.push(Ii(e,C,i))),e=e.return}return n}function ln(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qu(e,t,r,n,i){for(var C=t._reactName,k=[];r!==null&&r!==n;){var R=r,o=R.alternate,b=R.stateNode;if(o!==null&&o===n)break;R.tag===5&&b!==null&&(R=b,i?(o=xi(r,C),o!=null&&k.unshift(Ii(r,o,R))):i||(o=xi(r,C),o!=null&&k.push(Ii(r,o,R)))),r=r.return}k.length!==0&&e.push({event:t,listeners:k})}var U0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function Zu(e){return(typeof e=="string"?e:""+e).replace(U0,`
`).replace(B0,"")}function la(e,t,r){if(t=Zu(t),Zu(e)!==t&&r)throw Error(ue(425))}function Ba(){}var bo=null,Fo=null;function No(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uo=typeof setTimeout=="function"?setTimeout:void 0,K0=typeof clearTimeout=="function"?clearTimeout:void 0,Ju=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ju<"u"?function(e){return Ju.resolve(null).then(e).catch(W0)}:Uo;function W0(e){setTimeout(function(){throw e})}function Vs(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Di(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Di(t)}function Or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Vn,Oi="__reactProps$"+Vn,cr="__reactContainer$"+Vn,Bo="__reactEvents$"+Vn,H0="__reactListeners$"+Vn,G0="__reactHandles$"+Vn;function Yr(e){var t=e[Yt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[cr]||r[Yt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qu(e);e!==null;){if(r=e[Yt])return r;e=qu(e)}return t}e=r,r=e.parentNode}return null}function Hi(e){return e=e[Yt]||e[cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function ds(e){return e[Oi]||null}var Ko=[],En=-1;function Kr(e){return{current:e}}function Be(e){0>En||(e.current=Ko[En],Ko[En]=null,En--)}function Fe(e,t){En++,Ko[En]=e.current,e.current=t}var Ur={},ft=Kr(Ur),Et=Kr(!1),en=Ur;function bn(e,t){var r=e.type.contextTypes;if(!r)return Ur;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},C;for(C in r)i[C]=t[C];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(e){return e=e.childContextTypes,e!=null}function Ka(){Be(Et),Be(ft)}function ef(e,t,r){if(ft.current!==Ur)throw Error(ue(168));Fe(ft,t),Fe(Et,r)}function ud(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ue(108,Av(e)||"Unknown",i));return Ve({},r,n)}function ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ur,en=ft.current,Fe(ft,e),Fe(Et,Et.current),!0}function tf(e,t,r){var n=e.stateNode;if(!n)throw Error(ue(169));r?(e=ud(e,t,en),n.__reactInternalMemoizedMergedChildContext=e,Be(Et),Be(ft),Fe(ft,e)):Be(Et),Fe(Et,r)}var ar=null,hs=!1,zs=!1;function fd(e){ar===null?ar=[e]:ar.push(e)}function V0(e){hs=!0,fd(e)}function jr(){if(!zs&&ar!==null){zs=!0;var e=0,t=Re;try{var r=ar;for(Re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ar=null,hs=!1}catch(i){throw ar!==null&&(ar=ar.slice(e+1)),bc(Cl,jr),i}finally{Re=t,zs=!1}}return null}var Tn=[],_n=0,Wa=null,Ha=0,It=[],Ot=0,tn=null,sr=1,or="";function zr(e,t){Tn[_n++]=Ha,Tn[_n++]=Wa,Wa=e,Ha=t}function cd(e,t,r){It[Ot++]=sr,It[Ot++]=or,It[Ot++]=tn,tn=e;var n=sr;e=or;var i=32-Kt(n)-1;n&=~(1<<i),r+=1;var C=32-Kt(t)+i;if(30<C){var k=i-i%5;C=(n&(1<<k)-1).toString(32),n>>=k,i-=k,sr=1<<32-Kt(t)+i|r<<i|n,or=C+e}else sr=1<<C|r<<i|n,or=e}function wl(e){e.return!==null&&(zr(e,1),cd(e,1,0))}function kl(e){for(;e===Wa;)Wa=Tn[--_n],Tn[_n]=null,Ha=Tn[--_n],Tn[_n]=null;for(;e===tn;)tn=It[--Ot],It[Ot]=null,or=It[--Ot],It[Ot]=null,sr=It[--Ot],It[Ot]=null}var Lt=null,Ct=null,We=!1,Bt=null;function dd(e,t){var r=Mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function rf(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Lt=e,Ct=Or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Lt=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=tn!==null?{id:sr,overflow:or}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Lt=e,Ct=null,!0):!1;default:return!1}}function jo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wo(e){if(We){var t=Ct;if(t){var r=t;if(!rf(e,t)){if(jo(e))throw Error(ue(418));t=Or(r.nextSibling);var n=Lt;t&&rf(e,t)?dd(n,r):(e.flags=e.flags&-4097|2,We=!1,Lt=e)}}else{if(jo(e))throw Error(ue(418));e.flags=e.flags&-4097|2,We=!1,Lt=e}}}function nf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Lt=e}function ua(e){if(e!==Lt)return!1;if(!We)return nf(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!No(e.type,e.memoizedProps)),t&&(t=Ct)){if(jo(e))throw hd(),Error(ue(418));for(;t;)dd(e,t),t=Or(t.nextSibling)}if(nf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ct=Or(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=Lt?Or(e.stateNode.nextSibling):null;return!0}function hd(){for(var e=Ct;e;)e=Or(e.nextSibling)}function Fn(){Ct=Lt=null,We=!1}function bl(e){Bt===null?Bt=[e]:Bt.push(e)}var z0=gr.ReactCurrentBatchConfig;function Nt(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Ga=Kr(null),Va=null,Sn=null,Fl=null;function Nl(){Fl=Sn=Va=null}function Ul(e){var t=Ga.current;Be(Ga),e._currentValue=t}function Ho(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function On(e,t){Va=e,Fl=Sn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Fl!==e)if(e={context:e,memoizedValue:t,next:null},Sn===null){if(Va===null)throw Error(ue(308));Sn=e,Va.dependencies={lanes:0,firstContext:e}}else Sn=Sn.next=e;return t}var Xr=null;function Bl(e){Xr===null?Xr=[e]:Xr.push(e)}function vd(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Bl(t)):(r.next=i.next,i.next=r),t.interleaved=r,dr(e,n)}function dr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sr=!1;function Kl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,De&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,dr(e,r)}return i=n.interleaved,i===null?(t.next=t,Bl(n)):(t.next=i.next,i.next=t),n.interleaved=t,dr(e,r)}function _a(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ll(e,r)}}function af(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,C=null;if(r=r.firstBaseUpdate,r!==null){do{var k={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};C===null?i=C=k:C=C.next=k,r=r.next}while(r!==null);C===null?i=C=t:C=C.next=t}else i=C=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:C,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function za(e,t,r,n){var i=e.updateQueue;Sr=!1;var C=i.firstBaseUpdate,k=i.lastBaseUpdate,R=i.shared.pending;if(R!==null){i.shared.pending=null;var o=R,b=o.next;o.next=null,k===null?C=b:k.next=b,k=o;var A=e.alternate;A!==null&&(A=A.updateQueue,R=A.lastBaseUpdate,R!==k&&(R===null?A.firstBaseUpdate=b:R.next=b,A.lastBaseUpdate=o))}if(C!==null){var N=i.baseState;k=0,A=b=o=null,R=C;do{var O=R.lane,U=R.eventTime;if((n&O)===O){A!==null&&(A=A.next={eventTime:U,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var M=e,S=R;switch(O=t,U=r,S.tag){case 1:if(M=S.payload,typeof M=="function"){N=M.call(U,N,O);break e}N=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=S.payload,O=typeof M=="function"?M.call(U,N,O):M,O==null)break e;N=Ve({},N,O);break e;case 2:Sr=!0}}R.callback!==null&&R.lane!==0&&(e.flags|=64,O=i.effects,O===null?i.effects=[R]:O.push(R))}else U={eventTime:U,lane:O,tag:R.tag,payload:R.payload,callback:R.callback,next:null},A===null?(b=A=U,o=N):A=A.next=U,k|=O;if(R=R.next,R===null){if(R=i.shared.pending,R===null)break;O=R,R=O.next,O.next=null,i.lastBaseUpdate=O,i.shared.pending=null}}while(1);if(A===null&&(o=N),i.baseState=o,i.firstBaseUpdate=b,i.lastBaseUpdate=A,t=i.shared.interleaved,t!==null){i=t;do k|=i.lane,i=i.next;while(i!==t)}else C===null&&(i.shared.lanes=0);nn|=k,e.lanes=k,e.memoizedState=N}}function sf(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ue(191,i));i.call(n)}}}var pd=new vc.Component().refs;function Go(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ve({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vs={isMounted:function(e){return(e=e._reactInternals)?on(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ht(),i=kr(e),C=lr(n,i);C.payload=t,r!=null&&(C.callback=r),t=Mr(e,C,i),t!==null&&(jt(t,e,i,n),_a(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ht(),i=kr(e),C=lr(n,i);C.tag=1,C.payload=t,r!=null&&(C.callback=r),t=Mr(e,C,i),t!==null&&(jt(t,e,i,n),_a(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ht(),n=kr(e),i=lr(r,n);i.tag=2,t!=null&&(i.callback=t),t=Mr(e,i,n),t!==null&&(jt(t,e,n,r),_a(t,e,n))}};function of(e,t,r,n,i,C,k){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,C,k):t.prototype&&t.prototype.isPureReactComponent?!Ai(r,n)||!Ai(i,C):!0}function md(e,t,r){var n=!1,i=Ur,C=t.contextType;return typeof C=="object"&&C!==null?C=kt(C):(i=Tt(t)?en:ft.current,n=t.contextTypes,C=(n=n!=null)?bn(e,i):Ur),t=new t(r,C),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vs,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=C),t}function lf(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vs.enqueueReplaceState(t,t.state,null)}function Vo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=pd,Kl(e);var C=t.contextType;typeof C=="object"&&C!==null?i.context=kt(C):(C=Tt(t)?en:ft.current,i.context=bn(e,C)),i.state=e.memoizedState,C=t.getDerivedStateFromProps,typeof C=="function"&&(Go(e,t,C,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vs.enqueueReplaceState(i,i.state,null),za(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function qn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,e));var i=n,C=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===C?t.ref:(t=function(k){var R=i.refs;R===pd&&(R=i.refs={}),k===null?delete R[C]:R[C]=k},t._stringRef=C,t)}if(typeof e!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,e))}return e}function fa(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uf(e){var t=e._init;return t(e._payload)}function yd(e){function t(p,v){if(e){var a=p.deletions;a===null?(p.deletions=[v],p.flags|=16):a.push(v)}}function r(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=br(p,v),p.index=0,p.sibling=null,p}function C(p,v,a){return p.index=a,e?(a=p.alternate,a!==null?(a=a.index,a<v?(p.flags|=2,v):a):(p.flags|=2,v)):(p.flags|=1048576,v)}function k(p){return e&&p.alternate===null&&(p.flags|=2),p}function R(p,v,a,D){return v===null||v.tag!==6?(v=qs(a,p.mode,D),v.return=p,v):(v=i(v,a),v.return=p,v)}function o(p,v,a,D){var T=a.type;return T===vn?A(p,v,a.props.children,D,a.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===_r&&uf(T)===v.type)?(D=i(v,a.props),D.ref=qn(p,v,a),D.return=p,D):(D=Pa(a.type,a.key,a.props,null,p.mode,D),D.ref=qn(p,v,a),D.return=p,D)}function b(p,v,a,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==a.containerInfo||v.stateNode.implementation!==a.implementation?(v=eo(a,p.mode,D),v.return=p,v):(v=i(v,a.children||[]),v.return=p,v)}function A(p,v,a,D,T){return v===null||v.tag!==7?(v=qr(a,p.mode,D,T),v.return=p,v):(v=i(v,a),v.return=p,v)}function N(p,v,a){if(typeof v=="string"&&v!==""||typeof v=="number")return v=qs(""+v,p.mode,a),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qi:return a=Pa(v.type,v.key,v.props,null,p.mode,a),a.ref=qn(p,null,v),a.return=p,a;case hn:return v=eo(v,p.mode,a),v.return=p,v;case _r:var D=v._init;return N(p,D(v._payload),a)}if(li(v)||Yn(v))return v=qr(v,p.mode,a,null),v.return=p,v;fa(p,v)}return null}function O(p,v,a,D){var T=v!==null?v.key:null;if(typeof a=="string"&&a!==""||typeof a=="number")return T!==null?null:R(p,v,""+a,D);if(typeof a=="object"&&a!==null){switch(a.$$typeof){case qi:return a.key===T?o(p,v,a,D):null;case hn:return a.key===T?b(p,v,a,D):null;case _r:return T=a._init,O(p,v,T(a._payload),D)}if(li(a)||Yn(a))return T!==null?null:A(p,v,a,D,null);fa(p,a)}return null}function U(p,v,a,D,T){if(typeof D=="string"&&D!==""||typeof D=="number")return p=p.get(a)||null,R(v,p,""+D,T);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case qi:return p=p.get(D.key===null?a:D.key)||null,o(v,p,D,T);case hn:return p=p.get(D.key===null?a:D.key)||null,b(v,p,D,T);case _r:var c=D._init;return U(p,v,a,c(D._payload),T)}if(li(D)||Yn(D))return p=p.get(a)||null,A(v,p,D,T,null);fa(v,D)}return null}function M(p,v,a,D){for(var T=null,c=null,l=v,d=v=0,f=null;l!==null&&d<a.length;d++){l.index>d?(f=l,l=null):f=l.sibling;var x=O(p,l,a[d],D);if(x===null){l===null&&(l=f);break}e&&l&&x.alternate===null&&t(p,l),v=C(x,v,d),c===null?T=x:c.sibling=x,c=x,l=f}if(d===a.length)return r(p,l),We&&zr(p,d),T;if(l===null){for(;d<a.length;d++)l=N(p,a[d],D),l!==null&&(v=C(l,v,d),c===null?T=l:c.sibling=l,c=l);return We&&zr(p,d),T}for(l=n(p,l);d<a.length;d++)f=U(l,p,d,a[d],D),f!==null&&(e&&f.alternate!==null&&l.delete(f.key===null?d:f.key),v=C(f,v,d),c===null?T=f:c.sibling=f,c=f);return e&&l.forEach(function(L){return t(p,L)}),We&&zr(p,d),T}function S(p,v,a,D){var T=Yn(a);if(typeof T!="function")throw Error(ue(150));if(a=T.call(a),a==null)throw Error(ue(151));for(var c=T=null,l=v,d=v=0,f=null,x=a.next();l!==null&&!x.done;d++,x=a.next()){l.index>d?(f=l,l=null):f=l.sibling;var L=O(p,l,x.value,D);if(L===null){l===null&&(l=f);break}e&&l&&L.alternate===null&&t(p,l),v=C(L,v,d),c===null?T=L:c.sibling=L,c=L,l=f}if(x.done)return r(p,l),We&&zr(p,d),T;if(l===null){for(;!x.done;d++,x=a.next())x=N(p,x.value,D),x!==null&&(v=C(x,v,d),c===null?T=x:c.sibling=x,c=x);return We&&zr(p,d),T}for(l=n(p,l);!x.done;d++,x=a.next())x=U(l,p,d,x.value,D),x!==null&&(e&&x.alternate!==null&&l.delete(x.key===null?d:x.key),v=C(x,v,d),c===null?T=x:c.sibling=x,c=x);return e&&l.forEach(function(h){return t(p,h)}),We&&zr(p,d),T}function w(p,v,a,D){if(typeof a=="object"&&a!==null&&a.type===vn&&a.key===null&&(a=a.props.children),typeof a=="object"&&a!==null){switch(a.$$typeof){case qi:e:{for(var T=a.key,c=v;c!==null;){if(c.key===T){if(T=a.type,T===vn){if(c.tag===7){r(p,c.sibling),v=i(c,a.props.children),v.return=p,p=v;break e}}else if(c.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===_r&&uf(T)===c.type){r(p,c.sibling),v=i(c,a.props),v.ref=qn(p,c,a),v.return=p,p=v;break e}r(p,c);break}else t(p,c);c=c.sibling}a.type===vn?(v=qr(a.props.children,p.mode,D,a.key),v.return=p,p=v):(D=Pa(a.type,a.key,a.props,null,p.mode,D),D.ref=qn(p,v,a),D.return=p,p=D)}return k(p);case hn:e:{for(c=a.key;v!==null;){if(v.key===c)if(v.tag===4&&v.stateNode.containerInfo===a.containerInfo&&v.stateNode.implementation===a.implementation){r(p,v.sibling),v=i(v,a.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else t(p,v);v=v.sibling}v=eo(a,p.mode,D),v.return=p,p=v}return k(p);case _r:return c=a._init,w(p,v,c(a._payload),D)}if(li(a))return M(p,v,a,D);if(Yn(a))return S(p,v,a,D);fa(p,a)}return typeof a=="string"&&a!==""||typeof a=="number"?(a=""+a,v!==null&&v.tag===6?(r(p,v.sibling),v=i(v,a),v.return=p,p=v):(r(p,v),v=qs(a,p.mode,D),v.return=p,p=v),k(p)):r(p,v)}return w}var Nn=yd(!0),Ed=yd(!1),Gi={},Jt=Kr(Gi),Mi=Kr(Gi),wi=Kr(Gi);function Qr(e){if(e===Gi)throw Error(ue(174));return e}function jl(e,t){switch(Fe(wi,t),Fe(Mi,e),Fe(Jt,Gi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xo(t,e)}Be(Jt),Fe(Jt,t)}function Un(){Be(Jt),Be(Mi),Be(wi)}function Td(e){Qr(wi.current);var t=Qr(Jt.current),r=xo(t,e.type);t!==r&&(Fe(Mi,e),Fe(Jt,r))}function Wl(e){Mi.current===e&&(Be(Jt),Be(Mi))}var He=Kr(0);function $a(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $s=[];function Hl(){for(var e=0;e<$s.length;e++)$s[e]._workInProgressVersionPrimary=null;$s.length=0}var Sa=gr.ReactCurrentDispatcher,Ys=gr.ReactCurrentBatchConfig,rn=0,Ge=null,Ze=null,et=null,Ya=!1,pi=!1,ki=0,$0=0;function ot(){throw Error(ue(321))}function Gl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Wt(e[r],t[r]))return!1;return!0}function Vl(e,t,r,n,i,C){if(rn=C,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sa.current=e===null||e.memoizedState===null?Z0:J0,e=r(n,i),pi){C=0;do{if(pi=!1,ki=0,25<=C)throw Error(ue(301));C+=1,et=Ze=null,t.updateQueue=null,Sa.current=q0,e=r(n,i)}while(pi)}if(Sa.current=Xa,t=Ze!==null&&Ze.next!==null,rn=0,et=Ze=Ge=null,Ya=!1,t)throw Error(ue(300));return e}function zl(){var e=ki!==0;return ki=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ge.memoizedState=et=e:et=et.next=e,et}function bt(){if(Ze===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=et===null?Ge.memoizedState:et.next;if(t!==null)et=t,Ze=e;else{if(e===null)throw Error(ue(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},et===null?Ge.memoizedState=et=e:et=et.next=e}return et}function bi(e,t){return typeof t=="function"?t(e):t}function Xs(e){var t=bt(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=Ze,i=n.baseQueue,C=r.pending;if(C!==null){if(i!==null){var k=i.next;i.next=C.next,C.next=k}n.baseQueue=i=C,r.pending=null}if(i!==null){C=i.next,n=n.baseState;var R=k=null,o=null,b=C;do{var A=b.lane;if((rn&A)===A)o!==null&&(o=o.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),n=b.hasEagerState?b.eagerState:e(n,b.action);else{var N={lane:A,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};o===null?(R=o=N,k=n):o=o.next=N,Ge.lanes|=A,nn|=A}b=b.next}while(b!==null&&b!==C);o===null?k=n:o.next=R,Wt(n,t.memoizedState)||(yt=!0),t.memoizedState=n,t.baseState=k,t.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do C=i.lane,Ge.lanes|=C,nn|=C,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qs(e){var t=bt(),r=t.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,C=t.memoizedState;if(i!==null){r.pending=null;var k=i=i.next;do C=e(C,k.action),k=k.next;while(k!==i);Wt(C,t.memoizedState)||(yt=!0),t.memoizedState=C,t.baseQueue===null&&(t.baseState=C),r.lastRenderedState=C}return[C,n]}function _d(){}function Sd(e,t){var r=Ge,n=bt(),i=t(),C=!Wt(n.memoizedState,i);if(C&&(n.memoizedState=i,yt=!0),n=n.queue,$l(Ld.bind(null,r,n,e),[e]),n.getSnapshot!==t||C||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,Fi(9,Cd.bind(null,r,n,i,t),void 0,null),tt===null)throw Error(ue(349));rn&30||xd(r,t,i)}return i}function xd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Cd(e,t,r,n){t.value=r,t.getSnapshot=n,Dd(t)&&Pd(e)}function Ld(e,t,r){return r(function(){Dd(t)&&Pd(e)})}function Dd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Wt(e,r)}catch{return!0}}function Pd(e){var t=dr(e,1);t!==null&&jt(t,e,1,-1)}function ff(e){var t=zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Q0.bind(null,Ge,e),[t.memoizedState,e]}function Fi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ad(){return bt().memoizedState}function xa(e,t,r,n){var i=zt();Ge.flags|=e,i.memoizedState=Fi(1|t,r,void 0,n===void 0?null:n)}function gs(e,t,r,n){var i=bt();n=n===void 0?null:n;var C=void 0;if(Ze!==null){var k=Ze.memoizedState;if(C=k.destroy,n!==null&&Gl(n,k.deps)){i.memoizedState=Fi(t,r,C,n);return}}Ge.flags|=e,i.memoizedState=Fi(1|t,r,C,n)}function cf(e,t){return xa(8390656,8,e,t)}function $l(e,t){return gs(2048,8,e,t)}function Rd(e,t){return gs(4,2,e,t)}function Id(e,t){return gs(4,4,e,t)}function Od(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Md(e,t,r){return r=r!=null?r.concat([e]):null,gs(4,4,Od.bind(null,t,e),r)}function Yl(){}function wd(e,t){var r=bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Gl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function kd(e,t){var r=bt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Gl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function bd(e,t,r){return rn&21?(Wt(r,t)||(r=Uc(),Ge.lanes|=r,nn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=r)}function Y0(e,t){var r=Re;Re=r!==0&&4>r?r:4,e(!0);var n=Ys.transition;Ys.transition={};try{e(!1),t()}finally{Re=r,Ys.transition=n}}function Fd(){return bt().memoizedState}function X0(e,t,r){var n=kr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nd(e))Ud(t,r);else if(r=vd(e,t,r,n),r!==null){var i=ht();jt(r,e,n,i),Bd(r,t,n)}}function Q0(e,t,r){var n=kr(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nd(e))Ud(t,i);else{var C=e.alternate;if(e.lanes===0&&(C===null||C.lanes===0)&&(C=t.lastRenderedReducer,C!==null))try{var k=t.lastRenderedState,R=C(k,r);if(i.hasEagerState=!0,i.eagerState=R,Wt(R,k)){var o=t.interleaved;o===null?(i.next=i,Bl(t)):(i.next=o.next,o.next=i),t.interleaved=i;return}}catch{}finally{}r=vd(e,t,i,n),r!==null&&(i=ht(),jt(r,e,n,i),Bd(r,t,n))}}function Nd(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function Ud(e,t){pi=Ya=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Bd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ll(e,r)}}var Xa={readContext:kt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Z0={readContext:kt,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:cf,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xa(4194308,4,Od.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xa(4194308,4,e,t)},useInsertionEffect:function(e,t){return xa(4,2,e,t)},useMemo:function(e,t){var r=zt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=X0.bind(null,Ge,e),[n.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:ff,useDebugValue:Yl,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=ff(!1),t=e[0];return e=Y0.bind(null,e[1]),zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ge,i=zt();if(We){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=t(),tt===null)throw Error(ue(349));rn&30||xd(n,t,r)}i.memoizedState=r;var C={value:r,getSnapshot:t};return i.queue=C,cf(Ld.bind(null,n,C,e),[e]),n.flags|=2048,Fi(9,Cd.bind(null,n,C,r,t),void 0,null),r},useId:function(){var e=zt(),t=tt.identifierPrefix;if(We){var r=or,n=sr;r=(n&~(1<<32-Kt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ki++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},J0={readContext:kt,useCallback:wd,useContext:kt,useEffect:$l,useImperativeHandle:Md,useInsertionEffect:Rd,useLayoutEffect:Id,useMemo:kd,useReducer:Xs,useRef:Ad,useState:function(){return Xs(bi)},useDebugValue:Yl,useDeferredValue:function(e){var t=bt();return bd(t,Ze.memoizedState,e)},useTransition:function(){var e=Xs(bi)[0],t=bt().memoizedState;return[e,t]},useMutableSource:_d,useSyncExternalStore:Sd,useId:Fd,unstable_isNewReconciler:!1},q0={readContext:kt,useCallback:wd,useContext:kt,useEffect:$l,useImperativeHandle:Md,useInsertionEffect:Rd,useLayoutEffect:Id,useMemo:kd,useReducer:Qs,useRef:Ad,useState:function(){return Qs(bi)},useDebugValue:Yl,useDeferredValue:function(e){var t=bt();return Ze===null?t.memoizedState=e:bd(t,Ze.memoizedState,e)},useTransition:function(){var e=Qs(bi)[0],t=bt().memoizedState;return[e,t]},useMutableSource:_d,useSyncExternalStore:Sd,useId:Fd,unstable_isNewReconciler:!1};function Bn(e,t){try{var r="",n=t;do r+=Pv(n),n=n.return;while(n);var i=r}catch(C){i=`
Error generating stack: `+C.message+`
`+C.stack}return{value:e,source:t,stack:i,digest:null}}function Zs(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function zo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var eg=typeof WeakMap=="function"?WeakMap:Map;function Kd(e,t,r){r=lr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Za||(Za=!0,rl=n),zo(e,t)},r}function jd(e,t,r){r=lr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){zo(e,t)}}var C=e.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){zo(e,t),typeof n!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var k=t.stack;this.componentDidCatch(t.value,{componentStack:k!==null?k:""})}),r}function df(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new eg;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=vg.bind(null,e,t,r),t.then(e,e))}function hf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vf(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=lr(-1,1),t.tag=2,Mr(r,t,1))),r.lanes|=1),e)}var tg=gr.ReactCurrentOwner,yt=!1;function dt(e,t,r,n){t.child=e===null?Ed(t,null,r,n):Nn(t,e.child,r,n)}function gf(e,t,r,n,i){r=r.render;var C=t.ref;return On(t,i),n=Vl(e,t,r,n,C,i),r=zl(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hr(e,t,i)):(We&&r&&wl(t),t.flags|=1,dt(e,t,n,i),t.child)}function pf(e,t,r,n,i){if(e===null){var C=r.type;return typeof C=="function"&&!ru(C)&&C.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=C,Wd(e,t,C,n,i)):(e=Pa(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(C=e.child,!(e.lanes&i)){var k=C.memoizedProps;if(r=r.compare,r=r!==null?r:Ai,r(k,n)&&e.ref===t.ref)return hr(e,t,i)}return t.flags|=1,e=br(C,n),e.ref=t.ref,e.return=t,t.child=e}function Wd(e,t,r,n,i){if(e!==null){var C=e.memoizedProps;if(Ai(C,n)&&e.ref===t.ref)if(yt=!1,t.pendingProps=n=C,(e.lanes&i)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,hr(e,t,i)}return $o(e,t,r,n,i)}function Hd(e,t,r){var n=t.pendingProps,i=n.children,C=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Cn,xt),xt|=r;else{if(!(r&1073741824))return e=C!==null?C.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(Cn,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=C!==null?C.baseLanes:r,Fe(Cn,xt),xt|=n}else C!==null?(n=C.baseLanes|r,t.memoizedState=null):n=r,Fe(Cn,xt),xt|=n;return dt(e,t,i,r),t.child}function Gd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $o(e,t,r,n,i){var C=Tt(r)?en:ft.current;return C=bn(t,C),On(t,i),r=Vl(e,t,r,n,C,i),n=zl(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hr(e,t,i)):(We&&n&&wl(t),t.flags|=1,dt(e,t,r,i),t.child)}function mf(e,t,r,n,i){if(Tt(r)){var C=!0;ja(t)}else C=!1;if(On(t,i),t.stateNode===null)Ca(e,t),md(t,r,n),Vo(t,r,n,i),n=!0;else if(e===null){var k=t.stateNode,R=t.memoizedProps;k.props=R;var o=k.context,b=r.contextType;typeof b=="object"&&b!==null?b=kt(b):(b=Tt(r)?en:ft.current,b=bn(t,b));var A=r.getDerivedStateFromProps,N=typeof A=="function"||typeof k.getSnapshotBeforeUpdate=="function";N||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==n||o!==b)&&lf(t,k,n,b),Sr=!1;var O=t.memoizedState;k.state=O,za(t,n,k,i),o=t.memoizedState,R!==n||O!==o||Et.current||Sr?(typeof A=="function"&&(Go(t,r,A,n),o=t.memoizedState),(R=Sr||of(t,r,R,n,O,o,b))?(N||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(t.flags|=4194308)):(typeof k.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),k.props=n,k.state=o,k.context=b,n=R):(typeof k.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{k=t.stateNode,gd(e,t),R=t.memoizedProps,b=t.type===t.elementType?R:Nt(t.type,R),k.props=b,N=t.pendingProps,O=k.context,o=r.contextType,typeof o=="object"&&o!==null?o=kt(o):(o=Tt(r)?en:ft.current,o=bn(t,o));var U=r.getDerivedStateFromProps;(A=typeof U=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==N||O!==o)&&lf(t,k,n,o),Sr=!1,O=t.memoizedState,k.state=O,za(t,n,k,i);var M=t.memoizedState;R!==N||O!==M||Et.current||Sr?(typeof U=="function"&&(Go(t,r,U,n),M=t.memoizedState),(b=Sr||of(t,r,b,n,O,M,o)||!1)?(A||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(n,M,o),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(n,M,o)),typeof k.componentDidUpdate=="function"&&(t.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof k.componentDidUpdate!="function"||R===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=M),k.props=n,k.state=M,k.context=o,n=b):(typeof k.componentDidUpdate!="function"||R===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),n=!1)}return Yo(e,t,r,n,C,i)}function Yo(e,t,r,n,i,C){Gd(e,t);var k=(t.flags&128)!==0;if(!n&&!k)return i&&tf(t,r,!1),hr(e,t,C);n=t.stateNode,tg.current=t;var R=k&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&k?(t.child=Nn(t,e.child,null,C),t.child=Nn(t,null,R,C)):dt(e,t,R,C),t.memoizedState=n.state,i&&tf(t,r,!0),t.child}function Vd(e){var t=e.stateNode;t.pendingContext?ef(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ef(e,t.context,!1),jl(e,t.containerInfo)}function yf(e,t,r,n,i){return Fn(),bl(i),t.flags|=256,dt(e,t,r,n),t.child}var Xo={dehydrated:null,treeContext:null,retryLane:0};function Qo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zd(e,t,r){var n=t.pendingProps,i=He.current,C=!1,k=(t.flags&128)!==0,R;if((R=k)||(R=e!==null&&e.memoizedState===null?!1:(i&2)!==0),R?(C=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Fe(He,i&1),e===null)return Wo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(k=n.children,e=n.fallback,C?(n=t.mode,C=t.child,k={mode:"hidden",children:k},!(n&1)&&C!==null?(C.childLanes=0,C.pendingProps=k):C=ys(k,n,0,null),e=qr(e,n,r,null),C.return=t,e.return=t,C.sibling=e,t.child=C,t.child.memoizedState=Qo(r),t.memoizedState=Xo,e):Xl(t,k));if(i=e.memoizedState,i!==null&&(R=i.dehydrated,R!==null))return rg(e,t,k,n,R,i,r);if(C){C=n.fallback,k=t.mode,i=e.child,R=i.sibling;var o={mode:"hidden",children:n.children};return!(k&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=br(i,o),n.subtreeFlags=i.subtreeFlags&14680064),R!==null?C=br(R,C):(C=qr(C,k,r,null),C.flags|=2),C.return=t,n.return=t,n.sibling=C,t.child=n,n=C,C=t.child,k=e.child.memoizedState,k=k===null?Qo(r):{baseLanes:k.baseLanes|r,cachePool:null,transitions:k.transitions},C.memoizedState=k,C.childLanes=e.childLanes&~r,t.memoizedState=Xo,n}return C=e.child,e=C.sibling,n=br(C,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xl(e,t){return t=ys({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ca(e,t,r,n){return n!==null&&bl(n),Nn(t,e.child,null,r),e=Xl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rg(e,t,r,n,i,C,k){if(r)return t.flags&256?(t.flags&=-257,n=Zs(Error(ue(422))),ca(e,t,k,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(C=n.fallback,i=t.mode,n=ys({mode:"visible",children:n.children},i,0,null),C=qr(C,i,k,null),C.flags|=2,n.return=t,C.return=t,n.sibling=C,t.child=n,t.mode&1&&Nn(t,e.child,null,k),t.child.memoizedState=Qo(k),t.memoizedState=Xo,C);if(!(t.mode&1))return ca(e,t,k,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var R=n.dgst;return n=R,C=Error(ue(419)),n=Zs(C,n,void 0),ca(e,t,k,n)}if(R=(k&e.childLanes)!==0,yt||R){if(n=tt,n!==null){switch(k&-k){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|k)?0:i,i!==0&&i!==C.retryLane&&(C.retryLane=i,dr(e,i),jt(n,e,i,-1))}return tu(),n=Zs(Error(ue(421))),ca(e,t,k,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=gg.bind(null,e),i._reactRetry=t,null):(e=C.treeContext,Ct=Or(i.nextSibling),Lt=t,We=!0,Bt=null,e!==null&&(It[Ot++]=sr,It[Ot++]=or,It[Ot++]=tn,sr=e.id,or=e.overflow,tn=t),t=Xl(t,n.children),t.flags|=4096,t)}function Ef(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ho(e.return,t,r)}function Js(e,t,r,n,i){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(C.isBackwards=t,C.rendering=null,C.renderingStartTime=0,C.last=n,C.tail=r,C.tailMode=i)}function $d(e,t,r){var n=t.pendingProps,i=n.revealOrder,C=n.tail;if(dt(e,t,n.children,r),n=He.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ef(e,r,t);else if(e.tag===19)Ef(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Fe(He,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&$a(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Js(t,!1,i,r,C);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$a(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Js(t,!0,r,null,C);break;case"together":Js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ca(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),nn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,r=br(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=br(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ng(e,t,r){switch(t.tag){case 3:Vd(t),Fn();break;case 5:Td(t);break;case 1:Tt(t.type)&&ja(t);break;case 4:jl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Fe(Ga,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Fe(He,He.current&1),t.flags|=128,null):r&t.child.childLanes?zd(e,t,r):(Fe(He,He.current&1),e=hr(e,t,r),e!==null?e.sibling:null);Fe(He,He.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return $d(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(He,He.current),n)break;return null;case 22:case 23:return t.lanes=0,Hd(e,t,r)}return hr(e,t,r)}var Yd,Zo,Xd,Qd;Yd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zo=function(){};Xd=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Qr(Jt.current);var C=null;switch(r){case"input":i=Eo(e,i),n=Eo(e,n),C=[];break;case"select":i=Ve({},i,{value:void 0}),n=Ve({},n,{value:void 0}),C=[];break;case"textarea":i=So(e,i),n=So(e,n),C=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ba)}Co(r,n);var k;r=null;for(b in i)if(!n.hasOwnProperty(b)&&i.hasOwnProperty(b)&&i[b]!=null)if(b==="style"){var R=i[b];for(k in R)R.hasOwnProperty(k)&&(r||(r={}),r[k]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(_i.hasOwnProperty(b)?C||(C=[]):(C=C||[]).push(b,null));for(b in n){var o=n[b];if(R=i!=null?i[b]:void 0,n.hasOwnProperty(b)&&o!==R&&(o!=null||R!=null))if(b==="style")if(R){for(k in R)!R.hasOwnProperty(k)||o&&o.hasOwnProperty(k)||(r||(r={}),r[k]="");for(k in o)o.hasOwnProperty(k)&&R[k]!==o[k]&&(r||(r={}),r[k]=o[k])}else r||(C||(C=[]),C.push(b,r)),r=o;else b==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,R=R?R.__html:void 0,o!=null&&R!==o&&(C=C||[]).push(b,o)):b==="children"?typeof o!="string"&&typeof o!="number"||(C=C||[]).push(b,""+o):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(_i.hasOwnProperty(b)?(o!=null&&b==="onScroll"&&Ue("scroll",e),C||R===o||(C=[])):(C=C||[]).push(b,o))}r&&(C=C||[]).push("style",r);var b=C;(t.updateQueue=b)&&(t.flags|=4)}};Qd=function(e,t,r,n){r!==n&&(t.flags|=4)};function ei(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ig(e,t,r){var n=t.pendingProps;switch(kl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return Tt(t.type)&&Ka(),lt(t),null;case 3:return n=t.stateNode,Un(),Be(Et),Be(ft),Hl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ua(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(al(Bt),Bt=null))),Zo(e,t),lt(t),null;case 5:Wl(t);var i=Qr(wi.current);if(r=t.type,e!==null&&t.stateNode!=null)Xd(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ue(166));return lt(t),null}if(e=Qr(Jt.current),ua(t)){n=t.stateNode,r=t.type;var C=t.memoizedProps;switch(n[Yt]=t,n[Oi]=C,e=(t.mode&1)!==0,r){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(i=0;i<fi.length;i++)Ue(fi[i],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":Pu(n,C),Ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!C.multiple},Ue("invalid",n);break;case"textarea":Ru(n,C),Ue("invalid",n)}Co(r,C),i=null;for(var k in C)if(C.hasOwnProperty(k)){var R=C[k];k==="children"?typeof R=="string"?n.textContent!==R&&(C.suppressHydrationWarning!==!0&&la(n.textContent,R,e),i=["children",R]):typeof R=="number"&&n.textContent!==""+R&&(C.suppressHydrationWarning!==!0&&la(n.textContent,R,e),i=["children",""+R]):_i.hasOwnProperty(k)&&R!=null&&k==="onScroll"&&Ue("scroll",n)}switch(r){case"input":ea(n),Au(n,C,!0);break;case"textarea":ea(n),Iu(n);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(n.onclick=Ba)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{k=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=k.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=k.createElement(r,{is:n.is}):(e=k.createElement(r),r==="select"&&(k=e,n.multiple?k.multiple=!0:n.size&&(k.size=n.size))):e=k.createElementNS(e,r),e[Yt]=t,e[Oi]=n,Yd(e,t,!1,!1),t.stateNode=e;e:{switch(k=Lo(r,n),r){case"dialog":Ue("cancel",e),Ue("close",e),i=n;break;case"iframe":case"object":case"embed":Ue("load",e),i=n;break;case"video":case"audio":for(i=0;i<fi.length;i++)Ue(fi[i],e);i=n;break;case"source":Ue("error",e),i=n;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),i=n;break;case"details":Ue("toggle",e),i=n;break;case"input":Pu(e,n),i=Eo(e,n),Ue("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ve({},n,{value:void 0}),Ue("invalid",e);break;case"textarea":Ru(e,n),i=So(e,n),Ue("invalid",e);break;default:i=n}Co(r,i),R=i;for(C in R)if(R.hasOwnProperty(C)){var o=R[C];C==="style"?Dc(e,o):C==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Cc(e,o)):C==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Si(e,o):typeof o=="number"&&Si(e,""+o):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(_i.hasOwnProperty(C)?o!=null&&C==="onScroll"&&Ue("scroll",e):o!=null&&El(e,C,o,k))}switch(r){case"input":ea(e),Au(e,n,!1);break;case"textarea":ea(e),Iu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Nr(n.value));break;case"select":e.multiple=!!n.multiple,C=n.value,C!=null?Pn(e,!!n.multiple,C,!1):n.defaultValue!=null&&Pn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ba)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)Qd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ue(166));if(r=Qr(wi.current),Qr(Jt.current),ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[Yt]=t,(C=n.nodeValue!==r)&&(e=Lt,e!==null))switch(e.tag){case 3:la(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&la(n.nodeValue,r,(e.mode&1)!==0)}C&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Yt]=t,t.stateNode=n}return lt(t),null;case 13:if(Be(He),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Ct!==null&&t.mode&1&&!(t.flags&128))hd(),Fn(),t.flags|=98560,C=!1;else if(C=ua(t),n!==null&&n.dehydrated!==null){if(e===null){if(!C)throw Error(ue(318));if(C=t.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(ue(317));C[Yt]=t}else Fn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),C=!1}else Bt!==null&&(al(Bt),Bt=null),C=!0;if(!C)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?Je===0&&(Je=3):tu())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return Un(),Zo(e,t),e===null&&Ri(t.stateNode.containerInfo),lt(t),null;case 10:return Ul(t.type._context),lt(t),null;case 17:return Tt(t.type)&&Ka(),lt(t),null;case 19:if(Be(He),C=t.memoizedState,C===null)return lt(t),null;if(n=(t.flags&128)!==0,k=C.rendering,k===null)if(n)ei(C,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(k=$a(e),k!==null){for(t.flags|=128,ei(C,!1),n=k.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)C=r,e=n,C.flags&=14680066,k=C.alternate,k===null?(C.childLanes=0,C.lanes=e,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=k.childLanes,C.lanes=k.lanes,C.child=k.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=k.memoizedProps,C.memoizedState=k.memoizedState,C.updateQueue=k.updateQueue,C.type=k.type,e=k.dependencies,C.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Fe(He,He.current&1|2),t.child}e=e.sibling}C.tail!==null&&Ye()>Kn&&(t.flags|=128,n=!0,ei(C,!1),t.lanes=4194304)}else{if(!n)if(e=$a(k),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ei(C,!0),C.tail===null&&C.tailMode==="hidden"&&!k.alternate&&!We)return lt(t),null}else 2*Ye()-C.renderingStartTime>Kn&&r!==1073741824&&(t.flags|=128,n=!0,ei(C,!1),t.lanes=4194304);C.isBackwards?(k.sibling=t.child,t.child=k):(r=C.last,r!==null?r.sibling=k:t.child=k,C.last=k)}return C.tail!==null?(t=C.tail,C.rendering=t,C.tail=t.sibling,C.renderingStartTime=Ye(),t.sibling=null,r=He.current,Fe(He,n?r&1|2:r&1),t):(lt(t),null);case 22:case 23:return eu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?xt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function ag(e,t){switch(kl(t),t.tag){case 1:return Tt(t.type)&&Ka(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Un(),Be(Et),Be(ft),Hl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wl(t),null;case 13:if(Be(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));Fn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(He),null;case 4:return Un(),null;case 10:return Ul(t.type._context),null;case 22:case 23:return eu(),null;case 24:return null;default:return null}}var da=!1,ut=!1,sg=typeof WeakSet=="function"?WeakSet:Set,ve=null;function xn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ze(e,t,n)}else r.current=null}function Jo(e,t,r){try{r()}catch(n){ze(e,t,n)}}var Tf=!1;function og(e,t){if(bo=Fa,e=ed(),Ml(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,C=n.focusNode;n=n.focusOffset;try{r.nodeType,C.nodeType}catch{r=null;break e}var k=0,R=-1,o=-1,b=0,A=0,N=e,O=null;t:for(;;){for(var U;N!==r||i!==0&&N.nodeType!==3||(R=k+i),N!==C||n!==0&&N.nodeType!==3||(o=k+n),N.nodeType===3&&(k+=N.nodeValue.length),(U=N.firstChild)!==null;)O=N,N=U;for(;;){if(N===e)break t;if(O===r&&++b===i&&(R=k),O===C&&++A===n&&(o=k),(U=N.nextSibling)!==null)break;N=O,O=N.parentNode}N=U}r=R===-1||o===-1?null:{start:R,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fo={focusedElem:e,selectionRange:r},Fa=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var M=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var S=M.memoizedProps,w=M.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:Nt(t.type,S),w);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var a=t.stateNode.containerInfo;a.nodeType===1?a.textContent="":a.nodeType===9&&a.documentElement&&a.removeChild(a.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(D){ze(t,t.return,D)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return M=Tf,Tf=!1,M}function mi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var C=i.destroy;i.destroy=void 0,C!==void 0&&Jo(t,r,C)}i=i.next}while(i!==n)}}function ps(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function qo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zd(e){var t=e.alternate;t!==null&&(e.alternate=null,Zd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yt],delete t[Oi],delete t[Bo],delete t[H0],delete t[G0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jd(e){return e.tag===5||e.tag===3||e.tag===4}function _f(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function el(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ba));else if(n!==4&&(e=e.child,e!==null))for(el(e,t,r),e=e.sibling;e!==null;)el(e,t,r),e=e.sibling}function tl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(tl(e,t,r),e=e.sibling;e!==null;)tl(e,t,r),e=e.sibling}var it=null,Ut=!1;function Er(e,t,r){for(r=r.child;r!==null;)qd(e,t,r),r=r.sibling}function qd(e,t,r){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(ls,r)}catch{}switch(r.tag){case 5:ut||xn(r,t);case 6:var n=it,i=Ut;it=null,Er(e,t,r),it=n,Ut=i,it!==null&&(Ut?(e=it,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(Ut?(e=it,r=r.stateNode,e.nodeType===8?Vs(e.parentNode,r):e.nodeType===1&&Vs(e,r),Di(e)):Vs(it,r.stateNode));break;case 4:n=it,i=Ut,it=r.stateNode.containerInfo,Ut=!0,Er(e,t,r),it=n,Ut=i;break;case 0:case 11:case 14:case 15:if(!ut&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var C=i,k=C.destroy;C=C.tag,k!==void 0&&(C&2||C&4)&&Jo(r,t,k),i=i.next}while(i!==n)}Er(e,t,r);break;case 1:if(!ut&&(xn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(R){ze(r,t,R)}Er(e,t,r);break;case 21:Er(e,t,r);break;case 22:r.mode&1?(ut=(n=ut)||r.memoizedState!==null,Er(e,t,r),ut=n):Er(e,t,r);break;default:Er(e,t,r)}}function Sf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new sg),t.forEach(function(n){var i=pg.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ft(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var C=e,k=t,R=k;e:for(;R!==null;){switch(R.tag){case 5:it=R.stateNode,Ut=!1;break e;case 3:it=R.stateNode.containerInfo,Ut=!0;break e;case 4:it=R.stateNode.containerInfo,Ut=!0;break e}R=R.return}if(it===null)throw Error(ue(160));qd(C,k,i),it=null,Ut=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(b){ze(i,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eh(t,e),t=t.sibling}function eh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Vt(e),n&4){try{mi(3,e,e.return),ps(3,e)}catch(S){ze(e,e.return,S)}try{mi(5,e,e.return)}catch(S){ze(e,e.return,S)}}break;case 1:Ft(t,e),Vt(e),n&512&&r!==null&&xn(r,r.return);break;case 5:if(Ft(t,e),Vt(e),n&512&&r!==null&&xn(r,r.return),e.flags&32){var i=e.stateNode;try{Si(i,"")}catch(S){ze(e,e.return,S)}}if(n&4&&(i=e.stateNode,i!=null)){var C=e.memoizedProps,k=r!==null?r.memoizedProps:C,R=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{R==="input"&&C.type==="radio"&&C.name!=null&&_c(i,C),Lo(R,k);var b=Lo(R,C);for(k=0;k<o.length;k+=2){var A=o[k],N=o[k+1];A==="style"?Dc(i,N):A==="dangerouslySetInnerHTML"?Cc(i,N):A==="children"?Si(i,N):El(i,A,N,b)}switch(R){case"input":To(i,C);break;case"textarea":Sc(i,C);break;case"select":var O=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!C.multiple;var U=C.value;U!=null?Pn(i,!!C.multiple,U,!1):O!==!!C.multiple&&(C.defaultValue!=null?Pn(i,!!C.multiple,C.defaultValue,!0):Pn(i,!!C.multiple,C.multiple?[]:"",!1))}i[Oi]=C}catch(S){ze(e,e.return,S)}}break;case 6:if(Ft(t,e),Vt(e),n&4){if(e.stateNode===null)throw Error(ue(162));i=e.stateNode,C=e.memoizedProps;try{i.nodeValue=C}catch(S){ze(e,e.return,S)}}break;case 3:if(Ft(t,e),Vt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Di(t.containerInfo)}catch(S){ze(e,e.return,S)}break;case 4:Ft(t,e),Vt(e);break;case 13:Ft(t,e),Vt(e),i=e.child,i.flags&8192&&(C=i.memoizedState!==null,i.stateNode.isHidden=C,!C||i.alternate!==null&&i.alternate.memoizedState!==null||(Jl=Ye())),n&4&&Sf(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(ut=(b=ut)||A,Ft(t,e),ut=b):Ft(t,e),Vt(e),n&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!A&&e.mode&1)for(ve=e,A=e.child;A!==null;){for(N=ve=A;ve!==null;){switch(O=ve,U=O.child,O.tag){case 0:case 11:case 14:case 15:mi(4,O,O.return);break;case 1:xn(O,O.return);var M=O.stateNode;if(typeof M.componentWillUnmount=="function"){n=O,r=O.return;try{t=n,M.props=t.memoizedProps,M.state=t.memoizedState,M.componentWillUnmount()}catch(S){ze(n,r,S)}}break;case 5:xn(O,O.return);break;case 22:if(O.memoizedState!==null){Cf(N);continue}}U!==null?(U.return=O,ve=U):Cf(N)}A=A.sibling}e:for(A=null,N=e;;){if(N.tag===5){if(A===null){A=N;try{i=N.stateNode,b?(C=i.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(R=N.stateNode,o=N.memoizedProps.style,k=o!=null&&o.hasOwnProperty("display")?o.display:null,R.style.display=Lc("display",k))}catch(S){ze(e,e.return,S)}}}else if(N.tag===6){if(A===null)try{N.stateNode.nodeValue=b?"":N.memoizedProps}catch(S){ze(e,e.return,S)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;A===N&&(A=null),N=N.return}A===N&&(A=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:Ft(t,e),Vt(e),n&4&&Sf(e);break;case 21:break;default:Ft(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Jd(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Si(i,""),n.flags&=-33);var C=_f(e);tl(e,C,i);break;case 3:case 4:var k=n.stateNode.containerInfo,R=_f(e);el(e,R,k);break;default:throw Error(ue(161))}}catch(o){ze(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lg(e,t,r){ve=e,th(e)}function th(e,t,r){for(var n=(e.mode&1)!==0;ve!==null;){var i=ve,C=i.child;if(i.tag===22&&n){var k=i.memoizedState!==null||da;if(!k){var R=i.alternate,o=R!==null&&R.memoizedState!==null||ut;R=da;var b=ut;if(da=k,(ut=o)&&!b)for(ve=i;ve!==null;)k=ve,o=k.child,k.tag===22&&k.memoizedState!==null?Lf(i):o!==null?(o.return=k,ve=o):Lf(i);for(;C!==null;)ve=C,th(C),C=C.sibling;ve=i,da=R,ut=b}xf(e)}else i.subtreeFlags&8772&&C!==null?(C.return=i,ve=C):xf(e)}}function xf(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||ps(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ut)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Nt(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var C=t.updateQueue;C!==null&&sf(t,C,n);break;case 3:var k=t.updateQueue;if(k!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sf(t,k,r)}break;case 5:var R=t.stateNode;if(r===null&&t.flags&4){r=R;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var A=b.memoizedState;if(A!==null){var N=A.dehydrated;N!==null&&Di(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}ut||t.flags&512&&qo(t)}catch(O){ze(t,t.return,O)}}if(t===e){ve=null;break}if(r=t.sibling,r!==null){r.return=t.return,ve=r;break}ve=t.return}}function Cf(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ve=r;break}ve=t.return}}function Lf(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ps(4,t)}catch(o){ze(t,r,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(o){ze(t,i,o)}}var C=t.return;try{qo(t)}catch(o){ze(t,C,o)}break;case 5:var k=t.return;try{qo(t)}catch(o){ze(t,k,o)}}}catch(o){ze(t,t.return,o)}if(t===e){ve=null;break}var R=t.sibling;if(R!==null){R.return=t.return,ve=R;break}ve=t.return}}var ug=Math.ceil,Qa=gr.ReactCurrentDispatcher,Ql=gr.ReactCurrentOwner,wt=gr.ReactCurrentBatchConfig,De=0,tt=null,Xe=null,at=0,xt=0,Cn=Kr(0),Je=0,Ni=null,nn=0,ms=0,Zl=0,yi=null,mt=null,Jl=0,Kn=1/0,rr=null,Za=!1,rl=null,wr=null,ha=!1,Dr=null,Ja=0,Ei=0,nl=null,La=-1,Da=0;function ht(){return De&6?Ye():La!==-1?La:La=Ye()}function kr(e){return e.mode&1?De&2&&at!==0?at&-at:z0.transition!==null?(Da===0&&(Da=Uc()),Da):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Vc(e.type)),e):1}function jt(e,t,r,n){if(50<Ei)throw Ei=0,nl=null,Error(ue(185));ji(e,r,n),(!(De&2)||e!==tt)&&(e===tt&&(!(De&2)&&(ms|=r),Je===4&&Cr(e,at)),_t(e,n),r===1&&De===0&&!(t.mode&1)&&(Kn=Ye()+500,hs&&jr()))}function _t(e,t){var r=e.callbackNode;zv(e,t);var n=ba(e,e===tt?at:0);if(n===0)r!==null&&wu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&wu(r),t===1)e.tag===0?V0(Df.bind(null,e)):fd(Df.bind(null,e)),j0(function(){!(De&6)&&jr()}),r=null;else{switch(Bc(n)){case 1:r=Cl;break;case 4:r=Fc;break;case 16:r=ka;break;case 536870912:r=Nc;break;default:r=ka}r=uh(r,rh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rh(e,t){if(La=-1,Da=0,De&6)throw Error(ue(327));var r=e.callbackNode;if(Mn()&&e.callbackNode!==r)return null;var n=ba(e,e===tt?at:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=qa(e,n);else{t=n;var i=De;De|=2;var C=ih();(tt!==e||at!==t)&&(rr=null,Kn=Ye()+500,Jr(e,t));do try{dg();break}catch(R){nh(e,R)}while(1);Nl(),Qa.current=C,De=i,Xe!==null?t=0:(tt=null,at=0,t=Je)}if(t!==0){if(t===2&&(i=Io(e),i!==0&&(n=i,t=il(e,i))),t===1)throw r=Ni,Jr(e,0),Cr(e,n),_t(e,Ye()),r;if(t===6)Cr(e,n);else{if(i=e.current.alternate,!(n&30)&&!fg(i)&&(t=qa(e,n),t===2&&(C=Io(e),C!==0&&(n=C,t=il(e,C))),t===1))throw r=Ni,Jr(e,0),Cr(e,n),_t(e,Ye()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ue(345));case 2:$r(e,mt,rr);break;case 3:if(Cr(e,n),(n&130023424)===n&&(t=Jl+500-Ye(),10<t)){if(ba(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){ht(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Uo($r.bind(null,e,mt,rr),t);break}$r(e,mt,rr);break;case 4:if(Cr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var k=31-Kt(n);C=1<<k,k=t[k],k>i&&(i=k),n&=~C}if(n=i,n=Ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ug(n/1960))-n,10<n){e.timeoutHandle=Uo($r.bind(null,e,mt,rr),n);break}$r(e,mt,rr);break;case 5:$r(e,mt,rr);break;default:throw Error(ue(329))}}}return _t(e,Ye()),e.callbackNode===r?rh.bind(null,e):null}function il(e,t){var r=yi;return e.current.memoizedState.isDehydrated&&(Jr(e,t).flags|=256),e=qa(e,t),e!==2&&(t=mt,mt=r,t!==null&&al(t)),e}function al(e){mt===null?mt=e:mt.push.apply(mt,e)}function fg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],C=i.getSnapshot;i=i.value;try{if(!Wt(C(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t){for(t&=~Zl,t&=~ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),n=1<<r;e[r]=-1,t&=~n}}function Df(e){if(De&6)throw Error(ue(327));Mn();var t=ba(e,0);if(!(t&1))return _t(e,Ye()),null;var r=qa(e,t);if(e.tag!==0&&r===2){var n=Io(e);n!==0&&(t=n,r=il(e,n))}if(r===1)throw r=Ni,Jr(e,0),Cr(e,t),_t(e,Ye()),r;if(r===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,mt,rr),_t(e,Ye()),null}function ql(e,t){var r=De;De|=1;try{return e(t)}finally{De=r,De===0&&(Kn=Ye()+500,hs&&jr())}}function an(e){Dr!==null&&Dr.tag===0&&!(De&6)&&Mn();var t=De;De|=1;var r=wt.transition,n=Re;try{if(wt.transition=null,Re=1,e)return e()}finally{Re=n,wt.transition=r,De=t,!(De&6)&&jr()}}function eu(){xt=Cn.current,Be(Cn)}function Jr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,K0(r)),Xe!==null)for(r=Xe.return;r!==null;){var n=r;switch(kl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ka();break;case 3:Un(),Be(Et),Be(ft),Hl();break;case 5:Wl(n);break;case 4:Un();break;case 13:Be(He);break;case 19:Be(He);break;case 10:Ul(n.type._context);break;case 22:case 23:eu()}r=r.return}if(tt=e,Xe=e=br(e.current,null),at=xt=t,Je=0,Ni=null,Zl=ms=nn=0,mt=yi=null,Xr!==null){for(t=0;t<Xr.length;t++)if(r=Xr[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,C=r.pending;if(C!==null){var k=C.next;C.next=i,n.next=k}r.pending=n}Xr=null}return e}function nh(e,t){do{var r=Xe;try{if(Nl(),Sa.current=Xa,Ya){for(var n=Ge.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ya=!1}if(rn=0,et=Ze=Ge=null,pi=!1,ki=0,Ql.current=null,r===null||r.return===null){Je=1,Ni=t,Xe=null;break}e:{var C=e,k=r.return,R=r,o=t;if(t=at,R.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var b=o,A=R,N=A.tag;if(!(A.mode&1)&&(N===0||N===11||N===15)){var O=A.alternate;O?(A.updateQueue=O.updateQueue,A.memoizedState=O.memoizedState,A.lanes=O.lanes):(A.updateQueue=null,A.memoizedState=null)}var U=hf(k);if(U!==null){U.flags&=-257,vf(U,k,R,C,t),U.mode&1&&df(C,b,t),t=U,o=b;var M=t.updateQueue;if(M===null){var S=new Set;S.add(o),t.updateQueue=S}else M.add(o);break e}else{if(!(t&1)){df(C,b,t),tu();break e}o=Error(ue(426))}}else if(We&&R.mode&1){var w=hf(k);if(w!==null){!(w.flags&65536)&&(w.flags|=256),vf(w,k,R,C,t),bl(Bn(o,R));break e}}C=o=Bn(o,R),Je!==4&&(Je=2),yi===null?yi=[C]:yi.push(C),C=k;do{switch(C.tag){case 3:C.flags|=65536,t&=-t,C.lanes|=t;var p=Kd(C,o,t);af(C,p);break e;case 1:R=o;var v=C.type,a=C.stateNode;if(!(C.flags&128)&&(typeof v.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(wr===null||!wr.has(a)))){C.flags|=65536,t&=-t,C.lanes|=t;var D=jd(C,R,t);af(C,D);break e}}C=C.return}while(C!==null)}sh(r)}catch(T){t=T,Xe===r&&r!==null&&(Xe=r=r.return);continue}break}while(1)}function ih(){var e=Qa.current;return Qa.current=Xa,e===null?Xa:e}function tu(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||!(nn&268435455)&&!(ms&268435455)||Cr(tt,at)}function qa(e,t){var r=De;De|=2;var n=ih();(tt!==e||at!==t)&&(rr=null,Jr(e,t));do try{cg();break}catch(i){nh(e,i)}while(1);if(Nl(),De=r,Qa.current=n,Xe!==null)throw Error(ue(261));return tt=null,at=0,Je}function cg(){for(;Xe!==null;)ah(Xe)}function dg(){for(;Xe!==null&&!Nv();)ah(Xe)}function ah(e){var t=lh(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?sh(e):Xe=t,Ql.current=null}function sh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ag(r,t),r!==null){r.flags&=32767,Xe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Xe=null;return}}else if(r=ig(r,t,xt),r!==null){Xe=r;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);Je===0&&(Je=5)}function $r(e,t,r){var n=Re,i=wt.transition;try{wt.transition=null,Re=1,hg(e,t,r,n)}finally{wt.transition=i,Re=n}return null}function hg(e,t,r,n){do Mn();while(Dr!==null);if(De&6)throw Error(ue(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var C=r.lanes|r.childLanes;if($v(e,C),e===tt&&(Xe=tt=null,at=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ha||(ha=!0,uh(ka,function(){return Mn(),null})),C=(r.flags&15990)!==0,r.subtreeFlags&15990||C){C=wt.transition,wt.transition=null;var k=Re;Re=1;var R=De;De|=4,Ql.current=null,og(e,r),eh(r,e),w0(Fo),Fa=!!bo,Fo=bo=null,e.current=r,lg(r),Uv(),De=R,Re=k,wt.transition=C}else e.current=r;if(ha&&(ha=!1,Dr=e,Ja=i),C=e.pendingLanes,C===0&&(wr=null),jv(r.stateNode),_t(e,Ye()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Za)throw Za=!1,e=rl,rl=null,e;return Ja&1&&e.tag!==0&&Mn(),C=e.pendingLanes,C&1?e===nl?Ei++:(Ei=0,nl=e):Ei=0,jr(),null}function Mn(){if(Dr!==null){var e=Bc(Ja),t=wt.transition,r=Re;try{if(wt.transition=null,Re=16>e?16:e,Dr===null)var n=!1;else{if(e=Dr,Dr=null,Ja=0,De&6)throw Error(ue(331));var i=De;for(De|=4,ve=e.current;ve!==null;){var C=ve,k=C.child;if(ve.flags&16){var R=C.deletions;if(R!==null){for(var o=0;o<R.length;o++){var b=R[o];for(ve=b;ve!==null;){var A=ve;switch(A.tag){case 0:case 11:case 15:mi(8,A,C)}var N=A.child;if(N!==null)N.return=A,ve=N;else for(;ve!==null;){A=ve;var O=A.sibling,U=A.return;if(Zd(A),A===b){ve=null;break}if(O!==null){O.return=U,ve=O;break}ve=U}}}var M=C.alternate;if(M!==null){var S=M.child;if(S!==null){M.child=null;do{var w=S.sibling;S.sibling=null,S=w}while(S!==null)}}ve=C}}if(C.subtreeFlags&2064&&k!==null)k.return=C,ve=k;else e:for(;ve!==null;){if(C=ve,C.flags&2048)switch(C.tag){case 0:case 11:case 15:mi(9,C,C.return)}var p=C.sibling;if(p!==null){p.return=C.return,ve=p;break e}ve=C.return}}var v=e.current;for(ve=v;ve!==null;){k=ve;var a=k.child;if(k.subtreeFlags&2064&&a!==null)a.return=k,ve=a;else e:for(k=v;ve!==null;){if(R=ve,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:ps(9,R)}}catch(T){ze(R,R.return,T)}if(R===k){ve=null;break e}var D=R.sibling;if(D!==null){D.return=R.return,ve=D;break e}ve=R.return}}if(De=i,jr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(ls,e)}catch{}n=!0}return n}finally{Re=r,wt.transition=t}}return!1}function Pf(e,t,r){t=Bn(r,t),t=Kd(e,t,1),e=Mr(e,t,1),t=ht(),e!==null&&(ji(e,1,t),_t(e,t))}function ze(e,t,r){if(e.tag===3)Pf(e,e,r);else for(;t!==null;){if(t.tag===3){Pf(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(wr===null||!wr.has(n))){e=Bn(r,e),e=jd(t,e,1),t=Mr(t,e,1),e=ht(),t!==null&&(ji(t,1,e),_t(t,e));break}}t=t.return}}function vg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&r,tt===e&&(at&r)===r&&(Je===4||Je===3&&(at&130023424)===at&&500>Ye()-Jl?Jr(e,0):Zl|=r),_t(e,t)}function oh(e,t){t===0&&(e.mode&1?(t=na,na<<=1,!(na&130023424)&&(na=4194304)):t=1);var r=ht();e=dr(e,t),e!==null&&(ji(e,t,r),_t(e,r))}function gg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oh(e,r)}function pg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(t),oh(e,r)}var lh;lh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Et.current)yt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yt=!1,ng(e,t,r);yt=!!(e.flags&131072)}else yt=!1,We&&t.flags&1048576&&cd(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ca(e,t),e=t.pendingProps;var i=bn(t,ft.current);On(t,r),i=Vl(null,t,n,e,i,r);var C=zl();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tt(n)?(C=!0,ja(t)):C=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kl(t),i.updater=vs,t.stateNode=i,i._reactInternals=t,Vo(t,n,e,r),t=Yo(null,t,n,!0,C,r)):(t.tag=0,We&&C&&wl(t),dt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ca(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=yg(n),e=Nt(n,e),i){case 0:t=$o(null,t,n,e,r);break e;case 1:t=mf(null,t,n,e,r);break e;case 11:t=gf(null,t,n,e,r);break e;case 14:t=pf(null,t,n,Nt(n.type,e),r);break e}throw Error(ue(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nt(n,i),$o(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nt(n,i),mf(e,t,n,i,r);case 3:e:{if(Vd(t),e===null)throw Error(ue(387));n=t.pendingProps,C=t.memoizedState,i=C.element,gd(e,t),za(t,n,null,r);var k=t.memoizedState;if(n=k.element,C.isDehydrated)if(C={element:n,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},t.updateQueue.baseState=C,t.memoizedState=C,t.flags&256){i=Bn(Error(ue(423)),t),t=yf(e,t,n,r,i);break e}else if(n!==i){i=Bn(Error(ue(424)),t),t=yf(e,t,n,r,i);break e}else for(Ct=Or(t.stateNode.containerInfo.firstChild),Lt=t,We=!0,Bt=null,r=Ed(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fn(),n===i){t=hr(e,t,r);break e}dt(e,t,n,r)}t=t.child}return t;case 5:return Td(t),e===null&&Wo(t),n=t.type,i=t.pendingProps,C=e!==null?e.memoizedProps:null,k=i.children,No(n,i)?k=null:C!==null&&No(n,C)&&(t.flags|=32),Gd(e,t),dt(e,t,k,r),t.child;case 6:return e===null&&Wo(t),null;case 13:return zd(e,t,r);case 4:return jl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Nn(t,null,n,r):dt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nt(n,i),gf(e,t,n,i,r);case 7:return dt(e,t,t.pendingProps,r),t.child;case 8:return dt(e,t,t.pendingProps.children,r),t.child;case 12:return dt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,C=t.memoizedProps,k=i.value,Fe(Ga,n._currentValue),n._currentValue=k,C!==null)if(Wt(C.value,k)){if(C.children===i.children&&!Et.current){t=hr(e,t,r);break e}}else for(C=t.child,C!==null&&(C.return=t);C!==null;){var R=C.dependencies;if(R!==null){k=C.child;for(var o=R.firstContext;o!==null;){if(o.context===n){if(C.tag===1){o=lr(-1,r&-r),o.tag=2;var b=C.updateQueue;if(b!==null){b=b.shared;var A=b.pending;A===null?o.next=o:(o.next=A.next,A.next=o),b.pending=o}}C.lanes|=r,o=C.alternate,o!==null&&(o.lanes|=r),Ho(C.return,r,t),R.lanes|=r;break}o=o.next}}else if(C.tag===10)k=C.type===t.type?null:C.child;else if(C.tag===18){if(k=C.return,k===null)throw Error(ue(341));k.lanes|=r,R=k.alternate,R!==null&&(R.lanes|=r),Ho(k,r,t),k=C.sibling}else k=C.child;if(k!==null)k.return=C;else for(k=C;k!==null;){if(k===t){k=null;break}if(C=k.sibling,C!==null){C.return=k.return,k=C;break}k=k.return}C=k}dt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,On(t,r),i=kt(i),n=n(i),t.flags|=1,dt(e,t,n,r),t.child;case 14:return n=t.type,i=Nt(n,t.pendingProps),i=Nt(n.type,i),pf(e,t,n,i,r);case 15:return Wd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nt(n,i),Ca(e,t),t.tag=1,Tt(n)?(e=!0,ja(t)):e=!1,On(t,r),md(t,n,i),Vo(t,n,i,r),Yo(null,t,n,!0,e,r);case 19:return $d(e,t,r);case 22:return Hd(e,t,r)}throw Error(ue(156,t.tag))};function uh(e,t){return bc(e,t)}function mg(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,r,n){return new mg(e,t,r,n)}function ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yg(e){if(typeof e=="function")return ru(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_l)return 11;if(e===Sl)return 14}return 2}function br(e,t){var r=e.alternate;return r===null?(r=Mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pa(e,t,r,n,i,C){var k=2;if(n=e,typeof e=="function")ru(e)&&(k=1);else if(typeof e=="string")k=5;else e:switch(e){case vn:return qr(r.children,i,C,t);case Tl:k=8,i|=8;break;case go:return e=Mt(12,r,t,i|2),e.elementType=go,e.lanes=C,e;case po:return e=Mt(13,r,t,i),e.elementType=po,e.lanes=C,e;case mo:return e=Mt(19,r,t,i),e.elementType=mo,e.lanes=C,e;case yc:return ys(r,i,C,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pc:k=10;break e;case mc:k=9;break e;case _l:k=11;break e;case Sl:k=14;break e;case _r:k=16,n=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=Mt(k,r,t,i),t.elementType=e,t.type=n,t.lanes=C,t}function qr(e,t,r,n){return e=Mt(7,e,n,t),e.lanes=r,e}function ys(e,t,r,n){return e=Mt(22,e,n,t),e.elementType=yc,e.lanes=r,e.stateNode={isHidden:!1},e}function qs(e,t,r){return e=Mt(6,e,null,t),e.lanes=r,e}function eo(e,t,r){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eg(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ks(0),this.expirationTimes=ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nu(e,t,r,n,i,C,k,R,o){return e=new Eg(e,t,r,R,o),t===1?(t=1,C===!0&&(t|=8)):t=0,C=Mt(3,null,null,t),e.current=C,C.stateNode=e,C.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kl(C),e}function Tg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function fh(e){if(!e)return Ur;e=e._reactInternals;e:{if(on(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var r=e.type;if(Tt(r))return ud(e,r,t)}return t}function ch(e,t,r,n,i,C,k,R,o){return e=nu(r,n,!0,e,i,C,k,R,o),e.context=fh(null),r=e.current,n=ht(),i=kr(r),C=lr(n,i),C.callback=t??null,Mr(r,C,i),e.current.lanes=i,ji(e,i,n),_t(e,n),e}function Es(e,t,r,n){var i=t.current,C=ht(),k=kr(i);return r=fh(r),t.context===null?t.context=r:t.pendingContext=r,t=lr(C,k),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mr(i,t,k),e!==null&&(jt(e,i,k,C),_a(e,i,k)),k}function es(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function iu(e,t){Af(e,t),(e=e.alternate)&&Af(e,t)}function _g(){return null}var dh=typeof reportError=="function"?reportError:function(e){console.error(e)};function au(e){this._internalRoot=e}Ts.prototype.render=au.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));Es(e,t,null,null)};Ts.prototype.unmount=au.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;an(function(){Es(null,e,null,null)}),t[cr]=null}};function Ts(e){this._internalRoot=e}Ts.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xr.length&&t!==0&&t<xr[r].priority;r++);xr.splice(r,0,e),r===0&&Gc(e)}};function su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rf(){}function Sg(e,t,r,n,i){if(i){if(typeof n=="function"){var C=n;n=function(){var b=es(k);C.call(b)}}var k=ch(t,n,e,0,null,!1,!1,"",Rf);return e._reactRootContainer=k,e[cr]=k.current,Ri(e.nodeType===8?e.parentNode:e),an(),k}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var R=n;n=function(){var b=es(o);R.call(b)}}var o=nu(e,0,!1,null,null,!1,!1,"",Rf);return e._reactRootContainer=o,e[cr]=o.current,Ri(e.nodeType===8?e.parentNode:e),an(function(){Es(t,o,r,n)}),o}function Ss(e,t,r,n,i){var C=r._reactRootContainer;if(C){var k=C;if(typeof i=="function"){var R=i;i=function(){var o=es(k);R.call(o)}}Es(t,k,e,i)}else k=Sg(r,t,e,i,n);return es(k)}Kc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ui(t.pendingLanes);r!==0&&(Ll(t,r|1),_t(t,Ye()),!(De&6)&&(Kn=Ye()+500,jr()))}break;case 13:an(function(){var n=dr(e,1);if(n!==null){var i=ht();jt(n,e,1,i)}}),iu(e,1)}};Dl=function(e){if(e.tag===13){var t=dr(e,134217728);if(t!==null){var r=ht();jt(t,e,134217728,r)}iu(e,134217728)}};jc=function(e){if(e.tag===13){var t=kr(e),r=dr(e,t);if(r!==null){var n=ht();jt(r,e,t,n)}iu(e,t)}};Wc=function(){return Re};Hc=function(e,t){var r=Re;try{return Re=e,t()}finally{Re=r}};Po=function(e,t,r){switch(t){case"input":if(To(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ds(n);if(!i)throw Error(ue(90));Tc(n),To(n,i)}}}break;case"textarea":Sc(e,r);break;case"select":t=r.value,t!=null&&Pn(e,!!r.multiple,t,!1)}};Rc=ql;Ic=an;var xg={usingClientEntryPoint:!1,Events:[Hi,yn,ds,Pc,Ac,ql]},ti={findFiberByHostInstance:Yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Cg={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wc(e),e===null?null:e.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||_g,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{ls=va.inject(Cg),Zt=va}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xg;Pt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!su(t))throw Error(ue(200));return Tg(e,t,null,r)};Pt.createRoot=function(e,t){if(!su(e))throw Error(ue(299));var r=!1,n="",i=dh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=nu(e,1,!1,null,null,r,!1,n,i),e[cr]=t.current,Ri(e.nodeType===8?e.parentNode:e),new au(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=wc(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return an(e)};Pt.hydrate=function(e,t,r){if(!_s(t))throw Error(ue(200));return Ss(null,e,t,!0,r)};Pt.hydrateRoot=function(e,t,r){if(!su(e))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,i=!1,C="",k=dh;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(C=r.identifierPrefix),r.onRecoverableError!==void 0&&(k=r.onRecoverableError)),t=ch(t,null,e,1,r??null,i,!1,C,k),e[cr]=t.current,Ri(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Ts(t)};Pt.render=function(e,t,r){if(!_s(t))throw Error(ue(200));return Ss(null,e,t,!1,r)};Pt.unmountComponentAtNode=function(e){if(!_s(e))throw Error(ue(40));return e._reactRootContainer?(an(function(){Ss(null,null,e,!1,function(){e._reactRootContainer=null,e[cr]=null})}),!0):!1};Pt.unstable_batchedUpdates=ql;Pt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!_s(r))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return Ss(e,t,r,!1,n)};Pt.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Pt})(_v);const Lg=ss(Ia);var hh,If=Ia;hh=If.createRoot,If.hydrateRoot;/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ce.apply(this,arguments)}var $e;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($e||($e={}));const Of="popstate";function Dg(e){e===void 0&&(e={});function t(n,i){let{pathname:C,search:k,hash:R}=n.location;return Ui("",{pathname:C,search:k,hash:R},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:vr(i)}return Ag(t,r,null,e)}function Te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Pg(){return Math.random().toString(36).substr(2,8)}function Mf(e,t){return{usr:e.state,key:e.key,idx:t}}function Ui(e,t,r,n){return r===void 0&&(r=null),Ce({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?pr(t):t,{state:r,key:t&&t.key||n||Pg()})}function vr(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function pr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Ag(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:C=!1}=n,k=i.history,R=$e.Pop,o=null,b=A();b==null&&(b=0,k.replaceState(Ce({},k.state,{idx:b}),""));function A(){return(k.state||{idx:null}).idx}function N(){R=$e.Pop;let w=A(),p=w==null?null:w-b;b=w,o&&o({action:R,location:S.location,delta:p})}function O(w,p){R=$e.Push;let v=Ui(S.location,w,p);r&&r(v,w),b=A()+1;let a=Mf(v,b),D=S.createHref(v);try{k.pushState(a,"",D)}catch{i.location.assign(D)}C&&o&&o({action:R,location:S.location,delta:1})}function U(w,p){R=$e.Replace;let v=Ui(S.location,w,p);r&&r(v,w),b=A();let a=Mf(v,b),D=S.createHref(v);k.replaceState(a,"",D),C&&o&&o({action:R,location:S.location,delta:0})}function M(w){let p=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof w=="string"?w:vr(w);return Te(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let S={get action(){return R},get location(){return e(i,k)},listen(w){if(o)throw new Error("A history only accepts one active listener");return i.addEventListener(Of,N),o=w,()=>{i.removeEventListener(Of,N),o=null}},createHref(w){return t(i,w)},createURL:M,encodeLocation(w){let p=M(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:O,replace:U,go(w){return k.go(w)}};return S}var Qe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qe||(Qe={}));const Rg=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ig(e){return e.index===!0}function vh(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,C)=>{let k=[...r,C],R=typeof i.id=="string"?i.id:k.join("-");if(Te(i.index!==!0||!i.children,"Cannot specify children on an index route"),Te(!n[R],'Found a route id collision on id "'+R+`".  Route id's must be globally unique within Data Router usages`),Ig(i)){let o=Ce({},i,{hasErrorBoundary:t(i),id:R});return n[R]=o,o}else{let o=Ce({},i,{id:R,hasErrorBoundary:t(i),children:void 0});return n[R]=o,i.children&&(o.children=vh(i.children,t,k,n)),o}})}function Ln(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?pr(t):t,i=Vi(n.pathname||"/",r);if(i==null)return null;let C=gh(e);Og(C);let k=null;for(let R=0;k==null&&R<C.length;++R)k=Kg(C[R],Hg(i));return k}function gh(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(C,k,R)=>{let o={relativePath:R===void 0?C.path||"":R,caseSensitive:C.caseSensitive===!0,childrenIndex:k,route:C};o.relativePath.startsWith("/")&&(Te(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let b=ur([n,o.relativePath]),A=r.concat(o);C.children&&C.children.length>0&&(Te(C.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),gh(C.children,t,A,b)),!(C.path==null&&!C.index)&&t.push({path:b,score:Ug(b,C.index),routesMeta:A})};return e.forEach((C,k)=>{var R;if(C.path===""||!((R=C.path)!=null&&R.includes("?")))i(C,k);else for(let o of ph(C.path))i(C,k,o)}),t}function ph(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),C=r.replace(/\?$/,"");if(n.length===0)return i?[C,""]:[C];let k=ph(n.join("/")),R=[];return R.push(...k.map(o=>o===""?C:[C,o].join("/"))),i&&R.push(...k),R.map(o=>e.startsWith("/")&&o===""?"/":o)}function Og(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Bg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Mg=/^:\w+$/,wg=3,kg=2,bg=1,Fg=10,Ng=-2,wf=e=>e==="*";function Ug(e,t){let r=e.split("/"),n=r.length;return r.some(wf)&&(n+=Ng),t&&(n+=kg),r.filter(i=>!wf(i)).reduce((i,C)=>i+(Mg.test(C)?wg:C===""?bg:Fg),n)}function Bg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Kg(e,t){let{routesMeta:r}=e,n={},i="/",C=[];for(let k=0;k<r.length;++k){let R=r[k],o=k===r.length-1,b=i==="/"?t:t.slice(i.length)||"/",A=jg({path:R.relativePath,caseSensitive:R.caseSensitive,end:o},b);if(!A)return null;Object.assign(n,A.params);let N=R.route;C.push({params:n,pathname:ur([i,A.pathname]),pathnameBase:$g(ur([i,A.pathnameBase])),route:N}),A.pathnameBase!=="/"&&(i=ur([i,A.pathnameBase]))}return C}function jg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Wg(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let C=i[0],k=C.replace(/(.)\/+$/,"$1"),R=i.slice(1);return{params:n.reduce((b,A,N)=>{if(A==="*"){let O=R[N]||"";k=C.slice(0,C.length-O.length).replace(/(.)\/+$/,"$1")}return b[A]=Gg(R[N]||"",A),b},{}),pathname:C,pathnameBase:k,pattern:e}}function Wg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(k,R)=>(n.push(R),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Hg(e){try{return decodeURI(e)}catch(t){return jn(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Gg(e,t){try{return decodeURIComponent(e)}catch(r){return jn(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Vi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Vg(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?pr(e):e;return{pathname:r?r.startsWith("/")?r:zg(r,t):t,search:Yg(n),hash:Xg(i)}}function zg(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function to(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xs(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ou(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=pr(e):(i=Ce({},e),Te(!i.pathname||!i.pathname.includes("?"),to("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),to("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),to("#","search","hash",i)));let C=e===""||i.pathname==="",k=C?"/":i.pathname,R;if(n||k==null)R=r;else{let N=t.length-1;if(k.startsWith("..")){let O=k.split("/");for(;O[0]==="..";)O.shift(),N-=1;i.pathname=O.join("/")}R=N>=0?t[N]:"/"}let o=Vg(i,R),b=k&&k!=="/"&&k.endsWith("/"),A=(C||k===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(b||A)&&(o.pathname+="/"),o}const ur=e=>e.join("/").replace(/\/\/+/g,"/"),$g=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Xg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class kf extends Error{}class Qg{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Te(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((C,k)=>n=k),this.controller=new AbortController;let i=()=>n(new kf("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((C,k)=>{let[R,o]=k;return Object.assign(C,{[R]:this.trackPromise(R,o)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(i=>this.onSettle(n,t,null,i),i=>this.onSettle(n,t,i));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,i){return this.controller.signal.aborted&&n instanceof kf?(this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n)):(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>i}),this.emit(!1,r),i))}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(i=>{this.subscribe(C=>{t.removeEventListener("abort",n),(C||this.done)&&i(C)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Te(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,i]=r;return Object.assign(t,{[n]:Jg(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function Zg(e){return e instanceof Promise&&e._tracked===!0}function Jg(e){if(!Zg(e))return e;if(e._error)throw e._error;return e._data}class lu{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function mh(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yh=["post","put","patch","delete"],qg=new Set(yh),ep=["get",...yh],tp=new Set(ep),rp=new Set([301,302,303,307,308]),np=new Set([307,308]),ro={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ip={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},bf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Eh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Th=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ap=!Th,sp=e=>Boolean(e.hasErrorBoundary);function op(e){Te(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=e.detectErrorBoundary||sp,r={},n=vh(e.routes,t,void 0,r),i,C=null,k=new Set,R=null,o=null,b=null,A=e.hydrationData!=null,N=Ln(n,e.history.location,e.basename),O=null;if(N==null){let ee=$t(404,{pathname:e.history.location.pathname}),{matches:te,route:se}=jf(n);N=te,O={[se.id]:ee}}let U=!N.some(ee=>ee.route.lazy)&&(!N.some(ee=>ee.route.loader)||e.hydrationData!=null),M,S={historyAction:e.history.action,location:e.history.location,matches:N,initialized:U,navigation:ro,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||O,fetchers:new Map,blockers:new Map},w=$e.Pop,p=!1,v,a=!1,D=!1,T=[],c=[],l=new Map,d=0,f=-1,x=new Map,L=new Set,h=new Map,m=new Map,I=new Map,g=!1;function E(){if(C=e.history.listen(se=>{let{action:fe,location:ce,delta:de}=se;if(g){g=!1;return}jn(I.size===0||de!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=pe({currentLocation:S.location,nextLocation:ce,historyAction:fe});if(ge&&de!=null){g=!0,e.history.go(de*-1),ne(ge,{state:"blocked",location:ce,proceed(){ne(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:ce}),e.history.go(de)},reset(){re(ge),s({blockers:new Map(M.state.blockers)})}});return}return B(fe,ce)}),S.initialized)return M;let ee=S.matches.filter(se=>se.route.lazy);if(ee.length===0)return B($e.Pop,S.location),M;let te=ee.map(se=>sl(se.route,t,r));return Promise.all(te).then(()=>{!S.matches.some(fe=>fe.route.loader)||e.hydrationData!=null?s({initialized:!0}):B($e.Pop,S.location)}),M}function u(){C&&C(),k.clear(),v&&v.abort(),S.fetchers.forEach((ee,te)=>q(te)),S.blockers.forEach((ee,te)=>re(te))}function y(ee){return k.add(ee),()=>k.delete(ee)}function s(ee){S=Ce({},S,ee),k.forEach(te=>te(S))}function _(ee,te){var se,fe;let ce=S.actionData!=null&&S.navigation.formMethod!=null&&nr(S.navigation.formMethod)&&S.navigation.state==="loading"&&((se=ee.state)==null?void 0:se._isRedirect)!==!0,de;te.actionData?Object.keys(te.actionData).length>0?de=te.actionData:de=null:ce?de=S.actionData:de=null;let ge=te.loaderData?Kf(S.loaderData,te.loaderData,te.matches||[],te.errors):S.loaderData;for(let[he]of I)re(he);let me=p===!0||S.navigation.formMethod!=null&&nr(S.navigation.formMethod)&&((fe=ee.state)==null?void 0:fe._isRedirect)!==!0;i&&(n=i,i=void 0),s(Ce({},te,{actionData:de,loaderData:ge,historyAction:w,location:ee,initialized:!0,navigation:ro,revalidation:"idle",restoreScrollPosition:ke(ee,te.matches||S.matches),preventScrollReset:me,blockers:new Map(S.blockers)})),a||w===$e.Pop||(w===$e.Push?e.history.push(ee,ee.state):w===$e.Replace&&e.history.replace(ee,ee.state)),w=$e.Pop,p=!1,a=!1,D=!1,T=[],c=[]}async function F(ee,te){if(typeof ee=="number"){e.history.go(ee);return}let{path:se,submission:fe,error:ce}=Ff(ee,te),de=S.location,ge=Ui(S.location,se,te&&te.state);ge=Ce({},ge,e.history.encodeLocation(ge));let me=te&&te.replace!=null?te.replace:void 0,he=$e.Push;me===!0?he=$e.Replace:me===!1||fe!=null&&nr(fe.formMethod)&&fe.formAction===S.location.pathname+S.location.search&&(he=$e.Replace);let Ie=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,Ee=pe({currentLocation:de,nextLocation:ge,historyAction:he});if(Ee){ne(Ee,{state:"blocked",location:ge,proceed(){ne(Ee,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),F(ee,te)},reset(){re(Ee),s({blockers:new Map(S.blockers)})}});return}return await B(he,ge,{submission:fe,pendingError:ce,preventScrollReset:Ie,replace:te&&te.replace})}function P(){if(Y(),s({revalidation:"loading"}),S.navigation.state!=="submitting"){if(S.navigation.state==="idle"){B(S.historyAction,S.location,{startUninterruptedRevalidation:!0});return}B(w||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation})}}async function B(ee,te,se){v&&v.abort(),v=null,w=ee,a=(se&&se.startUninterruptedRevalidation)===!0,Ae(S.location,S.matches),p=(se&&se.preventScrollReset)===!0;let fe=i||n,ce=se&&se.overrideNavigation,de=Ln(fe,te,e.basename);if(!de){let _e=$t(404,{pathname:te.pathname}),{matches:Me,route:Ke}=jf(fe);ye(),_(te,{matches:Me,loaderData:{},errors:{[Ke.id]:_e}});return}if(dp(S.location,te)&&!(se&&se.submission&&nr(se.submission.formMethod))){_(te,{matches:de});return}v=new AbortController;let ge=ni(e.history,te,v.signal,se&&se.submission),me,he;if(se&&se.pendingError)he={[Dn(de).route.id]:se.pendingError};else if(se&&se.submission&&nr(se.submission.formMethod)){let _e=await K(ge,te,se.submission,de,{replace:se.replace});if(_e.shortCircuited)return;me=_e.pendingActionData,he=_e.pendingActionError,ce=Ce({state:"loading",location:te},se.submission),ge=new Request(ge.url,{signal:ge.signal})}let{shortCircuited:Ie,loaderData:Ee,errors:Oe}=await j(ge,te,de,ce,se&&se.submission,se&&se.replace,me,he);Ie||(v=null,_(te,Ce({matches:de},me?{actionData:me}:{},{loaderData:Ee,errors:Oe})))}async function K(ee,te,se,fe,ce){Y();let de=Ce({state:"submitting",location:te},se);s({navigation:de});let ge,me=ol(fe,te);if(!me.route.action&&!me.route.lazy)ge={type:Qe.error,error:$t(405,{method:ee.method,pathname:te.pathname,routeId:me.route.id})};else if(ge=await ri("action",ee,me,fe,r,t,M.basename),ee.signal.aborted)return{shortCircuited:!0};if(wn(ge)){let he;return ce&&ce.replace!=null?he=ce.replace:he=ge.location===S.location.pathname+S.location.search,await V(S,ge,{submission:se,replace:he}),{shortCircuited:!0}}if(Ti(ge)){let he=Dn(fe,me.route.id);return(ce&&ce.replace)!==!0&&(w=$e.Push),{pendingActionData:{},pendingActionError:{[he.route.id]:ge.error}}}if(Zr(ge))throw $t(400,{type:"defer-action"});return{pendingActionData:{[me.route.id]:ge.data}}}async function j(ee,te,se,fe,ce,de,ge,me){let he=fe;he||(he=Ce({state:"loading",location:te,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ce));let Ie=ce||(he.formMethod&&he.formAction&&he.formData&&he.formEncType?{formMethod:he.formMethod,formAction:he.formAction,formData:he.formData,formEncType:he.formEncType}:void 0),Ee=i||n,[Oe,_e]=Nf(e.history,S,se,Ie,te,D,T,c,h,Ee,e.basename,ge,me);if(ye(je=>!(se&&se.some(nt=>nt.route.id===je))||Oe&&Oe.some(nt=>nt.route.id===je)),Oe.length===0&&_e.length===0)return _(te,Ce({matches:se,loaderData:{},errors:me||null},ge?{actionData:ge}:{})),{shortCircuited:!0};if(!a){_e.forEach(nt=>{let Gt=S.fetchers.get(nt.key),er={state:"loading",data:Gt&&Gt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(nt.key,er)});let je=ge||S.actionData;s(Ce({navigation:he},je?Object.keys(je).length===0?{actionData:null}:{actionData:je}:{},_e.length>0?{fetchers:new Map(S.fetchers)}:{}))}f=++d,_e.forEach(je=>l.set(je.key,v));let{results:Me,loaderResults:Ke,fetcherResults:rt}=await z(S.matches,se,Oe,_e,ee);if(ee.signal.aborted)return{shortCircuited:!0};_e.forEach(je=>l.delete(je.key));let Ne=Wf(Me);if(Ne)return await V(S,Ne,{replace:de}),{shortCircuited:!0};let{loaderData:ct,errors:qe}=Bf(S,se,Oe,Ke,me,_e,rt,m);m.forEach((je,nt)=>{je.subscribe(Gt=>{(Gt||je.done)&&m.delete(nt)})}),ie();let yr=le(f);return Ce({loaderData:ct,errors:qe},yr||_e.length>0?{fetchers:new Map(S.fetchers)}:{})}function W(ee){return S.fetchers.get(ee)||ip}function H(ee,te,se,fe){if(ap)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");l.has(ee)&&Z(ee);let de=Ln(i||n,se,e.basename);if(!de){Q(ee,te,$t(404,{pathname:se}));return}let{path:ge,submission:me}=Ff(se,fe,!0),he=ol(de,ge);if(p=(fe&&fe.preventScrollReset)===!0,me&&nr(me.formMethod)){G(ee,te,ge,he,de,me);return}h.set(ee,{routeId:te,path:ge}),$(ee,te,ge,he,de,me)}async function G(ee,te,se,fe,ce,de){if(Y(),h.delete(ee),!fe.route.action&&!fe.route.lazy){let Rt=$t(405,{method:de.formMethod,pathname:se,routeId:te});Q(ee,te,Rt);return}let ge=S.fetchers.get(ee),me=Ce({state:"submitting"},de,{data:ge&&ge.data," _hasFetcherDoneAnything ":!0});S.fetchers.set(ee,me),s({fetchers:new Map(S.fetchers)});let he=new AbortController,Ie=ni(e.history,se,he.signal,de);l.set(ee,he);let Ee=await ri("action",Ie,fe,ce,r,t,M.basename);if(Ie.signal.aborted){l.get(ee)===he&&l.delete(ee);return}if(wn(Ee)){l.delete(ee),L.add(ee);let Rt=Ce({state:"loading"},de,{data:void 0," _hasFetcherDoneAnything ":!0});return S.fetchers.set(ee,Rt),s({fetchers:new Map(S.fetchers)}),V(S,Ee,{isFetchActionRedirect:!0})}if(Ti(Ee)){Q(ee,te,Ee.error);return}if(Zr(Ee))throw $t(400,{type:"defer-action"});let Oe=S.navigation.location||S.location,_e=ni(e.history,Oe,he.signal),Me=i||n,Ke=S.navigation.state!=="idle"?Ln(Me,S.navigation.location,e.basename):S.matches;Te(Ke,"Didn't find any matches after fetcher action");let rt=++d;x.set(ee,rt);let Ne=Ce({state:"loading",data:Ee.data},de,{" _hasFetcherDoneAnything ":!0});S.fetchers.set(ee,Ne);let[ct,qe]=Nf(e.history,S,Ke,de,Oe,D,T,c,h,Me,e.basename,{[fe.route.id]:Ee.data},void 0);qe.filter(Rt=>Rt.key!==ee).forEach(Rt=>{let Hr=Rt.key,pt=S.fetchers.get(Hr),Zi={state:"loading",data:pt&&pt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(Hr,Zi),l.set(Hr,he)}),s({fetchers:new Map(S.fetchers)});let{results:yr,loaderResults:je,fetcherResults:nt}=await z(S.matches,Ke,ct,qe,_e);if(he.signal.aborted)return;x.delete(ee),l.delete(ee),qe.forEach(Rt=>l.delete(Rt.key));let Gt=Wf(yr);if(Gt)return V(S,Gt);let{loaderData:er,errors:zn}=Bf(S,S.matches,ct,je,void 0,qe,nt,m),$n={state:"idle",data:Ee.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(ee,$n);let Ps=le(rt);S.navigation.state==="loading"&&rt>f?(Te(w,"Expected pending action"),v&&v.abort(),_(S.navigation.location,{matches:Ke,loaderData:er,errors:zn,fetchers:new Map(S.fetchers)})):(s(Ce({errors:zn,loaderData:Kf(S.loaderData,er,Ke,zn)},Ps?{fetchers:new Map(S.fetchers)}:{})),D=!1)}async function $(ee,te,se,fe,ce,de){let ge=S.fetchers.get(ee),me=Ce({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},de,{data:ge&&ge.data," _hasFetcherDoneAnything ":!0});S.fetchers.set(ee,me),s({fetchers:new Map(S.fetchers)});let he=new AbortController,Ie=ni(e.history,se,he.signal);l.set(ee,he);let Ee=await ri("loader",Ie,fe,ce,r,t,M.basename);if(Zr(Ee)&&(Ee=await Ch(Ee,Ie.signal,!0)||Ee),l.get(ee)===he&&l.delete(ee),Ie.signal.aborted)return;if(wn(Ee)){await V(S,Ee);return}if(Ti(Ee)){let _e=Dn(S.matches,te);S.fetchers.delete(ee),s({fetchers:new Map(S.fetchers),errors:{[_e.route.id]:Ee.error}});return}Te(!Zr(Ee),"Unhandled fetcher deferred data");let Oe={state:"idle",data:Ee.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(ee,Oe),s({fetchers:new Map(S.fetchers)})}async function V(ee,te,se){var fe;let{submission:ce,replace:de,isFetchActionRedirect:ge}=se===void 0?{}:se;te.revalidate&&(D=!0);let me=Ui(ee.location,te.location,Ce({_isRedirect:!0},ge?{_isFetchActionRedirect:!0}:{}));if(Te(me,"Expected a location on the redirect navigation"),Eh.test(te.location)&&Th&&typeof((fe=window)==null?void 0:fe.location)<"u"){let Me=e.history.createURL(te.location),Ke=Vi(Me.pathname,e.basename||"/")==null;if(window.location.origin!==Me.origin||Ke){de?window.location.replace(te.location):window.location.assign(te.location);return}}v=null;let he=de===!0?$e.Replace:$e.Push,{formMethod:Ie,formAction:Ee,formEncType:Oe,formData:_e}=ee.navigation;!ce&&Ie&&Ee&&_e&&Oe&&(ce={formMethod:Ie,formAction:Ee,formEncType:Oe,formData:_e}),np.has(te.status)&&ce&&nr(ce.formMethod)?await B(he,me,{submission:Ce({},ce,{formAction:te.location}),preventScrollReset:p}):await B(he,me,{overrideNavigation:{state:"loading",location:me,formMethod:ce?ce.formMethod:void 0,formAction:ce?ce.formAction:void 0,formEncType:ce?ce.formEncType:void 0,formData:ce?ce.formData:void 0},preventScrollReset:p})}async function z(ee,te,se,fe,ce){let de=await Promise.all([...se.map(he=>ri("loader",ce,he,te,r,t,M.basename)),...fe.map(he=>he.matches&&he.match?ri("loader",ni(e.history,he.path,ce.signal),he.match,he.matches,r,t,M.basename):{type:Qe.error,error:$t(404,{pathname:he.path})})]),ge=de.slice(0,se.length),me=de.slice(se.length);return await Promise.all([Hf(ee,se,ge,ce.signal,!1,S.loaderData),Hf(ee,fe.map(he=>he.match),me,ce.signal,!0)]),{results:de,loaderResults:ge,fetcherResults:me}}function Y(){D=!0,T.push(...ye()),h.forEach((ee,te)=>{l.has(te)&&(c.push(te),Z(te))})}function Q(ee,te,se){let fe=Dn(S.matches,te);q(ee),s({errors:{[fe.route.id]:se},fetchers:new Map(S.fetchers)})}function q(ee){l.has(ee)&&Z(ee),h.delete(ee),x.delete(ee),L.delete(ee),S.fetchers.delete(ee)}function Z(ee){let te=l.get(ee);Te(te,"Expected fetch controller: "+ee),te.abort(),l.delete(ee)}function J(ee){for(let te of ee){let fe={state:"idle",data:W(te).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(te,fe)}}function ie(){let ee=[];for(let te of L){let se=S.fetchers.get(te);Te(se,"Expected fetcher: "+te),se.state==="loading"&&(L.delete(te),ee.push(te))}J(ee)}function le(ee){let te=[];for(let[se,fe]of x)if(fe<ee){let ce=S.fetchers.get(se);Te(ce,"Expected fetcher: "+se),ce.state==="loading"&&(Z(se),x.delete(se),te.push(se))}return J(te),te.length>0}function oe(ee,te){let se=S.blockers.get(ee)||bf;return I.get(ee)!==te&&I.set(ee,te),se}function re(ee){S.blockers.delete(ee),I.delete(ee)}function ne(ee,te){let se=S.blockers.get(ee)||bf;Te(se.state==="unblocked"&&te.state==="blocked"||se.state==="blocked"&&te.state==="blocked"||se.state==="blocked"&&te.state==="proceeding"||se.state==="blocked"&&te.state==="unblocked"||se.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+se.state+" -> "+te.state),S.blockers.set(ee,te),s({blockers:new Map(S.blockers)})}function pe(ee){let{currentLocation:te,nextLocation:se,historyAction:fe}=ee;if(I.size===0)return;I.size>1&&jn(!1,"A router only supports one blocker at a time");let ce=Array.from(I.entries()),[de,ge]=ce[ce.length-1],me=S.blockers.get(de);if(!(me&&me.state==="proceeding")&&ge({currentLocation:te,nextLocation:se,historyAction:fe}))return de}function ye(ee){let te=[];return m.forEach((se,fe)=>{(!ee||ee(fe))&&(se.cancel(),te.push(fe),m.delete(fe))}),te}function be(ee,te,se){if(R=ee,b=te,o=se||(fe=>fe.key),!A&&S.navigation===ro){A=!0;let fe=ke(S.location,S.matches);fe!=null&&s({restoreScrollPosition:fe})}return()=>{R=null,b=null,o=null}}function Ae(ee,te){if(R&&o&&b){let se=te.map(ce=>Gf(ce,S.loaderData)),fe=o(ee,se)||ee.key;R[fe]=b()}}function ke(ee,te){if(R&&o&&b){let se=te.map(de=>Gf(de,S.loaderData)),fe=o(ee,se)||ee.key,ce=R[fe];if(typeof ce=="number")return ce}return null}function Pe(ee){i=ee}return M={get basename(){return e.basename},get state(){return S},get routes(){return n},initialize:E,subscribe:y,enableScrollRestoration:be,navigate:F,fetch:H,revalidate:P,createHref:ee=>e.history.createHref(ee),encodeLocation:ee=>e.history.encodeLocation(ee),getFetcher:W,deleteFetcher:q,dispose:u,getBlocker:oe,deleteBlocker:re,_internalFetchControllers:l,_internalActiveDeferreds:m,_internalSetRoutes:Pe},M}function lp(e){return e!=null&&"formData"in e}function Ff(e,t,r){r===void 0&&(r=!1);let n=typeof e=="string"?e:vr(e);if(!t||!lp(t))return{path:n};if(t.formMethod&&!vp(t.formMethod))return{path:n,error:$t(405,{method:t.formMethod})};let i;if(t.formData&&(i={formMethod:t.formMethod||"get",formAction:xh(n),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData},nr(i.formMethod)))return{path:n,submission:i};let C=pr(n),k=Sh(t.formData);return r&&C.search&&Lh(C.search)&&k.append("index",""),C.search="?"+k,{path:vr(C),submission:i}}function up(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function Nf(e,t,r,n,i,C,k,R,o,b,A,N,O){let U=O?Object.values(O)[0]:N?Object.values(N)[0]:void 0,M=e.createURL(t.location),S=e.createURL(i),w=C||M.toString()===S.toString()||M.search!==S.search,p=O?Object.keys(O)[0]:void 0,a=up(r,p).filter((T,c)=>{if(T.route.lazy)return!0;if(T.route.loader==null)return!1;if(fp(t.loaderData,t.matches[c],T)||k.some(f=>f===T.route.id))return!0;let l=t.matches[c],d=T;return Uf(T,Ce({currentUrl:M,currentParams:l.params,nextUrl:S,nextParams:d.params},n,{actionResult:U,defaultShouldRevalidate:w||_h(l,d)}))}),D=[];return o.forEach((T,c)=>{if(!r.some(x=>x.route.id===T.routeId))return;let l=Ln(b,T.path,A);if(!l){D.push(Ce({key:c},T,{matches:null,match:null}));return}let d=ol(l,T.path);if(R.includes(c)){D.push(Ce({key:c,matches:l,match:d},T));return}Uf(d,Ce({currentUrl:M,currentParams:t.matches[t.matches.length-1].params,nextUrl:S,nextParams:r[r.length-1].params},n,{actionResult:U,defaultShouldRevalidate:w}))&&D.push(Ce({key:c,matches:l,match:d},T))}),[a,D]}function fp(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function _h(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Uf(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function sl(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Te(i,"No route found in manifest");let C={};for(let k in n){let o=i[k]!==void 0&&k!=="hasErrorBoundary";jn(!o,'Route "'+i.id+'" has a static property "'+k+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+k+'" will be ignored.')),!o&&!Rg.has(k)&&(C[k]=n[k])}Object.assign(i,C),Object.assign(i,{hasErrorBoundary:t(Ce({},i)),lazy:void 0})}async function ri(e,t,r,n,i,C,k,R,o,b){k===void 0&&(k="/"),R===void 0&&(R=!1),o===void 0&&(o=!1);let A,N,O,U=w=>{let p,v=new Promise((a,D)=>p=D);return O=()=>p(),t.signal.addEventListener("abort",O),Promise.race([w({request:t,params:r.params,context:b}),v])};try{let w=r.route[e];if(r.route.lazy)if(w)N=(await Promise.all([U(w),sl(r.route,C,i)]))[0];else if(await sl(r.route,C,i),w=r.route[e],w)N=await U(w);else{if(e==="action")throw $t(405,{method:t.method,pathname:new URL(t.url).pathname,routeId:r.route.id});return{type:Qe.data,data:void 0}}else Te(w,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),N=await U(w);Te(N!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(w){A=Qe.error,N=w}finally{O&&t.signal.removeEventListener("abort",O)}if(hp(N)){let w=N.status;if(rp.has(w)){let a=N.headers.get("Location");if(Te(a,"Redirects returned/thrown from loaders/actions must have a Location header"),Eh.test(a)){if(!R){let D=new URL(t.url),T=a.startsWith("//")?new URL(D.protocol+a):new URL(a),c=Vi(T.pathname,k)!=null;T.origin===D.origin&&c&&(a=T.pathname+T.search+T.hash)}}else{let D=n.slice(0,n.indexOf(r)+1),T=xs(D).map(l=>l.pathnameBase),c=ou(a,T,new URL(t.url).pathname);if(Te(vr(c),"Unable to resolve redirect location: "+a),k){let l=c.pathname;c.pathname=l==="/"?k:ur([k,l])}a=vr(c)}if(R)throw N.headers.set("Location",a),N;return{type:Qe.redirect,status:w,location:a,revalidate:N.headers.get("X-Remix-Revalidate")!==null}}if(o)throw{type:A||Qe.data,response:N};let p,v=N.headers.get("Content-Type");return v&&/\bapplication\/json\b/.test(v)?p=await N.json():p=await N.text(),A===Qe.error?{type:A,error:new lu(w,N.statusText,p),headers:N.headers}:{type:Qe.data,data:p,statusCode:N.status,headers:N.headers}}if(A===Qe.error)return{type:A,error:N};if(N instanceof Qg){var M,S;return{type:Qe.deferred,deferredData:N,statusCode:(M=N.init)==null?void 0:M.status,headers:((S=N.init)==null?void 0:S.headers)&&new Headers(N.init.headers)}}return{type:Qe.data,data:N}}function ni(e,t,r,n){let i=e.createURL(xh(t)).toString(),C={signal:r};if(n&&nr(n.formMethod)){let{formMethod:k,formEncType:R,formData:o}=n;C.method=k.toUpperCase(),C.body=R==="application/x-www-form-urlencoded"?Sh(o):o}return new Request(i,C)}function Sh(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,n instanceof File?n.name:n);return t}function cp(e,t,r,n,i){let C={},k=null,R,o=!1,b={};return r.forEach((A,N)=>{let O=t[N].route.id;if(Te(!wn(A),"Cannot handle redirect results in processLoaderData"),Ti(A)){let U=Dn(e,O),M=A.error;n&&(M=Object.values(n)[0],n=void 0),k=k||{},k[U.route.id]==null&&(k[U.route.id]=M),C[O]=void 0,o||(o=!0,R=mh(A.error)?A.error.status:500),A.headers&&(b[O]=A.headers)}else Zr(A)?(i.set(O,A.deferredData),C[O]=A.deferredData.data):C[O]=A.data,A.statusCode!=null&&A.statusCode!==200&&!o&&(R=A.statusCode),A.headers&&(b[O]=A.headers)}),n&&(k=n,C[Object.keys(n)[0]]=void 0),{loaderData:C,errors:k,statusCode:R||200,loaderHeaders:b}}function Bf(e,t,r,n,i,C,k,R){let{loaderData:o,errors:b}=cp(t,r,n,i,R);for(let A=0;A<C.length;A++){let{key:N,match:O}=C[A];Te(k!==void 0&&k[A]!==void 0,"Did not find corresponding fetcher result");let U=k[A];if(Ti(U)){let M=Dn(e.matches,O==null?void 0:O.route.id);b&&b[M.route.id]||(b=Ce({},b,{[M.route.id]:U.error})),e.fetchers.delete(N)}else if(wn(U))Te(!1,"Unhandled fetcher revalidation redirect");else if(Zr(U))Te(!1,"Unhandled fetcher deferred data");else{let M={state:"idle",data:U.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(N,M)}}return{loaderData:o,errors:b}}function Kf(e,t,r,n){let i=Ce({},t);for(let C of r){let k=C.route.id;if(t.hasOwnProperty(k)?t[k]!==void 0&&(i[k]=t[k]):e[k]!==void 0&&C.route.loader&&(i[k]=e[k]),n&&n.hasOwnProperty(k))break}return i}function Dn(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function jf(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function $t(e,t){let{pathname:r,routeId:n,method:i,type:C}=t===void 0?{}:t,k="Unknown Server Error",R="Unknown @remix-run/router error";return e===400?(k="Bad Request",i&&r&&n?R="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":C==="defer-action"&&(R="defer() is not supported in actions")):e===403?(k="Forbidden",R='Route "'+n+'" does not match URL "'+r+'"'):e===404?(k="Not Found",R='No route matches URL "'+r+'"'):e===405&&(k="Method Not Allowed",i&&r&&n?R="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(R='Invalid request method "'+i.toUpperCase()+'"')),new lu(e||500,k,new Error(R),!0)}function Wf(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(wn(r))return r}}function xh(e){let t=typeof e=="string"?pr(e):e;return vr(Ce({},t,{hash:""}))}function dp(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Zr(e){return e.type===Qe.deferred}function Ti(e){return e.type===Qe.error}function wn(e){return(e&&e.type)===Qe.redirect}function hp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function vp(e){return tp.has(e)}function nr(e){return qg.has(e)}async function Hf(e,t,r,n,i,C){for(let k=0;k<r.length;k++){let R=r[k],o=t[k];if(!o)continue;let b=e.find(N=>N.route.id===o.route.id),A=b!=null&&!_h(b,o)&&(C&&C[o.route.id])!==void 0;Zr(R)&&(i||A)&&await Ch(R,n,i).then(N=>{N&&(r[k]=N||r[k])})}}async function Ch(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Qe.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Qe.error,error:i}}return{type:Qe.data,data:e.deferredData.data}}}function Lh(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Gf(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function ol(e,t){let r=typeof t=="string"?pr(t).search:t.search;if(e[e.length-1].route.index&&Lh(r||""))return e[e.length-1];let n=xs(e);return n[n.length-1]}/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const pp=typeof Object.is=="function"?Object.is:gp,{useState:mp,useEffect:yp,useLayoutEffect:Ep,useDebugValue:Tp}=co;function _p(e,t,r){const n=t(),[{inst:i},C]=mp({inst:{value:n,getSnapshot:t}});return Ep(()=>{i.value=n,i.getSnapshot=t,no(i)&&C({inst:i})},[e,n,t]),yp(()=>(no(i)&&C({inst:i}),e(()=>{no(i)&&C({inst:i})})),[e]),Tp(n),n}function no(e){const t=e.getSnapshot,r=e.value;try{const n=t();return!pp(r,n)}catch{return!0}}function Sp(e,t,r){return t()}const xp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cp=!xp,Lp=Cp?Sp:_p,Dp="useSyncExternalStore"in co?(e=>e.useSyncExternalStore)(co):Lp,uu=ae.createContext(null),fu=ae.createContext(null),zi=ae.createContext(null),Cs=ae.createContext(null),Wr=ae.createContext({outlet:null,matches:[]}),Dh=ae.createContext(null);function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ll.apply(this,arguments)}function Pp(e,t){let{relative:r}=t===void 0?{}:t;$i()||Te(!1);let{basename:n,navigator:i}=ae.useContext(zi),{hash:C,pathname:k,search:R}=Ph(e,{relative:r}),o=k;return n!=="/"&&(o=k==="/"?n:ur([n,k])),i.createHref({pathname:o,search:R,hash:C})}function $i(){return ae.useContext(Cs)!=null}function Yi(){return $i()||Te(!1),ae.useContext(Cs).location}function Ls(){$i()||Te(!1);let{basename:e,navigator:t}=ae.useContext(zi),{matches:r}=ae.useContext(Wr),{pathname:n}=Yi(),i=JSON.stringify(xs(r).map(R=>R.pathnameBase)),C=ae.useRef(!1);return ae.useEffect(()=>{C.current=!0}),ae.useCallback(function(R,o){if(o===void 0&&(o={}),!C.current)return;if(typeof R=="number"){t.go(R);return}let b=ou(R,JSON.parse(i),n,o.relative==="path");e!=="/"&&(b.pathname=b.pathname==="/"?e:ur([e,b.pathname])),(o.replace?t.replace:t.push)(b,o.state,o)},[e,t,i,n])}const Ap=ae.createContext(null);function Rp(e){let t=ae.useContext(Wr).outlet;return t&&ae.createElement(Ap.Provider,{value:e},t)}function Ip(){let{matches:e}=ae.useContext(Wr),t=e[e.length-1];return t?t.params:{}}function Ph(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=ae.useContext(Wr),{pathname:i}=Yi(),C=JSON.stringify(xs(n).map(k=>k.pathnameBase));return ae.useMemo(()=>ou(e,JSON.parse(C),i,r==="path"),[e,C,i,r])}function Op(e,t){$i()||Te(!1);let{navigator:r}=ae.useContext(zi),n=ae.useContext(fu),{matches:i}=ae.useContext(Wr),C=i[i.length-1],k=C?C.params:{};C&&C.pathname;let R=C?C.pathnameBase:"/";C&&C.route;let o=Yi(),b;if(t){var A;let S=typeof t=="string"?pr(t):t;R==="/"||(A=S.pathname)!=null&&A.startsWith(R)||Te(!1),b=S}else b=o;let N=b.pathname||"/",O=R==="/"?N:N.slice(R.length)||"/",U=Ln(e,{pathname:O}),M=bp(U&&U.map(S=>Object.assign({},S,{params:Object.assign({},k,S.params),pathname:ur([R,r.encodeLocation?r.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?R:ur([R,r.encodeLocation?r.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n||void 0);return t&&M?ae.createElement(Cs.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:$e.Pop}},M):M}function Mp(){let e=Bp(),t=mh(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},C=null;return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},t),r?ae.createElement("pre",{style:i},r):null,C)}class wp extends ae.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location?{error:t.error,location:t.location}:{error:t.error||r.error,location:r.location}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?ae.createElement(Wr.Provider,{value:this.props.routeContext},ae.createElement(Dh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kp(e){let{routeContext:t,match:r,children:n}=e,i=ae.useContext(uu);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),ae.createElement(Wr.Provider,{value:t},n)}function bp(e,t,r){if(t===void 0&&(t=[]),e==null)if(r!=null&&r.errors)e=r.matches;else return null;let n=e,i=r==null?void 0:r.errors;if(i!=null){let C=n.findIndex(k=>k.route.id&&(i==null?void 0:i[k.route.id]));C>=0||Te(!1),n=n.slice(0,Math.min(n.length,C+1))}return n.reduceRight((C,k,R)=>{let o=k.route.id?i==null?void 0:i[k.route.id]:null,b=null;r&&(k.route.ErrorBoundary?b=ae.createElement(k.route.ErrorBoundary,null):k.route.errorElement?b=k.route.errorElement:b=ae.createElement(Mp,null));let A=t.concat(n.slice(0,R+1)),N=()=>{let O=C;return o?O=b:k.route.Component?O=ae.createElement(k.route.Component,null):k.route.element&&(O=k.route.element),ae.createElement(kp,{match:k,routeContext:{outlet:C,matches:A},children:O})};return r&&(k.route.ErrorBoundary||k.route.errorElement||R===0)?ae.createElement(wp,{location:r.location,component:b,error:o,children:N(),routeContext:{outlet:null,matches:A}}):N()},null)}var Vf;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(Vf||(Vf={}));var ts;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(ts||(ts={}));function Fp(e){let t=ae.useContext(fu);return t||Te(!1),t}function Np(e){let t=ae.useContext(Wr);return t||Te(!1),t}function Up(e){let t=Np(),r=t.matches[t.matches.length-1];return r.route.id||Te(!1),r.route.id}function Bp(){var e;let t=ae.useContext(Dh),r=Fp(ts.UseRouteError),n=Up(ts.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function Kp(e){let{fallbackElement:t,router:r}=e,n=ae.useCallback(()=>r.state,[r]),i=Dp(r.subscribe,n,n),C=ae.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:o=>r.navigate(o),push:(o,b,A)=>r.navigate(o,{state:b,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(o,b,A)=>r.navigate(o,{replace:!0,state:b,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[r]),k=r.basename||"/",R=ae.useMemo(()=>({router:r,navigator:C,static:!1,basename:k}),[r,C,k]);return ae.createElement(ae.Fragment,null,ae.createElement(uu.Provider,{value:R},ae.createElement(fu.Provider,{value:i},ae.createElement(Wp,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:C},r.state.initialized?ae.createElement(Hp,null):t))),null)}function jp(e){return Rp(e.context)}function dn(e){Te(!1)}function Wp(e){let{basename:t="/",children:r=null,location:n,navigationType:i=$e.Pop,navigator:C,static:k=!1}=e;$i()&&Te(!1);let R=t.replace(/^\/*/,"/"),o=ae.useMemo(()=>({basename:R,navigator:C,static:k}),[R,C,k]);typeof n=="string"&&(n=pr(n));let{pathname:b="/",search:A="",hash:N="",state:O=null,key:U="default"}=n,M=ae.useMemo(()=>{let S=Vi(b,R);return S==null?null:{location:{pathname:S,search:A,hash:N,state:O,key:U},navigationType:i}},[R,b,A,N,O,U,i]);return M==null?null:ae.createElement(zi.Provider,{value:o},ae.createElement(Cs.Provider,{children:r,value:M}))}function Hp(e){let{children:t,location:r}=e,n=ae.useContext(uu),i=n&&!t?n.router.routes:rs(t);return Op(i,r)}var zf;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(zf||(zf={}));new Promise(()=>{});function rs(e,t){t===void 0&&(t=[]);let r=[];return ae.Children.forEach(e,(n,i)=>{if(!ae.isValidElement(n))return;if(n.type===ae.Fragment){r.push.apply(r,rs(n.props.children,t));return}n.type!==dn&&Te(!1),!n.props.index||!n.props.children||Te(!1);let C=[...t,i],k={id:n.props.id||C.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(k.children=rs(n.props.children,C)),r.push(k)}),r}function Gp(e){return Boolean(e.ErrorBoundary)||Boolean(e.errorElement)}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ns.apply(this,arguments)}function Vp(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,C;for(C=0;C<n.length;C++)i=n[C],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function zp(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $p(e,t){return e.button===0&&(!t||t==="_self")&&!zp(e)}function is(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Yp(e,t){let r=is(e);if(t)for(let n of t.keys())r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)});return r}const Xp=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Qp(e,t){return op({basename:t==null?void 0:t.basename,history:Dg({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Zp(),routes:e,detectErrorBoundary:Gp}).initialize()}function Zp(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ns({},t,{errors:Jp(t.errors)})),t}function Jp(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new lu(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let C=new Error(i.message);C.stack="",r[n]=C}else r[n]=i;return r}const qp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",em=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ah=ae.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:C,replace:k,state:R,target:o,to:b,preventScrollReset:A}=t,N=Vp(t,Xp),{basename:O}=ae.useContext(zi),U,M=!1;if(typeof b=="string"&&em.test(b)&&(U=b,qp)){let v=new URL(window.location.href),a=b.startsWith("//")?new URL(v.protocol+b):new URL(b),D=Vi(a.pathname,O);a.origin===v.origin&&D!=null?b=D+a.search+a.hash:M=!0}let S=Pp(b,{relative:i}),w=tm(b,{replace:k,state:R,target:o,preventScrollReset:A,relative:i});function p(v){n&&n(v),v.defaultPrevented||w(v)}return ae.createElement("a",ns({},N,{href:U||S,onClick:M||C?n:p,ref:r,target:o}))});var $f;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})($f||($f={}));var Yf;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yf||(Yf={}));function tm(e,t){let{target:r,replace:n,state:i,preventScrollReset:C,relative:k}=t===void 0?{}:t,R=Ls(),o=Yi(),b=Ph(e,{relative:k});return ae.useCallback(A=>{if($p(A,r)){A.preventDefault();let N=n!==void 0?n:vr(o)===vr(b);R(e,{replace:N,state:i,preventScrollReset:C,relative:k})}},[o,R,b,n,i,r,e,C,k])}function rm(e){let t=ae.useRef(is(e)),r=ae.useRef(!1),n=Yi(),i=ae.useMemo(()=>Yp(n.search,r.current?null:t.current),[n.search]),C=Ls(),k=ae.useCallback((R,o)=>{const b=is(typeof R=="function"?R(i):R);r.current=!0,C("?"+b,o)},[C,i]);return[i,k]}function nm(e,t){let{capture:r}=t||{};ae.useEffect(()=>{let n=r!=null?{capture:r}:void 0;return window.addEventListener("beforeunload",e,n),()=>{window.removeEventListener("beforeunload",e,n)}},[e,r])}function im(e,t){return t&&t.length===e.length?e.map((r,n)=>({...r,id:t[n]})):e.map((r,n)=>({...r,id:n}))}function am(...e){return{className:e.flat(1/0).filter(t=>t).join(" ").trim()}}function sm(e,t,r,n=""){const i=document.createElement(t);if(r!=null&&r.class){const C=r.class.split(" ");i.classList.add(...C)}return r!=null&&r.id&&i.setAttribute("id",r.id),r!=null&&r.attributes&&r.attributes.forEach(C=>{const k=C.split("=")[0],R=(C.split("=")[1]||"").replaceAll('"',"");i.setAttribute(k,R)}),n&&(i.innerHTML=n),e.append(i),i}function om(...e){return e.reduce((t,r)=>t.filter(n=>r.includes(n)))}function lm(){return Date.now()}function um(...e){return e.reduce((t,r)=>t.filter(n=>!r.includes(n)))}function fm(e){return e.map((t,r)=>t!==""?r:"").filter(String)}function Fr(e,t){return Math.trunc(Math.random()*(t-e+1)+e)}function cm(){const e=Fr(0,255).toString(16),t=Fr(0,255).toString(16),r=Fr(0,255).toString(16);return`#${e}${t}${r}`}function dm(){const e=Fr(0,255),t=Fr(0,255),r=Fr(0,255);return[e,t,r]}function hm(){let e;return()=>{const t=e>window.scrollY?"UP":"DOWN";return e=window.scrollY,t}}const vm=hm();function Ht(e){return Boolean(typeof e=="object"&&e!==null&&!Array.isArray(e))}function gm(e,t){return!t&&typeof e=="string"?e[0]:t&&typeof e!="string"?e[t].toString()[0]:null}function pm(e,t){const r=new Map,n=e[0];if(typeof n!="string"&&!Ht(n))throw new Error("Invalid value");if(!t&&Ht(n))throw new Error("No key provided");return e.forEach(i=>{const C=gm(i,t);r.has(C)?r.set(C,[...r.get(C),i]):r.set(C,[i])}),Array.from(r.entries())}function mm(e){return Object.keys(e).length===0}function ym(...e){return e.flat(1/0).filter(t=>t).join(" ").trim()}function Em(e){return new Date(+e)}function Tm(e,t){const r=e.slice(),n=r[0];if(typeof n!="string"&&!Ht(n))throw new Error("Invalid value");if(Ht(n)&&!t)throw new Error("No key provided");let i=[];return!t&&typeof n=="string"&&(i=r.filter(C=>C.trim()!=="")),t&&typeof n!="string"&&(i=r.filter(C=>C[t].toString().trim()!=="")),i}function _m({callback:e,delay:t,counts:r}){let n=0;const i=setInterval(()=>{e(),n+=1,n===r&&clearInterval(i)},t);return i}function Sm(e){const t=e.slice();for(let r=0;r<e.length;r++){const n=Fr(0,e.length-1);[t[r],t[n]]=[t[n],t[r]]}return t}function xm(e,t){const r=e.slice(),n=r[0];if(typeof n!="string"&&!Ht(n))throw new Error("Invalid value");if(Ht(n)&&!t)throw new Error("No key provided");let i=[];return!t&&typeof n=="string"&&(i=r.sort((C,k)=>C.localeCompare(k))),t&&typeof n!="string"&&(i=r.sort((C,k)=>C[t].toString().localeCompare(k[t].toString()))),i}function Cm(e,t,r="num"){const n=e.slice();return t&&n.sort((i,C)=>{if(r==="num"){if(+i[t]<+C[t])return-1;if(+i[t]>+C[t])return 1}else{if(i[t]<C[t])return-1;if(i[t]>C[t])return 1}return 0}),n}function Lm(e,t,r="..."){return e.length>t?`${e.substring(0,t).trim()}${r}`:e}function Dm(e,t){const r=e.slice(),n=r[0];if(typeof n!="string"&&!Ht(n))throw new Error("Invalid value");if(Ht(n)&&!t)throw new Error("No key provided");let i=0;return!t&&typeof n=="string"?i=e.length-r.reverse().findIndex(C=>C!==""):t&&typeof n!="string"&&(i=e.length-r.reverse().findIndex(C=>C[t]!=="")),r.reverse().splice(0,i)}function Pm(e,t){const r=e[0];if(typeof r!="string"&&!Ht(r))throw new Error("Invalid value");if(Ht(r)&&!t)throw new Error("No key provided");const n=e.slice();let i=0;return!t&&typeof r=="string"?i=n.findIndex(C=>C!==""):t&&typeof r!="string"&&(i=n.findIndex(C=>C[t]!=="")),n.splice(i)}const we={addId:im,className:am,createHTMLElem:sm,getCommonValues:om,getCurrentDateInMs:lm,getDifferentValues:um,getIndexesOfNonEmptyElements:fm,getRandomHEXColor:cm,getRandomNumber:Fr,getRandomRGBColor:dm,getScrollDirection:vm,groupBy:pm,isObject:Ht,isObjectEmpty:mm,join:ym,parseCurrentDateFromMs:Em,removeEmptyValues:Tm,setIntervalCounts:_m,shuffleArray:Sm,sortArrayLocalCompare:xm,sortArrayOfObj:Cm,stringCut:Lm,trimEndEmptyValues:Dm,trimStartEmptyValues:Pm};function mr({size:e="default",strokeWidth:t=2,height:r,width:n,children:i,className:C,...k}){const R={tiny:"12px",small:"16px",default:"24px",medium:"32px",large:"36px",extra:"48px",custom:"24px"};return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n||R[e],height:r||R[e],className:C,fill:"currentColor",stroke:"currentColor",strokeWidth:t,...k,children:i})}function Am(e){return X.jsxs(mr,{width:"139px",height:"17px",viewBox:"0 0 139 17",stroke:"none",...e,children:[X.jsx("path",{d:"M0 0.872559H3.80677V8.29413C3.80677 8.99836 3.86116 9.64843 4.0243 10.2443C4.18745 10.8402 4.45936 11.3278 4.84004 11.707C5.22072 12.1403 5.71016 12.4654 6.36275 12.6821C7.01534 12.8988 7.77669 13.0071 8.70119 13.0071C9.13625 13.0071 9.57131 12.9529 10.0608 12.8446C10.4958 12.7362 10.9309 12.6279 11.3659 12.4654C11.801 12.3029 12.1817 12.0862 12.508 11.8695C12.8886 11.6528 13.1606 11.3819 13.4325 11.1111V0.872559H17.2392V16.0949H13.4325V14.7948C12.508 15.3365 11.5291 15.7699 10.6046 15.9866C9.68008 16.2032 8.75558 16.3658 7.88546 16.3658C6.47151 16.3658 5.2751 16.2032 4.29622 15.8782C3.26295 15.499 2.44721 15.0115 1.849 14.3614C1.19641 13.7113 0.761355 12.9529 0.43506 11.9778C0.163147 11.0569 0 10.0276 0 8.83585V0.872559Z",fill:"#FBB811"}),X.jsx("path",{d:"M21.0469 0.873426H24.8536V2.17356C25.8869 1.57766 26.8658 1.19846 27.7903 0.98177C28.7148 0.765082 29.6393 0.656738 30.5094 0.656738C31.6515 0.656738 32.7391 0.819254 33.7724 1.14429C34.7513 1.46932 35.6214 2.01104 36.3283 2.6611C37.0353 3.31117 37.6335 4.17792 38.0142 5.15302C38.4493 6.12811 38.6124 7.3199 38.6124 8.62003V16.0958H34.8056V9.21592C34.8056 8.40334 34.6969 7.64493 34.425 6.99487C34.2618 6.3448 33.9355 5.74891 33.4461 5.31553C33.011 4.88216 32.4672 4.50295 31.8146 4.28626C31.162 4.06958 30.455 3.90706 29.6937 3.90706C29.2586 3.90706 28.8779 3.96123 28.4429 4.0154C28.0078 4.12375 27.5728 4.23209 27.1377 4.39461C26.7027 4.55712 26.322 4.77381 25.9413 4.9905C25.5606 5.26136 25.1799 5.53222 24.908 5.80308V16.0958H21.1013V0.873426H21.0469Z",fill:"#FBB811"}),X.jsx("path",{d:"M42.418 0.872559H46.2247V16.0949H42.418V0.872559Z",fill:"#FBB811"}),X.jsx("path",{d:"M47.9648 0.872559H52.4242L56.3941 10.0276L57.4274 12.5737L58.4607 10.0276L62.4306 0.872559H66.8899L59.6571 16.0949H55.2521L47.9648 0.872559Z",fill:"#FBB811"}),X.jsx("path",{d:"M67.7617 8.4023C67.7617 7.37303 67.9793 6.39793 68.4143 5.42284C68.8494 4.50192 69.4476 3.63516 70.2633 2.93093C71.079 2.22669 72.0036 1.6308 73.2 1.19743C74.342 0.764051 75.6472 0.547363 77.1155 0.547363C78.5838 0.547363 79.889 0.764051 81.031 1.19743C82.2275 1.6308 83.2063 2.22669 84.0221 2.9851C84.8378 3.74351 85.4904 4.61026 85.9255 5.63953C86.3605 6.66879 86.578 7.75223 86.578 8.94402C86.578 9.10653 86.578 9.26905 86.578 9.43156C86.578 9.59408 86.5781 9.75659 86.5237 9.86494H72.0579C72.2211 10.2983 72.493 10.7317 72.8737 11.1109C73.2543 11.4901 73.6894 11.8151 74.2332 12.086C74.7771 12.3568 75.4296 12.5735 76.1366 12.7361C76.8436 12.8986 77.6593 12.9527 78.5294 12.9527C79.3996 12.9527 80.2697 12.8444 81.1398 12.6819C82.0099 12.5194 82.8257 12.2485 83.6414 11.9776L84.9466 14.9029C84.4571 15.1196 83.9133 15.3363 83.4239 15.4988C82.9344 15.6613 82.3906 15.8239 81.7924 15.9322C81.2486 16.0405 80.6504 16.1489 80.0522 16.2031C79.4539 16.2572 78.8014 16.3114 78.1488 16.3114C76.4085 16.3114 74.9402 16.0947 73.635 15.7155C72.3298 15.2821 71.2422 14.7404 70.3721 14.0362C69.502 13.3319 68.8494 12.4652 68.4143 11.5443C67.9793 10.5692 67.7617 9.53991 67.7617 8.4023ZM82.445 6.93965C82.2818 6.50628 82.1187 6.12707 81.7924 5.74787C81.5205 5.36867 81.1398 5.04364 80.7047 4.77278C80.2697 4.50192 79.7802 4.28523 79.182 4.12271C78.6382 3.9602 77.9856 3.90602 77.2787 3.90602C76.5717 3.90602 75.9191 4.01437 75.3209 4.17688C74.7227 4.3394 74.1789 4.55609 73.7438 4.82695C73.3087 5.09781 72.9281 5.42284 72.6018 5.80204C72.3298 6.18125 72.1123 6.56045 71.9492 6.93965H82.445Z",fill:"#FBB811"}),X.jsx("path",{d:"M89.5703 0.872802H93.3771V3.03968C94.2472 2.38962 95.1173 1.8479 96.0418 1.41452C96.9663 0.981146 97.9452 0.601942 98.8697 0.385254L100.012 3.90643C98.5434 4.06895 97.2382 4.39398 96.0962 4.88153C94.9542 5.36908 94.0841 6.12749 93.3771 7.04841V16.0951H89.5703V0.872802Z",fill:"#FBB811"}),X.jsx("path",{d:"M102.455 11.4359C103.489 12.0318 104.631 12.5194 105.881 12.7902C107.132 13.0611 108.383 13.2236 109.688 13.2236C110.558 13.2236 111.32 13.1694 111.864 13.0611C112.462 12.9527 112.897 12.7902 113.277 12.5735C113.658 12.411 113.876 12.1943 114.039 11.9235C114.202 11.7068 114.256 11.4359 114.256 11.1651C114.256 10.7859 114.093 10.515 113.767 10.2441C113.441 9.97329 112.951 9.86494 112.19 9.86494C111.864 9.86494 111.483 9.86494 111.102 9.91912C110.722 9.97329 110.286 10.0275 109.906 10.0816C109.471 10.1358 109.036 10.19 108.546 10.19C108.111 10.2441 107.622 10.2441 107.132 10.2441C106.099 10.2441 105.229 10.1358 104.468 9.91912C103.761 9.70243 103.162 9.3774 102.673 8.99819C102.238 8.61899 101.857 8.13144 101.694 7.64389C101.531 7.15634 101.368 6.56045 101.368 5.91039C101.368 5.15198 101.531 4.44775 101.912 3.74351C102.292 3.09345 102.782 2.55173 103.489 2.06418C104.141 1.57663 104.957 1.19743 105.936 0.926567C106.915 0.655707 107.948 0.547363 109.144 0.547363C109.743 0.547363 110.395 0.601535 111.048 0.655707C111.7 0.709879 112.353 0.818223 113.006 0.926567C113.658 1.03491 114.256 1.19743 114.855 1.35994C115.453 1.52246 115.997 1.68497 116.432 1.84749L115.29 4.88112C114.311 4.50192 113.332 4.23106 112.353 4.01437C111.374 3.79768 110.395 3.68934 109.362 3.68934C108.655 3.68934 108.057 3.74351 107.567 3.85185C107.078 3.9602 106.643 4.12271 106.371 4.28523C106.045 4.44775 105.827 4.66443 105.664 4.88112C105.501 5.09781 105.446 5.36867 105.446 5.58536C105.446 5.74787 105.501 5.91039 105.555 6.07291C105.61 6.23542 105.773 6.34376 105.936 6.45211C106.099 6.56045 106.317 6.6688 106.588 6.72297C106.86 6.77714 107.187 6.83131 107.567 6.83131C107.948 6.83131 108.329 6.83131 108.709 6.77714C109.09 6.72297 109.525 6.6688 109.96 6.61462C110.395 6.56045 110.83 6.50628 111.32 6.50628C111.809 6.45211 112.244 6.45211 112.788 6.45211C113.713 6.45211 114.528 6.56045 115.181 6.77714C115.888 6.99383 116.432 7.31886 116.867 7.69806C117.302 8.07727 117.628 8.56482 117.9 9.05236C118.118 9.59408 118.226 10.1358 118.226 10.7859C118.226 11.5984 118.063 12.3027 117.682 13.0069C117.302 13.7112 116.758 14.307 116.051 14.7946C115.344 15.2821 114.42 15.7155 113.332 15.9864C112.244 16.2572 110.993 16.4198 109.525 16.4198C108.655 16.4198 107.785 16.3656 106.969 16.2572C106.153 16.1489 105.392 15.9864 104.631 15.8239C103.869 15.6613 103.217 15.4447 102.564 15.1738C101.912 14.9029 101.313 14.6321 100.77 14.3612L102.455 11.4359Z",fill:"#FBB811"}),X.jsx("path",{d:"M119.969 8.40229C119.969 7.37303 120.186 6.39793 120.621 5.42284C121.056 4.50191 121.655 3.63516 122.47 2.93093C123.286 2.22669 124.211 1.6308 125.407 1.19743C126.549 0.764051 127.854 0.547363 129.323 0.547363C130.791 0.547363 132.096 0.764051 133.238 1.19743C134.434 1.6308 135.413 2.22669 136.229 2.9851C137.045 3.74351 137.697 4.61026 138.132 5.63953C138.568 6.66879 138.785 7.75223 138.785 8.94401C138.785 9.10653 138.785 9.26905 138.785 9.43156C138.785 9.59408 138.785 9.75659 138.731 9.86494H124.265C124.428 10.2983 124.7 10.7317 125.081 11.1109C125.461 11.4901 125.896 11.8151 126.44 12.086C126.984 12.3568 127.637 12.5735 128.344 12.736C129.051 12.8986 129.866 12.9527 130.736 12.9527C131.607 12.9527 132.477 12.8444 133.347 12.6819C134.217 12.5194 135.033 12.2485 135.848 11.9776L137.154 14.9029C136.664 15.1196 136.12 15.3363 135.631 15.4988C135.141 15.6613 134.598 15.8239 133.999 15.9322C133.456 16.0405 132.857 16.1489 132.259 16.2031C131.661 16.2572 131.008 16.3114 130.356 16.3114C128.616 16.3114 127.147 16.0947 125.842 15.7155C124.537 15.2821 123.449 14.7404 122.579 14.0362C121.709 13.3319 121.056 12.4652 120.621 11.5443C120.186 10.5692 119.969 9.5399 119.969 8.40229ZM134.652 6.93965C134.489 6.50628 134.326 6.12707 133.999 5.74787C133.727 5.36867 133.347 5.04363 132.912 4.77277C132.477 4.50191 131.987 4.28523 131.389 4.12271C130.845 3.9602 130.193 3.90602 129.486 3.90602C128.779 3.90602 128.126 4.01437 127.528 4.17688C126.93 4.3394 126.386 4.55609 125.951 4.82695C125.516 5.09781 125.135 5.42284 124.809 5.80204C124.537 6.18124 124.319 6.56045 124.156 6.93965H134.652Z",fill:"#FBB811"})]})}function Rm(e){return X.jsx(mr,{stroke:"none",...e,children:X.jsx("path",{d:"M0.619629 1.96199H5.91932V12.2941C5.91932 13.2745 5.99504 14.1795 6.22216 15.0091C6.4493 15.8387 6.82784 16.5175 7.35782 17.0454C7.88779 17.6486 8.56918 18.1012 9.4777 18.4029C10.3862 18.7046 11.4461 18.8554 12.7332 18.8554C13.3389 18.8554 13.9446 18.7799 14.626 18.6291C15.2316 18.4782 15.8374 18.3275 16.443 18.1012C17.0487 17.875 17.5787 17.5733 18.033 17.2716C18.5628 16.9699 18.9415 16.5928 19.32 16.2158V1.96199H24.6196V23.1541H19.32V21.3442C18.033 22.0983 16.6702 22.7017 15.3831 23.0033C14.096 23.3049 12.8089 23.5313 11.5976 23.5313C9.62911 23.5313 7.9635 23.3049 6.60072 22.8524C5.16223 22.3245 4.02658 21.6458 3.19376 20.7408C2.28524 19.8357 1.67957 18.7799 1.22531 17.4224C0.846758 16.1404 0.619629 14.7074 0.619629 13.0483V1.96199Z",fill:"#FBB811"})})}function Im(e){return X.jsxs(mr,{stroke:"none",...e,children:[X.jsx("path",{d:"M22.0007 4.39923H15.1282C14.0081 4.39923 12.976 4.99927 12.416 5.96735L10.0078 10.1437C10.4798 10.4157 10.8719 10.8077 11.1519 11.2878L15.9443 19.5844L23.3608 6.74341C23.9609 5.70333 23.2088 4.39923 22.0007 4.39923Z",fill:"#00A698"}),X.jsx("path",{d:"M8.43994 9.72787H1.56741C0.359311 9.72787 -0.392747 11.032 0.215301 12.0801L4.55163 19.6007L10.0081 10.1519C9.53606 9.87196 9 9.72787 8.43994 9.72787Z",fill:"#EA552B"}),X.jsx("path",{d:"M10.0066 10.1431L4.55017 19.5918H15.9431L11.1507 11.2872C10.8707 10.8071 10.4786 10.4152 10.0066 10.1431Z",fill:"#4723D1"}),X.jsx("path",{d:"M7.96662 8.11152C8.99175 8.11152 9.82275 7.28049 9.82275 6.25537C9.82275 5.23026 8.99175 4.39923 7.96662 4.39923C6.94149 4.39923 6.11047 5.23026 6.11047 6.25537C6.11047 7.28049 6.94149 8.11152 7.96662 8.11152Z",fill:"#EA552B"})]})}function Om(e){return X.jsxs(mr,{width:"103px",height:"28px",viewBox:"0 0 103 28",stroke:"none",...e,children:[X.jsx("path",{d:"M25.6689 5.13281H17.651C16.3442 5.13281 15.1401 5.83287 14.4867 6.96229L11.6772 11.8347C12.2279 12.152 12.6853 12.6094 13.012 13.1694L18.6031 22.8489L27.2557 7.86769C27.9558 6.65426 27.0784 5.13281 25.6689 5.13281Z",fill:"#00A698"}),X.jsx("path",{d:"M9.8466 11.349H1.82864C0.419196 11.349 -0.458205 12.8705 0.251184 14.0932L5.31024 22.8672L11.6761 11.8437C11.1254 11.517 10.5 11.349 9.8466 11.349Z",fill:"#EA552B"}),X.jsx("path",{d:"M11.675 11.8344L5.30914 22.8579H18.6008L13.0097 13.1691C12.683 12.6091 12.2257 12.1517 11.675 11.8344Z",fill:"#4723D1"}),X.jsx("path",{d:"M9.29499 9.46382C10.491 9.46382 11.4605 8.49429 11.4605 7.29832C11.4605 6.10234 10.491 5.13281 9.29499 5.13281C8.09901 5.13281 7.12949 6.10234 7.12949 7.29832C7.12949 8.49429 8.09901 9.46382 9.29499 9.46382Z",fill:"#EA552B"}),X.jsx("path",{d:"M50.583 8.11096H54.0179V8.45632L49.5376 20.3666H46.7373L43.7784 12.2553L40.8009 20.3666H38.01L33.5016 8.45632V8.11096H36.9646L39.6061 15.5689L42.369 8.11096H45.1692L47.9321 15.5689L50.583 8.11096Z",fill:"white"}),X.jsx("path",{d:"M55.8939 20.365V8.10935H59.3755V20.365H55.8939ZM57.63 6.88659C58.8061 6.88659 59.7489 5.93451 59.7489 4.76776C59.7489 3.601 58.7968 2.64893 57.63 2.64893C56.4633 2.64893 55.5112 3.601 55.5112 4.76776C55.5112 5.93451 56.4539 6.88659 57.63 6.88659Z",fill:"white"}),X.jsx("path",{d:"M67.1692 20.5823C66.2077 20.5823 65.2743 20.4702 64.3876 20.2369C63.5009 20.0129 62.8008 19.7049 62.2874 19.3222V16.4099C62.9035 16.8486 63.6409 17.2127 64.4996 17.4833C65.349 17.7634 66.1797 17.894 66.9731 17.894C67.9159 17.894 68.6346 17.7914 69.1293 17.586C69.624 17.3807 69.8667 17.082 69.8667 16.6899C69.8667 16.5499 69.8387 16.4286 69.7827 16.3166C69.7267 16.2139 69.6333 16.1206 69.512 16.0459C69.3907 15.9712 69.26 15.9059 69.1293 15.8592C68.9986 15.8032 68.8213 15.7659 68.6066 15.7285C68.3919 15.6912 68.1959 15.6632 68.0279 15.6445C67.8599 15.6259 67.6452 15.5979 67.3745 15.5699C66.9451 15.5139 66.6184 15.4765 66.3851 15.4392C66.1517 15.4019 65.8157 15.3458 65.3957 15.2525C64.9663 15.1685 64.6303 15.0658 64.3783 14.9631C64.1262 14.8605 63.8462 14.7111 63.5195 14.5151C63.2022 14.3191 62.9502 14.1044 62.7728 13.8617C62.5955 13.619 62.4461 13.3204 62.3248 12.9657C62.2034 12.6016 62.1381 12.2003 62.1381 11.7616C62.1381 10.5948 62.6515 9.6614 63.6875 8.94268C64.7236 8.22396 66.0771 7.86926 67.7665 7.86926C68.6066 7.86926 69.4653 7.97194 70.3427 8.17729C71.2201 8.38264 71.9855 8.66266 72.6296 9.01735V11.9296C71.9762 11.5095 71.2201 11.1735 70.3521 10.9122C69.4933 10.6508 68.6999 10.5295 67.9719 10.5295C67.2905 10.5295 66.7491 10.6321 66.3478 10.8282C65.9371 11.0242 65.7317 11.2855 65.7317 11.6122C65.7317 11.7522 65.7597 11.8736 65.8064 11.9856C65.8624 12.0883 65.9557 12.1909 66.0864 12.2656C66.2264 12.3496 66.3478 12.415 66.4598 12.4616C66.5718 12.5083 66.7491 12.555 66.9918 12.6016C67.2345 12.6483 67.4212 12.6856 67.5705 12.7043C67.7105 12.723 67.9345 12.7603 68.2426 12.7883C68.6439 12.835 68.98 12.8723 69.232 12.919C69.4933 12.9563 69.82 13.0217 70.2214 13.115C70.6228 13.199 70.9588 13.3017 71.2295 13.4137C71.4908 13.5257 71.7802 13.675 72.0882 13.8711C72.3962 14.0577 72.6389 14.2818 72.8256 14.5151C73.0123 14.7578 73.1616 15.0472 73.283 15.4019C73.4043 15.7565 73.4696 16.1486 73.4696 16.5686C73.4696 17.7634 72.8909 18.7341 71.7428 19.4622C70.5668 20.2182 69.0546 20.5823 67.1692 20.5823Z",fill:"white"}),X.jsx("path",{d:"M87.7429 13.9603V15.1457H78.8569C79.0809 15.9111 79.5663 16.5085 80.2944 16.9472C81.0224 17.3859 81.9278 17.6006 83.0012 17.6006C83.7666 17.6006 84.532 17.4699 85.3067 17.1992C86.0721 16.9379 86.7069 16.5832 87.2109 16.1538V19.2527C86.5948 19.6541 85.8108 19.9808 84.8587 20.2141C83.9066 20.4568 82.9639 20.5688 82.0305 20.5688C79.9957 20.5688 78.3529 19.9901 77.1114 18.8234C75.87 17.6566 75.254 16.1258 75.254 14.2217C75.254 12.3175 75.87 10.7774 77.1114 9.61998C78.3529 8.45322 79.9863 7.87451 82.0118 7.87451C83.7386 7.87451 85.1201 8.42522 86.1655 9.53597C87.2202 10.6561 87.7429 12.1215 87.7429 13.9603ZM81.8438 10.432C81.1251 10.432 80.5184 10.6374 80.005 11.0574C79.4916 11.4775 79.1369 12.0468 78.9316 12.7749H84.3267C84.2707 12.0655 84.0186 11.4868 83.5706 11.0668C83.1226 10.6467 82.5439 10.432 81.8438 10.432Z",fill:"white"}),X.jsx("path",{d:"M98.831 8.11096H102.453V8.45632L93.8653 25.351H90.421V25.0056L93.7439 18.5838L88.5635 8.45632V8.11096H92.1852L95.5734 15.1395L98.831 8.11096Z",fill:"white"})]})}var ir={},Mm={get exports(){return ir},set exports(e){ir=e}};(function(e,t){(function(n,i){e.exports=i(ae)})(ic,r=>(()=>{var n={"./node_modules/css-mediaquery/index.js":(R,o)=>{o.match=M,o.parse=S;var b=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,A=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,N=/^(?:(min|max)-)?(.+)/,O=/(em|rem|px|cm|mm|in|pt|pc)?$/,U=/(dpi|dpcm|dppx)?$/;function M(a,D){return S(a).some(function(T){var c=T.inverse,l=T.type==="all"||D.type===T.type;if(l&&c||!(l||c))return!1;var d=T.expressions.every(function(f){var x=f.feature,L=f.modifier,h=f.value,m=D[x];if(!m)return!1;switch(x){case"orientation":case"scan":return m.toLowerCase()===h.toLowerCase();case"width":case"height":case"device-width":case"device-height":h=v(h),m=v(m);break;case"resolution":h=p(h),m=p(m);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":h=w(h),m=w(m);break;case"grid":case"color":case"color-index":case"monochrome":h=parseInt(h,10)||1,m=parseInt(m,10)||0;break}switch(L){case"min":return m>=h;case"max":return m<=h;default:return m===h}});return d&&!c||!d&&c})}function S(a){return a.split(",").map(function(D){D=D.trim();var T=D.match(b),c=T[1],l=T[2],d=T[3]||"",f={};return f.inverse=!!c&&c.toLowerCase()==="not",f.type=l?l.toLowerCase():"all",d=d.match(/\([^\)]+\)/g)||[],f.expressions=d.map(function(x){var L=x.match(A),h=L[1].toLowerCase().match(N);return{modifier:h[1],feature:h[2],value:L[2]}}),f})}function w(a){var D=Number(a),T;return D||(T=a.match(/^(\d+)\s*\/\s*(\d+)$/),D=T[1]/T[2]),D}function p(a){var D=parseFloat(a),T=String(a).match(U)[1];switch(T){case"dpcm":return D/2.54;case"dppx":return D*96;default:return D}}function v(a){var D=parseFloat(a),T=String(a).match(O)[1];switch(T){case"em":return D*16;case"rem":return D*16;case"cm":return D*96/2.54;case"mm":return D*96/2.54/10;case"in":return D*96;case"pt":return D*72;case"pc":return D*72/12;default:return D}}},"./node_modules/hyphenate-style-name/index.js":(R,o,b)=>{b.r(o),b.d(o,{default:()=>S});var A=/[A-Z]/g,N=/^ms-/,O={};function U(w){return"-"+w.toLowerCase()}function M(w){if(O.hasOwnProperty(w))return O[w];var p=w.replace(A,U);return O[w]=N.test(p)?"-"+p:p}const S=M},"./node_modules/matchmediaquery/index.js":(R,o,b)=>{var A=b("./node_modules/css-mediaquery/index.js").match,N=typeof window<"u"?window.matchMedia:null;function O(M,S,w){var p=this;if(N&&!w){var v=N.call(window,M);this.matches=v.matches,this.media=v.media,v.addListener(T)}else this.matches=A(M,S),this.media=M;this.addListener=a,this.removeListener=D,this.dispose=c;function a(l){v&&v.addListener(l)}function D(l){v&&v.removeListener(l)}function T(l){p.matches=l.matches,p.media=l.media}function c(){v&&v.removeListener(T)}}function U(M,S,w){return new O(M,S,w)}R.exports=U},"./node_modules/object-assign/index.js":R=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function N(U){if(U==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(U)}function O(){try{if(!Object.assign)return!1;var U=new String("abc");if(U[5]="de",Object.getOwnPropertyNames(U)[0]==="5")return!1;for(var M={},S=0;S<10;S++)M["_"+String.fromCharCode(S)]=S;var w=Object.getOwnPropertyNames(M).map(function(v){return M[v]});if(w.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(v){p[v]=v}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}R.exports=O()?Object.assign:function(U,M){for(var S,w=N(U),p,v=1;v<arguments.length;v++){S=Object(arguments[v]);for(var a in S)b.call(S,a)&&(w[a]=S[a]);if(o){p=o(S);for(var D=0;D<p.length;D++)A.call(S,p[D])&&(w[p[D]]=S[p[D]])}}return w}},"./node_modules/prop-types/checkPropTypes.js":(R,o,b)=>{var A=function(){};{var N=b("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),O={},U=b("./node_modules/prop-types/lib/has.js");A=function(S){var w="Warning: "+S;typeof console<"u"&&console.error(w);try{throw new Error(w)}catch{}}}function M(S,w,p,v,a){for(var D in S)if(U(S,D)){var T;try{if(typeof S[D]!="function"){var c=Error((v||"React class")+": "+p+" type `"+D+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof S[D]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}T=S[D](w,D,v,p,null,N)}catch(d){T=d}if(T&&!(T instanceof Error)&&A((v||"React class")+": type specification of "+p+" `"+D+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof T+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),T instanceof Error&&!(T.message in O)){O[T.message]=!0;var l=a?a():"";A("Failed "+p+" type: "+T.message+(l??""))}}}M.resetWarningCache=function(){O={}},R.exports=M},"./node_modules/prop-types/factoryWithTypeCheckers.js":(R,o,b)=>{var A=b("./node_modules/react-is/index.js"),N=b("./node_modules/object-assign/index.js"),O=b("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),U=b("./node_modules/prop-types/lib/has.js"),M=b("./node_modules/prop-types/checkPropTypes.js"),S=function(){};S=function(p){var v="Warning: "+p;typeof console<"u"&&console.error(v);try{throw new Error(v)}catch{}};function w(){return null}R.exports=function(p,v){var a=typeof Symbol=="function"&&Symbol.iterator,D="@@iterator";function T(V){var z=V&&(a&&V[a]||V[D]);if(typeof z=="function")return z}var c="<<anonymous>>",l={array:L("array"),bigint:L("bigint"),bool:L("boolean"),func:L("function"),number:L("number"),object:L("object"),string:L("string"),symbol:L("symbol"),any:h(),arrayOf:m,element:I(),elementType:g(),instanceOf:E,node:_(),objectOf:y,oneOf:u,oneOfType:s,shape:P,exact:B};function d(V,z){return V===z?V!==0||1/V===1/z:V!==V&&z!==z}function f(V,z){this.message=V,this.data=z&&typeof z=="object"?z:{},this.stack=""}f.prototype=Error.prototype;function x(V){var z={},Y=0;function Q(Z,J,ie,le,oe,re,ne){if(le=le||c,re=re||ie,ne!==O){if(v){var pe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw pe.name="Invariant Violation",pe}else if(typeof console<"u"){var ye=le+":"+ie;!z[ye]&&Y<3&&(S("You are manually calling a React.PropTypes validation function for the `"+re+"` prop on `"+le+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),z[ye]=!0,Y++)}}return J[ie]==null?Z?J[ie]===null?new f("The "+oe+" `"+re+"` is marked as required "+("in `"+le+"`, but its value is `null`.")):new f("The "+oe+" `"+re+"` is marked as required in "+("`"+le+"`, but its value is `undefined`.")):null:V(J,ie,le,oe,re)}var q=Q.bind(null,!1);return q.isRequired=Q.bind(null,!0),q}function L(V){function z(Y,Q,q,Z,J,ie){var le=Y[Q],oe=W(le);if(oe!==V){var re=H(le);return new f("Invalid "+Z+" `"+J+"` of type "+("`"+re+"` supplied to `"+q+"`, expected ")+("`"+V+"`."),{expectedType:V})}return null}return x(z)}function h(){return x(w)}function m(V){function z(Y,Q,q,Z,J){if(typeof V!="function")return new f("Property `"+J+"` of component `"+q+"` has invalid PropType notation inside arrayOf.");var ie=Y[Q];if(!Array.isArray(ie)){var le=W(ie);return new f("Invalid "+Z+" `"+J+"` of type "+("`"+le+"` supplied to `"+q+"`, expected an array."))}for(var oe=0;oe<ie.length;oe++){var re=V(ie,oe,q,Z,J+"["+oe+"]",O);if(re instanceof Error)return re}return null}return x(z)}function I(){function V(z,Y,Q,q,Z){var J=z[Y];if(!p(J)){var ie=W(J);return new f("Invalid "+q+" `"+Z+"` of type "+("`"+ie+"` supplied to `"+Q+"`, expected a single ReactElement."))}return null}return x(V)}function g(){function V(z,Y,Q,q,Z){var J=z[Y];if(!A.isValidElementType(J)){var ie=W(J);return new f("Invalid "+q+" `"+Z+"` of type "+("`"+ie+"` supplied to `"+Q+"`, expected a single ReactElement type."))}return null}return x(V)}function E(V){function z(Y,Q,q,Z,J){if(!(Y[Q]instanceof V)){var ie=V.name||c,le=$(Y[Q]);return new f("Invalid "+Z+" `"+J+"` of type "+("`"+le+"` supplied to `"+q+"`, expected ")+("instance of `"+ie+"`."))}return null}return x(z)}function u(V){if(!Array.isArray(V))return arguments.length>1?S("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):S("Invalid argument supplied to oneOf, expected an array."),w;function z(Y,Q,q,Z,J){for(var ie=Y[Q],le=0;le<V.length;le++)if(d(ie,V[le]))return null;var oe=JSON.stringify(V,function(ne,pe){var ye=H(pe);return ye==="symbol"?String(pe):pe});return new f("Invalid "+Z+" `"+J+"` of value `"+String(ie)+"` "+("supplied to `"+q+"`, expected one of "+oe+"."))}return x(z)}function y(V){function z(Y,Q,q,Z,J){if(typeof V!="function")return new f("Property `"+J+"` of component `"+q+"` has invalid PropType notation inside objectOf.");var ie=Y[Q],le=W(ie);if(le!=="object")return new f("Invalid "+Z+" `"+J+"` of type "+("`"+le+"` supplied to `"+q+"`, expected an object."));for(var oe in ie)if(U(ie,oe)){var re=V(ie,oe,q,Z,J+"."+oe,O);if(re instanceof Error)return re}return null}return x(z)}function s(V){if(!Array.isArray(V))return S("Invalid argument supplied to oneOfType, expected an instance of array."),w;for(var z=0;z<V.length;z++){var Y=V[z];if(typeof Y!="function")return S("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+G(Y)+" at index "+z+"."),w}function Q(q,Z,J,ie,le){for(var oe=[],re=0;re<V.length;re++){var ne=V[re],pe=ne(q,Z,J,ie,le,O);if(pe==null)return null;pe.data&&U(pe.data,"expectedType")&&oe.push(pe.data.expectedType)}var ye=oe.length>0?", expected one of type ["+oe.join(", ")+"]":"";return new f("Invalid "+ie+" `"+le+"` supplied to "+("`"+J+"`"+ye+"."))}return x(Q)}function _(){function V(z,Y,Q,q,Z){return K(z[Y])?null:new f("Invalid "+q+" `"+Z+"` supplied to "+("`"+Q+"`, expected a ReactNode."))}return x(V)}function F(V,z,Y,Q,q){return new f((V||"React class")+": "+z+" type `"+Y+"."+Q+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+q+"`.")}function P(V){function z(Y,Q,q,Z,J){var ie=Y[Q],le=W(ie);if(le!=="object")return new f("Invalid "+Z+" `"+J+"` of type `"+le+"` "+("supplied to `"+q+"`, expected `object`."));for(var oe in V){var re=V[oe];if(typeof re!="function")return F(q,Z,J,oe,H(re));var ne=re(ie,oe,q,Z,J+"."+oe,O);if(ne)return ne}return null}return x(z)}function B(V){function z(Y,Q,q,Z,J){var ie=Y[Q],le=W(ie);if(le!=="object")return new f("Invalid "+Z+" `"+J+"` of type `"+le+"` "+("supplied to `"+q+"`, expected `object`."));var oe=N({},Y[Q],V);for(var re in oe){var ne=V[re];if(U(V,re)&&typeof ne!="function")return F(q,Z,J,re,H(ne));if(!ne)return new f("Invalid "+Z+" `"+J+"` key `"+re+"` supplied to `"+q+"`.\nBad object: "+JSON.stringify(Y[Q],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(V),null,"  "));var pe=ne(ie,re,q,Z,J+"."+re,O);if(pe)return pe}return null}return x(z)}function K(V){switch(typeof V){case"number":case"string":case"undefined":return!0;case"boolean":return!V;case"object":if(Array.isArray(V))return V.every(K);if(V===null||p(V))return!0;var z=T(V);if(z){var Y=z.call(V),Q;if(z!==V.entries){for(;!(Q=Y.next()).done;)if(!K(Q.value))return!1}else for(;!(Q=Y.next()).done;){var q=Q.value;if(q&&!K(q[1]))return!1}}else return!1;return!0;default:return!1}}function j(V,z){return V==="symbol"?!0:z?z["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&z instanceof Symbol:!1}function W(V){var z=typeof V;return Array.isArray(V)?"array":V instanceof RegExp?"object":j(z,V)?"symbol":z}function H(V){if(typeof V>"u"||V===null)return""+V;var z=W(V);if(z==="object"){if(V instanceof Date)return"date";if(V instanceof RegExp)return"regexp"}return z}function G(V){var z=H(V);switch(z){case"array":case"object":return"an "+z;case"boolean":case"date":case"regexp":return"a "+z;default:return z}}function $(V){return!V.constructor||!V.constructor.name?c:V.constructor.name}return l.checkPropTypes=M,l.resetWarningCache=M.resetWarningCache,l.PropTypes=l,l}},"./node_modules/prop-types/index.js":(R,o,b)=>{{var A=b("./node_modules/react-is/index.js"),N=!0;R.exports=b("./node_modules/prop-types/factoryWithTypeCheckers.js")(A.isElement,N)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":R=>{var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";R.exports=o},"./node_modules/prop-types/lib/has.js":R=>{R.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(R,o)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var b=typeof Symbol=="function"&&Symbol.for,A=b?Symbol.for("react.element"):60103,N=b?Symbol.for("react.portal"):60106,O=b?Symbol.for("react.fragment"):60107,U=b?Symbol.for("react.strict_mode"):60108,M=b?Symbol.for("react.profiler"):60114,S=b?Symbol.for("react.provider"):60109,w=b?Symbol.for("react.context"):60110,p=b?Symbol.for("react.async_mode"):60111,v=b?Symbol.for("react.concurrent_mode"):60111,a=b?Symbol.for("react.forward_ref"):60112,D=b?Symbol.for("react.suspense"):60113,T=b?Symbol.for("react.suspense_list"):60120,c=b?Symbol.for("react.memo"):60115,l=b?Symbol.for("react.lazy"):60116,d=b?Symbol.for("react.block"):60121,f=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,L=b?Symbol.for("react.scope"):60119;function h(ne){return typeof ne=="string"||typeof ne=="function"||ne===O||ne===v||ne===M||ne===U||ne===D||ne===T||typeof ne=="object"&&ne!==null&&(ne.$$typeof===l||ne.$$typeof===c||ne.$$typeof===S||ne.$$typeof===w||ne.$$typeof===a||ne.$$typeof===f||ne.$$typeof===x||ne.$$typeof===L||ne.$$typeof===d)}function m(ne){if(typeof ne=="object"&&ne!==null){var pe=ne.$$typeof;switch(pe){case A:var ye=ne.type;switch(ye){case p:case v:case O:case M:case U:case D:return ye;default:var be=ye&&ye.$$typeof;switch(be){case w:case a:case l:case c:case S:return be;default:return pe}}case N:return pe}}}var I=p,g=v,E=w,u=S,y=A,s=a,_=O,F=l,P=c,B=N,K=M,j=U,W=D,H=!1;function G(ne){return H||(H=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),$(ne)||m(ne)===p}function $(ne){return m(ne)===v}function V(ne){return m(ne)===w}function z(ne){return m(ne)===S}function Y(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===A}function Q(ne){return m(ne)===a}function q(ne){return m(ne)===O}function Z(ne){return m(ne)===l}function J(ne){return m(ne)===c}function ie(ne){return m(ne)===N}function le(ne){return m(ne)===M}function oe(ne){return m(ne)===U}function re(ne){return m(ne)===D}o.AsyncMode=I,o.ConcurrentMode=g,o.ContextConsumer=E,o.ContextProvider=u,o.Element=y,o.ForwardRef=s,o.Fragment=_,o.Lazy=F,o.Memo=P,o.Portal=B,o.Profiler=K,o.StrictMode=j,o.Suspense=W,o.isAsyncMode=G,o.isConcurrentMode=$,o.isContextConsumer=V,o.isContextProvider=z,o.isElement=Y,o.isForwardRef=Q,o.isFragment=q,o.isLazy=Z,o.isMemo=J,o.isPortal=ie,o.isProfiler=le,o.isStrictMode=oe,o.isSuspense=re,o.isValidElementType=h,o.typeOf=m})()},"./node_modules/react-is/index.js":(R,o,b)=>{R.exports=b("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(R,o,b)=>{b.r(o),b.d(o,{shallowEqualArrays:()=>N,shallowEqualObjects:()=>A});function A(O,U){if(O===U)return!0;if(!O||!U)return!1;var M=Object.keys(O),S=Object.keys(U),w=M.length;if(S.length!==w)return!1;for(var p=0;p<w;p++){var v=M[p];if(O[v]!==U[v]||!Object.prototype.hasOwnProperty.call(U,v))return!1}return!0}function N(O,U){if(O===U)return!0;if(!O||!U)return!1;var M=O.length;if(U.length!==M)return!1;for(var S=0;S<M;S++)if(O[S]!==U[S])return!1;return!0}},"./src/Component.ts":function(R,o,b){var A=this&&this.__rest||function(M,S){var w={};for(var p in M)Object.prototype.hasOwnProperty.call(M,p)&&S.indexOf(p)<0&&(w[p]=M[p]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,p=Object.getOwnPropertySymbols(M);v<p.length;v++)S.indexOf(p[v])<0&&Object.prototype.propertyIsEnumerable.call(M,p[v])&&(w[p[v]]=M[p[v]]);return w},N=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(o,"__esModule",{value:!0});var O=N(b("./src/useMediaQuery.ts")),U=function(M){var S=M.children,w=M.device,p=M.onChange,v=A(M,["children","device","onChange"]),a=(0,O.default)(v,w,p);return typeof S=="function"?S(a):a?S:null};o.default=U},"./src/Context.ts":(R,o,b)=>{Object.defineProperty(o,"__esModule",{value:!0});var A=b("react"),N=(0,A.createContext)(void 0);o.default=N},"./src/index.ts":function(R,o,b){var A=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(o,"__esModule",{value:!0}),o.Context=o.toQuery=o.useMediaQuery=o.default=void 0;var N=A(b("./src/useMediaQuery.ts"));o.useMediaQuery=N.default;var O=A(b("./src/Component.ts"));o.default=O.default;var U=A(b("./src/toQuery.ts"));o.toQuery=U.default;var M=A(b("./src/Context.ts"));o.Context=M.default},"./src/mediaQuery.ts":function(R,o,b){var A=this&&this.__assign||function(){return A=Object.assign||function(D){for(var T,c=1,l=arguments.length;c<l;c++){T=arguments[c];for(var d in T)Object.prototype.hasOwnProperty.call(T,d)&&(D[d]=T[d])}return D},A.apply(this,arguments)},N=this&&this.__rest||function(D,T){var c={};for(var l in D)Object.prototype.hasOwnProperty.call(D,l)&&T.indexOf(l)<0&&(c[l]=D[l]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(D);d<l.length;d++)T.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(D,l[d])&&(c[l[d]]=D[l[d]]);return c},O=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(o,"__esModule",{value:!0});var U=O(b("./node_modules/prop-types/index.js")),M=U.default.oneOfType([U.default.string,U.default.number]),S={all:U.default.bool,grid:U.default.bool,aural:U.default.bool,braille:U.default.bool,handheld:U.default.bool,print:U.default.bool,projection:U.default.bool,screen:U.default.bool,tty:U.default.bool,tv:U.default.bool,embossed:U.default.bool},w={orientation:U.default.oneOf(["portrait","landscape"]),scan:U.default.oneOf(["progressive","interlace"]),aspectRatio:U.default.string,deviceAspectRatio:U.default.string,height:M,deviceHeight:M,width:M,deviceWidth:M,color:U.default.bool,colorIndex:U.default.bool,monochrome:U.default.bool,resolution:M,type:Object.keys(S)};w.type;var p=N(w,["type"]),v=A({minAspectRatio:U.default.string,maxAspectRatio:U.default.string,minDeviceAspectRatio:U.default.string,maxDeviceAspectRatio:U.default.string,minHeight:M,maxHeight:M,minDeviceHeight:M,maxDeviceHeight:M,minWidth:M,maxWidth:M,minDeviceWidth:M,maxDeviceWidth:M,minColor:U.default.number,maxColor:U.default.number,minColorIndex:U.default.number,maxColorIndex:U.default.number,minMonochrome:U.default.number,maxMonochrome:U.default.number,minResolution:M,maxResolution:M},p),a=A(A({},S),v);o.default={all:a,types:S,matchers:w,features:v}},"./src/toQuery.ts":function(R,o,b){var A=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(o,"__esModule",{value:!0});var N=A(b("./node_modules/hyphenate-style-name/index.js")),O=A(b("./src/mediaQuery.ts")),U=function(p){return"not ".concat(p)},M=function(p,v){var a=(0,N.default)(p);return typeof v=="number"&&(v="".concat(v,"px")),v===!0?a:v===!1?U(a):"(".concat(a,": ").concat(v,")")},S=function(p){return p.join(" and ")},w=function(p){var v=[];return Object.keys(O.default.all).forEach(function(a){var D=p[a];D!=null&&v.push(M(a,D))}),S(v)};o.default=w},"./src/useMediaQuery.ts":function(R,o,b){var A=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(o,"__esModule",{value:!0});var N=b("react"),O=A(b("./node_modules/matchmediaquery/index.js")),U=A(b("./node_modules/hyphenate-style-name/index.js")),M=b("./node_modules/shallow-equal/dist/index.esm.js"),S=A(b("./src/toQuery.ts")),w=A(b("./src/Context.ts")),p=function(f){return f.query||(0,S.default)(f)},v=function(f){if(f){var x=Object.keys(f);return x.reduce(function(L,h){return L[(0,U.default)(h)]=f[h],L},{})}},a=function(){var f=(0,N.useRef)(!1);return(0,N.useEffect)(function(){f.current=!0},[]),f.current},D=function(f){var x=(0,N.useContext)(w.default),L=function(){return v(f)||v(x)},h=(0,N.useState)(L),m=h[0],I=h[1];return(0,N.useEffect)(function(){var g=L();(0,M.shallowEqualObjects)(m,g)||I(g)},[f,x]),m},T=function(f){var x=function(){return p(f)},L=(0,N.useState)(x),h=L[0],m=L[1];return(0,N.useEffect)(function(){var I=x();h!==I&&m(I)},[f]),h},c=function(f,x){var L=function(){return(0,O.default)(f,x||{},!!x)},h=(0,N.useState)(L),m=h[0],I=h[1],g=a();return(0,N.useEffect)(function(){if(g){var E=L();return I(E),function(){E&&E.dispose()}}},[f,x]),m},l=function(f){var x=(0,N.useState)(f.matches),L=x[0],h=x[1];return(0,N.useEffect)(function(){var m=function(I){h(I.matches)};return f.addListener(m),h(f.matches),function(){f.removeListener(m)}},[f]),L},d=function(f,x,L){var h=D(x),m=T(f);if(!m)throw new Error("Invalid or missing MediaQuery!");var I=c(m,h),g=l(I),E=a();return(0,N.useEffect)(function(){E&&L&&L(g)},[g]),(0,N.useEffect)(function(){return function(){I&&I.dispose()}},[]),g};o.default=d},react:R=>{R.exports=r}},i={};function C(R){var o=i[R];if(o!==void 0)return o.exports;var b=i[R]={exports:{}};return n[R].call(b.exports,b,b.exports,C),b.exports}C.d=(R,o)=>{for(var b in o)C.o(o,b)&&!C.o(R,b)&&Object.defineProperty(R,b,{enumerable:!0,get:o[b]})},C.o=(R,o)=>Object.prototype.hasOwnProperty.call(R,o),C.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var k=C("./src/index.ts");return k})())})(Mm);const Gr={SCREEN_XX:1/0,SCREEN_XL:1179,SCREEN_LG:1023,SCREEN_MD:767,SCREEN_SM:539,SCREEN_XS:479,SCREEN_SS:359};function wm(){return{isScreenXX:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_XX}px)`}),isScreenXL:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_XL}px)`}),isScreenLG:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_LG}px)`}),isScreenMD:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_MD}px)`}),isScreenSM:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_SM}px)`}),isScreenXS:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_XS}px)`}),isScreenSS:ir.useMediaQuery({query:`(max-width: ${Gr.SCREEN_SS}px)`})}}function cu({as:e="div",...t}){return X.jsx(e,{...t})}function km(e){const t=(e==null?void 0:e.size)===10?"col10":"col";return we.join([(e==null?void 0:e.xx)&&`${t}-xx-${e.xx}`,(e==null?void 0:e.xl)&&`${t}-xl-${e.xl}`,(e==null?void 0:e.lg)&&`${t}-lg-${e.lg}`,(e==null?void 0:e.md)&&`${t}-md-${e.md}`,(e==null?void 0:e.sm)&&`${t}-sm-${e.sm}`,(e==null?void 0:e.xs)&&`${t}-xs-${e.xs}`,(e==null?void 0:e.ss)&&`${t}-ss-${e.ss}`])}const Se=ae.forwardRef(({component:e="div",grid:t,children:r,className:n,...i},C)=>{const k=t&&km(t),R={className:we.join(n,k),ref:C,...i};return X.jsx(cu,{as:e,...R,children:r})});Se.displayName="Block";const qt=ae.forwardRef(({container:e,row:t,component:r="div",children:n,className:i,...C},k)=>{const R=[e&&"container",t&&"row"],o={className:we.join(i,R),ref:k,...C};return X.jsx(cu,{as:r,...o,children:n})});qt.displayName="Grid";const bm="_Link_1wghn_57",Fm="_noUnderline_1wghn_63",Nm="_inverted_1wghn_66",Um="_disabled_1wghn_96",as={Link:bm,noUnderline:Fm,inverted:Nm,disabled:Um},Aa=ae.forwardRef(({display:e,underline:t,children:r,blank:n,className:i,...C},k)=>{const R=[e||"link",t===!1&&as.noUnderline],o=n&&{target:"_blank",rel:"noreferrer noopener"};return X.jsx("a",{className:we.join(as.Link,i,R),ref:k,...o,...C,children:r})});Aa.displayName="Link";const Rh=ae.forwardRef(({display:e,underline:t,children:r,blank:n,className:i,...C},k)=>{const R=[e||"link",t===!1&&as.noUnderline],o=n&&{target:"_blank",rel:"noreferrer noopener"};return X.jsx("span",{className:we.join(as.Link,i,R),ref:k,...o,...C,children:r})});Rh.displayName="LinkLabel";const Bm="_Footer_142lg_46",Km="_container_142lg_51",jm="_row_142lg_54",Wm="_wisey_142lg_57",Hm="_asm_142lg_65",Gm="_universe_142lg_76",un={Footer:Bm,container:Km,row:jm,wisey:Wm,asm:Hm,universe:Gm};function Vm(){const{isScreenSM:e,isScreenXS:t}=wm();return X.jsx(Se,{component:"footer",className:un.Footer,children:X.jsx(qt,{container:!0,className:un.container,children:X.jsxs(qt,{row:!0,className:un.row,children:[X.jsx(Aa,{className:we.join(un.wisey,"col-xx-4 col-xs-4"),href:"https://wisey.app/",blank:!0,children:t?X.jsx(Im,{size:"custom",style:{width:"30px",height:"30px"}}):X.jsx(Om,{size:"custom",style:{width:"100px",height:"30px"}})}),X.jsx(Aa,{className:we.join(un.asm,"col-xx-4 col-xs-4"),display:"h5",underline:!1,href:"https://github.com/AmelianceSkyMusic",blank:!0,children:e?"ASM":"AmelianceSkuMusic"}),X.jsx(Aa,{className:we.join(un.universe,"col-xx-4 col-xs-4"),href:"https://universeapps.limited/",blank:!0,children:t?X.jsx(Rm,{size:"custom",style:{width:"30px",height:"30px"}}):X.jsx(Am,{size:"custom",style:{width:"100px",height:"30px"}})})]})})})}const du={HOME:"/",COURSES:"/courses",COURSE:"/course"};function Ih(e){return X.jsxs(mr,{width:"103px",height:"28px",viewBox:"0 0 103 28",stroke:"none",...e,children:[X.jsx("path",{d:"M25.6689 5.13281H17.651C16.3442 5.13281 15.1401 5.83287 14.4867 6.96229L11.6772 11.8347C12.2279 12.152 12.6853 12.6094 13.012 13.1694L18.6031 22.8489L27.2557 7.86769C27.9558 6.65426 27.0784 5.13281 25.6689 5.13281Z",fill:"#00A698"}),X.jsx("path",{d:"M9.8466 11.349H1.82864C0.419196 11.349 -0.458205 12.8705 0.251184 14.0932L5.31024 22.8672L11.6761 11.8437C11.1254 11.517 10.5 11.349 9.8466 11.349Z",fill:"#EA552B"}),X.jsx("path",{d:"M11.675 11.8344L5.30914 22.8579H18.6008L13.0097 13.1691C12.683 12.6091 12.2257 12.1517 11.675 11.8344Z",fill:"#4723D1"}),X.jsx("path",{d:"M9.29499 9.46382C10.491 9.46382 11.4605 8.49429 11.4605 7.29832C11.4605 6.10234 10.491 5.13281 9.29499 5.13281C8.09901 5.13281 7.12949 6.10234 7.12949 7.29832C7.12949 8.49429 8.09901 9.46382 9.29499 9.46382Z",fill:"#EA552B"}),X.jsx("path",{d:"M50.583 8.11096H54.0179V8.45632L49.5376 20.3666H46.7373L43.7784 12.2553L40.8009 20.3666H38.01L33.5016 8.45632V8.11096H36.9646L39.6061 15.5689L42.369 8.11096H45.1692L47.9321 15.5689L50.583 8.11096Z",fill:"black"}),X.jsx("path",{d:"M55.8939 20.365V8.10935H59.3755V20.365H55.8939ZM57.63 6.88659C58.8061 6.88659 59.7489 5.93451 59.7489 4.76776C59.7489 3.601 58.7968 2.64893 57.63 2.64893C56.4633 2.64893 55.5112 3.601 55.5112 4.76776C55.5112 5.93451 56.4539 6.88659 57.63 6.88659Z",fill:"black"}),X.jsx("path",{d:"M67.1692 20.5823C66.2077 20.5823 65.2743 20.4702 64.3876 20.2369C63.5009 20.0129 62.8008 19.7049 62.2874 19.3222V16.4099C62.9035 16.8486 63.6409 17.2127 64.4996 17.4833C65.349 17.7634 66.1797 17.894 66.9731 17.894C67.9159 17.894 68.6346 17.7914 69.1293 17.586C69.624 17.3807 69.8667 17.082 69.8667 16.6899C69.8667 16.5499 69.8387 16.4286 69.7827 16.3166C69.7267 16.2139 69.6333 16.1206 69.512 16.0459C69.3907 15.9712 69.26 15.9059 69.1293 15.8592C68.9986 15.8032 68.8213 15.7659 68.6066 15.7285C68.3919 15.6912 68.1959 15.6632 68.0279 15.6445C67.8599 15.6259 67.6452 15.5979 67.3745 15.5699C66.9451 15.5139 66.6184 15.4765 66.3851 15.4392C66.1517 15.4019 65.8157 15.3458 65.3957 15.2525C64.9663 15.1685 64.6303 15.0658 64.3783 14.9631C64.1262 14.8605 63.8462 14.7111 63.5195 14.5151C63.2022 14.3191 62.9502 14.1044 62.7728 13.8617C62.5955 13.619 62.4461 13.3204 62.3248 12.9657C62.2034 12.6016 62.1381 12.2003 62.1381 11.7616C62.1381 10.5948 62.6515 9.6614 63.6875 8.94268C64.7236 8.22396 66.0771 7.86926 67.7665 7.86926C68.6066 7.86926 69.4653 7.97194 70.3427 8.17729C71.2201 8.38264 71.9855 8.66266 72.6296 9.01735V11.9296C71.9762 11.5095 71.2201 11.1735 70.3521 10.9122C69.4933 10.6508 68.6999 10.5295 67.9719 10.5295C67.2905 10.5295 66.7491 10.6321 66.3478 10.8282C65.9371 11.0242 65.7317 11.2855 65.7317 11.6122C65.7317 11.7522 65.7597 11.8736 65.8064 11.9856C65.8624 12.0883 65.9557 12.1909 66.0864 12.2656C66.2264 12.3496 66.3478 12.415 66.4598 12.4616C66.5718 12.5083 66.7491 12.555 66.9918 12.6016C67.2345 12.6483 67.4212 12.6856 67.5705 12.7043C67.7105 12.723 67.9345 12.7603 68.2426 12.7883C68.6439 12.835 68.98 12.8723 69.232 12.919C69.4933 12.9563 69.82 13.0217 70.2214 13.115C70.6228 13.199 70.9588 13.3017 71.2295 13.4137C71.4908 13.5257 71.7802 13.675 72.0882 13.8711C72.3962 14.0577 72.6389 14.2818 72.8256 14.5151C73.0123 14.7578 73.1616 15.0472 73.283 15.4019C73.4043 15.7565 73.4696 16.1486 73.4696 16.5686C73.4696 17.7634 72.8909 18.7341 71.7428 19.4622C70.5668 20.2182 69.0546 20.5823 67.1692 20.5823Z",fill:"black"}),X.jsx("path",{d:"M87.7429 13.9603V15.1457H78.8569C79.0809 15.9111 79.5663 16.5085 80.2944 16.9472C81.0224 17.3859 81.9278 17.6006 83.0012 17.6006C83.7666 17.6006 84.532 17.4699 85.3067 17.1992C86.0721 16.9379 86.7069 16.5832 87.2109 16.1538V19.2527C86.5948 19.6541 85.8108 19.9808 84.8587 20.2141C83.9066 20.4568 82.9639 20.5688 82.0305 20.5688C79.9957 20.5688 78.3529 19.9901 77.1114 18.8234C75.87 17.6566 75.254 16.1258 75.254 14.2217C75.254 12.3175 75.87 10.7774 77.1114 9.61998C78.3529 8.45322 79.9863 7.87451 82.0118 7.87451C83.7386 7.87451 85.1201 8.42522 86.1655 9.53597C87.2202 10.6561 87.7429 12.1215 87.7429 13.9603ZM81.8438 10.432C81.1251 10.432 80.5184 10.6374 80.005 11.0574C79.4916 11.4775 79.1369 12.0468 78.9316 12.7749H84.3267C84.2707 12.0655 84.0186 11.4868 83.5706 11.0668C83.1226 10.6467 82.5439 10.432 81.8438 10.432Z",fill:"black"}),X.jsx("path",{d:"M98.831 8.11096H102.453V8.45632L93.8653 25.351H90.421V25.0056L93.7439 18.5838L88.5635 8.45632V8.11096H92.1852L95.5734 15.1395L98.831 8.11096Z",fill:"black"})]})}function zm(){return X.jsx(Ah,{to:`${du.COURSES}/1`,children:X.jsx(Ih,{size:"custom",style:{width:"100px",height:"30px"}})})}const $m="_Header_f9cty_1",Ym="_container_f9cty_1",Xf={Header:$m,container:Ym};function Xm(){return X.jsx(Se,{component:"header",className:Xf.Header,children:X.jsx(qt,{container:!0,component:"section",className:Xf.container,children:X.jsx(zm,{})})})}function Qm(){return X.jsxs(X.Fragment,{children:[X.jsx(Xm,{}),X.jsx(jp,{}),X.jsx(Vm,{})]})}const Zm="_StartScreen_1orq5_1",Jm={StartScreen:Zm};function qm(){return X.jsx(Se,{className:Jm.StartScreen,children:X.jsx(Ih,{size:"custom",style:{width:"100px",height:"30px"}})})}const ey={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"},Le=ae.forwardRef(({component:e,display:t,children:r,className:n,...i},C)=>{const k=e||"p",R={className:we.join(n,t||e),ref:C,...i},o=ey[k]||"p";return X.jsx(cu,{as:o,...R,children:r})});Le.displayName="Typography";const ty="_ErrorPlaceholder_t4qci_1",ry="_container_t4qci_1",Qf={ErrorPlaceholder:ty,container:ry};function Oh({children:e}){return X.jsx(Se,{component:"main",className:Qf.ErrorPlaceholder,children:X.jsxs(qt,{container:!0,component:"section",className:Qf.container,children:[X.jsx(Le,{component:"h4",children:"ERROR:"}),X.jsx(Le,{component:"p1",children:e})]})})}function Mh(e,...t){return t.flat(1/0).filter(r=>r).map(r=>String(r).trim()).join(e)}const Xi={NAME:"WISEY"};function wh(...e){console.log(`${Xi.NAME} >`,...e)}const Zf=Xi.NAME;function ny(e,t,r){const n=(i,C)=>{localStorage.setItem(Zf,JSON.stringify({...i,[e]:{...i[e],[t]:C}}))};try{const i=localStorage.getItem(Zf),C=i?JSON.parse(i):{};if(!i)return r&&n(C,r),r||null;const k=C[e][t];return k||(n(C,r),r||null)}catch(i){return wh("getLocalStorage",i),r}}const Jf=Xi.NAME;function qf(e,t,r){const n=(i,C)=>{localStorage.setItem(Jf,JSON.stringify({...i,[e]:{...i[e],[t]:C}}))};try{const i=localStorage.getItem(Jf),C=i?JSON.parse(i):{};n(C,r)}catch(i){wh("setLocalStorage",i)}}const ec=e=>{let t;const r=new Set,n=(o,b)=>{const A=typeof o=="function"?o(t):o;if(!Object.is(A,t)){const N=t;t=b??typeof A!="object"?A:Object.assign({},t,A),r.forEach(O=>O(t,N))}},i=()=>t,R={setState:n,getState:i,subscribe:o=>(r.add(o),()=>r.delete(o)),destroy:()=>{({VITE_BASE_PATH:"genesis-front-end-school",BASE_URL:"/genesis-front-end-school",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(n,i,R),R},iy=e=>e?ec(e):ec;var ul={},ay={get exports(){return ul},set exports(e){ul=e}},kh={},fl={},sy={get exports(){return fl},set exports(e){fl=e}},bh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wn=ae;function oy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ly=typeof Object.is=="function"?Object.is:oy,uy=Wn.useState,fy=Wn.useEffect,cy=Wn.useLayoutEffect,dy=Wn.useDebugValue;function hy(e,t){var r=t(),n=uy({inst:{value:r,getSnapshot:t}}),i=n[0].inst,C=n[1];return cy(function(){i.value=r,i.getSnapshot=t,io(i)&&C({inst:i})},[e,r,t]),fy(function(){return io(i)&&C({inst:i}),e(function(){io(i)&&C({inst:i})})},[e]),dy(r),r}function io(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ly(e,r)}catch{return!0}}function vy(e,t){return t()}var gy=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vy:hy;bh.useSyncExternalStore=Wn.useSyncExternalStore!==void 0?Wn.useSyncExternalStore:gy;(function(e){e.exports=bh})(sy);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=ae,py=fl;function my(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yy=typeof Object.is=="function"?Object.is:my,Ey=py.useSyncExternalStore,Ty=Ds.useRef,_y=Ds.useEffect,Sy=Ds.useMemo,xy=Ds.useDebugValue;kh.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var C=Ty(null);if(C.current===null){var k={hasValue:!1,value:null};C.current=k}else k=C.current;C=Sy(function(){function o(U){if(!b){if(b=!0,A=U,U=n(U),i!==void 0&&k.hasValue){var M=k.value;if(i(M,U))return N=M}return N=U}if(M=N,yy(A,U))return M;var S=n(U);return i!==void 0&&i(M,S)?M:(A=U,N=S)}var b=!1,A,N,O=r===void 0?null:r;return[function(){return o(t())},O===null?void 0:function(){return o(O())}]},[t,r,n,i]);var R=Ey(e,C[0],C[1]);return _y(function(){k.hasValue=!0,k.value=R},[R]),xy(R),R};(function(e){e.exports=kh})(ay);const Cy=ss(ul),{useSyncExternalStoreWithSelector:Ly}=Cy;function Dy(e,t=e.getState,r){const n=Ly(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return ae.useDebugValue(n),n}const tc=e=>{({VITE_BASE_PATH:"genesis-front-end-school",BASE_URL:"/genesis-front-end-school",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?iy(e):e,r=(n,i)=>Dy(t,n,i);return Object.assign(r,t),r},hu=e=>e?tc(e):tc,cl=new Map,ga=e=>{const t=cl.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([r,n])=>[r,n.getState()])):{}},Py=(e,t,r)=>{if(e===void 0)return{type:"untracked",connection:t.connect(r)};const n=cl.get(r.name);if(n)return{type:"tracked",store:e,...n};const i={connection:t.connect(r),stores:{}};return cl.set(r.name,i),{type:"tracked",store:e,...i}},Ay=(e,t={})=>(r,n,i)=>{const{enabled:C,anonymousActionType:k,store:R,...o}=t;let b;try{b=(C??({VITE_BASE_PATH:"genesis-front-end-school",BASE_URL:"/genesis-front-end-school",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!b)return({VITE_BASE_PATH:"genesis-front-end-school",BASE_URL:"/genesis-front-end-school",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&C&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(r,n,i);const{connection:A,...N}=Py(R,b,o);let O=!0;i.setState=(S,w,p)=>{const v=r(S,w);if(!O)return v;const a=p===void 0?{type:k||"anonymous"}:typeof p=="string"?{type:p}:p;return R===void 0?(A==null||A.send(a,n()),v):(A==null||A.send({...a,type:`${R}/${a.type}`},{...ga(o.name),[R]:i.getState()}),v)};const U=(...S)=>{const w=O;O=!1,r(...S),O=w},M=e(i.setState,n,i);if(N.type==="untracked"?A==null||A.init(M):(N.stores[N.store]=i,A==null||A.init(Object.fromEntries(Object.entries(N.stores).map(([S,w])=>[S,S===N.store?M:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let S=!1;const w=i.dispatch;i.dispatch=(...p)=>{({VITE_BASE_PATH:"genesis-front-end-school",BASE_URL:"/genesis-front-end-school",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&p[0].type==="__setState"&&!S&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),S=!0),w(...p)}}return A.subscribe(S=>{var w;switch(S.type){case"ACTION":if(typeof S.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return ao(S.payload,p=>{if(p.type==="__setState"){if(R===void 0){U(p.state);return}Object.keys(p.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=p.state[R];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&U(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(p)});case"DISPATCH":switch(S.payload.type){case"RESET":return U(M),R===void 0?A==null?void 0:A.init(i.getState()):A==null?void 0:A.init(ga(o.name));case"COMMIT":if(R===void 0){A==null||A.init(i.getState());return}return A==null?void 0:A.init(ga(o.name));case"ROLLBACK":return ao(S.state,p=>{if(R===void 0){U(p),A==null||A.init(i.getState());return}U(p[R]),A==null||A.init(ga(o.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return ao(S.state,p=>{if(R===void 0){U(p);return}JSON.stringify(i.getState())!==JSON.stringify(p[R])&&U(p[R])});case"IMPORT_STATE":{const{nextLiftedState:p}=S.payload,v=(w=p.computedStates.slice(-1)[0])==null?void 0:w.state;if(!v)return;U(R===void 0?v:v[R]),A==null||A.send(null,p);return}case"PAUSE_RECORDING":return O=!O}return}}),M},vu=Ay,ao=(e,t)=>{let r;try{r=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&t(r)},gu="https://api.wisey.app/api/v1/";function Xt(e,t){let r="Sorry, something went wrong \\_()_/!";return typeof t=="string"&&(r=t),t instanceof Error&&(r=t.message),console.error(`${Xi.NAME} API >`,`${e}:
`,r),r}function Ry(e){var t,r;return{title:(e==null?void 0:e.title)||null,description:(e==null?void 0:e.description)||null,lessonsCount:(e==null?void 0:e.lessons.length)||null,skills:Array.isArray((t=e==null?void 0:e.meta)==null?void 0:t.skills)?(r=e==null?void 0:e.meta)==null?void 0:r.skills:null,rating:(e==null?void 0:e.rating)||null}}function Iy(e){const t=e.map(r=>({id:r.id||null,title:r.title||null,order:r.order||null,previewImageLink:r.previewImageLink?`${r.previewImageLink}/lesson-${r.order}.webp`:null,videoLink:r.link||null,duration:r.duration||null,unlocked:r.status?r.status==="unlocked":null}));return we.sortArrayOfObj(t,"order")}const Oy="core/preview-courses/",My=hu()(vu(e=>({course:{},lessons:[],currentLessonId:null,setCurrentLessonId:t=>{e({currentLessonId:t})},currentLessonNumber:0,setCurrentLessonNumber:t=>{e({currentLessonNumber:t})},loading:!1,error:null,fetchCourse:async({token:t,id:r})=>{e({loading:!0});try{const n=`${gu}${Oy}${r}`,i=new Headers({Authorization:`Bearer ${t}`}),k=await(await fetch(n,{headers:i})).json();if("statusCode"in k)throw new Error(k.statusCode.toString());const R=Ry(k),o=Iy(k.lessons);e({course:R,lessons:o,error:null})}catch(n){if(n instanceof Error)switch(n.message){case"400":e({error:Xt("useCoursesState","Sorry, can't find course=(")});break;case"401":e({error:Xt("useCoursesState","Authorization error")});break;case"504":e({error:Xt("useCoursesState","Sorry, gateway time out. Try again later!")});break;default:e({error:Xt("useCoursesState",n)});break}else e({error:Xt("useCoursesState",n)})}finally{e({loading:!1})}}}))),wy="auth/anonymous?platform=subscriptions",Bi=hu()(vu(e=>({token:null,loading:!1,error:null,fetchToken:async()=>{e({loading:!0});try{const t=`${gu}${wy}`,n=await(await fetch(t)).json(),{token:i}=n;if(typeof i!="string"||!i)throw new Error("Invalid authenticity token!");e({token:i,error:null})}catch(t){e({error:Xt("useUserState",t)})}finally{e({loading:!1})}}})));function Fh(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const ky="_Backdrop_1yd3e_46",by="_show_1yd3e_61",Fy="_disabled_1yd3e_66",so={Backdrop:ky,"hide-blackout":"_hide-blackout_1yd3e_1",show:by,"show-blackout":"_show-blackout_1yd3e_1",disabled:Fy},pu=ae.forwardRef(({className:e,disabled:t,show:r,opacity:n,...i},C)=>{const k=ae.useRef(null);ae.useEffect(()=>{var o;k&&n&&((o=k.current)==null||o.style.setProperty("--backdrop-opacity",`${n}%`))},[k]);const R=[t&&so.disabled,r&&so.show];return X.jsx("button",{type:"button",className:we.join(so.Backdrop,e,R),ref:Fh([C,k]),...i})});pu.displayName="Backdrop";const Ny="_LoaderLine_92256_1",Uy="_background_92256_10",By="_normal_92256_13",Ky="_animation_92256_13",jy="_loader_92256_1",Wy="_inversion_92256_22",ii={LoaderLine:Ny,background:Uy,normal:By,animation:Ky,loader:jy,inversion:Wy},Nh=ae.forwardRef(({isInversion:e,className:t,...r},n)=>{const i=[e?ii.inversion:ii.normal];return X.jsxs("div",{className:we.join(ii.LoaderLine,t,i),ref:n,...r,children:[X.jsx("div",{className:ii.background}),X.jsx("div",{className:ii.animation})]})});Nh.displayName="LoaderLine";function Hy({children:e,className:t="root-portal",elementType:r="div"}){const n=ae.useRef(document.createElement(r)),{current:i}=n;return ae.useEffect(()=>(i.classList.add(t),document.body.appendChild(n.current),()=>{document.body.removeChild(i)}),[]),Lg.createPortal(e,i)}const Gy="_LoaderOverlay_1d96m_1",Vy={LoaderOverlay:Gy};function Uh(){return X.jsx(Hy,{children:X.jsxs(Se,{className:we.join(Vy.LoaderOverlay),children:[X.jsx(pu,{show:!0}),X.jsx(Nh,{})]})})}var dl={},zy={get exports(){return dl},set exports(e){dl=e}};(function(e,t){typeof window<"u"&&function(n,i){e.exports=i()}(ic,()=>(()=>{var r={"./src/config.ts":(k,R,o)=>{o.r(R),o.d(R,{enableStreamingMode:()=>y,hlsDefaultConfig:()=>g,mergeConfig:()=>u});var b=o("./src/controller/abr-controller.ts"),A=o("./src/controller/audio-stream-controller.ts"),N=o("./src/controller/audio-track-controller.ts"),O=o("./src/controller/subtitle-stream-controller.ts"),U=o("./src/controller/subtitle-track-controller.ts"),M=o("./src/controller/buffer-controller.ts"),S=o("./src/controller/timeline-controller.ts"),w=o("./src/controller/cap-level-controller.ts"),p=o("./src/controller/fps-controller.ts"),v=o("./src/controller/eme-controller.ts"),a=o("./src/controller/cmcd-controller.ts"),D=o("./src/utils/xhr-loader.ts"),T=o("./src/utils/fetch-loader.ts"),c=o("./src/utils/cues.ts"),l=o("./src/utils/mediakeys-helper.ts"),d=o("./src/utils/logger.ts");function f(){return f=Object.assign?Object.assign.bind():function(s){for(var _=1;_<arguments.length;_++){var F=arguments[_];for(var P in F)Object.prototype.hasOwnProperty.call(F,P)&&(s[P]=F[P])}return s},f.apply(this,arguments)}function x(s,_){var F=Object.keys(s);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(s);_&&(P=P.filter(function(B){return Object.getOwnPropertyDescriptor(s,B).enumerable})),F.push.apply(F,P)}return F}function L(s){for(var _=1;_<arguments.length;_++){var F=arguments[_]!=null?arguments[_]:{};_%2?x(Object(F),!0).forEach(function(P){h(s,P,F[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(F)):x(Object(F)).forEach(function(P){Object.defineProperty(s,P,Object.getOwnPropertyDescriptor(F,P))})}return s}function h(s,_,F){return _=m(_),_ in s?Object.defineProperty(s,_,{value:F,enumerable:!0,configurable:!0,writable:!0}):s[_]=F,s}function m(s){var _=I(s,"string");return typeof _=="symbol"?_:String(_)}function I(s,_){if(typeof s!="object"||s===null)return s;var F=s[Symbol.toPrimitive];if(F!==void 0){var P=F.call(s,_||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(s)}var g=L(L({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:D.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:b.default,bufferController:M.default,capLevelController:w.default,fpsController:p.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:l.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},E()),{},{subtitleStreamController:O.SubtitleStreamController,subtitleTrackController:U.default,timelineController:S.TimelineController,audioStreamController:A.default,audioTrackController:N.default,emeController:v.default,cmcdController:a.default});function E(){return{cueHandler:c.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function u(s,_){if((_.liveSyncDurationCount||_.liveMaxLatencyDurationCount)&&(_.liveSyncDuration||_.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(_.liveMaxLatencyDurationCount!==void 0&&(_.liveSyncDurationCount===void 0||_.liveMaxLatencyDurationCount<=_.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(_.liveMaxLatencyDuration!==void 0&&(_.liveSyncDuration===void 0||_.liveMaxLatencyDuration<=_.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return f({},s,_)}function y(s){var _=s.loader;if(_!==T.default&&_!==D.default)d.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),s.progressive=!1;else{var F=(0,T.fetchSupported)();F&&(s.loader=T.default,s.progressive=!0,s.enableSoftwareAES=!0,d.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>D});var b=o("./src/polyfills/number.ts"),A=o("./src/utils/ewma-bandwidth-estimator.ts"),N=o("./src/events.ts"),O=o("./src/errors.ts"),U=o("./src/types/loader.ts"),M=o("./src/utils/logger.ts");function S(T,c){for(var l=0;l<c.length;l++){var d=c[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(T,p(d.key),d)}}function w(T,c,l){return c&&S(T.prototype,c),l&&S(T,l),Object.defineProperty(T,"prototype",{writable:!1}),T}function p(T){var c=v(T,"string");return typeof c=="symbol"?c:String(c)}function v(T,c){if(typeof T!="object"||T===null)return T;var l=T[Symbol.toPrimitive];if(l!==void 0){var d=l.call(T,c||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(T)}var a=function(){function T(l){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=l;var d=l.config;this.bwEstimator=new A.default(d.abrEwmaSlowVoD,d.abrEwmaFastVoD,d.abrEwmaDefaultEstimate),this.registerListeners()}var c=T.prototype;return c.registerListeners=function(){var d=this.hls;d.on(N.Events.FRAG_LOADING,this.onFragLoading,this),d.on(N.Events.FRAG_LOADED,this.onFragLoaded,this),d.on(N.Events.FRAG_BUFFERED,this.onFragBuffered,this),d.on(N.Events.LEVEL_LOADED,this.onLevelLoaded,this),d.on(N.Events.ERROR,this.onError,this)},c.unregisterListeners=function(){var d=this.hls;d.off(N.Events.FRAG_LOADING,this.onFragLoading,this),d.off(N.Events.FRAG_LOADED,this.onFragLoaded,this),d.off(N.Events.FRAG_BUFFERED,this.onFragBuffered,this),d.off(N.Events.LEVEL_LOADED,this.onLevelLoaded,this),d.off(N.Events.ERROR,this.onError,this)},c.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},c.onFragLoading=function(d,f){var x=f.frag;if(x.type===U.PlaylistLevelType.MAIN&&!this.timer){var L;this.fragCurrent=x,this.partCurrent=(L=f.part)!=null?L:null,this.timer=self.setInterval(this.onCheck,100)}},c.onLevelLoaded=function(d,f){var x=this.hls.config;f.details.live?this.bwEstimator.update(x.abrEwmaSlowLive,x.abrEwmaFastLive):this.bwEstimator.update(x.abrEwmaSlowVoD,x.abrEwmaFastVoD)},c._abandonRulesCheck=function(){var d=this.fragCurrent,f=this.partCurrent,x=this.hls,L=x.autoLevelEnabled,h=x.media;if(!(!d||!h)){var m=f?f.stats:d.stats,I=f?f.duration:d.duration;if(m.aborted||m.loaded&&m.loaded===m.total||d.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!L||h.paused||!h.playbackRate||!h.readyState)){var g=x.mainForwardBufferInfo;if(g!==null){var E=performance.now()-m.loading.start,u=Math.abs(h.playbackRate);if(!(E<=500*I/u)){var y=m.loaded&&m.loading.first,s=this.bwEstimator.getEstimate(),_=x.levels,F=x.minAutoLevel,P=_[d.level],B=m.total||Math.max(m.loaded,Math.round(I*P.maxBitrate/8)),K=y?m.loaded*1e3/E:0,j=K?(B-m.loaded)/K:B*8/s,W=g.len/u;if(!(j<=W)){var H=Number.POSITIVE_INFINITY,G;for(G=d.level-1;G>F;G--){var $=_[G].maxBitrate;if(H=K?I*$/(8*.8*K):I*$/s,H<W)break}H>=j||(M.logger.warn("Fragment "+d.sn+(f?" part "+f.index:"")+" of level "+d.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+G+`
      Current BW estimate: `+((0,b.isFiniteNumber)(s)?(s/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+j.toFixed(3)+` s
      Estimated load time for the next fragment: `+H.toFixed(3)+` s
      Time to underbuffer: `+W.toFixed(3)+" s"),x.nextLoadLevel=G,y&&this.bwEstimator.sample(E,m.loaded),this.clearTimer(),(d.loader||d.keyLoader)&&(this.fragCurrent=this.partCurrent=null,d.abortRequests()),x.trigger(N.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:d,part:f,stats:m}))}}}}}},c.onFragLoaded=function(d,f){var x=f.frag,L=f.part;if(x.type===U.PlaylistLevelType.MAIN&&(0,b.isFiniteNumber)(x.sn)){var h=L?L.stats:x.stats,m=L?L.duration:x.duration;if(this.clearTimer(),this.lastLoadedFragLevel=x.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var I=this.hls.levels[x.level],g=(I.loaded?I.loaded.bytes:0)+h.loaded,E=(I.loaded?I.loaded.duration:0)+m;I.loaded={bytes:g,duration:E},I.realBitrate=Math.round(8*g/E)}if(x.bitrateTest){var u={stats:h,frag:x,part:L,id:x.type};this.onFragBuffered(N.Events.FRAG_BUFFERED,u)}}},c.onFragBuffered=function(d,f){var x=f.frag,L=f.part,h=L?L.stats:x.stats;if(!h.aborted&&!(x.type!==U.PlaylistLevelType.MAIN||x.sn==="initSegment")){var m=h.parsing.end-h.loading.start;this.bwEstimator.sample(m,h.loaded),h.bwEstimate=this.bwEstimator.getEstimate(),x.bitrateTest?this.bitrateTestDelay=m/1e3:this.bitrateTestDelay=0}},c.onError=function(d,f){var x;if(((x=f.frag)===null||x===void 0?void 0:x.type)===U.PlaylistLevelType.MAIN){if(f.type===O.ErrorTypes.KEY_SYSTEM_ERROR){this.clearTimer();return}switch(f.details){case O.ErrorDetails.FRAG_LOAD_ERROR:case O.ErrorDetails.FRAG_LOAD_TIMEOUT:case O.ErrorDetails.KEY_LOAD_ERROR:case O.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer();break}}},c.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},c.getNextABRAutoLevel=function(){var d=this.fragCurrent,f=this.partCurrent,x=this.hls,L=x.maxAutoLevel,h=x.config,m=x.minAutoLevel,I=x.media,g=f?f.duration:d?d.duration:0,E=I&&I.playbackRate!==0?Math.abs(I.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():h.abrEwmaDefaultEstimate,y=x.mainForwardBufferInfo,s=(y?y.len:0)/E,_=this.findBestLevel(u,m,L,s,h.abrBandWidthFactor,h.abrBandWidthUpFactor);if(_>=0)return _;M.logger.trace((s?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var F=g?Math.min(g,h.maxStarvationDelay):h.maxStarvationDelay,P=h.abrBandWidthFactor,B=h.abrBandWidthUpFactor;if(!s){var K=this.bitrateTestDelay;if(K){var j=g?Math.min(g,h.maxLoadingDelay):h.maxLoadingDelay;F=j-K,M.logger.trace("bitrate test took "+Math.round(1e3*K)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*F)+" ms"),P=B=1}}return _=this.findBestLevel(u,m,L,s+F,P,B),Math.max(_,0)},c.findBestLevel=function(d,f,x,L,h,m){for(var I,g=this.fragCurrent,E=this.partCurrent,u=this.lastLoadedFragLevel,y=this.hls.levels,s=y[u],_=!!(s!=null&&(I=s.details)!==null&&I!==void 0&&I.live),F=s==null?void 0:s.codecSet,P=E?E.duration:g?g.duration:0,B=x;B>=f;B--){var K=y[B];if(!(!K||F&&K.codecSet!==F)){var j=K.details,W=(E?j==null?void 0:j.partTarget:j==null?void 0:j.averagetargetduration)||P,H=void 0;B<=u?H=h*d:H=m*d;var G=y[B].maxBitrate,$=G*W/H;if(M.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+B+"/"+Math.round(H)+"/"+G+"/"+W+"/"+L+"/"+$),H>G&&($===0||!(0,b.isFiniteNumber)($)||_&&!this.bitrateTestDelay||$<L))return B}}return-1},w(T,[{key:"nextAutoLevel",get:function(){var d=this._nextAutoLevel,f=this.bwEstimator;if(d!==-1&&!f.canEstimate())return d;var x=this.getNextABRAutoLevel();return d!==-1&&this.hls.levels[x].loadError?d:(d!==-1&&(x=Math.min(d,x)),x)},set:function(d){this._nextAutoLevel=d}}]),T}();const D=a},"./src/controller/audio-stream-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>h});var b=o("./src/polyfills/number.ts"),A=o("./src/controller/base-stream-controller.ts"),N=o("./src/events.ts"),O=o("./src/utils/buffer-helper.ts"),U=o("./src/controller/fragment-tracker.ts"),M=o("./src/types/level.ts"),S=o("./src/types/loader.ts"),w=o("./src/loader/fragment.ts"),p=o("./src/demux/chunk-cache.ts"),v=o("./src/demux/transmuxer-interface.ts"),a=o("./src/types/transmuxer.ts"),D=o("./src/controller/fragment-finders.ts"),T=o("./src/utils/discontinuities.ts"),c=o("./src/errors.ts");function l(){return l=Object.assign?Object.assign.bind():function(m){for(var I=1;I<arguments.length;I++){var g=arguments[I];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(m[E]=g[E])}return m},l.apply(this,arguments)}function d(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,f(m,I)}function f(m,I){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,u){return E.__proto__=u,E},f(m,I)}var x=100,L=function(m){d(I,m);function I(E,u,y){var s;return s=m.call(this,E,u,y,"[audio-stream-controller]")||this,s.videoBuffer=null,s.videoTrackCC=-1,s.waitingVideoCC=-1,s.audioSwitch=!1,s.trackId=-1,s.waitingData=null,s.mainDetails=null,s.bufferFlushed=!1,s.cachedTrackLoadedData=null,s._registerListeners(),s}var g=I.prototype;return g.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},g._registerListeners=function(){var u=this.hls;u.on(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(N.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(N.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.on(N.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(N.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.on(N.Events.ERROR,this.onError,this),u.on(N.Events.BUFFER_RESET,this.onBufferReset,this),u.on(N.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(N.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(N.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.on(N.Events.FRAG_BUFFERED,this.onFragBuffered,this)},g._unregisterListeners=function(){var u=this.hls;u.off(N.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(N.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(N.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(N.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(N.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.off(N.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(N.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.off(N.Events.ERROR,this.onError,this),u.off(N.Events.BUFFER_RESET,this.onBufferReset,this),u.off(N.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(N.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(N.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.off(N.Events.FRAG_BUFFERED,this.onFragBuffered,this)},g.onInitPtsFound=function(u,y){var s=y.frag,_=y.id,F=y.initPTS;if(_==="main"){var P=s.cc;this.initPTS[s.cc]=F,this.log("InitPTS for cc: "+P+" found from main: "+F),this.videoTrackCC=P,this.state===A.State.WAITING_INIT_PTS&&this.tick()}},g.startLoad=function(u){if(!this.levels){this.startPosition=u,this.state=A.State.STOPPED;return}var y=this.lastCurrentTime;this.stopLoad(),this.setInterval(x),this.fragLoadError=0,y>0&&u===-1?(this.log("Override startPosition with lastCurrentTime @"+y.toFixed(3)),u=y,this.state=A.State.IDLE):(this.loadedmetadata=!1,this.state=A.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()},g.doTick=function(){switch(this.state){case A.State.IDLE:this.doTickIdle();break;case A.State.WAITING_TRACK:{var u,y=this.levels,s=this.trackId,_=y==null||(u=y[s])===null||u===void 0?void 0:u.details;if(_){if(this.waitForCdnTuneIn(_))break;this.state=A.State.WAITING_INIT_PTS}break}case A.State.FRAG_LOADING_WAITING_RETRY:{var F,P=performance.now(),B=this.retryDate;(!B||P>=B||(F=this.media)!==null&&F!==void 0&&F.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=A.State.IDLE);break}case A.State.WAITING_INIT_PTS:{var K=this.waitingData;if(K){var j=K.frag,W=K.part,H=K.cache,G=K.complete;if(this.initPTS[j.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=A.State.FRAG_LOADING;var $=H.flush(),V={frag:j,part:W,payload:$,networkDetails:null};this._handleFragmentLoadProgress(V),G&&m.prototype._handleFragmentLoadComplete.call(this,V)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+j.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var z=this.getLoadPosition(),Y=O.BufferHelper.bufferInfo(this.mediaBuffer,z,this.config.maxBufferHole),Q=(0,D.fragmentWithinToleranceTest)(Y.end,this.config.maxFragLookUpTolerance,j);Q<0&&(this.log("Waiting fragment cc ("+j.cc+") @ "+j.start+" cancelled because another fragment at "+Y.end+" is needed"),this.clearWaitingFragment())}}else this.state=A.State.IDLE}}this.onTickEnd()},g.clearWaitingFragment=function(){var u=this.waitingData;u&&(this.fragmentTracker.removeFragment(u.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=A.State.IDLE)},g.resetLoadingState=function(){this.clearWaitingFragment(),m.prototype.resetLoadingState.call(this)},g.onTickEnd=function(){var u=this.media;!u||!u.readyState||(this.lastCurrentTime=u.currentTime)},g.doTickIdle=function(){var u=this.hls,y=this.levels,s=this.media,_=this.trackId,F=u.config;if(!(!y||!y[_])&&!(!s&&(this.startFragRequested||!F.startFragPrefetch))){var P=y[_],B=P.details;if(!B||B.live&&this.levelLastLoaded!==_||this.waitForCdnTuneIn(B)){this.state=A.State.WAITING_TRACK;return}var K=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&K&&(this.bufferFlushed=!1,this.afterBufferFlushed(K,w.ElementaryStreamTypes.AUDIO,S.PlaylistLevelType.AUDIO));var j=this.getFwdBufferInfo(K,S.PlaylistLevelType.AUDIO);if(j!==null){var W=this.audioSwitch;if(!W&&this._streamEnded(j,B)){u.trigger(N.Events.BUFFER_EOS,{type:"audio"}),this.state=A.State.ENDED;return}var H=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,S.PlaylistLevelType.MAIN),G=j.len,$=this.getMaxBufferLength(H==null?void 0:H.len);if(!(G>=$&&!W)){var V=B.fragments,z=V[0].start,Y=j.end;if(W&&s){var Q=this.getLoadPosition();Y=Q,B.PTSKnown&&Q<z&&(j.end>z||j.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=z+.05)}if(!(H&&Y>H.end+B.targetduration)&&!((!H||!H.len)&&j.len)){var q=this.getNextFragment(Y,B);if(!q){this.bufferFlushed=!0;return}this.loadFragment(q,B,Y)}}}}},g.getMaxBufferLength=function(u){var y=m.prototype.getMaxBufferLength.call(this);return u?Math.max(y,u):y},g.onMediaDetaching=function(){this.videoBuffer=null,m.prototype.onMediaDetaching.call(this)},g.onAudioTracksUpdated=function(u,y){var s=y.audioTracks;this.resetTransmuxer(),this.levels=s.map(function(_){return new M.Level(_)})},g.onAudioTrackSwitching=function(u,y){var s=!!y.url;this.trackId=y.id;var _=this.fragCurrent;_&&_.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),s?this.setInterval(x):this.resetTransmuxer(),s?(this.audioSwitch=!0,this.state=A.State.IDLE):this.state=A.State.STOPPED,this.tick()},g.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},g.onLevelLoaded=function(u,y){this.mainDetails=y.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(N.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},g.onAudioTrackLoaded=function(u,y){var s;if(this.mainDetails==null){this.cachedTrackLoadedData=y;return}var _=this.levels,F=y.details,P=y.id;if(!_){this.warn("Audio tracks were reset while loading level "+P);return}this.log("Track "+P+" loaded ["+F.startSN+","+F.endSN+"],duration:"+F.totalduration);var B=_[P],K=0;if(F.live||(s=B.details)!==null&&s!==void 0&&s.live){var j=this.mainDetails;if(F.fragments[0]||(F.deltaUpdateFailed=!0),F.deltaUpdateFailed||!j)return;!B.details&&F.hasProgramDateTime&&j.hasProgramDateTime?((0,T.alignMediaPlaylistByPDT)(F,j),K=F.fragments[0].start):K=this.alignPlaylists(F,B.details)}B.details=F,this.levelLastLoaded=P,!this.startFragRequested&&(this.mainDetails||!F.live)&&this.setStartPosition(B.details,K),this.state===A.State.WAITING_TRACK&&!this.waitForCdnTuneIn(F)&&(this.state=A.State.IDLE),this.tick()},g._handleFragmentLoadProgress=function(u){var y,s=u.frag,_=u.part,F=u.payload,P=this.config,B=this.trackId,K=this.levels;if(!K){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+s.sn+" of level "+s.level+" will not be buffered");return}var j=K[B];console.assert(j,"Audio track is defined on fragment load progress");var W=j.details;console.assert(W,"Audio track details are defined on fragment load progress");var H=P.defaultAudioCodec||j.audioCodec||"mp4a.40.2",G=this.transmuxer;G||(G=this.transmuxer=new v.default(this.hls,S.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var $=this.initPTS[s.cc],V=(y=s.initSegment)===null||y===void 0?void 0:y.data;if($!==void 0){var z=!1,Y=_?_.index:-1,Q=Y!==-1,q=new a.ChunkMetadata(s.level,s.sn,s.stats.chunkCount,F.byteLength,Y,Q);G.push(F,V,H,"",s,_,W.totalduration,z,q,$)}else{this.log("Unknown video PTS for cc "+s.cc+", waiting for video PTS before demuxing audio frag "+s.sn+" of ["+W.startSN+" ,"+W.endSN+"],track "+B);var Z=this.waitingData=this.waitingData||{frag:s,part:_,cache:new p.default,complete:!1},J=Z.cache;J.push(new Uint8Array(F)),this.waitingVideoCC=this.videoTrackCC,this.state=A.State.WAITING_INIT_PTS}},g._handleFragmentLoadComplete=function(u){if(this.waitingData){this.waitingData.complete=!0;return}m.prototype._handleFragmentLoadComplete.call(this,u)},g.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},g.onBufferCreated=function(u,y){var s=y.tracks.audio;s&&(this.mediaBuffer=s.buffer||null),y.tracks.video&&(this.videoBuffer=y.tracks.video.buffer||null)},g.onFragBuffered=function(u,y){var s=y.frag,_=y.part;if(s.type!==S.PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&s.type===S.PlaylistLevelType.MAIN){var F;(F=this.videoBuffer||this.media)!==null&&F!==void 0&&F.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(s)){this.warn("Fragment "+s.sn+(_?" p: "+_.index:"")+" of level "+s.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}s.sn!=="initSegment"&&(this.fragPrevious=s,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(N.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(s,_)},g.onError=function(u,y){if(y.type===c.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(S.PlaylistLevelType.AUDIO,y);return}switch(y.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:case c.ErrorDetails.FRAG_PARSING_ERROR:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(S.PlaylistLevelType.AUDIO,y);break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==A.State.ERROR&&this.state!==A.State.STOPPED&&(this.state=y.fatal?A.State.ERROR:A.State.IDLE,this.warn(y.details+" while loading frag, switching to "+this.state+" state"));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if(y.parent==="audio"&&(this.state===A.State.PARSING||this.state===A.State.PARSED)){var s=!0,_=this.getFwdBufferInfo(this.mediaBuffer,S.PlaylistLevelType.AUDIO);_&&_.len>.5&&(s=!this.reduceMaxBufferLength(_.len)),s&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,m.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},g.onBufferFlushed=function(u,y){var s=y.type;s===w.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===A.State.ENDED&&(this.state=A.State.IDLE))},g._handleTransmuxComplete=function(u){var y,s="audio",_=this.hls,F=u.remuxResult,P=u.chunkMeta,B=this.getCurrentContext(P);if(!B){this.warn("The loading context changed while buffering fragment "+P.sn+" of level "+P.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(P.level);return}var K=B.frag,j=B.part,W=B.level.details,H=F.audio,G=F.text,$=F.id3,V=F.initSegment;if(!(this.fragContextChanged(K)||!W)){if(this.state=A.State.PARSING,this.audioSwitch&&H&&this.completeAudioSwitch(),V!=null&&V.tracks&&(this._bufferInitSegment(V.tracks,K,P),_.trigger(N.Events.FRAG_PARSING_INIT_SEGMENT,{frag:K,id:s,tracks:V.tracks})),H){var z=H.startPTS,Y=H.endPTS,Q=H.startDTS,q=H.endDTS;j&&(j.elementaryStreams[w.ElementaryStreamTypes.AUDIO]={startPTS:z,endPTS:Y,startDTS:Q,endDTS:q}),K.setElementaryStreamInfo(w.ElementaryStreamTypes.AUDIO,z,Y,Q,q),this.bufferFragmentData(H,K,j,P)}if($!=null&&(y=$.samples)!==null&&y!==void 0&&y.length){var Z=l({id:s,frag:K,details:W},$);_.trigger(N.Events.FRAG_PARSING_METADATA,Z)}if(G){var J=l({id:s,frag:K,details:W},G);_.trigger(N.Events.FRAG_PARSING_USERDATA,J)}}},g._bufferInitSegment=function(u,y,s){if(this.state===A.State.PARSING){u.video&&delete u.video;var _=u.audio;if(_){_.levelCodec=_.codec,_.id="audio",this.log("Init audio buffer, container:"+_.container+", codecs[parsed]=["+_.codec+"]"),this.hls.trigger(N.Events.BUFFER_CODECS,u);var F=_.initSegment;if(F!=null&&F.byteLength){var P={type:"audio",frag:y,part:null,chunkMeta:s,parent:y.type,data:F};this.hls.trigger(N.Events.BUFFER_APPENDING,P)}this.tick()}}},g.loadFragment=function(u,y,s){var _=this.fragmentTracker.getState(u);this.fragCurrent=u,(this.audioSwitch||_===U.FragmentState.NOT_LOADED||_===U.FragmentState.PARTIAL)&&(u.sn==="initSegment"?this._loadInitSegment(u,y):y.live&&!(0,b.isFiniteNumber)(this.initPTS[u.cc])?(this.log("Waiting for video PTS in continuity counter "+u.cc+" of live stream before loading audio fragment "+u.sn+" of level "+this.trackId),this.state=A.State.WAITING_INIT_PTS):(this.startFragRequested=!0,m.prototype.loadFragment.call(this,u,y,s)))},g.completeAudioSwitch=function(){var u=this.hls,y=this.media,s=this.trackId;y&&(this.log("Switching audio track : flushing all audio"),m.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,u.trigger(N.Events.AUDIO_TRACK_SWITCHED,{id:s})},I}(A.default);const h=L},"./src/controller/audio-track-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>D});var b=o("./src/events.ts"),A=o("./src/errors.ts"),N=o("./src/controller/base-playlist-controller.ts"),O=o("./src/types/loader.ts");function U(T,c){for(var l=0;l<c.length;l++){var d=c[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(T,S(d.key),d)}}function M(T,c,l){return c&&U(T.prototype,c),l&&U(T,l),Object.defineProperty(T,"prototype",{writable:!1}),T}function S(T){var c=w(T,"string");return typeof c=="symbol"?c:String(c)}function w(T,c){if(typeof T!="object"||T===null)return T;var l=T[Symbol.toPrimitive];if(l!==void 0){var d=l.call(T,c||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(T)}function p(T,c){T.prototype=Object.create(c.prototype),T.prototype.constructor=T,v(T,c)}function v(T,c){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,f){return d.__proto__=f,d},v(T,c)}var a=function(T){p(c,T);function c(d){var f;return f=T.call(this,d,"[audio-track-controller]")||this,f.tracks=[],f.groupId=null,f.tracksInGroup=[],f.trackId=-1,f.trackName="",f.selectDefaultTrack=!0,f.registerListeners(),f}var l=c.prototype;return l.registerListeners=function(){var f=this.hls;f.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),f.on(b.Events.LEVEL_LOADING,this.onLevelLoading,this),f.on(b.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),f.on(b.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),f.on(b.Events.ERROR,this.onError,this)},l.unregisterListeners=function(){var f=this.hls;f.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),f.off(b.Events.LEVEL_LOADING,this.onLevelLoading,this),f.off(b.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),f.off(b.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),f.off(b.Events.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,T.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(f,x){this.tracks=x.audioTracks||[]},l.onAudioTrackLoaded=function(f,x){var L=x.id,h=x.details,m=this.tracksInGroup[L];if(!m){this.warn("Invalid audio track id "+L);return}var I=m.details;m.details=x.details,this.log("audioTrack "+L+" loaded ["+h.startSN+"-"+h.endSN+"]"),L===this.trackId&&(this.retryCount=0,this.playlistLoaded(L,x,I))},l.onLevelLoading=function(f,x){this.switchLevel(x.level)},l.onLevelSwitching=function(f,x){this.switchLevel(x.level)},l.switchLevel=function(f){var x=this.hls.levels[f];if(x!=null&&x.audioGroupIds){var L=x.audioGroupIds[x.urlId];if(this.groupId!==L){this.groupId=L;var h=this.tracks.filter(function(I){return!L||I.groupId===L});this.selectDefaultTrack&&!h.some(function(I){return I.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=h;var m={audioTracks:h};this.log("Updating audio tracks, "+h.length+' track(s) found in "'+L+'" group-id'),this.hls.trigger(b.Events.AUDIO_TRACKS_UPDATED,m),this.selectInitialTrack()}}},l.onError=function(f,x){T.prototype.onError.call(this,f,x),!(x.fatal||!x.context)&&x.context.type===O.PlaylistContextType.AUDIO_TRACK&&x.context.id===this.trackId&&x.context.groupId===this.groupId&&this.retryLoadingOrFail(x)},l.setAudioTrack=function(f){var x=this.tracksInGroup;if(f<0||f>=x.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var L=x[this.trackId];this.log("Now switching to audio-track index "+f);var h=x[f],m=h.id,I=h.groupId,g=I===void 0?"":I,E=h.name,u=h.type,y=h.url;if(this.trackId=f,this.trackName=E,this.selectDefaultTrack=!1,this.hls.trigger(b.Events.AUDIO_TRACK_SWITCHING,{id:m,groupId:g,name:E,type:u,url:y}),!(h.details&&!h.details.live)){var s=this.switchParams(h.url,L==null?void 0:L.details);this.loadPlaylist(s)}},l.selectInitialTrack=function(){var f=this.tracksInGroup;console.assert(f.length,"Initial audio track should be selected when tracks are known");var x=this.trackName,L=this.findTrackId(x)||this.findTrackId();L!==-1?this.setAudioTrack(L):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(b.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(f){for(var x=this.tracksInGroup,L=0;L<x.length;L++){var h=x[L];if((!this.selectDefaultTrack||h.default)&&(!f||f===h.name))return h.id}return-1},l.loadPlaylist=function(f){T.prototype.loadPlaylist.call(this);var x=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(x)){var L=x.id,h=x.groupId,m=x.url;if(f)try{m=f.addDirectives(m)}catch(I){this.warn("Could not construct new URL with HLS Delivery Directives: "+I)}this.log("loading audio-track playlist for id: "+L),this.clearTimer(),this.hls.trigger(b.Events.AUDIO_TRACK_LOADING,{url:m,id:L,groupId:h,deliveryDirectives:f||null})}},M(c,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(f){this.selectDefaultTrack=!1,this.setAudioTrack(f)}}]),c}(N.default);const D=a},"./src/controller/base-playlist-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>U});var b=o("./src/types/level.ts"),A=o("./src/controller/level-helper.ts"),N=o("./src/utils/logger.ts"),O=o("./src/errors.ts"),U=function(){function M(w,p){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=N.logger.log.bind(N.logger,p+":"),this.warn=N.logger.warn.bind(N.logger,p+":"),this.hls=w}var S=M.prototype;return S.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},S.onError=function(p,v){v.fatal&&(v.type===O.ErrorTypes.NETWORK_ERROR||v.type===O.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},S.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},S.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},S.stopLoad=function(){this.canLoad=!1,this.clearTimer()},S.switchParams=function(p,v){var a=v==null?void 0:v.renditionReports;if(a)for(var D=0;D<a.length;D++){var T=a[D],c=void 0;try{c=new self.URL(T.URI,v.url).href}catch(x){N.logger.warn("Could not construct new URL for Rendition Report: "+x),c=T.URI||""}if(c===p.slice(-c.length)){var l=parseInt(T["LAST-MSN"])||(v==null?void 0:v.lastPartSn),d=parseInt(T["LAST-PART"])||(v==null?void 0:v.lastPartIndex);if(this.hls.config.lowLatencyMode){var f=Math.min(v.age-v.partTarget,v.targetduration);d>=0&&f>v.partTarget&&(d+=1)}return new b.HlsUrlParameters(l,d>=0?d:void 0,b.HlsSkip.No)}}},S.loadPlaylist=function(p){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},S.shouldLoadTrack=function(p){return this.canLoad&&p&&!!p.url&&(!p.details||p.details.live)},S.playlistLoaded=function(p,v,a){var D=this,T=v.details,c=v.stats,l=self.performance.now(),d=c.loading.first?Math.max(0,l-c.loading.first):0;if(T.advancedDateTime=Date.now()-d,T.live||a!=null&&a.live){if(T.reloaded(a),a&&this.log("live playlist "+p+" "+(T.advanced?"REFRESHED "+T.lastPartSn+"-"+T.lastPartIndex:"MISSED")),a&&T.fragments.length>0&&(0,A.mergeDetails)(a,T),!this.canLoad||!T.live)return;var f,x=void 0,L=void 0;if(T.canBlockReload&&T.endSN&&T.advanced){var h=this.hls.config.lowLatencyMode,m=T.lastPartSn,I=T.endSN,g=T.lastPartIndex,E=g!==-1,u=m===I,y=h?0:g;E?(x=u?I+1:m,L=u?y:g+1):x=I+1;var s=T.age,_=s+T.ageHeader,F=Math.min(_-T.partTarget,T.targetduration*1.5);if(F>0){if(a&&F>a.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+a.tuneInGoal+" to: "+F+" with playlist age: "+T.age),F=0;else{var P=Math.floor(F/T.targetduration);if(x+=P,L!==void 0){var B=Math.round(F%T.targetduration/T.partTarget);L+=B}this.log("CDN Tune-in age: "+T.ageHeader+"s last advanced "+s.toFixed(2)+"s goal: "+F+" skip sn "+P+" to part "+L)}T.tuneInGoal=F}if(f=this.getDeliveryDirectives(T,v.deliveryDirectives,x,L),h||!u){this.loadPlaylist(f);return}}else f=this.getDeliveryDirectives(T,v.deliveryDirectives,x,L);var K=this.hls.mainForwardBufferInfo,j=K?K.end-K.len:0,W=(T.edge-j)*1e3,H=(0,A.computeReloadInterval)(T,W);T.updated?l>this.requestScheduled+H&&(this.requestScheduled=c.loading.start):this.requestScheduled=-1,x!==void 0&&T.canBlockReload?this.requestScheduled=c.loading.first+H-(T.partTarget*1e3||1e3):this.requestScheduled=(this.requestScheduled===-1?l:this.requestScheduled)+H;var G=this.requestScheduled-l;G=Math.max(0,G),this.log("reload live playlist "+p+" in "+Math.round(G)+" ms"),this.timer=self.setTimeout(function(){return D.loadPlaylist(f)},G)}else this.clearTimer()},S.getDeliveryDirectives=function(p,v,a,D){var T=(0,b.getSkipValue)(p,a);return v!=null&&v.skip&&p.deltaUpdateFailed&&(a=v.msn,D=v.part,T=b.HlsSkip.No),new b.HlsUrlParameters(a,D,T)},S.retryLoadingOrFail=function(p){var v=this,a=this.hls.config,D=this.retryCount<a.levelLoadingMaxRetry;if(D){var T;if(this.requestScheduled=-1,this.retryCount++,p.details.indexOf("LoadTimeOut")>-1&&(T=p.context)!==null&&T!==void 0&&T.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+p.details+'"'),this.loadPlaylist();else{var c=Math.min(Math.pow(2,this.retryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return v.loadPlaylist()},c),this.warn("retry playlist loading #"+this.retryCount+" in "+c+' ms after "'+p.details+'"')}}else this.warn('cannot recover from error "'+p.details+'"'),this.clearTimer(),p.fatal=!0;return D},M}()},"./src/controller/base-stream-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{State:()=>E,default:()=>u});var b=o("./src/polyfills/number.ts"),A=o("./src/task-loop.ts"),N=o("./src/controller/fragment-tracker.ts"),O=o("./src/utils/buffer-helper.ts"),U=o("./src/utils/logger.ts"),M=o("./src/events.ts"),S=o("./src/errors.ts"),w=o("./src/types/transmuxer.ts"),p=o("./src/utils/mp4-tools.ts"),v=o("./src/utils/discontinuities.ts"),a=o("./src/controller/fragment-finders.ts"),D=o("./src/controller/level-helper.ts"),T=o("./src/loader/fragment-loader.ts"),c=o("./src/crypt/decrypter.ts"),l=o("./src/utils/time-ranges.ts"),d=o("./src/types/loader.ts");function f(y,s){for(var _=0;_<s.length;_++){var F=s[_];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(y,L(F.key),F)}}function x(y,s,_){return s&&f(y.prototype,s),_&&f(y,_),Object.defineProperty(y,"prototype",{writable:!1}),y}function L(y){var s=h(y,"string");return typeof s=="symbol"?s:String(s)}function h(y,s){if(typeof y!="object"||y===null)return y;var _=y[Symbol.toPrimitive];if(_!==void 0){var F=_.call(y,s||"default");if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(y)}function m(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function I(y,s){y.prototype=Object.create(s.prototype),y.prototype.constructor=y,g(y,s)}function g(y,s){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,P){return F.__proto__=P,F},g(y,s)}var E={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},u=function(y){I(s,y);function s(F,P,B,K){var j;return j=y.call(this)||this,j.hls=void 0,j.fragPrevious=null,j.fragCurrent=null,j.fragmentTracker=void 0,j.transmuxer=null,j._state=E.STOPPED,j.media=null,j.mediaBuffer=null,j.config=void 0,j.bitrateTest=!1,j.lastCurrentTime=0,j.nextLoadPosition=0,j.startPosition=0,j.loadedmetadata=!1,j.fragLoadError=0,j.retryDate=0,j.levels=null,j.fragmentLoader=void 0,j.keyLoader=void 0,j.levelLastLoaded=null,j.startFragRequested=!1,j.decrypter=void 0,j.initPTS=[],j.onvseeking=null,j.onvended=null,j.logPrefix="",j.log=void 0,j.warn=void 0,j.logPrefix=K,j.log=U.logger.log.bind(U.logger,K+":"),j.warn=U.logger.warn.bind(U.logger,K+":"),j.hls=F,j.fragmentLoader=new T.default(F.config),j.keyLoader=B,j.fragmentTracker=P,j.config=F.config,j.decrypter=new c.default(F.config),F.on(M.Events.LEVEL_SWITCHING,j.onLevelSwitching,m(j)),j}var _=s.prototype;return _.doTick=function(){this.onTickEnd()},_.onTickEnd=function(){},_.startLoad=function(P){},_.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var P=this.fragCurrent;P&&(P.abortRequests(),this.fragmentTracker.removeFragment(P)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=E.STOPPED},_._streamEnded=function(P,B){if(B.live||P.nextStart||!P.end||!this.media)return!1;var K=B.partList;if(K!=null&&K.length){var j=K[K.length-1],W=O.BufferHelper.isBuffered(this.media,j.start+j.duration/2);return W}var H=B.fragments[B.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(H)},_.getLevelDetails=function(){if(this.levels&&this.levelLastLoaded!==null){var P;return(P=this.levels[this.levelLastLoaded])===null||P===void 0?void 0:P.details}},_.onMediaAttached=function(P,B){var K=this.media=this.mediaBuffer=B.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),K.addEventListener("seeking",this.onvseeking),K.addEventListener("ended",this.onvended);var j=this.config;this.levels&&j.autoStartLoad&&this.state===E.STOPPED&&this.startLoad(j.startPosition)},_.onMediaDetaching=function(){var P=this.media;P!=null&&P.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),P&&this.onvseeking&&this.onvended&&(P.removeEventListener("seeking",this.onvseeking),P.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},_.onMediaSeeking=function(){var P=this.config,B=this.fragCurrent,K=this.media,j=this.mediaBuffer,W=this.state,H=K?K.currentTime:0,G=O.BufferHelper.bufferInfo(j||K,H,P.maxBufferHole);if(this.log("media seeking to "+((0,b.isFiniteNumber)(H)?H.toFixed(3):H)+", state: "+W),this.state===E.ENDED)this.resetLoadingState();else if(B){var $=P.maxFragLookUpTolerance,V=B.start-$,z=B.start+B.duration+$;if(!G.len||z<G.start||V>G.end){var Y=H>z;(H<V||Y)&&(Y&&B.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),B.abortRequests()),this.resetLoadingState())}}K&&(this.lastCurrentTime=H),!this.loadedmetadata&&!G.len&&(this.nextLoadPosition=this.startPosition=H),this.tickImmediate()},_.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},_.onLevelSwitching=function(P,B){this.fragLoadError=0},_.onHandlerDestroying=function(){this.stopLoad(),y.prototype.onHandlerDestroying.call(this)},_.onHandlerDestroyed=function(){this.state=E.STOPPED,this.hls.off(M.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,y.prototype.onHandlerDestroyed.call(this)},_.loadFragment=function(P,B,K){this._loadFragForPlayback(P,B,K)},_._loadFragForPlayback=function(P,B,K){var j=this,W=function(G){if(j.fragContextChanged(P)){j.warn("Fragment "+P.sn+(G.part?" p: "+G.part.index:"")+" of level "+P.level+" was dropped during download."),j.fragmentTracker.removeFragment(P);return}P.stats.chunkCount++,j._handleFragmentLoadProgress(G)};this._doFragLoad(P,B,K,W).then(function(H){if(H){j.fragLoadError=0;var G=j.state;if(j.fragContextChanged(P)){(G===E.FRAG_LOADING||!j.fragCurrent&&G===E.PARSING)&&(j.fragmentTracker.removeFragment(P),j.state=E.IDLE);return}"payload"in H&&(j.log("Loaded fragment "+P.sn+" of level "+P.level),j.hls.trigger(M.Events.FRAG_LOADED,H)),j._handleFragmentLoadComplete(H)}}).catch(function(H){j.state===E.STOPPED||j.state===E.ERROR||(j.warn(H),j.resetFragmentLoading(P))})},_.flushMainBuffer=function(P,B,K){if(K===void 0&&(K=null),!!(P-B)){var j={startOffset:P,endOffset:B,type:K};this.fragLoadError=0,this.hls.trigger(M.Events.BUFFER_FLUSHING,j)}},_._loadInitSegment=function(P,B){var K=this;this._doFragLoad(P,B).then(function(j){if(!j||K.fragContextChanged(P)||!K.levels)throw new Error("init load aborted");return j}).then(function(j){var W=K.hls,H=j.payload,G=P.decryptdata;if(H&&H.byteLength>0&&G&&G.key&&G.iv&&G.method==="AES-128"){var $=self.performance.now();return K.decrypter.decrypt(new Uint8Array(H),G.key.buffer,G.iv.buffer).then(function(V){var z=self.performance.now();return W.trigger(M.Events.FRAG_DECRYPTED,{frag:P,payload:V,stats:{tstart:$,tdecrypt:z}}),j.payload=V,j})}return j}).then(function(j){var W=K.fragCurrent,H=K.hls,G=K.levels;if(!G)throw new Error("init load aborted, missing levels");var $=G[P.level].details;console.assert($,"Level details are defined when init segment is loaded");var V=P.stats;K.state=E.IDLE,K.fragLoadError=0,P.data=new Uint8Array(j.payload),V.parsing.start=V.buffering.start=self.performance.now(),V.parsing.end=V.buffering.end=self.performance.now(),j.frag===W&&H.trigger(M.Events.FRAG_BUFFERED,{stats:V,frag:W,part:null,id:P.type}),K.tick()}).catch(function(j){K.state===E.STOPPED||K.state===E.ERROR||(K.warn(j),K.resetFragmentLoading(P))})},_.fragContextChanged=function(P){var B=this.fragCurrent;return!P||!B||P.level!==B.level||P.sn!==B.sn||P.urlId!==B.urlId},_.fragBufferedComplete=function(P,B){var K,j,W,H,G=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+P.type+" sn: "+P.sn+(B?" part: "+B.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+P.level+" (frag:["+((K=P.startPTS)!=null?K:NaN).toFixed(3)+"-"+((j=P.endPTS)!=null?j:NaN).toFixed(3)+"] > buffer:"+(G?l.default.toString(O.BufferHelper.getBuffered(G)):"(detached)")+")"),this.state=E.IDLE,G&&(!this.loadedmetadata&&P.type==d.PlaylistLevelType.MAIN&&G.buffered.length&&((W=this.fragCurrent)===null||W===void 0?void 0:W.sn)===((H=this.fragPrevious)===null||H===void 0?void 0:H.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},_.seekToStartPos=function(){},_._handleFragmentLoadComplete=function(P){var B=this.transmuxer;if(B){var K=P.frag,j=P.part,W=P.partsLoaded,H=!W||W.length===0||W.some(function($){return!$}),G=new w.ChunkMetadata(K.level,K.sn,K.stats.chunkCount+1,0,j?j.index:-1,!H);B.flush(G)}},_._handleFragmentLoadProgress=function(P){},_._doFragLoad=function(P,B,K,j){var W,H=this;if(K===void 0&&(K=null),!this.levels)throw new Error("frag load aborted, missing levels");var G=null;if(P.encrypted&&!((W=P.decryptdata)!==null&&W!==void 0&&W.key)?(this.log("Loading key for "+P.sn+" of ["+B.startSN+"-"+B.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+P.level),this.state=E.KEY_LOADING,this.fragCurrent=P,G=this.keyLoader.load(P).then(function(Q){if(!H.fragContextChanged(Q.frag))return H.hls.trigger(M.Events.KEY_LOADED,Q),H.state===E.KEY_LOADING&&(H.state=E.IDLE),Q}),this.hls.trigger(M.Events.KEY_LOADING,{frag:P}),this.throwIfFragContextChanged("KEY_LOADING")):!P.encrypted&&B.encryptedFragments.length&&this.keyLoader.loadClear(P,B.encryptedFragments),K=Math.max(P.start,K||0),this.config.lowLatencyMode&&B){var $=B.partList;if($&&j){K>P.end&&B.fragmentHint&&(P=B.fragmentHint);var V=this.getNextPart($,P,K);if(V>-1){var z=$[V];return this.log("Loading part sn: "+P.sn+" p: "+z.index+" cc: "+P.cc+" of playlist ["+B.startSN+"-"+B.endSN+"] parts [0-"+V+"-"+($.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+P.level+", target: "+parseFloat(K.toFixed(3))),this.nextLoadPosition=z.start+z.duration,this.state=E.FRAG_LOADING,this.hls.trigger(M.Events.FRAG_LOADING,{frag:P,part:$[V],targetBufferTime:K}),this.throwIfFragContextChanged("FRAG_LOADING parts"),G?G.then(function(Q){return!Q||H.fragContextChanged(Q.frag)?null:H.doFragPartsLoad(P,$,V,j)}).catch(function(Q){return H.handleFragLoadError(Q)}):this.doFragPartsLoad(P,$,V,j).catch(function(Q){return H.handleFragLoadError(Q)})}else if(!P.url||this.loadedEndOfParts($,K))return Promise.resolve(null)}}this.log("Loading fragment "+P.sn+" cc: "+P.cc+" "+(B?"of ["+B.startSN+"-"+B.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+P.level+", target: "+parseFloat(K.toFixed(3))),(0,b.isFiniteNumber)(P.sn)&&!this.bitrateTest&&(this.nextLoadPosition=P.start+P.duration),this.state=E.FRAG_LOADING,this.hls.trigger(M.Events.FRAG_LOADING,{frag:P,targetBufferTime:K}),this.throwIfFragContextChanged("FRAG_LOADING");var Y=this.config.progressive;return Y&&G?G.then(function(Q){return!Q||H.fragContextChanged(Q==null?void 0:Q.frag)?null:H.fragmentLoader.load(P,j)}).catch(function(Q){return H.handleFragLoadError(Q)}):Promise.all([this.fragmentLoader.load(P,Y?j:void 0),G]).then(function(Q){var q=Q[0];return!Y&&q&&j&&j(q),q}).catch(function(Q){return H.handleFragLoadError(Q)})},_.throwIfFragContextChanged=function(P){if(this.fragCurrent===null)throw new Error("frag load aborted, context changed in "+P)},_.doFragPartsLoad=function(P,B,K,j){var W=this;return new Promise(function(H,G){var $=[],V=function z(Y){var Q=B[Y];W.fragmentLoader.loadPart(P,Q,j).then(function(q){$[Q.index]=q;var Z=q.part;W.hls.trigger(M.Events.FRAG_LOADED,q);var J=B[Y+1];if(J&&J.fragment===P)z(Y+1);else return H({frag:P,part:Z,partsLoaded:$})}).catch(G)};V(K)})},_.handleFragLoadError=function(P){if("data"in P){var B=P.data;P.data&&B.details===S.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(B.frag,B.part):this.hls.trigger(M.Events.ERROR,B)}else this.hls.trigger(M.Events.ERROR,{type:S.ErrorTypes.OTHER_ERROR,details:S.ErrorDetails.INTERNAL_EXCEPTION,err:P,fatal:!0});return null},_._handleTransmuxerFlush=function(P){var B=this.getCurrentContext(P);if(!B||this.state!==E.PARSING){!this.fragCurrent&&this.state!==E.STOPPED&&this.state!==E.ERROR&&(this.state=E.IDLE);return}var K=B.frag,j=B.part,W=B.level,H=self.performance.now();K.stats.parsing.end=H,j&&(j.stats.parsing.end=H),this.updateLevelTiming(K,j,W,P.partial)},_.getCurrentContext=function(P){var B=this.levels,K=P.level,j=P.sn,W=P.part;if(!B||!B[K])return this.warn("Levels object was unset while buffering fragment "+j+" of level "+K+". The current chunk will not be buffered."),null;var H=B[K],G=W>-1?(0,D.getPartWith)(H,j,W):null,$=G?G.fragment:(0,D.getFragmentWithSN)(H,j,this.fragCurrent);return $?{frag:$,part:G,level:H}:null},_.bufferFragmentData=function(P,B,K,j){if(!(!P||this.state!==E.PARSING)){var W=P.data1,H=P.data2,G=W;if(W&&H&&(G=(0,p.appendUint8Array)(W,H)),!(!G||!G.length)){var $={type:P.type,frag:B,part:K,chunkMeta:j,parent:B.type,data:G};this.hls.trigger(M.Events.BUFFER_APPENDING,$),P.dropped&&P.independent&&!K&&this.flushBufferGap(B)}}},_.flushBufferGap=function(P){var B=this.media;if(B){if(!O.BufferHelper.isBuffered(B,B.currentTime)){this.flushMainBuffer(0,P.start);return}var K=B.currentTime,j=O.BufferHelper.bufferInfo(B,K,0),W=P.duration,H=Math.min(this.config.maxFragLookUpTolerance*2,W*.25),G=Math.max(Math.min(P.start-H,j.end-H),K+H);P.start-G>H&&this.flushMainBuffer(G,P.start)}},_.getFwdBufferInfo=function(P,B){var K=this.config,j=this.getLoadPosition();if(!(0,b.isFiniteNumber)(j))return null;var W=O.BufferHelper.bufferInfo(P,j,K.maxBufferHole);if(W.len===0&&W.nextStart!==void 0){var H=this.fragmentTracker.getBufferedFrag(j,B);if(H&&W.nextStart<H.end)return O.BufferHelper.bufferInfo(P,j,Math.max(W.nextStart,K.maxBufferHole))}return W},_.getMaxBufferLength=function(P){var B=this.config,K;return P?K=Math.max(8*B.maxBufferSize/P,B.maxBufferLength):K=B.maxBufferLength,Math.min(K,B.maxMaxBufferLength)},_.reduceMaxBufferLength=function(P){var B=this.config,K=P||B.maxBufferLength;return B.maxMaxBufferLength>=K?(B.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+B.maxMaxBufferLength+"s"),!0):!1},_.getNextFragment=function(P,B){var K=B.fragments,j=K.length;if(!j)return null;var W=this.config,H=K[0].start,G;if(B.live){var $=W.initialLiveManifestSize;if(j<$)return this.warn("Not enough fragments to start playback (have: "+j+", need: "+$+")"),null;!B.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(G=this.getInitialLiveFragment(B,K),this.startPosition=G?this.hls.liveSyncPosition||G.start:P)}else P<=H&&(G=K[0]);if(!G){var V=W.lowLatencyMode?B.partEnd:B.fragmentEnd;G=this.getFragmentAtPosition(P,V,B)}return this.mapToInitFragWhenRequired(G)},_.mapToInitFragWhenRequired=function(P){return P!=null&&P.initSegment&&!(P!=null&&P.initSegment.data)&&!this.bitrateTest?P.initSegment:P},_.getNextPart=function(P,B,K){for(var j=-1,W=!1,H=!0,G=0,$=P.length;G<$;G++){var V=P[G];if(H=H&&!V.independent,j>-1&&K<V.start)break;var z=V.loaded;z?j=-1:(W||V.independent||H)&&V.fragment===B&&(j=G),W=z}return j},_.loadedEndOfParts=function(P,B){var K=P[P.length-1];return K&&B>K.start&&K.loaded},_.getInitialLiveFragment=function(P,B){var K=this.fragPrevious,j=null;if(K){if(P.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+K.programDateTime),j=(0,a.findFragmentByPDT)(B,K.endProgramDateTime,this.config.maxFragLookUpTolerance)),!j){var W=K.sn+1;if(W>=P.startSN&&W<=P.endSN){var H=B[W-P.startSN];K.cc===H.cc&&(j=H,this.log("Live playlist, switching playlist, load frag with next SN: "+j.sn))}j||(j=(0,a.findFragWithCC)(B,K.cc),j&&this.log("Live playlist, switching playlist, load frag with same CC: "+j.sn))}}else{var G=this.hls.liveSyncPosition;G!==null&&(j=this.getFragmentAtPosition(G,this.bitrateTest?P.fragmentEnd:P.edge,P))}return j},_.getFragmentAtPosition=function(P,B,K){var j=this.config,W=this.fragPrevious,H=K.fragments,G=K.endSN,$=K.fragmentHint,V=j.maxFragLookUpTolerance,z=!!(j.lowLatencyMode&&K.partList&&$);z&&$&&!this.bitrateTest&&(H=H.concat($),G=$.sn);var Y;if(P<B){var Q=P>B-V?0:V;Y=(0,a.findFragmentByPTS)(W,H,P,Q)}else Y=H[H.length-1];if(Y){var q=Y.sn-K.startSN;if(this.fragmentTracker.getState(Y)===N.FragmentState.OK&&(W=Y),W&&Y.sn===W.sn&&!z){var Z=W&&Y.level===W.level;if(Z){var J=H[q+1];Y.sn<G&&this.fragmentTracker.getState(J)!==N.FragmentState.OK?(this.log("SN "+Y.sn+" just loaded, load next one: "+J.sn),Y=J):Y=null}}}return Y},_.synchronizeToLiveEdge=function(P){var B=this.config,K=this.media;if(K){var j=this.hls.liveSyncPosition,W=K.currentTime,H=P.fragments[0].start,G=P.edge,$=W>=H-B.maxFragLookUpTolerance&&W<=G;if(j!==null&&K.duration>j&&(W<j||!$)){var V=B.liveMaxLatencyDuration!==void 0?B.liveMaxLatencyDuration:B.liveMaxLatencyDurationCount*P.targetduration;(!$&&K.readyState<4||W<G-V)&&(this.loadedmetadata||(this.nextLoadPosition=j),K.readyState&&(this.warn("Playback: "+W.toFixed(3)+" is located too far from the end of live sliding playlist: "+G+", reset currentTime to : "+j.toFixed(3)),K.currentTime=j))}}},_.alignPlaylists=function(P,B){var K=this.levels,j=this.levelLastLoaded,W=this.fragPrevious,H=j!==null?K[j]:null,G=P.fragments.length;if(!G)return this.warn("No fragments in live playlist"),0;var $=P.fragments[0].start,V=!B,z=P.alignedSliding&&(0,b.isFiniteNumber)($);if(V||!z&&!$){(0,v.alignStream)(W,H,P);var Y=P.fragments[0].start;return this.log("Live playlist sliding: "+Y.toFixed(2)+" start-sn: "+(B?B.startSN:"na")+"->"+P.startSN+" prev-sn: "+(W?W.sn:"na")+" fragments: "+G),Y}return $},_.waitForCdnTuneIn=function(P){var B=3;return P.live&&P.canBlockReload&&P.partTarget&&P.tuneInGoal>Math.max(P.partHoldBack,P.partTarget*B)},_.setStartPosition=function(P,B){var K=this.startPosition;if(K<B&&(K=-1),K===-1||this.lastCurrentTime===-1){var j=P.startTimeOffset;(0,b.isFiniteNumber)(j)?(K=B+j,j<0&&(K+=P.totalduration),K=Math.min(Math.max(B,K),B+P.totalduration),this.log("Start time offset "+j+" found in playlist, adjust startPosition to "+K),this.startPosition=K):P.live?K=this.hls.liveSyncPosition||B:this.startPosition=K=0,this.lastCurrentTime=K}this.nextLoadPosition=K},_.getLoadPosition=function(){var P=this.media,B=0;return this.loadedmetadata&&P?B=P.currentTime:this.nextLoadPosition&&(B=this.nextLoadPosition),B},_.handleFragLoadAborted=function(P,B){this.transmuxer&&P.sn!=="initSegment"&&P.stats.aborted&&(this.warn("Fragment "+P.sn+(B?" part"+B.index:"")+" of level "+P.level+" was aborted"),this.resetFragmentLoading(P))},_.resetFragmentLoading=function(P){(!this.fragCurrent||!this.fragContextChanged(P)&&this.state!==E.FRAG_LOADING_WAITING_RETRY)&&(this.state=E.IDLE)},_.onFragmentOrKeyLoadError=function(P,B){if(B.fatal){this.stopLoad(),this.state=E.ERROR;return}var K=this.config;if(B.chunkMeta){var j=this.getCurrentContext(B.chunkMeta);j&&(B.frag=j.frag,B.levelRetry=!0,this.fragLoadError=K.fragLoadingMaxRetry)}var W=B.frag;if(!(!W||W.type!==P)){var H=this.fragCurrent;if(console.assert(H&&W.sn===H.sn&&W.level===H.level&&W.urlId===H.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=K.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var G=Math.min(Math.pow(2,this.fragLoadError)*K.fragLoadingRetryDelay,K.fragLoadingMaxRetryTimeout);this.warn("Fragment "+W.sn+" of "+P+" "+W.level+" failed to load, retrying in "+G+"ms"),this.retryDate=self.performance.now()+G,this.fragLoadError++,this.state=E.FRAG_LOADING_WAITING_RETRY}else B.levelRetry?(P===d.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=E.IDLE):(U.logger.error(B.details+" reaches max retry, redispatch as fatal ..."),B.fatal=!0,this.hls.stopLoad(),this.state=E.ERROR)}},_.afterBufferFlushed=function(P,B,K){if(P){var j=O.BufferHelper.getBuffered(P);this.fragmentTracker.detectEvictedFragments(B,j,K),this.state===E.ENDED&&this.resetLoadingState()}},_.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=E.IDLE},_.resetStartWhenNotLoaded=function(P){if(!this.loadedmetadata){this.startFragRequested=!1;var B=this.levels?this.levels[P].details:null;B!=null&&B.live?(this.startPosition=-1,this.setStartPosition(B,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},_.updateLevelTiming=function(P,B,K,j){var W=this,H=K.details;console.assert(!!H,"level.details must be defined");var G=Object.keys(P.elementaryStreams).reduce(function($,V){var z=P.elementaryStreams[V];if(z){var Y=z.endPTS-z.startPTS;if(Y<=0)return W.warn("Could not parse fragment "+P.sn+" "+V+" duration reliably ("+Y+")"),$||!1;var Q=j?0:(0,D.updateFragPTSDTS)(H,P,z.startPTS,z.endPTS,z.startDTS,z.endDTS);return W.hls.trigger(M.Events.LEVEL_PTS_UPDATED,{details:H,level:K,drift:Q,type:V,frag:P,start:z.startPTS,end:z.endPTS}),!0}return $},!1);G||(this.warn("Found no media in fragment "+P.sn+" of level "+K.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=E.PARSED,this.hls.trigger(M.Events.FRAG_PARSED,{frag:P,part:B})},_.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},x(s,[{key:"state",get:function(){return this._state},set:function(P){var B=this._state;B!==P&&(this._state=P,this.log(B+"->"+P))}}]),s}(A.default)},"./src/controller/buffer-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>a});var b=o("./src/polyfills/number.ts"),A=o("./src/events.ts"),N=o("./src/utils/logger.ts"),O=o("./src/errors.ts"),U=o("./src/utils/buffer-helper.ts"),M=o("./src/utils/mediasource-helper.ts"),S=o("./src/loader/fragment.ts"),w=o("./src/controller/buffer-operation-queue.ts"),p=(0,M.getMediaSource)(),v=/([ha]vc.)(?:\.[^.,]+)+/,a=function(){function D(c){var l=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var d=l.media,f=l.mediaSource;N.logger.log("[buffer-controller]: Media source opened"),d&&(d.removeEventListener("emptied",l._onMediaEmptied),l.updateMediaElementDuration(),l.hls.trigger(A.Events.MEDIA_ATTACHED,{media:d})),f&&f.removeEventListener("sourceopen",l._onMediaSourceOpen),l.checkPendingTracks()},this._onMediaSourceClose=function(){N.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){N.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var d=l.media,f=l._objectUrl;d&&d.src!==f&&N.logger.error("Media element src was set while attaching MediaSource ("+f+" > "+d.src+")")},this.hls=c,this._initSourceBuffer(),this.registerListeners()}var T=D.prototype;return T.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},T.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},T.registerListeners=function(){var l=this.hls;l.on(A.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),l.on(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),l.on(A.Events.MANIFEST_PARSED,this.onManifestParsed,this),l.on(A.Events.BUFFER_RESET,this.onBufferReset,this),l.on(A.Events.BUFFER_APPENDING,this.onBufferAppending,this),l.on(A.Events.BUFFER_CODECS,this.onBufferCodecs,this),l.on(A.Events.BUFFER_EOS,this.onBufferEos,this),l.on(A.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),l.on(A.Events.LEVEL_UPDATED,this.onLevelUpdated,this),l.on(A.Events.FRAG_PARSED,this.onFragParsed,this),l.on(A.Events.FRAG_CHANGED,this.onFragChanged,this)},T.unregisterListeners=function(){var l=this.hls;l.off(A.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),l.off(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),l.off(A.Events.MANIFEST_PARSED,this.onManifestParsed,this),l.off(A.Events.BUFFER_RESET,this.onBufferReset,this),l.off(A.Events.BUFFER_APPENDING,this.onBufferAppending,this),l.off(A.Events.BUFFER_CODECS,this.onBufferCodecs,this),l.off(A.Events.BUFFER_EOS,this.onBufferEos,this),l.off(A.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),l.off(A.Events.LEVEL_UPDATED,this.onLevelUpdated,this),l.off(A.Events.FRAG_PARSED,this.onFragParsed,this),l.off(A.Events.FRAG_CHANGED,this.onFragChanged,this)},T._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new w.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},T.onManifestParsed=function(l,d){var f=2;(d.audio&&!d.video||!d.altAudio)&&(f=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=f,this.details=null,N.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},T.onMediaAttaching=function(l,d){var f=this.media=d.media;if(f&&p){var x=this.mediaSource=new p;x.addEventListener("sourceopen",this._onMediaSourceOpen),x.addEventListener("sourceended",this._onMediaSourceEnded),x.addEventListener("sourceclose",this._onMediaSourceClose),f.src=self.URL.createObjectURL(x),this._objectUrl=f.src,f.addEventListener("emptied",this._onMediaEmptied)}},T.onMediaDetaching=function(){var l=this.media,d=this.mediaSource,f=this._objectUrl;if(d){if(N.logger.log("[buffer-controller]: media source detaching"),d.readyState==="open")try{d.endOfStream()}catch(x){N.logger.warn("[buffer-controller]: onMediaDetaching: "+x.message+" while calling endOfStream")}this.onBufferReset(),d.removeEventListener("sourceopen",this._onMediaSourceOpen),d.removeEventListener("sourceended",this._onMediaSourceEnded),d.removeEventListener("sourceclose",this._onMediaSourceClose),l&&(l.removeEventListener("emptied",this._onMediaEmptied),f&&self.URL.revokeObjectURL(f),l.src===f?(l.removeAttribute("src"),l.load()):N.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(A.Events.MEDIA_DETACHED,void 0)},T.onBufferReset=function(){var l=this;this.getSourceBufferTypes().forEach(function(d){var f=l.sourceBuffer[d];try{f&&(l.removeBufferListeners(d),l.mediaSource&&l.mediaSource.removeSourceBuffer(f),l.sourceBuffer[d]=void 0)}catch(x){N.logger.warn("[buffer-controller]: Failed to reset the "+d+" buffer",x)}}),this._initSourceBuffer()},T.onBufferCodecs=function(l,d){var f=this,x=this.getSourceBufferTypes().length;Object.keys(d).forEach(function(L){if(x){var h=f.tracks[L];if(h&&typeof h.buffer.changeType=="function"){var m=d[L],I=m.id,g=m.codec,E=m.levelCodec,u=m.container,y=m.metadata,s=(h.levelCodec||h.codec).replace(v,"$1"),_=(E||g).replace(v,"$1");if(s!==_){var F=u+";codecs="+(E||g);f.appendChangeType(L,F),N.logger.log("[buffer-controller]: switching codec "+s+" to "+_),f.tracks[L]={buffer:h.buffer,codec:g,container:u,levelCodec:E,metadata:y,id:I}}}}else f.pendingTracks[L]=d[L]}),!x&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},T.appendChangeType=function(l,d){var f=this,x=this.operationQueue,L={execute:function(){var m=f.sourceBuffer[l];m&&(N.logger.log("[buffer-controller]: changing "+l+" sourceBuffer type to "+d),m.changeType(d)),x.shiftAndExecuteNext(l)},onStart:function(){},onComplete:function(){},onError:function(m){N.logger.warn("[buffer-controller]: Failed to change "+l+" SourceBuffer type",m)}};x.append(L,l)},T.onBufferAppending=function(l,d){var f=this,x=this.hls,L=this.operationQueue,h=this.tracks,m=d.data,I=d.type,g=d.frag,E=d.part,u=d.chunkMeta,y=u.buffering[I],s=self.performance.now();y.start=s;var _=g.stats.buffering,F=E?E.stats.buffering:null;_.start===0&&(_.start=s),F&&F.start===0&&(F.start=s);var P=h.audio,B=!1;I==="audio"&&(P==null?void 0:P.container)==="audio/mpeg"&&(B=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var K=g.start,j={execute:function(){if(y.executeStart=self.performance.now(),B){var H=f.sourceBuffer[I];if(H){var G=K-H.timestampOffset;Math.abs(G)>=.1&&(N.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+K+" (delta: "+G+") sn: "+g.sn+")"),H.timestampOffset=K)}}f.appendExecutor(m,I)},onStart:function(){},onComplete:function(){var H=self.performance.now();y.executeEnd=y.end=H,_.first===0&&(_.first=H),F&&F.first===0&&(F.first=H);var G=f.sourceBuffer,$={};for(var V in G)$[V]=U.BufferHelper.getBuffered(G[V]);f.appendError=0,f.hls.trigger(A.Events.BUFFER_APPENDED,{type:I,frag:g,part:E,chunkMeta:u,parent:g.type,timeRanges:$})},onError:function(H){N.logger.error("[buffer-controller]: Error encountered while trying to append to the "+I+" SourceBuffer",H);var G={type:O.ErrorTypes.MEDIA_ERROR,parent:g.type,details:O.ErrorDetails.BUFFER_APPEND_ERROR,err:H,fatal:!1};H.code===DOMException.QUOTA_EXCEEDED_ERR?G.details=O.ErrorDetails.BUFFER_FULL_ERROR:(f.appendError++,G.details=O.ErrorDetails.BUFFER_APPEND_ERROR,f.appendError>x.config.appendErrorMaxRetry&&(N.logger.error("[buffer-controller]: Failed "+x.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),G.fatal=!0,x.stopLoad())),x.trigger(A.Events.ERROR,G)}};L.append(j,I)},T.onBufferFlushing=function(l,d){var f=this,x=this.operationQueue,L=function(m){return{execute:f.removeExecutor.bind(f,m,d.startOffset,d.endOffset),onStart:function(){},onComplete:function(){f.hls.trigger(A.Events.BUFFER_FLUSHED,{type:m})},onError:function(g){N.logger.warn("[buffer-controller]: Failed to remove from "+m+" SourceBuffer",g)}}};d.type?x.append(L(d.type),d.type):this.getSourceBufferTypes().forEach(function(h){x.append(L(h),h)})},T.onFragParsed=function(l,d){var f=this,x=d.frag,L=d.part,h=[],m=L?L.elementaryStreams:x.elementaryStreams;m[S.ElementaryStreamTypes.AUDIOVIDEO]?h.push("audiovideo"):(m[S.ElementaryStreamTypes.AUDIO]&&h.push("audio"),m[S.ElementaryStreamTypes.VIDEO]&&h.push("video"));var I=function(){var E=self.performance.now();x.stats.buffering.end=E,L&&(L.stats.buffering.end=E);var u=L?L.stats:x.stats;f.hls.trigger(A.Events.FRAG_BUFFERED,{frag:x,part:L,stats:u,id:x.type})};h.length===0&&N.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+x.type+" level: "+x.level+" sn: "+x.sn),this.blockBuffers(I,h)},T.onFragChanged=function(l,d){this.flushBackBuffer()},T.onBufferEos=function(l,d){var f=this,x=this.getSourceBufferTypes().reduce(function(L,h){var m=f.sourceBuffer[h];return m&&(!d.type||d.type===h)&&(m.ending=!0,m.ended||(m.ended=!0,N.logger.log("[buffer-controller]: "+h+" sourceBuffer now EOS"))),L&&!!(!m||m.ended)},!0);x&&(N.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){f.getSourceBufferTypes().forEach(function(h){var m=f.sourceBuffer[h];m&&(m.ending=!1)});var L=f.mediaSource;if(!L||L.readyState!=="open"){L&&N.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+L.readyState);return}N.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),L.endOfStream()}))},T.onLevelUpdated=function(l,d){var f=d.details;f.fragments.length&&(this.details=f,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},T.flushBackBuffer=function(){var l=this.hls,d=this.details,f=this.media,x=this.sourceBuffer;if(!(!f||d===null)){var L=this.getSourceBufferTypes();if(L.length){var h=d.live&&l.config.liveBackBufferLength!==null?l.config.liveBackBufferLength:l.config.backBufferLength;if(!(!(0,b.isFiniteNumber)(h)||h<0)){var m=f.currentTime,I=d.levelTargetDuration,g=Math.max(h,I),E=Math.floor(m/I)*I-g;L.forEach(function(u){var y=x[u];if(y){var s=U.BufferHelper.getBuffered(y);if(s.length>0&&E>s.start(0)){if(l.trigger(A.Events.BACK_BUFFER_REACHED,{bufferEnd:E}),d.live)l.trigger(A.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:E});else if(y.ended&&s.end(s.length-1)-m<I*2){N.logger.info("[buffer-controller]: Cannot flush "+u+" back buffer while SourceBuffer is in ended state");return}l.trigger(A.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:E,type:u})}}})}}}},T.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var l=this.details,d=this.hls,f=this.media,x=this.mediaSource,L=l.fragments[0].start+l.totalduration,h=f.duration,m=(0,b.isFiniteNumber)(x.duration)?x.duration:0;l.live&&d.config.liveDurationInfinity?(N.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),x.duration=1/0,this.updateSeekableRange(l)):(L>m&&L>h||!(0,b.isFiniteNumber)(h))&&(N.logger.log("[buffer-controller]: Updating Media Source duration to "+L.toFixed(3)),x.duration=L)}},T.updateSeekableRange=function(l){var d=this.mediaSource,f=l.fragments,x=f.length;if(x&&l.live&&d!==null&&d!==void 0&&d.setLiveSeekableRange){var L=Math.max(0,f[0].start),h=Math.max(L,L+l.totalduration);d.setLiveSeekableRange(L,h)}},T.checkPendingTracks=function(){var l=this.bufferCodecEventsExpected,d=this.operationQueue,f=this.pendingTracks,x=Object.keys(f).length;if(x&&!l||x===2){this.createSourceBuffers(f),this.pendingTracks={};var L=this.getSourceBufferTypes();if(L.length===0){this.hls.trigger(A.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}L.forEach(function(h){d.executeNext(h)})}},T.createSourceBuffers=function(l){var d=this.sourceBuffer,f=this.mediaSource;if(!f)throw Error("createSourceBuffers called when mediaSource was null");var x=0;for(var L in l)if(!d[L]){var h=l[L];if(!h)throw Error("source buffer exists for track "+L+", however track does not");var m=h.levelCodec||h.codec,I=h.container+";codecs="+m;N.logger.log("[buffer-controller]: creating sourceBuffer("+I+")");try{var g=d[L]=f.addSourceBuffer(I),E=L;this.addBufferListener(E,"updatestart",this._onSBUpdateStart),this.addBufferListener(E,"updateend",this._onSBUpdateEnd),this.addBufferListener(E,"error",this._onSBUpdateError),this.tracks[L]={buffer:g,codec:m,container:h.container,levelCodec:h.levelCodec,metadata:h.metadata,id:h.id},x++}catch(u){N.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+u.message),this.hls.trigger(A.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:I})}}x&&this.hls.trigger(A.Events.BUFFER_CREATED,{tracks:this.tracks})},T._onSBUpdateStart=function(l){var d=this.operationQueue,f=d.current(l);f.onStart()},T._onSBUpdateEnd=function(l){var d=this.operationQueue,f=d.current(l);f.onComplete(),d.shiftAndExecuteNext(l)},T._onSBUpdateError=function(l,d){N.logger.error("[buffer-controller]: "+l+" SourceBuffer error",d),this.hls.trigger(A.Events.ERROR,{type:O.ErrorTypes.MEDIA_ERROR,details:O.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var f=this.operationQueue.current(l);f&&f.onError(d)},T.removeExecutor=function(l,d,f){var x=this.media,L=this.mediaSource,h=this.operationQueue,m=this.sourceBuffer,I=m[l];if(!x||!L||!I){N.logger.warn("[buffer-controller]: Attempting to remove from the "+l+" SourceBuffer, but it does not exist"),h.shiftAndExecuteNext(l);return}var g=(0,b.isFiniteNumber)(x.duration)?x.duration:1/0,E=(0,b.isFiniteNumber)(L.duration)?L.duration:1/0,u=Math.max(0,d),y=Math.min(f,g,E);y>u&&!I.ending?(I.ended=!1,N.logger.log("[buffer-controller]: Removing ["+u+","+y+"] from the "+l+" SourceBuffer"),console.assert(!I.updating,l+" sourceBuffer must not be updating"),I.remove(u,y)):h.shiftAndExecuteNext(l)},T.appendExecutor=function(l,d){var f=this.operationQueue,x=this.sourceBuffer,L=x[d];if(!L){N.logger.warn("[buffer-controller]: Attempting to append to the "+d+" SourceBuffer, but it does not exist"),f.shiftAndExecuteNext(d);return}L.ended=!1,console.assert(!L.updating,d+" sourceBuffer must not be updating"),L.appendBuffer(l)},T.blockBuffers=function(l,d){var f=this;if(d===void 0&&(d=this.getSourceBufferTypes()),!d.length){N.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(l);return}var x=this.operationQueue,L=d.map(function(h){return x.appendBlocker(h)});Promise.all(L).then(function(){l(),d.forEach(function(h){var m=f.sourceBuffer[h];(!m||!m.updating)&&x.shiftAndExecuteNext(h)})})},T.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},T.addBufferListener=function(l,d,f){var x=this.sourceBuffer[l];if(x){var L=f.bind(this,l);this.listeners[l].push({event:d,listener:L}),x.addEventListener(d,L)}},T.removeBufferListeners=function(l){var d=this.sourceBuffer[l];d&&this.listeners[l].forEach(function(f){d.removeEventListener(f.event,f.listener)})},D}()},"./src/controller/buffer-operation-queue.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>A});var b=o("./src/utils/logger.ts"),A=function(){function N(U){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=U}var O=N.prototype;return O.append=function(M,S){var w=this.queues[S];w.push(M),w.length===1&&this.buffers[S]&&this.executeNext(S)},O.insertAbort=function(M,S){var w=this.queues[S];w.unshift(M),this.executeNext(S)},O.appendBlocker=function(M){var S,w=new Promise(function(v){S=v}),p={execute:S,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(p,M),w},O.executeNext=function(M){var S=this.buffers,w=this.queues,p=S[M],v=w[M];if(v.length){var a=v[0];try{a.execute()}catch(D){b.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(D),(!p||!p.updating)&&(v.shift(),this.executeNext(M))}}},O.shiftAndExecuteNext=function(M){this.queues[M].shift(),this.executeNext(M)},O.current=function(M){return this.queues[M][0]},N}()},"./src/controller/cap-level-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>S});var b=o("./src/events.ts");function A(w,p){for(var v=0;v<p.length;v++){var a=p[v];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(w,O(a.key),a)}}function N(w,p,v){return p&&A(w.prototype,p),v&&A(w,v),Object.defineProperty(w,"prototype",{writable:!1}),w}function O(w){var p=U(w,"string");return typeof p=="symbol"?p:String(p)}function U(w,p){if(typeof w!="object"||w===null)return w;var v=w[Symbol.toPrimitive];if(v!==void 0){var a=v.call(w,p||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(w)}var M=function(){function w(v){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=v,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var p=w.prototype;return p.setStreamController=function(a){this.streamController=a},p.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},p.registerListeners=function(){var a=this.hls;a.on(b.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),a.on(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),a.on(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),a.on(b.Events.BUFFER_CODECS,this.onBufferCodecs,this),a.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},p.unregisterListener=function(){var a=this.hls;a.off(b.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),a.off(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),a.off(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),a.off(b.Events.BUFFER_CODECS,this.onBufferCodecs,this),a.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},p.onFpsDropLevelCapping=function(a,D){w.isLevelAllowed(D.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(D.droppedLevel)},p.onMediaAttaching=function(a,D){this.media=D.media instanceof HTMLVideoElement?D.media:null,this.clientRect=null},p.onManifestParsed=function(a,D){var T=this.hls;this.restrictedLevels=[],this.firstLevel=D.firstLevel,T.config.capLevelToPlayerSize&&D.video&&this.startCapping()},p.onBufferCodecs=function(a,D){var T=this.hls;T.config.capLevelToPlayerSize&&D.video&&this.startCapping()},p.onMediaDetaching=function(){this.stopCapping()},p.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var a=this.hls.levels;if(a.length){var D=this.hls;D.autoLevelCapping=this.getMaxLevel(a.length-1),D.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=D.autoLevelCapping}}},p.getMaxLevel=function(a){var D=this,T=this.hls.levels;if(!T.length)return-1;var c=T.filter(function(l,d){return w.isLevelAllowed(d,D.restrictedLevels)&&d<=a});return this.clientRect=null,w.getMaxLevelByMediaSize(c,this.mediaWidth,this.mediaHeight)},p.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},p.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},p.getDimensions=function(){if(this.clientRect)return this.clientRect;var a=this.media,D={width:0,height:0};if(a){var T=a.getBoundingClientRect();D.width=T.width,D.height=T.height,!D.width&&!D.height&&(D.width=T.right-T.left||a.width||0,D.height=T.bottom-T.top||a.height||0)}return this.clientRect=D,D},w.isLevelAllowed=function(a,D){return D===void 0&&(D=[]),D.indexOf(a)===-1},w.getMaxLevelByMediaSize=function(a,D,T){if(!a||!a.length)return-1;for(var c=function(L,h){return h?L.width!==h.width||L.height!==h.height:!0},l=a.length-1,d=0;d<a.length;d+=1){var f=a[d];if((f.width>=D||f.height>=T)&&c(f,a[d+1])){l=d;break}}return l},N(w,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var a=1;if(!this.hls.config.ignoreDevicePixelRatio)try{a=self.devicePixelRatio}catch{}return a}}]),w}();const S=M},"./src/controller/cmcd-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>T});var b=o("./src/events.ts"),A=o("./src/types/cmcd.ts"),N=o("./src/utils/buffer-helper.ts"),O=o("./src/utils/logger.ts");function U(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,S(f.key),f)}}function M(c,l,d){return l&&U(c.prototype,l),d&&U(c,d),Object.defineProperty(c,"prototype",{writable:!1}),c}function S(c){var l=w(c,"string");return typeof l=="symbol"?l:String(l)}function w(c,l){if(typeof c!="object"||c===null)return c;var d=c[Symbol.toPrimitive];if(d!==void 0){var f=d.call(c,l||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(c)}function p(c,l){var d=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(d)return(d=d.call(c)).next.bind(d);if(Array.isArray(c)||(d=v(c))||l&&c&&typeof c.length=="number"){d&&(c=d);var f=0;return function(){return f>=c.length?{done:!0}:{done:!1,value:c[f++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(c,l){if(c){if(typeof c=="string")return a(c,l);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return a(c,l)}}function a(c,l){(l==null||l>c.length)&&(l=c.length);for(var d=0,f=new Array(l);d<l;d++)f[d]=c[d];return f}function D(){return D=Object.assign?Object.assign.bind():function(c){for(var l=1;l<arguments.length;l++){var d=arguments[l];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c[f]=d[f])}return c},D.apply(this,arguments)}var T=function(){function c(d){var f=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){f.initialized&&(f.starved=!0),f.buffering=!0},this.onPlaying=function(){f.initialized||(f.initialized=!0),f.buffering=!1},this.applyPlaylistData=function(h){try{f.apply(h,{ot:A.CMCDObjectType.MANIFEST,su:!f.initialized})}catch(m){O.logger.warn("Could not generate manifest CMCD data.",m)}},this.applyFragmentData=function(h){try{var m=h.frag,I=f.hls.levels[m.level],g=f.getObjectType(m),E={d:m.duration*1e3,ot:g};(g===A.CMCDObjectType.VIDEO||g===A.CMCDObjectType.AUDIO||g==A.CMCDObjectType.MUXED)&&(E.br=I.bitrate/1e3,E.tb=f.getTopBandwidth(g)/1e3,E.bl=f.getBufferLength(g)),f.apply(h,E)}catch(u){O.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=d;var x=this.config=d.config,L=x.cmcd;L!=null&&(x.pLoader=this.createPlaylistLoader(),x.fLoader=this.createFragmentLoader(),this.sid=L.sessionId||c.uuid(),this.cid=L.contentId,this.useHeaders=L.useHeaders===!0,this.registerListeners())}var l=c.prototype;return l.registerListeners=function(){var f=this.hls;f.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(b.Events.MEDIA_DETACHED,this.onMediaDetached,this),f.on(b.Events.BUFFER_CREATED,this.onBufferCreated,this)},l.unregisterListeners=function(){var f=this.hls;f.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(b.Events.MEDIA_DETACHED,this.onMediaDetached,this),f.off(b.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},l.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},l.onMediaAttached=function(f,x){this.media=x.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},l.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},l.onBufferCreated=function(f,x){var L,h;this.audioBuffer=(L=x.tracks.audio)===null||L===void 0?void 0:L.buffer,this.videoBuffer=(h=x.tracks.video)===null||h===void 0?void 0:h.buffer},l.createData=function(){var f;return{v:A.CMCDVersion,sf:A.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(f=this.media)===null||f===void 0?void 0:f.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},l.apply=function(f,x){x===void 0&&(x={}),D(x,this.createData());var L=x.ot===A.CMCDObjectType.INIT||x.ot===A.CMCDObjectType.VIDEO||x.ot===A.CMCDObjectType.MUXED;if(this.starved&&L&&(x.bs=!0,x.su=!0,this.starved=!1),x.su==null&&(x.su=this.buffering),this.useHeaders){var h=c.toHeaders(x);if(!Object.keys(h).length)return;f.headers||(f.headers={}),D(f.headers,h)}else{var m=c.toQuery(x);if(!m)return;f.url=c.appendQueryToUri(f.url,m)}},l.getObjectType=function(f){var x=f.type;if(x==="subtitle")return A.CMCDObjectType.TIMED_TEXT;if(f.sn==="initSegment")return A.CMCDObjectType.INIT;if(x==="audio")return A.CMCDObjectType.AUDIO;if(x==="main")return this.hls.audioTracks.length?A.CMCDObjectType.VIDEO:A.CMCDObjectType.MUXED},l.getTopBandwidth=function(f){var x=0,L,h=this.hls;if(f===A.CMCDObjectType.AUDIO)L=h.audioTracks;else{var m=h.maxAutoLevel,I=m>-1?m+1:h.levels.length;L=h.levels.slice(0,I)}for(var g=p(L),E;!(E=g()).done;){var u=E.value;u.bitrate>x&&(x=u.bitrate)}return x>0?x:NaN},l.getBufferLength=function(f){var x=this.hls.media,L=f===A.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!L||!x)return NaN;var h=N.BufferHelper.bufferInfo(L,x.currentTime,this.config.maxBufferHole);return h.len*1e3},l.createPlaylistLoader=function(){var f=this.config.pLoader,x=this.applyPlaylistData,L=f||this.config.loader;return function(){function h(I){this.loader=void 0,this.loader=new L(I)}var m=h.prototype;return m.destroy=function(){this.loader.destroy()},m.abort=function(){this.loader.abort()},m.load=function(g,E,u){x(g),this.loader.load(g,E,u)},M(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},l.createFragmentLoader=function(){var f=this.config.fLoader,x=this.applyFragmentData,L=f||this.config.loader;return function(){function h(I){this.loader=void 0,this.loader=new L(I)}var m=h.prototype;return m.destroy=function(){this.loader.destroy()},m.abort=function(){this.loader.abort()},m.load=function(g,E,u){x(g),this.loader.load(g,E,u)},M(h,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),h}()},c.uuid=function(){var f=URL.createObjectURL(new Blob),x=f.toString();return URL.revokeObjectURL(f),x.slice(x.lastIndexOf("/")+1)},c.serialize=function(f){for(var x=[],L=function(j){return!Number.isNaN(j)&&j!=null&&j!==""&&j!==!1},h=function(j){return Math.round(j)},m=function(j){return h(j/100)*100},I=function(j){return encodeURIComponent(j)},g={br:h,d:h,bl:m,dl:m,mtp:m,nor:I,rtp:m,tb:h},E=Object.keys(f||{}).sort(),u=p(E),y;!(y=u()).done;){var s=y.value,_=f[s];if(L(_)&&!(s==="v"&&_===1)&&!(s=="pr"&&_===1)){var F=g[s];F&&(_=F(_));var P=typeof _,B=void 0;s==="ot"||s==="sf"||s==="st"?B=s+"="+_:P==="boolean"?B=s:P==="number"?B=s+"="+_:B=s+"="+JSON.stringify(_),x.push(B)}}return x.join(",")},c.toHeaders=function(f){for(var x=Object.keys(f),L={},h=["Object","Request","Session","Status"],m=[{},{},{},{}],I={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},g=0,E=x;g<E.length;g++){var u=E[g],y=I[u]!=null?I[u]:1;m[y][u]=f[u]}for(var s=0;s<m.length;s++){var _=c.serialize(m[s]);_&&(L["CMCD-"+h[s]]=_)}return L},c.toQuery=function(f){return"CMCD="+encodeURIComponent(c.serialize(f))},c.appendQueryToUri=function(f,x){if(!x)return f;var L=f.includes("?")?"&":"?";return""+f+L+x},c}()},"./src/controller/eme-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>g});var b=o("./src/events.ts"),A=o("./src/errors.ts"),N=o("./src/utils/logger.ts"),O=o("./src/utils/mediakeys-helper.ts"),U=o("./src/utils/keysystem-util.ts"),M=o("./src/utils/numeric-encoding-utils.ts"),S=o("./src/loader/level-key.ts"),w=o("./src/utils/hex.ts"),p=o("./src/utils/mp4-tools.ts"),v=o("./node_modules/eventemitter3/index.js"),a=o.n(v);function D(E,u){E.prototype=Object.create(u.prototype),E.prototype.constructor=E,f(E,u)}function T(E){var u=typeof Map=="function"?new Map:void 0;return T=function(s){if(s===null||!d(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(s))return u.get(s);u.set(s,_)}function _(){return c(s,arguments,x(this).constructor)}return _.prototype=Object.create(s.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),f(_,s)},T(E)}function c(E,u,y){return l()?c=Reflect.construct.bind():c=function(_,F,P){var B=[null];B.push.apply(B,F);var K=Function.bind.apply(_,B),j=new K;return P&&f(j,P.prototype),j},c.apply(null,arguments)}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(E){return Function.toString.call(E).indexOf("[native code]")!==-1}function f(E,u){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,_){return s.__proto__=_,s},f(E,u)}function x(E){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},x(E)}var L=3,h="[eme]",m=function(){function E(y){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=E.CDMCleanupPromise?[E.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=N.logger.debug.bind(N.logger,h),this.log=N.logger.log.bind(N.logger,h),this.warn=N.logger.warn.bind(N.logger,h),this.error=N.logger.error.bind(N.logger,h),this.hls=y,this.config=y.config,this.registerListeners()}var u=E.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},u.registerListeners=function(){this.hls.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(b.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(b.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.unregisterListeners=function(){this.hls.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(b.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(b.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.getLicenseServerUrl=function(s){var _=this.config,F=_.drmSystems,P=_.widevineLicenseUrl,B=F[s];if(B)return B.licenseUrl;if(s===O.KeySystems.WIDEVINE&&P)return P;throw new Error('no license server URL configured for key-system "'+s+'"')},u.getServerCertificateUrl=function(s){var _=this.config.drmSystems,F=_[s];if(F)return F.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+s+'"]')},u.attemptKeySystemAccess=function(s){var _=this,F=this.hls.levels,P=function(W,H,G){return!!W&&G.indexOf(W)===H},B=F.map(function(j){return j.audioCodec}).filter(P),K=F.map(function(j){return j.videoCodec}).filter(P);return B.length+K.length===0&&K.push("avc1.42e01e"),new Promise(function(j,W){var H=function G($){var V=$.shift();_.getMediaKeysPromise(V,B,K).then(function(z){return j({keySystem:V,mediaKeys:z})}).catch(function(z){$.length?G($):z instanceof I?W(z):W(new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:z,fatal:!0},z.message))})};H(s)})},u.requestMediaKeySystemAccess=function(s,_){var F=this.config.requestMediaKeySystemAccessFunc;if(typeof F!="function"){var P="Configured requestMediaKeySystemAccess is not a function "+F;return O.requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(P="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(P))}return F(s,_)},u.getMediaKeysPromise=function(s,_,F){var P=this,B=(0,O.getSupportedMediaKeySystemConfigurations)(s,_,F,this.config.drmSystemOptions),K=this.keySystemAccessPromises[s],j=K==null?void 0:K.keySystemAccess;if(!j){this.log('Requesting encrypted media "'+s+'" key-system access with config: '+JSON.stringify(B)),j=this.requestMediaKeySystemAccess(s,B);var W=this.keySystemAccessPromises[s]={keySystemAccess:j};return j.catch(function(H){P.log('Failed to obtain access to key-system "'+s+'": '+H)}),j.then(function(H){P.log('Access for key-system "'+H.keySystem+'" obtained');var G=P.fetchServerCertificate(s);return P.log('Create media-keys for "'+s+'"'),W.mediaKeys=H.createMediaKeys().then(function($){return P.log('Media-keys created for "'+s+'"'),G.then(function(V){return V?P.setMediaKeysServerCertificate($,s,V):$})}),W.mediaKeys.catch(function($){P.error('Failed to create media-keys for "'+s+'"}: '+$)}),W.mediaKeys})}return j.then(function(){return K.mediaKeys})},u.createMediaKeySessionContext=function(s){var _=s.decryptdata,F=s.keySystem,P=s.mediaKeys;console.assert(!!P,"mediaKeys is defined"),this.log('Creating key-system session "'+F+'" keyId: '+w.default.hexDump(_.keyId||[]));var B=P.createSession(),K={decryptdata:_,keySystem:F,mediaKeys:P,mediaKeysSession:B,keyStatus:"status-pending"};return this.mediaKeySessions.push(K),K},u.renewKeySession=function(s){var _=s.decryptdata;if(_.pssh){var F=this.createMediaKeySessionContext(s),P=this.getKeyIdString(_),B="cenc";this.keyIdToKeySessionPromise[P]=this.generateRequestWithPreferredKeySession(F,B,_.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(s)},u.getKeyIdString=function(s){if(!s)throw new Error("Could not read keyId of undefined decryptdata");if(s.keyId===null)throw new Error("keyId is null");return w.default.hexDump(s.keyId)},u.updateKeySession=function(s,_){var F,P=s.mediaKeysSession;return this.log('Updating key-session "'+P.sessionId+'" for keyID '+w.default.hexDump(((F=s.decryptdata)===null||F===void 0?void 0:F.keyId)||[])+`
      } (data length: `+(_&&_.byteLength)+")"),P.update(_)},u.selectKeySystemFormat=function(s){var _=Object.keys(s.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+s.sn+" "+s.type+": "+s.level+") key formats "+_.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(_)),this.keyFormatPromise},u.getKeyFormatPromise=function(s){var _=this;return new Promise(function(F,P){var B=(0,O.getKeySystemsForConfig)(_.config),K=s.map(O.keySystemFormatToKeySystemDomain).filter(function(j){return!!j&&B.indexOf(j)!==-1});return _.getKeySystemSelectionPromise(K).then(function(j){var W=j.keySystem,H=(0,O.keySystemDomainToKeySystemFormat)(W);H?F(H):P(new Error('Unable to find format for key-system "'+W+'"'))}).catch(P)})},u.loadKey=function(s){var _=this,F=s.keyInfo.decryptdata,P=this.getKeyIdString(F),B="(keyId: "+P+' format: "'+F.keyFormat+'" method: '+F.method+" uri: "+F.uri+")";this.log("Starting session for key "+B);var K=this.keyIdToKeySessionPromise[P];return K||(K=this.keyIdToKeySessionPromise[P]=this.getKeySystemForKeyPromise(F).then(function(j){var W=j.keySystem,H=j.mediaKeys;return _.throwIfDestroyed(),_.log("Handle encrypted media sn: "+s.frag.sn+" "+s.frag.type+": "+s.frag.level+" using key "+B),_.attemptSetMediaKeys(W,H).then(function(){_.throwIfDestroyed();var G=_.createMediaKeySessionContext({keySystem:W,mediaKeys:H,decryptdata:F}),$="cenc";return _.generateRequestWithPreferredKeySession(G,$,F.pssh,"playlist-key")})}),K.catch(function(j){return _.handleError(j)})),K},u.throwIfDestroyed=function(s){if(!this.hls)throw new Error("invalid state")},u.handleError=function(s){this.hls&&(this.error(s.message),s instanceof I?this.hls.trigger(b.Events.ERROR,s.data):this.hls.trigger(b.Events.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:s,fatal:!0}))},u.getKeySystemForKeyPromise=function(s){var _=this.getKeyIdString(s),F=this.keyIdToKeySessionPromise[_];if(!F){var P=(0,O.keySystemFormatToKeySystemDomain)(s.keyFormat),B=P?[P]:(0,O.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(B)}return F},u.getKeySystemSelectionPromise=function(s){if(s.length||(s=(0,O.getKeySystemsForConfig)(this.config)),s.length===0)throw new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(s)},u._onMediaEncrypted=function(s){var _=this,F=s.initDataType,P=s.initData;if(this.debug('"'+s.type+'" event: init data type: "'+F+'"'),P!==null){var B,K;if(F==="sinf"&&this.config.drmSystems[O.KeySystems.FAIRPLAY]){var j=(0,p.bin2str)(new Uint8Array(P));try{var W=(0,M.base64Decode)(JSON.parse(j).sinf),H=(0,p.parseSinf)(new Uint8Array(W));if(!H)return;B=H.subarray(8,24),K=O.KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{var G=(0,p.parsePssh)(P);if(G===null)return;G.version===0&&G.systemId===O.KeySystemIds.WIDEVINE&&G.data&&(B=G.data.subarray(8,24)),K=(0,O.keySystemIdToKeySystemDomain)(G.systemId)}if(!(!K||!B)){for(var $=w.default.hexDump(B),V=this.keyIdToKeySessionPromise,z=this.mediaKeySessions,Y=V[$],Q=function(ie){var le=z[ie],oe=le.decryptdata;if(oe.pssh||!oe.keyId)return"continue";var re=w.default.hexDump(oe.keyId);if($===re||oe.uri.replace(/-/g,"").indexOf($)!==-1)return Y=V[re],delete V[re],oe.pssh=new Uint8Array(P),oe.keyId=B,Y=V[$]=Y.then(function(){return _.generateRequestWithPreferredKeySession(le,F,P,"encrypted-event-key-match")}),"break"},q=0;q<z.length;q++){var Z=Q(q);if(Z!=="continue"&&Z==="break")break}Y||(Y=V[$]=this.getKeySystemSelectionPromise([K]).then(function(J){var ie,le=J.keySystem,oe=J.mediaKeys;_.throwIfDestroyed();var re=new S.LevelKey("ISO-23001-7",$,(ie=(0,O.keySystemDomainToKeySystemFormat)(le))!=null?ie:"");return re.pssh=new Uint8Array(P),re.keyId=B,_.attemptSetMediaKeys(le,oe).then(function(){_.throwIfDestroyed();var ne=_.createMediaKeySessionContext({decryptdata:re,keySystem:le,mediaKeys:oe});return _.generateRequestWithPreferredKeySession(ne,F,P,"encrypted-event-no-match")})})),Y.catch(function(J){return _.handleError(J)})}}},u._onWaitingForKey=function(s){this.log('"'+s.type+'" event')},u.attemptSetMediaKeys=function(s,_){var F=this,P=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+s+'"');var B=Promise.all(P).then(function(){if(!F.media)throw new Error("Attempted to set mediaKeys without media element attached");return F.media.setMediaKeys(_)});return this.setMediaKeysQueue.push(B),B.then(function(){F.log('Media-keys set for "'+s+'"'),P.push(B),F.setMediaKeysQueue=F.setMediaKeysQueue.filter(function(K){return P.indexOf(K)===-1})})},u.generateRequestWithPreferredKeySession=function(s,_,F,P){var B,K,j=this,W=(B=this.config.drmSystems)===null||B===void 0||(K=B[s.keySystem])===null||K===void 0?void 0:K.generateRequest;if(W)try{var H=W.call(this.hls,_,F,s);if(!H)throw new Error("Invalid response from configured generateRequest filter");_=H.initDataType,F=s.decryptdata.pssh=H.initData?new Uint8Array(H.initData):null}catch(Y){var G;if(this.warn(Y.message),(G=this.hls)!==null&&G!==void 0&&G.config.debug)throw Y}if(F===null)return this.log('Skipping key-session request for "'+P+'" (no initData)'),Promise.resolve(s);var $=this.getKeyIdString(s.decryptdata);this.log('Generating key-session request for "'+P+'": '+$+" (init data type: "+_+" length: "+(F?F.byteLength:null)+")");var V=new(a());s.mediaKeysSession.onmessage=function(Y){var Q=s.mediaKeysSession;if(!Q){V.emit("error",new Error("invalid state"));return}var q=Y.messageType,Z=Y.message;j.log('"'+q+'" message event for session "'+Q.sessionId+'" message size: '+Z.byteLength),q==="license-request"||q==="license-renewal"?j.renewLicense(s,Z).catch(function(J){j.handleError(J),V.emit("error",J)}):q==="license-release"?s.keySystem===O.KeySystems.FAIRPLAY&&(j.updateKeySession(s,(0,U.strToUtf8array)("acknowledged")),j.removeSession(s)):j.warn('unhandled media key message type "'+q+'"')},s.mediaKeysSession.onkeystatuseschange=function(Y){var Q=s.mediaKeysSession;if(!Q){V.emit("error",new Error("invalid state"));return}j.onKeyStatusChange(s);var q=s.keyStatus;V.emit("keyStatus",q),q==="expired"&&(j.warn(s.keySystem+" expired for key "+$),j.renewKeySession(s))};var z=new Promise(function(Y,Q){V.on("error",Q),V.on("keyStatus",function(q){q.startsWith("usable")?Y():q==="output-restricted"?Q(new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):q==="internal-error"?Q(new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+q+'"')):q==="expired"?Q(new Error("key expired while generating request")):j.warn('unhandled key status change "'+q+'"')})});return s.mediaKeysSession.generateRequest(_,F).then(function(){var Y;j.log('Request generated for key-session "'+((Y=s.mediaKeysSession)===null||Y===void 0?void 0:Y.sessionId)+'" keyId: '+$)}).catch(function(Y){throw new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:Y,fatal:!1},"Error generating key-session request: "+Y)}).then(function(){return z}).catch(function(Y){throw V.removeAllListeners(),j.removeSession(s),Y}).then(function(){return V.removeAllListeners(),s})},u.onKeyStatusChange=function(s){var _=this;s.mediaKeysSession.keyStatuses.forEach(function(F,P){_.log('key status change "'+F+'" for keyStatuses keyId: '+w.default.hexDump("buffer"in P?new Uint8Array(P.buffer,P.byteOffset,P.byteLength):new Uint8Array(P))+" session keyId: "+w.default.hexDump(new Uint8Array(s.decryptdata.keyId||[]))+" uri: "+s.decryptdata.uri),s.keyStatus=F})},u.fetchServerCertificate=function(s){var _=this;return new Promise(function(F,P){var B=_.getServerCertificateUrl(s);if(!B)return F();_.log('Fetching serverCertificate for "'+s+'"');var K=new XMLHttpRequest;K.open("GET",B,!0),K.responseType="arraybuffer",K.onreadystatechange=function(){K.readyState===XMLHttpRequest.DONE&&(K.status===200?F(K.response):P(new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:K},'"'+s+'" certificate request XHR failed ('+B+"). Status: "+K.status+" ("+K.statusText+")")))},K.send()})},u.setMediaKeysServerCertificate=function(s,_,F){var P=this;return new Promise(function(B,K){s.setServerCertificate(F).then(function(j){P.log("setServerCertificate "+(j?"success":"not supported by CDM")+" ("+(F==null?void 0:F.byteLength)+') on "'+_+'"'),B(s)}).catch(function(j){K(new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:j,fatal:!0},j.message))})})},u.renewLicense=function(s,_){var F=this;return this.requestLicense(s,new Uint8Array(_)).then(function(P){return F.updateKeySession(s,new Uint8Array(P)).catch(function(B){throw new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:B,fatal:!0},B.message)})})},u.setupLicenseXHR=function(s,_,F,P){var B=this,K=this.config.licenseXhrSetup;return K?Promise.resolve().then(function(){if(!F.decryptdata)throw new Error("Key removed");return K.call(B.hls,s,_,F,P)}).catch(function(j){if(!F.decryptdata)throw j;return s.open("POST",_,!0),K.call(B.hls,s,_,F,P)}).then(function(j){s.readyState||s.open("POST",_,!0);var W=j||P;return{xhr:s,licenseChallenge:W}}):(s.open("POST",_,!0),Promise.resolve({xhr:s,licenseChallenge:P}))},u.requestLicense=function(s,_){var F=this;return new Promise(function(P,B){var K=F.getLicenseServerUrl(s.keySystem);F.log("Sending license request to URL: "+K);var j=new XMLHttpRequest;j.responseType="arraybuffer",j.onreadystatechange=function(){if(!F.hls||!s.mediaKeysSession)return B(new Error("invalid state"));if(j.readyState===4)if(j.status===200){F._requestLicenseFailureCount=0;var W=j.response;F.log("License received "+(W instanceof ArrayBuffer?W.byteLength:W));var H=F.config.licenseResponseCallback;if(H)try{W=H.call(F.hls,j,K,s)}catch($){F.error($)}P(W)}else if(F._requestLicenseFailureCount++,F._requestLicenseFailureCount>L||j.status>=400&&j.status<500)B(new I({type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:j},"License Request XHR failed ("+K+"). Status: "+j.status+" ("+j.statusText+")"));else{var G=L-F._requestLicenseFailureCount+1;F.warn("Retrying license request, "+G+" attempts left"),F.requestLicense(s,_).then(P,B)}},s.licenseXhr&&s.licenseXhr.readyState!==XMLHttpRequest.DONE&&s.licenseXhr.abort(),s.licenseXhr=j,F.setupLicenseXHR(j,K,s,_).then(function(W){var H=W.xhr,G=W.licenseChallenge;H.send(G)})})},u.onMediaAttached=function(s,_){if(this.config.emeEnabled){var F=_.media;this.media=F,F.addEventListener("encrypted",this.onMediaEncrypted),F.addEventListener("waitingforkey",this.onWaitingForKey)}},u.onMediaDetached=function(){var s=this,_=this.media,F=this.mediaKeySessions;_&&(_.removeEventListener("encrypted",this.onMediaEncrypted),_.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},S.LevelKey.clearKeyUriToKeyIdMap();var P=F.length;E.CDMCleanupPromise=Promise.all(F.map(function(B){return s.removeSession(B)}).concat(_==null?void 0:_.setMediaKeys(null).catch(function(B){s.log("Could not clear media keys: "+B+". media.src: "+(_==null?void 0:_.src))}))).then(function(){P&&(s.log("finished closing key sessions and clearing media keys"),F.length=0)}).catch(function(B){s.log("Could not close sessions and clear media keys: "+B+". media.src: "+(_==null?void 0:_.src))})},u.onManifestLoaded=function(s,_){var F=_.sessionKeys;if(!(!F||!this.config.emeEnabled)&&!this.keyFormatPromise){var P=F.reduce(function(B,K){return B.indexOf(K.keyFormat)===-1&&B.push(K.keyFormat),B},[]);this.log("Selecting key-system from session-keys "+P.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(P)}},u.removeSession=function(s){var _=this,F=s.mediaKeysSession,P=s.licenseXhr;if(F){this.log("Remove licenses and keys and close session "+F.sessionId),F.onmessage=null,F.onkeystatuseschange=null,P&&P.readyState!==XMLHttpRequest.DONE&&P.abort(),s.mediaKeysSession=s.decryptdata=s.licenseXhr=void 0;var B=this.mediaKeySessions.indexOf(s);return B>-1&&this.mediaKeySessions.splice(B,1),F.remove().catch(function(K){_.log("Could not remove session: "+K)}).then(function(){return F.close()}).catch(function(K){_.log("Could not close session: "+K)})}},E}();m.CDMCleanupPromise=void 0;var I=function(E){D(u,E);function u(y,s){var _;return _=E.call(this,s)||this,_.data=void 0,_.data=y,y.err=y.error,_}return u}(T(Error));const g=m},"./src/controller/fps-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>O});var b=o("./src/events.ts"),A=o("./src/utils/logger.ts"),N=function(){function U(S){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=S,this.registerListeners()}var M=U.prototype;return M.setStreamController=function(w){this.streamController=w},M.registerListeners=function(){this.hls.on(b.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},M.unregisterListeners=function(){this.hls.off(b.Events.MEDIA_ATTACHING,this.onMediaAttaching)},M.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},M.onMediaAttaching=function(w,p){var v=this.hls.config;if(v.capLevelOnFPSDrop){var a=p.media instanceof self.HTMLVideoElement?p.media:null;this.media=a,a&&typeof a.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),v.fpsDroppedMonitoringPeriod)}},M.checkFPS=function(w,p,v){var a=performance.now();if(p){if(this.lastTime){var D=a-this.lastTime,T=v-this.lastDroppedFrames,c=p-this.lastDecodedFrames,l=1e3*T/D,d=this.hls;if(d.trigger(b.Events.FPS_DROP,{currentDropped:T,currentDecoded:c,totalDroppedFrames:v}),l>0&&T>d.config.fpsDroppedMonitoringThreshold*c){var f=d.currentLevel;A.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=f)&&(f=f-1,d.trigger(b.Events.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=v,this.lastDecodedFrames=p}},M.checkFPSInterval=function(){var w=this.media;if(w)if(this.isVideoPlaybackQualityAvailable){var p=w.getVideoPlaybackQuality();this.checkFPS(w,p.totalVideoFrames,p.droppedVideoFrames)}else this.checkFPS(w,w.webkitDecodedFrameCount,w.webkitDroppedFrameCount)},U}();const O=N},"./src/controller/fragment-finders.ts":(k,R,o)=>{o.r(R),o.d(R,{findFragWithCC:()=>S,findFragmentByPDT:()=>N,findFragmentByPTS:()=>O,fragmentWithinToleranceTest:()=>U,pdtWithinToleranceTest:()=>M});var b=o("./src/polyfills/number.ts"),A=o("./src/utils/binary-search.ts");function N(w,p,v){if(p===null||!Array.isArray(w)||!w.length||!(0,b.isFiniteNumber)(p))return null;var a=w[0].programDateTime;if(p<(a||0))return null;var D=w[w.length-1].endProgramDateTime;if(p>=(D||0))return null;v=v||0;for(var T=0;T<w.length;++T){var c=w[T];if(M(p,v,c))return c}return null}function O(w,p,v,a){v===void 0&&(v=0),a===void 0&&(a=0);var D=null;if(w?D=p[w.sn-p[0].sn+1]||null:v===0&&p[0].start===0&&(D=p[0]),D&&U(v,a,D)===0)return D;var T=A.default.search(p,U.bind(null,v,a));return T&&(T!==w||!D)?T:D}function U(w,p,v){if(w===void 0&&(w=0),p===void 0&&(p=0),v.start<=w&&v.start+v.duration>w)return 0;var a=Math.min(p,v.duration+(v.deltaPTS?v.deltaPTS:0));return v.start+v.duration-a<=w?1:v.start-a>w&&v.start?-1:0}function M(w,p,v){var a=Math.min(p,v.duration+(v.deltaPTS?v.deltaPTS:0))*1e3,D=v.endProgramDateTime||0;return D-a>w}function S(w,p){return A.default.search(w,function(v){return v.cc<p?1:v.cc>p?-1:0})}},"./src/controller/fragment-tracker.ts":(k,R,o)=>{o.r(R),o.d(R,{FragmentState:()=>N,FragmentTracker:()=>O});var b=o("./src/events.ts"),A=o("./src/types/loader.ts"),N;(function(S){S.NOT_LOADED="NOT_LOADED",S.APPENDING="APPENDING",S.PARTIAL="PARTIAL",S.OK="OK"})(N||(N={}));var O=function(){function S(p){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=p,this._registerListeners()}var w=S.prototype;return w._registerListeners=function(){var v=this.hls;v.on(b.Events.BUFFER_APPENDED,this.onBufferAppended,this),v.on(b.Events.FRAG_BUFFERED,this.onFragBuffered,this),v.on(b.Events.FRAG_LOADED,this.onFragLoaded,this)},w._unregisterListeners=function(){var v=this.hls;v.off(b.Events.BUFFER_APPENDED,this.onBufferAppended,this),v.off(b.Events.FRAG_BUFFERED,this.onFragBuffered,this),v.off(b.Events.FRAG_LOADED,this.onFragLoaded,this)},w.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},w.getAppendedFrag=function(v,a){if(a===A.PlaylistLevelType.MAIN){var D=this.activeFragment,T=this.activeParts;if(!D)return null;if(T)for(var c=T.length;c--;){var l=T[c],d=l?l.end:D.appendedPTS;if(l.start<=v&&d!==void 0&&v<=d)return c>9&&(this.activeParts=T.slice(c-9)),l}else if(D.start<=v&&D.appendedPTS!==void 0&&v<=D.appendedPTS)return D}return this.getBufferedFrag(v,a)},w.getBufferedFrag=function(v,a){for(var D=this.fragments,T=Object.keys(D),c=T.length;c--;){var l=D[T[c]];if((l==null?void 0:l.body.type)===a&&l.buffered){var d=l.body;if(d.start<=v&&v<=d.end)return d}}return null},w.detectEvictedFragments=function(v,a,D){var T=this;this.timeRanges&&(this.timeRanges[v]=a),Object.keys(this.fragments).forEach(function(c){var l=T.fragments[c];if(l){if(!l.buffered&&!l.loaded){l.body.type===D&&T.removeFragment(l.body);return}var d=l.range[v];d&&d.time.some(function(f){var x=!T.isTimeBuffered(f.startPTS,f.endPTS,a);return x&&T.removeFragment(l.body),x})}})},w.detectPartialFragments=function(v){var a=this,D=this.timeRanges,T=v.frag,c=v.part;if(!(!D||T.sn==="initSegment")){var l=M(T),d=this.fragments[l];d&&(Object.keys(D).forEach(function(f){var x=T.elementaryStreams[f];if(x){var L=D[f],h=c!==null||x.partial===!0;d.range[f]=a.getBufferedTimes(T,c,h,L)}}),d.loaded=null,Object.keys(d.range).length?(d.buffered=!0,d.body.endList&&(this.endListFragments[d.body.type]=d)):this.removeFragment(d.body))}},w.fragBuffered=function(v){var a=M(v),D=this.fragments[a];D&&(D.loaded=null,D.buffered=!0)},w.getBufferedTimes=function(v,a,D,T){for(var c={time:[],partial:D},l=a?a.start:v.start,d=a?a.end:v.end,f=v.minEndPTS||d,x=v.maxStartPTS||l,L=0;L<T.length;L++){var h=T.start(L)-this.bufferPadding,m=T.end(L)+this.bufferPadding;if(x>=h&&f<=m){c.time.push({startPTS:Math.max(l,T.start(L)),endPTS:Math.min(d,T.end(L))});break}else if(l<m&&d>h)c.partial=!0,c.time.push({startPTS:Math.max(l,T.start(L)),endPTS:Math.min(d,T.end(L))});else if(d<=h)break}return c},w.getPartialFragment=function(v){var a=null,D,T,c,l=0,d=this.bufferPadding,f=this.fragments;return Object.keys(f).forEach(function(x){var L=f[x];L&&U(L)&&(T=L.body.start-d,c=L.body.end+d,v>=T&&v<=c&&(D=Math.min(v-T,c-v),l<=D&&(a=L.body,l=D)))}),a},w.isEndListAppended=function(v){var a=this.endListFragments[v];return a!==void 0&&(a.buffered||U(a))},w.getState=function(v){var a=M(v),D=this.fragments[a];return D?D.buffered?U(D)?N.PARTIAL:N.OK:N.APPENDING:N.NOT_LOADED},w.isTimeBuffered=function(v,a,D){for(var T,c,l=0;l<D.length;l++){if(T=D.start(l)-this.bufferPadding,c=D.end(l)+this.bufferPadding,v>=T&&a<=c)return!0;if(a<=T)return!1}return!1},w.onFragLoaded=function(v,a){var D=a.frag,T=a.part;if(!(D.sn==="initSegment"||D.bitrateTest||T)){var c=M(D);this.fragments[c]={body:D,loaded:a,buffered:!1,range:Object.create(null)}}},w.onBufferAppended=function(v,a){var D=this,T=a.frag,c=a.part,l=a.timeRanges;if(T.type===A.PlaylistLevelType.MAIN)if(this.activeFragment!==T&&(this.activeFragment=T,T.appendedPTS=void 0),c){var d=this.activeParts;d||(this.activeParts=d=[]),d.push(c)}else this.activeParts=null;this.timeRanges=l,Object.keys(l).forEach(function(f){var x=l[f];if(D.detectEvictedFragments(f,x),!c&&T.type===A.PlaylistLevelType.MAIN){var L=T.elementaryStreams[f];if(!L)return;for(var h=0;h<x.length;h++){var m=x.end(h);m<=L.endPTS&&m>L.startPTS?T.appendedPTS=Math.max(m,T.appendedPTS||0):T.appendedPTS=L.endPTS}}})},w.onFragBuffered=function(v,a){this.detectPartialFragments(a)},w.hasFragment=function(v){var a=M(v);return!!this.fragments[a]},w.removeFragmentsInRange=function(v,a,D){var T=this;Object.keys(this.fragments).forEach(function(c){var l=T.fragments[c];if(l&&l.buffered){var d=l.body;d.type===D&&d.start<a&&d.end>v&&T.removeFragment(d)}})},w.removeFragment=function(v){var a=M(v);v.stats.loaded=0,v.clearElementaryStreamInfo(),v.appendedPTS=void 0,delete this.fragments[a],v.endList&&delete this.endListFragments[v.type]},w.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},S}();function U(S){var w,p;return S.buffered&&(((w=S.range.video)===null||w===void 0?void 0:w.partial)||((p=S.range.audio)===null||p===void 0?void 0:p.partial))}function M(S){return S.type+"_"+S.level+"_"+S.urlId+"_"+S.sn}},"./src/controller/gap-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{MAX_START_GAP_JUMP:()=>M,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>S,SKIP_BUFFER_RANGE_START:()=>w,STALL_MINIMUM_DURATION_MS:()=>U,default:()=>p});var b=o("./src/utils/buffer-helper.ts"),A=o("./src/errors.ts"),N=o("./src/events.ts"),O=o("./src/utils/logger.ts"),U=250,M=2,S=.1,w=.05,p=function(){function v(D,T,c,l){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=D,this.media=T,this.fragmentTracker=c,this.hls=l}var a=v.prototype;return a.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},a.poll=function(T,c){var l=this.config,d=this.media,f=this.stalled;if(d!==null){var x=d.currentTime,L=d.seeking,h=this.seeking&&!L,m=!this.seeking&&L;if(this.seeking=L,x!==T){if(this.moved=!0,f!==null){if(this.stallReported){var I=self.performance.now()-f;O.logger.warn("playback not stuck anymore @"+x+", after "+Math.round(I)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((m||h)&&(this.stalled=null),!(d.paused&&!L||d.ended||d.playbackRate===0||!b.BufferHelper.getBuffered(d).length)){var g=b.BufferHelper.bufferInfo(d,x,0),E=g.len>0,u=g.nextStart||0;if(!(!E&&!u)){if(L){var y=g.len>M,s=!u||c&&c.start<=x||u-x>M&&!this.fragmentTracker.getPartialFragment(x);if(y||s)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var _,F=Math.max(u,g.start||0)-x,P=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,B=P==null||(_=P.details)===null||_===void 0?void 0:_.live,K=B?P.details.targetduration*2:M;if(F>0&&F<=K){this._trySkipBufferHole(null);return}}var j=self.performance.now();if(f===null){this.stalled=j;return}var W=j-f;if(!(!L&&W>=U&&(this._reportStall(g),!this.media))){var H=b.BufferHelper.bufferInfo(d,x,l.maxBufferHole);this._tryFixBufferStall(H,W)}}}}},a._tryFixBufferStall=function(T,c){var l=this.config,d=this.fragmentTracker,f=this.media;if(f!==null){var x=f.currentTime,L=d.getPartialFragment(x);if(L){var h=this._trySkipBufferHole(L);if(h||!this.media)return}T.len>l.maxBufferHole&&c>l.highBufferWatchdogPeriod*1e3&&(O.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},a._reportStall=function(T){var c=this.hls,l=this.media,d=this.stallReported;!d&&l&&(this.stallReported=!0,O.logger.warn("Playback stalling at @"+l.currentTime+" due to low buffer ("+JSON.stringify(T)+")"),c.trigger(N.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:T.len}))},a._trySkipBufferHole=function(T){var c=this.config,l=this.hls,d=this.media;if(d===null)return 0;for(var f=d.currentTime,x=0,L=b.BufferHelper.getBuffered(d),h=0;h<L.length;h++){var m=L.start(h);if(f+c.maxBufferHole>=x&&f<m){var I=Math.max(m+w,d.currentTime+S);return O.logger.warn("skipping hole, adjusting currentTime from "+f+" to "+I),this.moved=!0,this.stalled=null,d.currentTime=I,T&&l.trigger(N.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+f+" to "+I,frag:T}),I}x=L.end(h)}return 0},a._tryNudgeBuffer=function(){var T=this.config,c=this.hls,l=this.media,d=this.nudgeRetry;if(l!==null){var f=l.currentTime;if(this.nudgeRetry++,d<T.nudgeMaxRetry){var x=f+(d+1)*T.nudgeOffset;O.logger.warn("Nudging 'currentTime' from "+f+" to "+x),l.currentTime=x,c.trigger(N.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else O.logger.error("Playhead still not moving while enough data buffered @"+f+" after "+T.nudgeMaxRetry+" nudges"),c.trigger(N.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},v}()},"./src/controller/id3-track-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>T});var b=o("./src/polyfills/number.ts"),A=o("./src/events.ts"),N=o("./src/utils/texttrack-utils.ts"),O=o("./src/demux/id3.ts"),U=o("./src/loader/date-range.ts"),M=o("./src/types/demuxer.ts"),S=.25;function w(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var p=function(){var c=w();try{new c(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function v(c,l){return c.getTime()/1e3-l}function a(c){return Uint8Array.from(c.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var D=function(){function c(d){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=d,this._registerListeners()}var l=c.prototype;return l.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},l._registerListeners=function(){var f=this.hls;f.on(A.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.on(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(A.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),f.on(A.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),f.on(A.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},l._unregisterListeners=function(){var f=this.hls;f.off(A.Events.MEDIA_ATTACHED,this.onMediaAttached,this),f.off(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.off(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.off(A.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),f.off(A.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),f.off(A.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},l.onMediaAttached=function(f,x){this.media=x.media},l.onMediaDetaching=function(){this.id3Track&&((0,N.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},l.onManifestLoading=function(){this.dateRangeCuesAppended={}},l.createTrack=function(f){var x=this.getID3Track(f.textTracks);return x.mode="hidden",x},l.getID3Track=function(f){if(this.media){for(var x=0;x<f.length;x++){var L=f[x];if(L.kind==="metadata"&&L.label==="id3")return(0,N.sendAddTrackEvent)(L,this.media),L}return this.media.addTextTrack("metadata","id3")}},l.onFragParsingMetadata=function(f,x){if(this.media){var L=this.hls.config,h=L.enableEmsgMetadataCues,m=L.enableID3MetadataCues;if(!(!h&&!m)){var I=x.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var g=w(),E=0;E<I.length;E++){var u=I[E].type;if(!(u===M.MetadataSchema.emsg&&!h||!m)){var y=O.getID3Frames(I[E].data);if(y){var s=I[E].pts,_=s+I[E].duration;_>p&&(_=p);var F=_-s;F<=0&&(_=s+S);for(var P=0;P<y.length;P++){var B=y[P];if(!O.isTimeStampFrame(B)){this.updateId3CueEnds(s);var K=new g(s,_,"");K.value=B,u&&(K.type=u),this.id3Track.addCue(K)}}}}}}}},l.updateId3CueEnds=function(f){var x,L=(x=this.id3Track)===null||x===void 0?void 0:x.cues;if(L)for(var h=L.length;h--;){var m=L[h];m.startTime<f&&m.endTime===p&&(m.endTime=f)}},l.onBufferFlushing=function(f,x){var L=x.startOffset,h=x.endOffset,m=x.type,I=this.id3Track,g=this.hls;if(g){var E=g.config,u=E.enableEmsgMetadataCues,y=E.enableID3MetadataCues;if(I&&(u||y)){var s;m==="audio"?s=function(F){return F.type===M.MetadataSchema.audioId3&&y}:m==="video"?s=function(F){return F.type===M.MetadataSchema.emsg&&u}:s=function(F){return F.type===M.MetadataSchema.audioId3&&y||F.type===M.MetadataSchema.emsg&&u},(0,N.removeCuesInRange)(I,L,h,s)}}},l.onLevelUpdated=function(f,x){var L=this,h=x.details;if(!(!this.media||!h.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var m=this.dateRangeCuesAppended,I=this.id3Track,g=h.dateRanges,E=Object.keys(g);if(I)for(var u=Object.keys(m).filter(function(j){return!E.includes(j)}),y=function(W){var H=u[W];Object.keys(m[H].cues).forEach(function(G){I.removeCue(m[H].cues[G])}),delete m[H]},s=u.length;s--;)y(s);var _=h.fragments[h.fragments.length-1];if(!(E.length===0||!(0,b.isFiniteNumber)(_==null?void 0:_.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var F=_.programDateTime/1e3-_.start,P=w(),B=function(W){var H=E[W],G=g[H],$=m[H],V=($==null?void 0:$.cues)||{},z=($==null?void 0:$.durationKnown)||!1,Y=v(G.startDate,F),Q=p,q=G.endDate;if(q)Q=v(q,F),z=!0;else if(G.endOnNext&&!z){var Z=E.reduce(function(ne,pe){var ye=g[pe];return ye.class===G.class&&ye.id!==pe&&ye.startDate>G.startDate&&ne.push(ye),ne},[]).sort(function(ne,pe){return ne.startDate.getTime()-pe.startDate.getTime()})[0];Z&&(Q=v(Z.startDate,F),z=!0)}for(var J=Object.keys(G.attr),ie=0;ie<J.length;ie++){var le=J[ie];if(!(le===U.DateRangeAttribute.ID||le===U.DateRangeAttribute.CLASS||le===U.DateRangeAttribute.START_DATE||le===U.DateRangeAttribute.DURATION||le===U.DateRangeAttribute.END_DATE||le===U.DateRangeAttribute.END_ON_NEXT)){var oe=V[le];if(oe)z&&!$.durationKnown&&(oe.endTime=Q);else{var re=G.attr[le];oe=new P(Y,Q,""),(le===U.DateRangeAttribute.SCTE35_OUT||le===U.DateRangeAttribute.SCTE35_IN)&&(re=a(re)),oe.value={key:le,data:re},oe.type=M.MetadataSchema.dateRange,L.id3Track.addCue(oe),V[le]=oe}}}m[H]={cues:V,dateRange:G,durationKnown:z}},K=0;K<E.length;K++)B(K)}}},c}();const T=D},"./src/controller/latency-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>w});var b=o("./src/errors.ts"),A=o("./src/events.ts"),N=o("./src/utils/logger.ts");function O(p,v){for(var a=0;a<v.length;a++){var D=v[a];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(p,M(D.key),D)}}function U(p,v,a){return v&&O(p.prototype,v),a&&O(p,a),Object.defineProperty(p,"prototype",{writable:!1}),p}function M(p){var v=S(p,"string");return typeof v=="symbol"?v:String(v)}function S(p,v){if(typeof p!="object"||p===null)return p;var a=p[Symbol.toPrimitive];if(a!==void 0){var D=a.call(p,v||"default");if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(p)}var w=function(){function p(a){var D=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return D.timeupdate()},this.hls=a,this.config=a.config,this.registerListeners()}var v=p.prototype;return v.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},v.registerListeners=function(){this.hls.on(A.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(A.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(A.Events.ERROR,this.onError,this)},v.unregisterListeners=function(){this.hls.off(A.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(A.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(A.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(A.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(A.Events.ERROR,this.onError)},v.onMediaAttached=function(D,T){this.media=T.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},v.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},v.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},v.onLevelUpdated=function(D,T){var c=T.details;this.levelDetails=c,c.advanced&&this.timeupdate(),!c.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},v.onError=function(D,T){T.details===b.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,N.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},v.timeupdate=function(){var D=this.media,T=this.levelDetails;if(!(!D||!T)){this.currentTime=D.currentTime;var c=this.computeLatency();if(c!==null){this._latency=c;var l=this.config,d=l.lowLatencyMode,f=l.maxLiveSyncPlaybackRate;if(!(!d||f===1)){var x=this.targetLatency;if(x!==null){var L=c-x,h=Math.min(this.maxLatency,x+T.targetduration),m=L<h;if(T.live&&m&&L>.05&&this.forwardBufferLength>1){var I=Math.min(2,Math.max(1,f)),g=Math.round(2/(1+Math.exp(-.75*L-this.edgeStalled))*20)/20;D.playbackRate=Math.min(I,Math.max(1,g))}else D.playbackRate!==1&&D.playbackRate!==0&&(D.playbackRate=1)}}}}},v.estimateLiveEdge=function(){var D=this.levelDetails;return D===null?null:D.edge+D.age},v.computeLatency=function(){var D=this.estimateLiveEdge();return D===null?null:D-this.currentTime},U(p,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var D=this.config,T=this.levelDetails;return D.liveMaxLatencyDuration!==void 0?D.liveMaxLatencyDuration:T?D.liveMaxLatencyDurationCount*T.targetduration:0}},{key:"targetLatency",get:function(){var D=this.levelDetails;if(D===null)return null;var T=D.holdBack,c=D.partHoldBack,l=D.targetduration,d=this.config,f=d.liveSyncDuration,x=d.liveSyncDurationCount,L=d.lowLatencyMode,h=this.hls.userConfig,m=L&&c||T;(h.liveSyncDuration||h.liveSyncDurationCount||m===0)&&(m=f!==void 0?f:x*l);var I=l,g=1;return m+Math.min(this.stallCount*g,I)}},{key:"liveSyncPosition",get:function(){var D=this.estimateLiveEdge(),T=this.targetLatency,c=this.levelDetails;if(D===null||T===null||c===null)return null;var l=c.edge,d=D-T-this.edgeStalled,f=l-c.totalduration,x=l-(this.config.lowLatencyMode&&c.partTarget||c.targetduration);return Math.min(Math.max(f,d),x)}},{key:"drift",get:function(){var D=this.levelDetails;return D===null?1:D.drift}},{key:"edgeStalled",get:function(){var D=this.levelDetails;if(D===null)return 0;var T=(this.config.lowLatencyMode&&D.partTarget||D.targetduration)*3;return Math.max(D.age-T,0)}},{key:"forwardBufferLength",get:function(){var D=this.media,T=this.levelDetails;if(!D||!T)return 0;var c=D.buffered.length;return(c?D.buffered.end(c-1):T.edge)-this.currentTime}}]),p}()},"./src/controller/level-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>d});var b=o("./src/types/level.ts"),A=o("./src/events.ts"),N=o("./src/errors.ts"),O=o("./src/utils/codecs.ts"),U=o("./src/controller/level-helper.ts"),M=o("./src/controller/base-playlist-controller.ts"),S=o("./src/types/loader.ts");function w(){return w=Object.assign?Object.assign.bind():function(f){for(var x=1;x<arguments.length;x++){var L=arguments[x];for(var h in L)Object.prototype.hasOwnProperty.call(L,h)&&(f[h]=L[h])}return f},w.apply(this,arguments)}function p(f,x){for(var L=0;L<x.length;L++){var h=x[L];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,a(h.key),h)}}function v(f,x,L){return x&&p(f.prototype,x),L&&p(f,L),Object.defineProperty(f,"prototype",{writable:!1}),f}function a(f){var x=D(f,"string");return typeof x=="symbol"?x:String(x)}function D(f,x){if(typeof f!="object"||f===null)return f;var L=f[Symbol.toPrimitive];if(L!==void 0){var h=L.call(f,x||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(f)}function T(f,x){f.prototype=Object.create(x.prototype),f.prototype.constructor=f,c(f,x)}function c(f,x){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,m){return h.__proto__=m,h},c(f,x)}var l=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=function(f){T(x,f);function x(h){var m;return m=f.call(this,h,"[level-controller]")||this,m._levels=[],m._firstLevel=-1,m._startLevel=void 0,m.currentLevelIndex=-1,m.manualLevelIndex=-1,m.onParsedComplete=void 0,m._registerListeners(),m}var L=x.prototype;return L._registerListeners=function(){var m=this.hls;m.on(A.Events.MANIFEST_LOADED,this.onManifestLoaded,this),m.on(A.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.on(A.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),m.on(A.Events.FRAG_LOADED,this.onFragLoaded,this),m.on(A.Events.ERROR,this.onError,this)},L._unregisterListeners=function(){var m=this.hls;m.off(A.Events.MANIFEST_LOADED,this.onManifestLoaded,this),m.off(A.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.off(A.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),m.off(A.Events.FRAG_LOADED,this.onFragLoaded,this),m.off(A.Events.ERROR,this.onError,this)},L.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,f.prototype.destroy.call(this)},L.startLoad=function(){var m=this._levels;m.forEach(function(I){I.loadError=0}),f.prototype.startLoad.call(this)},L.onManifestLoaded=function(m,I){var g=[],E=[],u=[],y,s={},_,F=!1,P=!1,B=!1;if(I.levels.forEach(function(H){var G=H.attrs;F=F||!!(H.width&&H.height),P=P||!!H.videoCodec,B=B||!!H.audioCodec,l&&H.audioCodec&&H.audioCodec.indexOf("mp4a.40.34")!==-1&&(H.audioCodec=void 0);var $=H.bitrate+"-"+H.attrs.RESOLUTION+"-"+H.attrs.CODECS;_=s[$],_?_.url.push(H.url):(_=new b.Level(H),s[$]=_,g.push(_)),G&&(G.AUDIO&&(0,U.addGroupId)(_,"audio",G.AUDIO),G.SUBTITLES&&(0,U.addGroupId)(_,"text",G.SUBTITLES))}),(F||P)&&B&&(g=g.filter(function(H){var G=H.videoCodec,$=H.width,V=H.height;return!!G||!!($&&V)})),g=g.filter(function(H){var G=H.audioCodec,$=H.videoCodec;return(!G||(0,O.isCodecSupportedInMp4)(G,"audio"))&&(!$||(0,O.isCodecSupportedInMp4)($,"video"))}),I.audioTracks&&(E=I.audioTracks.filter(function(H){return!H.audioCodec||(0,O.isCodecSupportedInMp4)(H.audioCodec,"audio")}),(0,U.assignTrackIdsByGroup)(E)),I.subtitles&&(u=I.subtitles,(0,U.assignTrackIdsByGroup)(u)),g.length>0){y=g[0].bitrate,g.sort(function(H,G){return H.attrs["HDCP-LEVEL"]!==G.attrs["HDCP-LEVEL"]?(H.attrs["HDCP-LEVEL"]||"")>(G.attrs["HDCP-LEVEL"]||"")?1:-1:H.bitrate!==G.bitrate?H.bitrate-G.bitrate:H.attrs.SCORE!==G.attrs.SCORE?H.attrs.decimalFloatingPoint("SCORE")-G.attrs.decimalFloatingPoint("SCORE"):F&&H.height!==G.height?H.height-G.height:0}),this._levels=g;for(var K=0;K<g.length;K++)if(g[K].bitrate===y){this._firstLevel=K,this.log("manifest loaded, "+g.length+" level(s) found, first bitrate: "+y);break}var j=B&&!P,W={levels:g,audioTracks:E,subtitleTracks:u,sessionData:I.sessionData,sessionKeys:I.sessionKeys,firstLevel:this._firstLevel,stats:I.stats,audio:B,video:P,altAudio:!j&&E.some(function(H){return!!H.url})};this.hls.trigger(A.Events.MANIFEST_PARSED,W),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(A.Events.ERROR,{type:N.ErrorTypes.MEDIA_ERROR,details:N.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:I.url,reason:"no level with compatible codecs found in manifest"})},L.onError=function(m,I){var g,E;if(f.prototype.onError.call(this,m,I),!I.fatal){var u=I.context,y=this._levels[this.currentLevelIndex];if(u&&(u.type===S.PlaylistContextType.AUDIO_TRACK&&y.audioGroupIds&&u.groupId===y.audioGroupIds[y.urlId]||u.type===S.PlaylistContextType.SUBTITLE_TRACK&&y.textGroupIds&&u.groupId===y.textGroupIds[y.urlId])){this.redundantFailover(this.currentLevelIndex);return}var s=!1,_=!0,F;switch(I.details){case N.ErrorDetails.FRAG_LOAD_ERROR:case N.ErrorDetails.FRAG_LOAD_TIMEOUT:case N.ErrorDetails.KEY_LOAD_ERROR:case N.ErrorDetails.KEY_LOAD_TIMEOUT:if(I.frag){var P=I.frag.type===S.PlaylistLevelType.MAIN?I.frag.level:this.currentLevelIndex,B=this._levels[P];B?(B.fragmentError++,B.fragmentError>this.hls.config.fragLoadingMaxRetry&&(F=P)):F=P}break;case N.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{var K=y.attrs["HDCP-LEVEL"];K&&(this.hls.maxHdcpLevel=b.HdcpLevels[b.HdcpLevels.indexOf(K)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'))}case N.ErrorDetails.FRAG_PARSING_ERROR:case N.ErrorDetails.KEY_SYSTEM_NO_SESSION:F=((g=I.frag)===null||g===void 0?void 0:g.type)===S.PlaylistLevelType.MAIN?I.frag.level:this.currentLevelIndex,I.levelRetry=!1;break;case N.ErrorDetails.LEVEL_LOAD_ERROR:case N.ErrorDetails.LEVEL_LOAD_TIMEOUT:u&&(u.deliveryDirectives&&(_=!1),F=u.level),s=!0;break;case N.ErrorDetails.REMUX_ALLOC_ERROR:F=(E=I.level)!=null?E:this.currentLevelIndex,s=!0;break}F!==void 0&&this.recoverLevel(I,F,s,_)}},L.recoverLevel=function(m,I,g,E){var u=m.details,y=this._levels[I];if(y.loadError++,g){var s=this.retryLoadingOrFail(m);if(s)m.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(E){var _=y.url.length;if(_>1&&y.loadError<_)m.levelRetry=!0,this.redundantFailover(I);else if(this.manualLevelIndex===-1){for(var F=-1,P=this._levels,B=P.length;B--;){var K=(B+this.currentLevelIndex)%P.length;if(K!==this.currentLevelIndex&&P[K].loadError===0){F=K;break}}F>-1&&this.currentLevelIndex!==F?(this.warn(u+": switch to "+F),m.levelRetry=!0,this.hls.nextAutoLevel=F):m.levelRetry===!1&&(m.fatal=!0)}}},L.redundantFailover=function(m){var I=this._levels[m],g=I.url.length;if(g>1){var E=(I.urlId+1)%g;this.warn("Switching to redundant URL-id "+E),this._levels.forEach(function(u){u.urlId=E}),this.level=m}},L.onFragLoaded=function(m,I){var g=I.frag;if(g!==void 0&&g.type===S.PlaylistLevelType.MAIN){var E=this._levels[g.level];E!==void 0&&(E.fragmentError=0,E.loadError=0)}},L.onLevelLoaded=function(m,I){var g,E=I.level,u=I.details,y=this._levels[E];if(!y){var s;this.warn("Invalid level index "+E),(s=I.deliveryDirectives)!==null&&s!==void 0&&s.skip&&(u.deltaUpdateFailed=!0);return}E===this.currentLevelIndex?(y.fragmentError===0&&(y.loadError=0,this.retryCount=0),this.playlistLoaded(E,I,y.details)):(g=I.deliveryDirectives)!==null&&g!==void 0&&g.skip&&(u.deltaUpdateFailed=!0)},L.onAudioTrackSwitched=function(m,I){var g=this.hls.levels[this.currentLevelIndex];if(g&&g.audioGroupIds){for(var E=-1,u=this.hls.audioTracks[I.id].groupId,y=0;y<g.audioGroupIds.length;y++)if(g.audioGroupIds[y]===u){E=y;break}E!==g.urlId&&(g.urlId=E,this.startLoad())}},L.loadPlaylist=function(m){f.prototype.loadPlaylist.call(this);var I=this.currentLevelIndex,g=this._levels[I];if(this.canLoad&&g&&g.url.length>0){var E=g.urlId,u=g.url[E];if(m)try{u=m.addDirectives(u)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}this.log("Attempt loading level index "+I+((m==null?void 0:m.msn)!==void 0?" at sn "+m.msn+" part "+m.part:"")+" with URL-id "+E+" "+u),this.clearTimer(),this.hls.trigger(A.Events.LEVEL_LOADING,{url:u,level:I,id:E,deliveryDirectives:m||null})}},L.removeLevel=function(m,I){var g=function(y,s){return s!==I},E=this._levels.filter(function(u,y){return y!==m?!0:u.url.length>1&&I!==void 0?(u.url=u.url.filter(g),u.audioGroupIds&&(u.audioGroupIds=u.audioGroupIds.filter(g)),u.textGroupIds&&(u.textGroupIds=u.textGroupIds.filter(g)),u.urlId=0,!0):!1}).map(function(u,y){var s=u.details;return s!=null&&s.fragments&&s.fragments.forEach(function(_){_.level=y}),u});this._levels=E,this.hls.trigger(A.Events.LEVELS_UPDATED,{levels:E})},v(x,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(m){var I,g=this._levels;if(g.length!==0&&!(this.currentLevelIndex===m&&(I=g[m])!==null&&I!==void 0&&I.details)){if(m<0||m>=g.length){var E=m<0;if(this.hls.trigger(A.Events.ERROR,{type:N.ErrorTypes.OTHER_ERROR,details:N.ErrorDetails.LEVEL_SWITCH_ERROR,level:m,fatal:E,reason:"invalid level idx"}),E)return;m=Math.min(m,g.length-1)}this.clearTimer();var u=this.currentLevelIndex,y=g[u],s=g[m];this.log("switching to level "+m+" from "+u),this.currentLevelIndex=m;var _=w({},s,{level:m,maxBitrate:s.maxBitrate,uri:s.uri,urlId:s.urlId});delete _._urlId,this.hls.trigger(A.Events.LEVEL_SWITCHING,_);var F=s.details;if(!F||F.live){var P=this.switchParams(s.uri,y==null?void 0:y.details);this.loadPlaylist(P)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(m){this.manualLevelIndex=m,this._startLevel===void 0&&(this._startLevel=m),m!==-1&&(this.level=m)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(m){this._firstLevel=m}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var m=this.hls.config.startLevel;return m!==void 0?m:this._firstLevel}else return this._startLevel},set:function(m){this._startLevel=m}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(m){this.level=m,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=m)}}]),x}(M.default)},"./src/controller/level-helper.ts":(k,R,o)=>{o.r(R),o.d(R,{addGroupId:()=>U,addSliding:()=>l,adjustSliding:()=>c,assignTrackIdsByGroup:()=>M,computeReloadInterval:()=>d,getFragmentWithSN:()=>f,getPartWith:()=>x,mapFragmentIntersection:()=>T,mapPartIntersection:()=>D,mergeDetails:()=>v,updateFragPTSDTS:()=>p,updatePTS:()=>S});var b=o("./src/polyfills/number.ts"),A=o("./src/utils/logger.ts"),N=o("./src/loader/date-range.ts");function O(){return O=Object.assign?Object.assign.bind():function(L){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var I in m)Object.prototype.hasOwnProperty.call(m,I)&&(L[I]=m[I])}return L},O.apply(this,arguments)}function U(L,h,m){switch(h){case"audio":L.audioGroupIds||(L.audioGroupIds=[]),L.audioGroupIds.push(m);break;case"text":L.textGroupIds||(L.textGroupIds=[]),L.textGroupIds.push(m);break}}function M(L){var h={};L.forEach(function(m){var I=m.groupId||"";m.id=h[I]=h[I]||0,h[I]++})}function S(L,h,m){var I=L[h],g=L[m];w(I,g)}function w(L,h){var m=h.startPTS;if((0,b.isFiniteNumber)(m)){var I=0,g;h.sn>L.sn?(I=m-L.start,g=L):(I=L.start-m,g=h),g.duration!==I&&(g.duration=I)}else if(h.sn>L.sn){var E=L.cc===h.cc;E&&L.minEndPTS?h.start=L.start+(L.minEndPTS-L.start):h.start=L.start+L.duration}else h.start=Math.max(L.start-h.duration,0)}function p(L,h,m,I,g,E){var u=I-m;u<=0&&(A.logger.warn("Fragment should have a positive duration",h),I=m+h.duration,E=g+h.duration);var y=m,s=I,_=h.startPTS,F=h.endPTS;if((0,b.isFiniteNumber)(_)){var P=Math.abs(_-m);(0,b.isFiniteNumber)(h.deltaPTS)?h.deltaPTS=Math.max(P,h.deltaPTS):h.deltaPTS=P,y=Math.max(m,_),m=Math.min(m,_),g=Math.min(g,h.startDTS),s=Math.min(I,F),I=Math.max(I,F),E=Math.max(E,h.endDTS)}h.duration=I-m;var B=m-h.start;h.start=h.startPTS=m,h.maxStartPTS=y,h.startDTS=g,h.endPTS=I,h.minEndPTS=s,h.endDTS=E;var K=h.sn;if(!L||K<L.startSN||K>L.endSN)return 0;var j,W=K-L.startSN,H=L.fragments;for(H[W]=h,j=W;j>0;j--)w(H[j],H[j-1]);for(j=W;j<H.length-1;j++)w(H[j],H[j+1]);return L.fragmentHint&&w(H[H.length-1],L.fragmentHint),L.PTSKnown=L.alignedSliding=!0,B}function v(L,h){for(var m=null,I=L.fragments,g=I.length-1;g>=0;g--){var E=I[g].initSegment;if(E){m=E;break}}L.fragmentHint&&delete L.fragmentHint.endPTS;var u=0,y;if(T(L,h,function(j,W){j.relurl&&(u=j.cc-W.cc),(0,b.isFiniteNumber)(j.startPTS)&&(0,b.isFiniteNumber)(j.endPTS)&&(W.start=W.startPTS=j.startPTS,W.startDTS=j.startDTS,W.appendedPTS=j.appendedPTS,W.maxStartPTS=j.maxStartPTS,W.endPTS=j.endPTS,W.endDTS=j.endDTS,W.minEndPTS=j.minEndPTS,W.duration=j.endPTS-j.startPTS,W.duration&&(y=W),h.PTSKnown=h.alignedSliding=!0),W.elementaryStreams=j.elementaryStreams,W.loader=j.loader,W.stats=j.stats,W.urlId=j.urlId,j.initSegment&&(W.initSegment=j.initSegment,m=j.initSegment)}),m){var s=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments;s.forEach(function(j){var W;(!j.initSegment||j.initSegment.relurl===((W=m)===null||W===void 0?void 0:W.relurl))&&(j.initSegment=m)})}if(h.skippedSegments)if(h.deltaUpdateFailed=h.fragments.some(function(j){return!j}),h.deltaUpdateFailed){A.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var _=h.skippedSegments;_--;)h.fragments.shift();h.startSN=h.fragments[0].sn,h.startCC=h.fragments[0].cc}else h.canSkipDateRanges&&(h.dateRanges=a(L.dateRanges,h.dateRanges,h.recentlyRemovedDateranges));var F=h.fragments;if(u){A.logger.warn("discontinuity sliding from playlist, take drift into account");for(var P=0;P<F.length;P++)F[P].cc+=u}h.skippedSegments&&(h.startCC=h.fragments[0].cc),D(L.partList,h.partList,function(j,W){W.elementaryStreams=j.elementaryStreams,W.stats=j.stats}),y?p(h,y,y.startPTS,y.endPTS,y.startDTS,y.endDTS):c(L,h),F.length&&(h.totalduration=h.edge-F[0].start),h.driftStartTime=L.driftStartTime,h.driftStart=L.driftStart;var B=h.advancedDateTime;if(h.advanced&&B){var K=h.edge;h.driftStart||(h.driftStartTime=B,h.driftStart=K),h.driftEndTime=B,h.driftEnd=K}else h.driftEndTime=L.driftEndTime,h.driftEnd=L.driftEnd,h.advancedDateTime=L.advancedDateTime}function a(L,h,m){var I=O({},L);return m&&m.forEach(function(g){delete I[g]}),Object.keys(h).forEach(function(g){var E=new N.DateRange(h[g].attr,I[g]);E.isValid?I[g]=E:A.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(h[g].attr)+'"')}),I}function D(L,h,m){if(L&&h)for(var I=0,g=0,E=L.length;g<=E;g++){var u=L[g],y=h[g+I];u&&y&&u.index===y.index&&u.fragment.sn===y.fragment.sn?m(u,y):I--}}function T(L,h,m){for(var I=h.skippedSegments,g=Math.max(L.startSN,h.startSN)-h.startSN,E=(L.fragmentHint?1:0)+(I?h.endSN:Math.min(L.endSN,h.endSN))-h.startSN,u=h.startSN-L.startSN,y=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments,s=L.fragmentHint?L.fragments.concat(L.fragmentHint):L.fragments,_=g;_<=E;_++){var F=s[u+_],P=y[_];I&&!P&&_<I&&(P=h.fragments[_]=F),F&&P&&m(F,P)}}function c(L,h){var m=h.startSN+h.skippedSegments-L.startSN,I=L.fragments;m<0||m>=I.length||l(h,I[m].start)}function l(L,h){if(h){for(var m=L.fragments,I=L.skippedSegments;I<m.length;I++)m[I].start+=h;L.fragmentHint&&(L.fragmentHint.start+=h)}}function d(L,h){h===void 0&&(h=1/0);var m=1e3*L.targetduration;if(L.updated){var I=L.fragments,g=4;if(I.length&&m*g>h){var E=I[I.length-1].duration*1e3;E<m&&(m=E)}}else m/=2;return Math.round(m)}function f(L,h,m){if(!L||!L.details)return null;var I=L.details,g=I.fragments[h-I.startSN];return g||(g=I.fragmentHint,g&&g.sn===h)?g:h<I.startSN&&m&&m.sn===h?m:null}function x(L,h,m){if(!L||!L.details)return null;var I=L.details.partList;if(I)for(var g=I.length;g--;){var E=I[g];if(E.index===m&&E.fragment.sn===h)return E}return null}},"./src/controller/stream-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>h});var b=o("./src/polyfills/number.ts"),A=o("./src/controller/base-stream-controller.ts"),N=o("./src/is-supported.ts"),O=o("./src/events.ts"),U=o("./src/utils/buffer-helper.ts"),M=o("./src/controller/fragment-tracker.ts"),S=o("./src/types/loader.ts"),w=o("./src/loader/fragment.ts"),p=o("./src/demux/transmuxer-interface.ts"),v=o("./src/types/transmuxer.ts"),a=o("./src/controller/gap-controller.ts"),D=o("./src/errors.ts");function T(m,I){for(var g=0;g<I.length;g++){var E=I[g];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,l(E.key),E)}}function c(m,I,g){return I&&T(m.prototype,I),g&&T(m,g),Object.defineProperty(m,"prototype",{writable:!1}),m}function l(m){var I=d(m,"string");return typeof I=="symbol"?I:String(I)}function d(m,I){if(typeof m!="object"||m===null)return m;var g=m[Symbol.toPrimitive];if(g!==void 0){var E=g.call(m,I||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(m)}function f(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,x(m,I)}function x(m,I){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,u){return E.__proto__=u,E},x(m,I)}var L=100,h=function(m){f(I,m);function I(E,u,y){var s;return s=m.call(this,E,u,y,"[stream-controller]")||this,s.audioCodecSwap=!1,s.gapController=null,s.level=-1,s._forceStartLoad=!1,s.altAudio=!1,s.audioOnly=!1,s.fragPlaying=null,s.onvplaying=null,s.onvseeked=null,s.fragLastKbps=0,s.couldBacktrack=!1,s.backtrackFragment=null,s.audioCodecSwitch=!1,s.videoBuffer=null,s._registerListeners(),s}var g=I.prototype;return g._registerListeners=function(){var u=this.hls;u.on(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(O.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(O.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(O.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.on(O.Events.ERROR,this.onError,this),u.on(O.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(O.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.on(O.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(O.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(O.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.on(O.Events.FRAG_BUFFERED,this.onFragBuffered,this)},g._unregisterListeners=function(){var u=this.hls;u.off(O.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(O.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(O.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(O.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(O.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(O.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.off(O.Events.ERROR,this.onError,this),u.off(O.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(O.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.off(O.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(O.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(O.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.off(O.Events.FRAG_BUFFERED,this.onFragBuffered,this)},g.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},g.startLoad=function(u){if(this.levels){var y=this.lastCurrentTime,s=this.hls;if(this.stopLoad(),this.setInterval(L),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var _=s.startLevel;_===-1&&(s.config.testBandwidth&&this.levels.length>1?(_=0,this.bitrateTest=!0):_=s.nextAutoLevel),this.level=s.nextLoadLevel=_,this.loadedmetadata=!1}y>0&&u===-1&&(this.log("Override startPosition with lastCurrentTime @"+y.toFixed(3)),u=y),this.state=A.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()}else this._forceStartLoad=!0,this.state=A.State.STOPPED},g.stopLoad=function(){this._forceStartLoad=!1,m.prototype.stopLoad.call(this)},g.doTick=function(){switch(this.state){case A.State.IDLE:this.doTickIdle();break;case A.State.WAITING_LEVEL:{var u,y=this.levels,s=this.level,_=y==null||(u=y[s])===null||u===void 0?void 0:u.details;if(_&&(!_.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(_))break;this.state=A.State.IDLE;break}break}case A.State.FRAG_LOADING_WAITING_RETRY:{var F,P=self.performance.now(),B=this.retryDate;(!B||P>=B||(F=this.media)!==null&&F!==void 0&&F.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=A.State.IDLE)}break}this.onTickEnd()},g.onTickEnd=function(){m.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},g.doTickIdle=function(){var u=this.hls,y=this.levelLastLoaded,s=this.levels,_=this.media,F=u.config,P=u.nextLoadLevel;if(!(y===null||!_&&(this.startFragRequested||!F.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!s||!s[P])){var B=s[P],K=this.getMainFwdBufferInfo();if(K!==null){var j=this.getLevelDetails();if(j&&this._streamEnded(K,j)){var W={};this.altAudio&&(W.type="video"),this.hls.trigger(O.Events.BUFFER_EOS,W),this.state=A.State.ENDED;return}this.level=u.nextLoadLevel=P;var H=B.details;if(!H||this.state===A.State.WAITING_LEVEL||H.live&&this.levelLastLoaded!==P){this.level=P,this.state=A.State.WAITING_LEVEL;return}var G=K.len,$=this.getMaxBufferLength(B.maxBitrate);if(!(G>=$)){this.backtrackFragment&&this.backtrackFragment.start>K.end&&(this.backtrackFragment=null);var V=this.backtrackFragment?this.backtrackFragment.start:K.end,z=this.getNextFragment(V,H);if(this.couldBacktrack&&!this.fragPrevious&&z&&z.sn!=="initSegment"&&this.fragmentTracker.getState(z)!==M.FragmentState.OK){var Y,Q=((Y=this.backtrackFragment)!=null?Y:z).sn,q=Q-H.startSN,Z=H.fragments[q-1];Z&&z.cc===Z.cc&&(z=Z,this.fragmentTracker.removeFragment(Z))}else this.backtrackFragment&&K.len&&(this.backtrackFragment=null);if(z&&this.fragmentTracker.getState(z)===M.FragmentState.OK&&this.nextLoadPosition>V){var J=this.audioOnly&&!this.altAudio?w.ElementaryStreamTypes.AUDIO:w.ElementaryStreamTypes.VIDEO,ie=(J===w.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ie&&this.afterBufferFlushed(ie,J,S.PlaylistLevelType.MAIN),z=this.getNextFragment(this.nextLoadPosition,H)}z&&(z.initSegment&&!z.initSegment.data&&!this.bitrateTest&&(z=z.initSegment),this.loadFragment(z,H,V))}}}},g.loadFragment=function(u,y,s){var _,F=this.fragmentTracker.getState(u);this.fragCurrent=u,F===M.FragmentState.NOT_LOADED?u.sn==="initSegment"?this._loadInitSegment(u,y):this.bitrateTest?(this.log("Fragment "+u.sn+" of level "+u.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(u,y)):(this.startFragRequested=!0,m.prototype.loadFragment.call(this,u,y,s)):F===M.FragmentState.APPENDING?this.reduceMaxBufferLength(u.duration)&&this.fragmentTracker.removeFragment(u):((_=this.media)===null||_===void 0?void 0:_.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},g.getAppendedFrag=function(u){var y=this.fragmentTracker.getAppendedFrag(u,S.PlaylistLevelType.MAIN);return y&&"fragment"in y?y.fragment:y},g.getBufferedFrag=function(u){return this.fragmentTracker.getBufferedFrag(u,S.PlaylistLevelType.MAIN)},g.followingBufferedFrag=function(u){return u?this.getBufferedFrag(u.end+.5):null},g.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},g.nextLevelSwitch=function(){var u=this.levels,y=this.media;if(y!=null&&y.readyState){var s,_=this.getAppendedFrag(y.currentTime);if(_&&_.start>1&&this.flushMainBuffer(0,_.start-1),!y.paused&&u){var F=this.hls.nextLoadLevel,P=u[F],B=this.fragLastKbps;B&&this.fragCurrent?s=this.fragCurrent.duration*P.maxBitrate/(1e3*B)+1:s=0}else s=0;var K=this.getBufferedFrag(y.currentTime+s);if(K){var j=this.followingBufferedFrag(K);if(j){this.abortCurrentFrag();var W=j.maxStartPTS?j.maxStartPTS:j.start,H=j.duration,G=Math.max(K.end,W+Math.min(Math.max(H-this.config.maxFragLookUpTolerance,H*.5),H*.75));this.flushMainBuffer(G,Number.POSITIVE_INFINITY)}}}},g.abortCurrentFrag=function(){var u=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,u&&u.abortRequests(),this.state){case A.State.KEY_LOADING:case A.State.FRAG_LOADING:case A.State.FRAG_LOADING_WAITING_RETRY:case A.State.PARSING:case A.State.PARSED:this.state=A.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},g.flushMainBuffer=function(u,y){m.prototype.flushMainBuffer.call(this,u,y,this.altAudio?"video":null)},g.onMediaAttached=function(u,y){m.prototype.onMediaAttached.call(this,u,y);var s=y.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),s.addEventListener("playing",this.onvplaying),s.addEventListener("seeked",this.onvseeked),this.gapController=new a.default(this.config,s,this.fragmentTracker,this.hls)},g.onMediaDetaching=function(){var u=this.media;u&&this.onvplaying&&this.onvseeked&&(u.removeEventListener("playing",this.onvplaying),u.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),m.prototype.onMediaDetaching.call(this)},g.onMediaPlaying=function(){this.tick()},g.onMediaSeeked=function(){var u=this.media,y=u?u.currentTime:null;(0,b.isFiniteNumber)(y)&&this.log("Media seeked to "+y.toFixed(3)),this.tick()},g.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(O.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},g.onManifestParsed=function(u,y){var s=!1,_=!1,F;y.levels.forEach(function(P){F=P.audioCodec,F&&(F.indexOf("mp4a.40.2")!==-1&&(s=!0),F.indexOf("mp4a.40.5")!==-1&&(_=!0))}),this.audioCodecSwitch=s&&_&&!(0,N.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=y.levels,this.startFragRequested=!1},g.onLevelLoading=function(u,y){var s=this.levels;if(!(!s||this.state!==A.State.IDLE)){var _=s[y.level];(!_.details||_.details.live&&this.levelLastLoaded!==y.level||this.waitForCdnTuneIn(_.details))&&(this.state=A.State.WAITING_LEVEL)}},g.onLevelLoaded=function(u,y){var s,_=this.levels,F=y.level,P=y.details,B=P.totalduration;if(!_){this.warn("Levels were reset while loading level "+F);return}this.log("Level "+F+" loaded ["+P.startSN+","+P.endSN+"], cc ["+P.startCC+", "+P.endCC+"] duration:"+B);var K=this.fragCurrent;K&&(this.state===A.State.FRAG_LOADING||this.state===A.State.FRAG_LOADING_WAITING_RETRY)&&K.level!==y.level&&K.loader&&(this.state=A.State.IDLE,this.backtrackFragment=null,K.abortRequests());var j=_[F],W=0;if(P.live||(s=j.details)!==null&&s!==void 0&&s.live){if(P.fragments[0]||(P.deltaUpdateFailed=!0),P.deltaUpdateFailed)return;W=this.alignPlaylists(P,j.details)}if(j.details=P,this.levelLastLoaded=F,this.hls.trigger(O.Events.LEVEL_UPDATED,{details:P,level:F}),this.state===A.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(P))return;this.state=A.State.IDLE}this.startFragRequested?P.live&&this.synchronizeToLiveEdge(P):this.setStartPosition(P,W),this.tick()},g._handleFragmentLoadProgress=function(u){var y,s=u.frag,_=u.part,F=u.payload,P=this.levels;if(!P){this.warn("Levels were reset while fragment load was in progress. Fragment "+s.sn+" of level "+s.level+" will not be buffered");return}var B=P[s.level],K=B.details;if(!K){this.warn("Dropping fragment "+s.sn+" of level "+s.level+" after level details were reset");return}var j=B.videoCodec,W=K.PTSKnown||!K.live,H=(y=s.initSegment)===null||y===void 0?void 0:y.data,G=this._getAudioCodec(B),$=this.transmuxer=this.transmuxer||new p.default(this.hls,S.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),V=_?_.index:-1,z=V!==-1,Y=new v.ChunkMetadata(s.level,s.sn,s.stats.chunkCount,F.byteLength,V,z),Q=this.initPTS[s.cc];$.push(F,H,G,j,s,_,K.totalduration,W,Y,Q)},g.onAudioTrackSwitching=function(u,y){var s=this.altAudio,_=!!y.url,F=y.id;if(!_){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var P=this.fragCurrent;P&&(this.log("Switching to main audio track, cancel main fragment load"),P.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var B=this.hls;s&&B.trigger(O.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),B.trigger(O.Events.AUDIO_TRACK_SWITCHED,{id:F})}},g.onAudioTrackSwitched=function(u,y){var s=y.id,_=!!this.hls.audioTracks[s].url;if(_){var F=this.videoBuffer;F&&this.mediaBuffer!==F&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=F)}this.altAudio=_,this.tick()},g.onBufferCreated=function(u,y){var s=y.tracks,_,F,P=!1;for(var B in s){var K=s[B];if(K.id==="main"){if(F=B,_=K,B==="video"){var j=s[B];j&&(this.videoBuffer=j.buffer)}}else P=!0}P&&_?(this.log("Alternate track found, use "+F+".buffered to schedule main fragment loading"),this.mediaBuffer=_.buffer):this.mediaBuffer=this.media},g.onFragBuffered=function(u,y){var s=y.frag,_=y.part;if(!(s&&s.type!==S.PlaylistLevelType.MAIN)){if(this.fragContextChanged(s)){this.warn("Fragment "+s.sn+(_?" p: "+_.index:"")+" of level "+s.level+" finished buffering, but was aborted. state: "+this.state),this.state===A.State.PARSED&&(this.state=A.State.IDLE);return}var F=_?_.stats:s.stats;this.fragLastKbps=Math.round(8*F.total/(F.buffering.end-F.loading.first)),s.sn!=="initSegment"&&(this.fragPrevious=s),this.fragBufferedComplete(s,_)}},g.onError=function(u,y){if(y.type===D.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(S.PlaylistLevelType.MAIN,y);return}switch(y.details){case D.ErrorDetails.FRAG_LOAD_ERROR:case D.ErrorDetails.FRAG_LOAD_TIMEOUT:case D.ErrorDetails.FRAG_PARSING_ERROR:case D.ErrorDetails.KEY_LOAD_ERROR:case D.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(S.PlaylistLevelType.MAIN,y);break;case D.ErrorDetails.LEVEL_LOAD_ERROR:case D.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==A.State.ERROR&&(y.fatal?(this.warn(""+y.details),this.state=A.State.ERROR):!y.levelRetry&&this.state===A.State.WAITING_LEVEL&&(this.state=A.State.IDLE));break;case D.ErrorDetails.BUFFER_FULL_ERROR:if(y.parent==="main"&&(this.state===A.State.PARSING||this.state===A.State.PARSED)){var s=!0,_=this.getFwdBufferInfo(this.media,S.PlaylistLevelType.MAIN);_&&_.len>.5&&(s=!this.reduceMaxBufferLength(_.len)),s&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},g.checkBuffer=function(){var u=this.media,y=this.gapController;if(!(!u||!y||!u.readyState)){if(this.loadedmetadata||!U.BufferHelper.getBuffered(u).length){var s=this.state!==A.State.IDLE?this.fragCurrent:null;y.poll(this.lastCurrentTime,s)}this.lastCurrentTime=u.currentTime}},g.onFragLoadEmergencyAborted=function(){this.state=A.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},g.onBufferFlushed=function(u,y){var s=y.type;if(s!==w.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var _=(s===w.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(_,s,S.PlaylistLevelType.MAIN)}},g.onLevelsUpdated=function(u,y){this.levels=y.levels},g.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},g.seekToStartPos=function(){var u=this.media;if(u){var y=u.currentTime,s=this.startPosition;if(s>=0&&y<s){if(u.seeking){this.log("could not seek to "+s+", already seeking at "+y);return}var _=U.BufferHelper.getBuffered(u),F=_.length?_.start(0):0,P=F-s;P>0&&(P<this.config.maxBufferHole||P<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+P+" to match buffer start"),s+=P,this.startPosition=s),this.log("seek to target start position "+s+" from current time "+y),u.currentTime=s}}},g._getAudioCodec=function(u){var y=this.config.defaultAudioCodec||u.audioCodec;return this.audioCodecSwap&&y&&(this.log("Swapping audio codec"),y.indexOf("mp4a.40.5")!==-1?y="mp4a.40.2":y="mp4a.40.5"),y},g._loadBitrateTestFrag=function(u,y){var s=this;u.bitrateTest=!0,this._doFragLoad(u,y).then(function(_){var F=s.hls;if(!(!_||s.fragContextChanged(u))){s.fragLoadError=0,s.state=A.State.IDLE,s.startFragRequested=!1,s.bitrateTest=!1;var P=u.stats;P.parsing.start=P.parsing.end=P.buffering.start=P.buffering.end=self.performance.now(),F.trigger(O.Events.FRAG_LOADED,_),u.bitrateTest=!1}})},g._handleTransmuxComplete=function(u){var y,s="main",_=this.hls,F=u.remuxResult,P=u.chunkMeta,B=this.getCurrentContext(P);if(!B){this.warn("The loading context changed while buffering fragment "+P.sn+" of level "+P.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(P.level);return}var K=B.frag,j=B.part,W=B.level,H=F.video,G=F.text,$=F.id3,V=F.initSegment,z=W.details,Y=this.altAudio?void 0:F.audio;if(!this.fragContextChanged(K)){if(this.state=A.State.PARSING,V){V.tracks&&(this._bufferInitSegment(W,V.tracks,K,P),_.trigger(O.Events.FRAG_PARSING_INIT_SEGMENT,{frag:K,id:s,tracks:V.tracks}));var Q=V.initPTS,q=V.timescale;(0,b.isFiniteNumber)(Q)&&(this.initPTS[K.cc]=Q,_.trigger(O.Events.INIT_PTS_FOUND,{frag:K,id:s,initPTS:Q,timescale:q}))}if(H&&F.independent!==!1){if(z){var Z=H.startPTS,J=H.endPTS,ie=H.startDTS,le=H.endDTS;if(j)j.elementaryStreams[H.type]={startPTS:Z,endPTS:J,startDTS:ie,endDTS:le};else if(H.firstKeyFrame&&H.independent&&P.id===1&&(this.couldBacktrack=!0),H.dropped&&H.independent){var oe=this.getMainFwdBufferInfo(),re=(oe?oe.end:this.getLoadPosition())+this.config.maxBufferHole,ne=H.firstKeyFramePTS?H.firstKeyFramePTS:Z;if(re<ne-this.config.maxBufferHole){this.backtrack(K);return}K.setElementaryStreamInfo(H.type,K.start,J,K.start,le,!0)}K.setElementaryStreamInfo(H.type,Z,J,ie,le),this.backtrackFragment&&(this.backtrackFragment=K),this.bufferFragmentData(H,K,j,P)}}else if(F.independent===!1){this.backtrack(K);return}if(Y){var pe=Y.startPTS,ye=Y.endPTS,be=Y.startDTS,Ae=Y.endDTS;j&&(j.elementaryStreams[w.ElementaryStreamTypes.AUDIO]={startPTS:pe,endPTS:ye,startDTS:be,endDTS:Ae}),K.setElementaryStreamInfo(w.ElementaryStreamTypes.AUDIO,pe,ye,be,Ae),this.bufferFragmentData(Y,K,j,P)}if(z&&$!==null&&$!==void 0&&(y=$.samples)!==null&&y!==void 0&&y.length){var ke={id:s,frag:K,details:z,samples:$.samples};_.trigger(O.Events.FRAG_PARSING_METADATA,ke)}if(z&&G){var Pe={id:s,frag:K,details:z,samples:G.samples};_.trigger(O.Events.FRAG_PARSING_USERDATA,Pe)}}},g._bufferInitSegment=function(u,y,s,_){var F=this;if(this.state===A.State.PARSING){this.audioOnly=!!y.audio&&!y.video,this.altAudio&&!this.audioOnly&&delete y.audio;var P=y.audio,B=y.video,K=y.audiovideo;if(P){var j=u.audioCodec,W=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(j&&(j.indexOf("mp4a.40.5")!==-1?j="mp4a.40.2":j="mp4a.40.5"),P.metadata.channelCount!==1&&W.indexOf("firefox")===-1&&(j="mp4a.40.5")),W.indexOf("android")!==-1&&P.container!=="audio/mpeg"&&(j="mp4a.40.2",this.log("Android: force audio codec to "+j)),u.audioCodec&&u.audioCodec!==j&&this.log('Swapping manifest audio codec "'+u.audioCodec+'" for "'+j+'"'),P.levelCodec=j,P.id="main",this.log("Init audio buffer, container:"+P.container+", codecs[selected/level/parsed]=["+(j||"")+"/"+(u.audioCodec||"")+"/"+P.codec+"]")}B&&(B.levelCodec=u.videoCodec,B.id="main",this.log("Init video buffer, container:"+B.container+", codecs[level/parsed]=["+(u.videoCodec||"")+"/"+B.codec+"]")),K&&this.log("Init audiovideo buffer, container:"+K.container+", codecs[level/parsed]=["+(u.attrs.CODECS||"")+"/"+K.codec+"]"),this.hls.trigger(O.Events.BUFFER_CODECS,y),Object.keys(y).forEach(function(H){var G=y[H],$=G.initSegment;$!=null&&$.byteLength&&F.hls.trigger(O.Events.BUFFER_APPENDING,{type:H,data:$,frag:s,part:null,chunkMeta:_,parent:s.type})}),this.tick()}},g.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,S.PlaylistLevelType.MAIN)},g.backtrack=function(u){this.couldBacktrack=!0,this.backtrackFragment=u,this.resetTransmuxer(),this.flushBufferGap(u),this.fragmentTracker.removeFragment(u),this.fragPrevious=null,this.nextLoadPosition=u.start,this.state=A.State.IDLE},g.checkFragmentChanged=function(){var u=this.media,y=null;if(u&&u.readyState>1&&u.seeking===!1){var s=u.currentTime;if(U.BufferHelper.isBuffered(u,s)?y=this.getAppendedFrag(s):U.BufferHelper.isBuffered(u,s+.1)&&(y=this.getAppendedFrag(s+.1)),y){this.backtrackFragment=null;var _=this.fragPlaying,F=y.level;(!_||y.sn!==_.sn||_.level!==F||y.urlId!==_.urlId)&&(this.fragPlaying=y,this.hls.trigger(O.Events.FRAG_CHANGED,{frag:y}),(!_||_.level!==F)&&this.hls.trigger(O.Events.LEVEL_SWITCHED,{level:F}))}}},c(I,[{key:"nextLevel",get:function(){var u=this.nextBufferedFrag;return u?u.level:-1}},{key:"currentFrag",get:function(){var u=this.media;return u?this.fragPlaying||this.getAppendedFrag(u.currentTime):null}},{key:"currentProgramDateTime",get:function(){var u=this.media;if(u){var y=u.currentTime,s=this.currentFrag;if(s&&(0,b.isFiniteNumber)(y)&&(0,b.isFiniteNumber)(s.programDateTime)){var _=s.programDateTime+(y-s.start)*1e3;return new Date(_)}}return null}},{key:"currentLevel",get:function(){var u=this.currentFrag;return u?u.level:-1}},{key:"nextBufferedFrag",get:function(){var u=this.currentFrag;return u?this.followingBufferedFrag(u):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),I}(A.default)},"./src/controller/subtitle-stream-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{SubtitleStreamController:()=>f});var b=o("./src/events.ts"),A=o("./src/utils/buffer-helper.ts"),N=o("./src/controller/fragment-finders.ts"),O=o("./src/utils/discontinuities.ts"),U=o("./src/controller/level-helper.ts"),M=o("./src/controller/fragment-tracker.ts"),S=o("./src/controller/base-stream-controller.ts"),w=o("./src/types/loader.ts"),p=o("./src/types/level.ts");function v(L,h){for(var m=0;m<h.length;m++){var I=h[m];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(L,D(I.key),I)}}function a(L,h,m){return h&&v(L.prototype,h),m&&v(L,m),Object.defineProperty(L,"prototype",{writable:!1}),L}function D(L){var h=T(L,"string");return typeof h=="symbol"?h:String(h)}function T(L,h){if(typeof L!="object"||L===null)return L;var m=L[Symbol.toPrimitive];if(m!==void 0){var I=m.call(L,h||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(L)}function c(L,h){L.prototype=Object.create(h.prototype),L.prototype.constructor=L,l(L,h)}function l(L,h){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,g){return I.__proto__=g,I},l(L,h)}var d=500,f=function(L){c(h,L);function h(I,g,E){var u;return u=L.call(this,I,g,E,"[subtitle-stream-controller]")||this,u.levels=[],u.currentTrackId=-1,u.tracksBuffered=[],u.mainDetails=null,u._registerListeners(),u}var m=h.prototype;return m.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},m._registerListeners=function(){var g=this.hls;g.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),g.on(b.Events.ERROR,this.onError,this),g.on(b.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),g.on(b.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),g.on(b.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),g.on(b.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),g.on(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.on(b.Events.FRAG_BUFFERED,this.onFragBuffered,this)},m._unregisterListeners=function(){var g=this.hls;g.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),g.off(b.Events.ERROR,this.onError,this),g.off(b.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),g.off(b.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),g.off(b.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),g.off(b.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),g.off(b.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.off(b.Events.FRAG_BUFFERED,this.onFragBuffered,this)},m.startLoad=function(g){this.stopLoad(),this.state=S.State.IDLE,this.setInterval(d),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=g,this.tick()},m.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},m.onLevelLoaded=function(g,E){this.mainDetails=E.details},m.onSubtitleFragProcessed=function(g,E){var u=E.frag,y=E.success;if(this.fragPrevious=u,this.state=S.State.IDLE,!!y){var s=this.tracksBuffered[this.currentTrackId];if(s){for(var _,F=u.start,P=0;P<s.length;P++)if(F>=s[P].start&&F<=s[P].end){_=s[P];break}var B=u.start+u.duration;_?_.end=B:(_={start:F,end:B},s.push(_)),this.fragmentTracker.fragBuffered(u)}}},m.onBufferFlushing=function(g,E){var u=E.startOffset,y=E.endOffset;if(u===0&&y!==Number.POSITIVE_INFINITY){var s=this.currentTrackId,_=this.levels;if(!_.length||!_[s]||!_[s].details)return;var F=_[s].details,P=F.targetduration,B=y-P;if(B<=0)return;E.endOffsetSubtitles=Math.max(0,B),this.tracksBuffered.forEach(function(K){for(var j=0;j<K.length;){if(K[j].end<=B){K.shift();continue}else if(K[j].start<B)K[j].start=B;else break;j++}}),this.fragmentTracker.removeFragmentsInRange(u,B,w.PlaylistLevelType.SUBTITLE)}},m.onFragBuffered=function(g,E){if(!this.loadedmetadata&&E.frag.type===w.PlaylistLevelType.MAIN){var u;(u=this.media)!==null&&u!==void 0&&u.buffered.length&&(this.loadedmetadata=!0)}},m.onError=function(g,E){var u=E.frag;!u||u.type!==w.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=S.State.IDLE)},m.onSubtitleTracksUpdated=function(g,E){var u=this,y=E.subtitleTracks;this.tracksBuffered=[],this.levels=y.map(function(s){return new p.Level(s)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(s){u.tracksBuffered[s.id]=[]}),this.mediaBuffer=null},m.onSubtitleTrackSwitch=function(g,E){if(this.currentTrackId=E.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var u=this.levels[this.currentTrackId];u!=null&&u.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,u&&this.setInterval(d)},m.onSubtitleTrackLoaded=function(g,E){var u,y=E.details,s=E.id,_=this.currentTrackId,F=this.levels;if(F.length){var P=F[_];if(!(s>=F.length||s!==_||!P)){this.mediaBuffer=this.mediaBufferTimeRanges;var B=0;if(y.live||(u=P.details)!==null&&u!==void 0&&u.live){var K=this.mainDetails;if(y.deltaUpdateFailed||!K)return;var j=K.fragments[0];P.details?(B=this.alignPlaylists(y,P.details),B===0&&j&&(B=j.start,(0,U.addSliding)(y,B))):y.hasProgramDateTime&&K.hasProgramDateTime?((0,O.alignMediaPlaylistByPDT)(y,K),B=y.fragments[0].start):j&&(B=j.start,(0,U.addSliding)(y,B))}if(P.details=y,this.levelLastLoaded=s,!this.startFragRequested&&(this.mainDetails||!y.live)&&this.setStartPosition(P.details,B),this.tick(),y.live&&!this.fragCurrent&&this.media&&this.state===S.State.IDLE){var W=(0,N.findFragmentByPTS)(null,y.fragments,this.media.currentTime,0);W||(this.warn("Subtitle playlist not aligned with playback"),P.details=void 0)}}}},m._handleFragmentLoadComplete=function(g){var E=this,u=g.frag,y=g.payload,s=u.decryptdata,_=this.hls;if(!this.fragContextChanged(u)&&y&&y.byteLength>0&&s&&s.key&&s.iv&&s.method==="AES-128"){var F=performance.now();this.decrypter.decrypt(new Uint8Array(y),s.key.buffer,s.iv.buffer).then(function(P){var B=performance.now();_.trigger(b.Events.FRAG_DECRYPTED,{frag:u,payload:P,stats:{tstart:F,tdecrypt:B}})}).catch(function(P){E.warn(P.name+": "+P.message),E.state=S.State.IDLE})}},m.doTick=function(){if(!this.media){this.state=S.State.IDLE;return}if(this.state===S.State.IDLE){var g=this.currentTrackId,E=this.levels;if(!E.length||!E[g]||!E[g].details)return;var u=E[g].details,y=u.targetduration,s=this.config,_=this.getLoadPosition(),F=A.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],_-y,s.maxBufferHole),P=F.end,B=F.len,K=this.getFwdBufferInfo(this.media,w.PlaylistLevelType.MAIN),j=this.getMaxBufferLength(K==null?void 0:K.len)+y;if(B>j)return;console.assert(u,"Subtitle track details are defined on idle subtitle stream controller tick");var W=u.fragments,H=W.length,G=u.edge,$=null,V=this.fragPrevious;if(P<G){var z=s.maxFragLookUpTolerance;$=(0,N.findFragmentByPTS)(V,W,Math.max(W[0].start,P),z),!$&&V&&V.start<W[0].start&&($=W[0])}else $=W[H-1];if(!$)return;$=this.mapToInitFragWhenRequired($),this.fragmentTracker.getState($)===M.FragmentState.NOT_LOADED&&this.loadFragment($,u,P)}},m.getMaxBufferLength=function(g){var E=L.prototype.getMaxBufferLength.call(this);return g?Math.max(E,g):E},m.loadFragment=function(g,E,u){this.fragCurrent=g,g.sn==="initSegment"?this._loadInitSegment(g,E):(this.startFragRequested=!0,L.prototype.loadFragment.call(this,g,E,u))},a(h,[{key:"mediaBufferTimeRanges",get:function(){return new x(this.tracksBuffered[this.currentTrackId]||[])}}]),h}(S.default),x=function(h){this.buffered=void 0;var m=function(g,E,u){if(E=E>>>0,E>u-1)throw new DOMException("Failed to execute '"+g+"' on 'TimeRanges': The index provided ("+E+") is greater than the maximum bound ("+u+")");return h[E][g]};this.buffered={get length(){return h.length},end:function(g){return m("end",g,h.length)},start:function(g){return m("start",g,h.length)}}}},"./src/controller/subtitle-track-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>T});var b=o("./src/events.ts"),A=o("./src/utils/texttrack-utils.ts"),N=o("./src/controller/base-playlist-controller.ts"),O=o("./src/types/loader.ts");function U(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,S(f.key),f)}}function M(c,l,d){return l&&U(c.prototype,l),d&&U(c,d),Object.defineProperty(c,"prototype",{writable:!1}),c}function S(c){var l=w(c,"string");return typeof l=="symbol"?l:String(l)}function w(c,l){if(typeof c!="object"||c===null)return c;var d=c[Symbol.toPrimitive];if(d!==void 0){var f=d.call(c,l||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(c)}function p(c,l){c.prototype=Object.create(l.prototype),c.prototype.constructor=c,v(c,l)}function v(c,l){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,x){return f.__proto__=x,f},v(c,l)}var a=function(c){p(l,c);function l(f){var x;return x=c.call(this,f,"[subtitle-track-controller]")||this,x.media=null,x.tracks=[],x.groupId=null,x.tracksInGroup=[],x.trackId=-1,x.selectDefaultTrack=!0,x.queuedDefaultTrack=-1,x.trackChangeListener=function(){return x.onTextTracksChanged()},x.asyncPollTrackChange=function(){return x.pollTrackChange(0)},x.useTextTrackPolling=!1,x.subtitlePollingInterval=-1,x._subtitleDisplay=!0,x.registerListeners(),x}var d=l.prototype;return d.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,c.prototype.destroy.call(this)},d.registerListeners=function(){var x=this.hls;x.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),x.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.on(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.on(b.Events.LEVEL_LOADING,this.onLevelLoading,this),x.on(b.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),x.on(b.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),x.on(b.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var x=this.hls;x.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),x.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.off(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),x.off(b.Events.LEVEL_LOADING,this.onLevelLoading,this),x.off(b.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),x.off(b.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),x.off(b.Events.ERROR,this.onError,this)},d.onMediaAttached=function(x,L){this.media=L.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},d.pollTrackChange=function(x){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,x)},d.onMediaDetaching=function(){if(this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var x=D(this.media.textTracks);x.forEach(function(L){(0,A.clearCurrentCues)(L)}),this.subtitleTrack=-1,this.media=null}},d.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},d.onManifestParsed=function(x,L){this.tracks=L.subtitleTracks},d.onSubtitleTrackLoaded=function(x,L){var h=L.id,m=L.details,I=this.trackId,g=this.tracksInGroup[I];if(!g){this.warn("Invalid subtitle track id "+h);return}var E=g.details;g.details=L.details,this.log("subtitle track "+h+" loaded ["+m.startSN+"-"+m.endSN+"]"),h===this.trackId&&(this.retryCount=0,this.playlistLoaded(h,L,E))},d.onLevelLoading=function(x,L){this.switchLevel(L.level)},d.onLevelSwitching=function(x,L){this.switchLevel(L.level)},d.switchLevel=function(x){var L=this.hls.levels[x];if(L!=null&&L.textGroupIds){var h=L.textGroupIds[L.urlId];if(this.groupId!==h){var m=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,I=this.tracks.filter(function(u){return!h||u.groupId===h});this.tracksInGroup=I;var g=this.findTrackId(m==null?void 0:m.name)||this.findTrackId();this.groupId=h;var E={subtitleTracks:I};this.log("Updating subtitle tracks, "+I.length+' track(s) found in "'+h+'" group-id'),this.hls.trigger(b.Events.SUBTITLE_TRACKS_UPDATED,E),g!==-1&&this.setSubtitleTrack(g,m)}}},d.findTrackId=function(x){for(var L=this.tracksInGroup,h=0;h<L.length;h++){var m=L[h];if((!this.selectDefaultTrack||m.default)&&(!x||x===m.name))return m.id}return-1},d.onError=function(x,L){c.prototype.onError.call(this,x,L),!(L.fatal||!L.context)&&L.context.type===O.PlaylistContextType.SUBTITLE_TRACK&&L.context.id===this.trackId&&L.context.groupId===this.groupId&&this.retryLoadingOrFail(L)},d.loadPlaylist=function(x){c.prototype.loadPlaylist.call(this);var L=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(L)){var h=L.id,m=L.groupId,I=L.url;if(x)try{I=x.addDirectives(I)}catch(g){this.warn("Could not construct new URL with HLS Delivery Directives: "+g)}this.log("Loading subtitle playlist for id "+h),this.hls.trigger(b.Events.SUBTITLE_TRACK_LOADING,{url:I,id:h,groupId:m,deliveryDirectives:x||null})}},d.toggleTrackModes=function(x){var L=this,h=this.media,m=this.trackId;if(h){var I=D(h.textTracks),g=I.filter(function(y){return y.groupId===L.groupId});if(x===-1)[].slice.call(I).forEach(function(y){y.mode="disabled"});else{var E=g[m];E&&(E.mode="disabled")}var u=g[x];u&&(u.mode=this.subtitleDisplay?"showing":"hidden")}},d.setSubtitleTrack=function(x,L){var h,m=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=x;return}if(this.trackId!==x&&this.toggleTrackModes(x),!(this.trackId===x&&(x===-1||(h=m[x])!==null&&h!==void 0&&h.details)||x<-1||x>=m.length)){this.clearTimer();var I=m[x];if(this.log("Switching to subtitle track "+x),this.trackId=x,I){var g=I.id,E=I.groupId,u=E===void 0?"":E,y=I.name,s=I.type,_=I.url;this.hls.trigger(b.Events.SUBTITLE_TRACK_SWITCH,{id:g,groupId:u,name:y,type:s,url:_});var F=this.switchParams(I.url,L==null?void 0:L.details);this.loadPlaylist(F)}else this.hls.trigger(b.Events.SUBTITLE_TRACK_SWITCH,{id:x})}},d.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var x=-1,L=D(this.media.textTracks),h=0;h<L.length;h++)if(L[h].mode==="hidden")x=h;else if(L[h].mode==="showing"){x=h;break}this.subtitleTrack!==x&&(this.subtitleTrack=x)}},M(l,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(x){this._subtitleDisplay=x,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(x){this.selectDefaultTrack=!1;var L=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(x,L)}}]),l}(N.default);function D(c){for(var l=[],d=0;d<c.length;d++){var f=c[d];f.kind==="subtitles"&&f.label&&l.push(c[d])}return l}const T=a},"./src/controller/timeline-controller.ts":(k,R,o)=>{o.r(R),o.d(R,{TimelineController:()=>a});var b=o("./src/polyfills/number.ts"),A=o("./src/events.ts"),N=o("./src/utils/cea-608-parser.ts"),O=o("./src/utils/output-filter.ts"),U=o("./src/utils/webvtt-parser.ts"),M=o("./src/utils/texttrack-utils.ts"),S=o("./src/utils/imsc1-ttml-parser.ts"),w=o("./src/utils/mp4-tools.ts"),p=o("./src/types/loader.ts"),v=o("./src/utils/logger.ts"),a=function(){function l(f){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=c(),this.captionsProperties=void 0,this.hls=f,this.config=f.config,this.Cues=f.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var x=new O.default(this,"textTrack1"),L=new O.default(this,"textTrack2"),h=new O.default(this,"textTrack3"),m=new O.default(this,"textTrack4");this.cea608Parser1=new N.default(1,x,L),this.cea608Parser2=new N.default(3,h,m)}f.on(A.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),f.on(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),f.on(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),f.on(A.Events.MANIFEST_LOADED,this.onManifestLoaded,this),f.on(A.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),f.on(A.Events.FRAG_LOADING,this.onFragLoading,this),f.on(A.Events.FRAG_LOADED,this.onFragLoaded,this),f.on(A.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),f.on(A.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),f.on(A.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),f.on(A.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),f.on(A.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var d=l.prototype;return d.destroy=function(){var x=this.hls;x.off(A.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),x.off(A.Events.MEDIA_DETACHING,this.onMediaDetaching,this),x.off(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),x.off(A.Events.MANIFEST_LOADED,this.onManifestLoaded,this),x.off(A.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),x.off(A.Events.FRAG_LOADING,this.onFragLoading,this),x.off(A.Events.FRAG_LOADED,this.onFragLoaded,this),x.off(A.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),x.off(A.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),x.off(A.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),x.off(A.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),x.off(A.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},d.addCues=function(x,L,h,m,I){for(var g=!1,E=I.length;E--;){var u=I[E],y=T(u[0],u[1],L,h);if(y>=0&&(u[0]=Math.min(u[0],L),u[1]=Math.max(u[1],h),g=!0,y/(h-L)>.5))return}if(g||I.push([L,h]),this.config.renderTextTracksNatively){var s=this.captionsTracks[x];this.Cues.newCue(s,L,h,m)}else{var _=this.Cues.newCue(null,L,h,m);this.hls.trigger(A.Events.CUES_PARSED,{type:"captions",cues:_,track:x})}},d.onInitPtsFound=function(x,L){var h=this,m=L.frag,I=L.id,g=L.initPTS,E=L.timescale,u=this.unparsedVttFrags;I==="main"&&(this.initPTS[m.cc]=g,this.timescale[m.cc]=E),u.length&&(this.unparsedVttFrags=[],u.forEach(function(y){h.onFragLoaded(A.Events.FRAG_LOADED,y)}))},d.getExistingTrack=function(x){var L=this.media;if(L)for(var h=0;h<L.textTracks.length;h++){var m=L.textTracks[h];if(m[x])return m}return null},d.createCaptionsTrack=function(x){this.config.renderTextTracksNatively?this.createNativeTrack(x):this.createNonNativeTrack(x)},d.createNativeTrack=function(x){if(!this.captionsTracks[x]){var L=this.captionsProperties,h=this.captionsTracks,m=this.media,I=L[x],g=I.label,E=I.languageCode,u=this.getExistingTrack(x);if(u)h[x]=u,(0,M.clearCurrentCues)(h[x]),(0,M.sendAddTrackEvent)(h[x],m);else{var y=this.createTextTrack("captions",g,E);y&&(y[x]=!0,h[x]=y)}}},d.createNonNativeTrack=function(x){if(!this.nonNativeCaptionsTracks[x]){var L=this.captionsProperties[x];if(L){var h=L.label,m={_id:x,label:h,kind:"captions",default:L.media?!!L.media.default:!1,closedCaptions:L.media};this.nonNativeCaptionsTracks[x]=m,this.hls.trigger(A.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[m]})}}},d.createTextTrack=function(x,L,h){var m=this.media;if(m)return m.addTextTrack(x,L,h)},d.onMediaAttaching=function(x,L){this.media=L.media,this._cleanTracks()},d.onMediaDetaching=function(){var x=this.captionsTracks;Object.keys(x).forEach(function(L){(0,M.clearCurrentCues)(x[L]),delete x[L]}),this.nonNativeCaptionsTracks={}},d.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=c(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},d._cleanTracks=function(){var x=this.media;if(x){var L=x.textTracks;if(L)for(var h=0;h<L.length;h++)(0,M.clearCurrentCues)(L[h])}},d.onSubtitleTracksUpdated=function(x,L){var h=this;this.textTracks=[];var m=L.subtitleTracks||[],I=m.some(function(y){return y.textCodec===S.IMSC1_CODEC});if(this.config.enableWebVTT||I&&this.config.enableIMSC1){var g=this.tracks&&m&&this.tracks.length===m.length;if(this.tracks=m||[],this.config.renderTextTracksNatively){var E=this.media?this.media.textTracks:[];this.tracks.forEach(function(y,s){var _;if(s<E.length){for(var F=null,P=0;P<E.length;P++)if(D(E[P],y)){F=E[P];break}F&&(_=F)}if(_)(0,M.clearCurrentCues)(_);else{var B=h._captionsOrSubtitlesFromCharacteristics(y);_=h.createTextTrack(B,y.name,y.lang),_&&(_.mode="disabled")}_&&(_.groupId=y.groupId,h.textTracks.push(_))})}else if(!g&&this.tracks&&this.tracks.length){var u=this.tracks.map(function(y){return{label:y.name,kind:y.type.toLowerCase(),default:y.default,subtitleTrack:y}});this.hls.trigger(A.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:u})}}},d._captionsOrSubtitlesFromCharacteristics=function(x){var L;if((L=x.attrs)!==null&&L!==void 0&&L.CHARACTERISTICS){var h=/transcribes-spoken-dialog/gi.test(x.attrs.CHARACTERISTICS),m=/describes-music-and-sound/gi.test(x.attrs.CHARACTERISTICS);if(h&&m)return"captions"}return"subtitles"},d.onManifestLoaded=function(x,L){var h=this;this.config.enableCEA708Captions&&L.captions&&L.captions.forEach(function(m){var I=/(?:CC|SERVICE)([1-4])/.exec(m.instreamId);if(I){var g="textTrack"+I[1],E=h.captionsProperties[g];E&&(E.label=m.name,m.lang&&(E.languageCode=m.lang),E.media=m)}})},d.closedCaptionsForLevel=function(x){var L=this.hls.levels[x.level];return L==null?void 0:L.attrs["CLOSED-CAPTIONS"]},d.onFragLoading=function(x,L){var h=this.cea608Parser1,m=this.cea608Parser2,I=this.lastSn,g=this.lastPartIndex;if(!(!this.enabled||!(h&&m))&&L.frag.type===p.PlaylistLevelType.MAIN){var E,u,y=L.frag.sn,s=(E=L==null||(u=L.part)===null||u===void 0?void 0:u.index)!=null?E:-1;y===I+1||y===I&&s===g+1||(h.reset(),m.reset()),this.lastSn=y,this.lastPartIndex=s}},d.onFragLoaded=function(x,L){var h=L.frag,m=L.payload,I=this.initPTS,g=this.unparsedVttFrags;if(h.type===p.PlaylistLevelType.SUBTITLE)if(m.byteLength){if(!(0,b.isFiniteNumber)(I[h.cc])){g.push(L),I.length&&this.hls.trigger(A.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:new Error("Missing initial subtitle PTS")});return}var E=h.decryptdata,u="stats"in L;if(E==null||!E.encrypted||u){var y=this.tracks[h.level],s=this.vttCCs;s[h.cc]||(s[h.cc]={start:h.start,prevCC:this.prevCC,new:!0},this.prevCC=h.cc),y&&y.textCodec===S.IMSC1_CODEC?this._parseIMSC1(h,m):this._parseVTTs(h,m,s)}}else this.hls.trigger(A.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:h,error:new Error("Empty subtitle payload")})},d._parseIMSC1=function(x,L){var h=this,m=this.hls;(0,S.parseIMSC1)(L,this.initPTS[x.cc],this.timescale[x.cc],function(I){h._appendCues(I,x.level),m.trigger(A.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:x})},function(I){v.logger.log("Failed to parse IMSC1: "+I),m.trigger(A.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:x,error:I})})},d._parseVTTs=function(x,L,h){var m,I=this,g=this.hls,E=(m=x.initSegment)!==null&&m!==void 0&&m.data?(0,w.appendUint8Array)(x.initSegment.data,new Uint8Array(L)):L;(0,U.parseWebVTT)(E,this.initPTS[x.cc],this.timescale[x.cc],h,x.cc,x.start,function(u){I._appendCues(u,x.level),g.trigger(A.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:x})},function(u){I._fallbackToIMSC1(x,L),v.logger.log("Failed to parse VTT cue: "+u),g.trigger(A.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:x,error:u})})},d._fallbackToIMSC1=function(x,L){var h=this,m=this.tracks[x.level];m.textCodec||(0,S.parseIMSC1)(L,this.initPTS[x.cc],this.timescale[x.cc],function(){m.textCodec=S.IMSC1_CODEC,h._parseIMSC1(x,L)},function(){m.textCodec="wvtt"})},d._appendCues=function(x,L){var h=this.hls;if(this.config.renderTextTracksNatively){var m=this.textTracks[L];if(!m||m.mode==="disabled")return;x.forEach(function(E){return(0,M.addCueToTrack)(m,E)})}else{var I=this.tracks[L];if(!I)return;var g=I.default?"default":"subtitles"+L;h.trigger(A.Events.CUES_PARSED,{type:"subtitles",cues:x,track:g})}},d.onFragDecrypted=function(x,L){var h=L.frag;if(h.type===p.PlaylistLevelType.SUBTITLE){if(!(0,b.isFiniteNumber)(this.initPTS[h.cc])){this.unparsedVttFrags.push(L);return}this.onFragLoaded(A.Events.FRAG_LOADED,L)}},d.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},d.onFragParsingUserdata=function(x,L){var h=this.cea608Parser1,m=this.cea608Parser2;if(!(!this.enabled||!(h&&m))){var I=L.frag,g=L.samples;if(!(I.type===p.PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(I)==="NONE"))for(var E=0;E<g.length;E++){var u=g[E].bytes;if(u){var y=this.extractCea608Data(u);h.addData(g[E].pts,y[0]),m.addData(g[E].pts,y[1])}}}},d.onBufferFlushing=function(x,L){var h=L.startOffset,m=L.endOffset,I=L.endOffsetSubtitles,g=L.type,E=this.media;if(!(!E||E.currentTime<m)){if(!g||g==="video"){var u=this.captionsTracks;Object.keys(u).forEach(function(s){return(0,M.removeCuesInRange)(u[s],h,m)})}if(this.config.renderTextTracksNatively&&h===0&&I!==void 0){var y=this.textTracks;Object.keys(y).forEach(function(s){return(0,M.removeCuesInRange)(y[s],h,I)})}}},d.extractCea608Data=function(x){for(var L=[[],[]],h=x[0]&31,m=2,I=0;I<h;I++){var g=x[m++],E=127&x[m++],u=127&x[m++];if(!(E===0&&u===0)){var y=(4&g)!==0;if(y){var s=3&g;(s===0||s===1)&&(L[s].push(E),L[s].push(u))}}}return L},l}();function D(l,d){return l&&l.label===d.name&&!(l.textTrack1||l.textTrack2)}function T(l,d,f,x){return Math.min(d,x)-Math.max(l,f)}function c(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}},"./src/crypt/aes-crypto.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>b});var b=function(){function A(O,U){this.subtle=void 0,this.aesIV=void 0,this.subtle=O,this.aesIV=U}var N=A.prototype;return N.decrypt=function(U,M){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},M,U)},A}()},"./src/crypt/aes-decryptor.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>N,removePadding:()=>A});var b=o("./src/utils/typed-array.ts");function A(O){var U=O.byteLength,M=U&&new DataView(O.buffer).getUint8(U-1);return M?(0,b.sliceUint8)(O,0,U-M):O}var N=function(){function O(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var U=O.prototype;return U.uint8ArrayToUint32Array_=function(S){for(var w=new DataView(S),p=new Uint32Array(4),v=0;v<4;v++)p[v]=w.getUint32(v*4);return p},U.initTable=function(){var S=this.sBox,w=this.invSBox,p=this.subMix,v=p[0],a=p[1],D=p[2],T=p[3],c=this.invSubMix,l=c[0],d=c[1],f=c[2],x=c[3],L=new Uint32Array(256),h=0,m=0,I=0;for(I=0;I<256;I++)I<128?L[I]=I<<1:L[I]=I<<1^283;for(I=0;I<256;I++){var g=m^m<<1^m<<2^m<<3^m<<4;g=g>>>8^g&255^99,S[h]=g,w[g]=h;var E=L[h],u=L[E],y=L[u],s=L[g]*257^g*16843008;v[h]=s<<24|s>>>8,a[h]=s<<16|s>>>16,D[h]=s<<8|s>>>24,T[h]=s,s=y*16843009^u*65537^E*257^h*16843008,l[g]=s<<24|s>>>8,d[g]=s<<16|s>>>16,f[g]=s<<8|s>>>24,x[g]=s,h?(h=E^L[L[L[y^E]]],m^=L[L[m]]):h=m=1}},U.expandKey=function(S){for(var w=this.uint8ArrayToUint32Array_(S),p=!0,v=0;v<w.length&&p;)p=w[v]===this.key[v],v++;if(!p){this.key=w;var a=this.keySize=w.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);var D=this.ksRows=(a+6+1)*4,T,c,l=this.keySchedule=new Uint32Array(D),d=this.invKeySchedule=new Uint32Array(D),f=this.sBox,x=this.rcon,L=this.invSubMix,h=L[0],m=L[1],I=L[2],g=L[3],E,u;for(T=0;T<D;T++){if(T<a){E=l[T]=w[T];continue}u=E,T%a===0?(u=u<<8|u>>>24,u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[u&255],u^=x[T/a|0]<<24):a>6&&T%a===4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[u&255]),l[T]=E=(l[T-a]^u)>>>0}for(c=0;c<D;c++)T=D-c,c&3?u=l[T]:u=l[T-4],c<4||T<=4?d[c]=u:d[c]=h[f[u>>>24]]^m[f[u>>>16&255]]^I[f[u>>>8&255]]^g[f[u&255]],d[c]=d[c]>>>0}},U.networkToHostOrderSwap=function(S){return S<<24|(S&65280)<<8|(S&16711680)>>8|S>>>24},U.decrypt=function(S,w,p){for(var v=this.keySize+6,a=this.invKeySchedule,D=this.invSBox,T=this.invSubMix,c=T[0],l=T[1],d=T[2],f=T[3],x=this.uint8ArrayToUint32Array_(p),L=x[0],h=x[1],m=x[2],I=x[3],g=new Int32Array(S),E=new Int32Array(g.length),u,y,s,_,F,P,B,K,j,W,H,G,$,V,z=this.networkToHostOrderSwap;w<g.length;){for(j=z(g[w]),W=z(g[w+1]),H=z(g[w+2]),G=z(g[w+3]),F=j^a[0],P=G^a[1],B=H^a[2],K=W^a[3],$=4,V=1;V<v;V++)u=c[F>>>24]^l[P>>16&255]^d[B>>8&255]^f[K&255]^a[$],y=c[P>>>24]^l[B>>16&255]^d[K>>8&255]^f[F&255]^a[$+1],s=c[B>>>24]^l[K>>16&255]^d[F>>8&255]^f[P&255]^a[$+2],_=c[K>>>24]^l[F>>16&255]^d[P>>8&255]^f[B&255]^a[$+3],F=u,P=y,B=s,K=_,$=$+4;u=D[F>>>24]<<24^D[P>>16&255]<<16^D[B>>8&255]<<8^D[K&255]^a[$],y=D[P>>>24]<<24^D[B>>16&255]<<16^D[K>>8&255]<<8^D[F&255]^a[$+1],s=D[B>>>24]<<24^D[K>>16&255]<<16^D[F>>8&255]<<8^D[P&255]^a[$+2],_=D[K>>>24]<<24^D[F>>16&255]<<16^D[P>>8&255]<<8^D[B&255]^a[$+3],E[w]=z(u^L),E[w+1]=z(_^h),E[w+2]=z(s^m),E[w+3]=z(y^I),L=j,h=W,m=H,I=G,w=w+4}return E.buffer},O}()},"./src/crypt/decrypter.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>w});var b=o("./src/crypt/aes-crypto.ts"),A=o("./src/crypt/fast-aes-key.ts"),N=o("./src/crypt/aes-decryptor.ts"),O=o("./src/utils/logger.ts"),U=o("./src/utils/mp4-tools.ts"),M=o("./src/utils/typed-array.ts"),S=16,w=function(){function p(a,D){var T=D===void 0?{}:D,c=T.removePKCS7Padding,l=c===void 0?!0:c;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=a.enableSoftwareAES,this.removePKCS7Padding=l,l)try{var d=self.crypto;d&&(this.subtle=d.subtle||d.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var v=p.prototype;return v.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},v.isSync=function(){return this.useSoftware},v.flush=function(){var D=this.currentResult,T=this.remainderData;if(!D||T)return this.reset(),null;var c=new Uint8Array(D);return this.reset(),this.removePKCS7Padding?(0,N.removePadding)(c):c},v.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},v.decrypt=function(D,T,c){var l=this;return this.useSoftware?new Promise(function(d,f){l.softwareDecrypt(new Uint8Array(D),T,c);var x=l.flush();x?d(x.buffer):f(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(D),T,c)},v.softwareDecrypt=function(D,T,c){var l=this.currentIV,d=this.currentResult,f=this.remainderData;this.logOnce("JS AES decrypt"),f&&(D=(0,U.appendUint8Array)(f,D),this.remainderData=null);var x=this.getValidChunk(D);if(!x.length)return null;l&&(c=l);var L=this.softwareDecrypter;L||(L=this.softwareDecrypter=new N.default),L.expandKey(T);var h=d;return this.currentResult=L.decrypt(x.buffer,0,c),this.currentIV=(0,M.sliceUint8)(x,-16).buffer,h||null},v.webCryptoDecrypt=function(D,T,c){var l=this,d=this.subtle;return(this.key!==T||!this.fastAesKey)&&(this.key=T,this.fastAesKey=new A.default(d,T)),this.fastAesKey.expandKey().then(function(f){if(!d)return Promise.reject(new Error("web crypto not initialized"));l.logOnce("WebCrypto AES decrypt");var x=new b.default(d,new Uint8Array(c));return x.decrypt(D.buffer,f)}).catch(function(f){return O.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+f.name+": "+f.message),l.onWebCryptoError(D,T,c)})},v.onWebCryptoError=function(D,T,c){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(D,T,c);var l=this.flush();if(l)return l.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},v.getValidChunk=function(D){var T=D,c=D.length-D.length%S;return c!==D.length&&(T=(0,M.sliceUint8)(D,0,c),this.remainderData=(0,M.sliceUint8)(D,c)),T},v.logOnce=function(D){this.logEnabled&&(O.logger.log("[decrypter]: "+D),this.logEnabled=!1)},p}()},"./src/crypt/fast-aes-key.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>b});var b=function(){function A(O,U){this.subtle=void 0,this.key=void 0,this.subtle=O,this.key=U}var N=A.prototype;return N.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},A}()},"./src/demux/aacdemuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>w});var b=o("./src/demux/base-audio-demuxer.ts"),A=o("./src/demux/adts.ts"),N=o("./src/utils/logger.ts"),O=o("./src/demux/id3.ts");function U(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,M(p,v)}function M(p,v){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,T){return D.__proto__=T,D},M(p,v)}var S=function(p){U(v,p);function v(D,T){var c;return c=p.call(this)||this,c.observer=void 0,c.config=void 0,c.observer=D,c.config=T,c}var a=v.prototype;return a.resetInitSegment=function(T,c,l,d){p.prototype.resetInitSegment.call(this,T,c,l,d),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:c,duration:d,inputTimeScale:9e4,dropped:0}},v.probe=function(T){if(!T)return!1;for(var c=O.getID3Data(T,0)||[],l=c.length,d=T.length;l<d;l++)if(A.probe(T,l))return N.logger.log("ADTS sync word found !"),!0;return!1},a.canParse=function(T,c){return A.canParse(T,c)},a.appendFrame=function(T,c,l){A.initTrackConfig(T,this.observer,c,l,T.manifestCodec);var d=A.appendFrame(T,c,l,this.basePTS,this.frameIndex);if(d&&d.missing===0)return d},v}(b.default);const w=S},"./src/demux/adts.ts":(k,R,o)=>{o.r(R),o.d(R,{appendFrame:()=>l,canGetFrameLength:()=>w,canParse:()=>v,getAudioConfig:()=>O,getFrameDuration:()=>T,getFullFrameLength:()=>S,getHeaderLength:()=>M,initTrackConfig:()=>D,isHeader:()=>p,isHeaderPattern:()=>U,parseFrameHeader:()=>c,probe:()=>a});var b=o("./src/utils/logger.ts"),A=o("./src/errors.ts"),N=o("./src/events.ts");function O(d,f,x,L){var h,m,I,g,E=navigator.userAgent.toLowerCase(),u=L,y=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];h=((f[x+2]&192)>>>6)+1;var s=(f[x+2]&60)>>>2;if(s>y.length-1){d.trigger(N.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s});return}return I=(f[x+2]&1)<<2,I|=(f[x+3]&192)>>>6,b.logger.log("manifest codec:"+L+", ADTS type:"+h+", samplingIndex:"+s),/firefox/i.test(E)?s>=6?(h=5,g=new Array(4),m=s-3):(h=2,g=new Array(2),m=s):E.indexOf("android")!==-1?(h=2,g=new Array(2),m=s):(h=5,g=new Array(4),L&&(L.indexOf("mp4a.40.29")!==-1||L.indexOf("mp4a.40.5")!==-1)||!L&&s>=6?m=s-3:((L&&L.indexOf("mp4a.40.2")!==-1&&(s>=6&&I===1||/vivaldi/i.test(E))||!L&&I===1)&&(h=2,g=new Array(2)),m=s)),g[0]=h<<3,g[0]|=(s&14)>>1,g[1]|=(s&1)<<7,g[1]|=I<<3,h===5&&(g[1]|=(m&14)>>1,g[2]=(m&1)<<7,g[2]|=8,g[3]=0),{config:g,samplerate:y[s],channelCount:I,codec:"mp4a.40."+h,manifestCodec:u}}function U(d,f){return d[f]===255&&(d[f+1]&246)===240}function M(d,f){return d[f+1]&1?7:9}function S(d,f){return(d[f+3]&3)<<11|d[f+4]<<3|(d[f+5]&224)>>>5}function w(d,f){return f+5<d.length}function p(d,f){return f+1<d.length&&U(d,f)}function v(d,f){return w(d,f)&&U(d,f)&&S(d,f)<=d.length-f}function a(d,f){if(p(d,f)){var x=M(d,f);if(f+x>=d.length)return!1;var L=S(d,f);if(L<=x)return!1;var h=f+L;return h===d.length||p(d,h)}return!1}function D(d,f,x,L,h){if(!d.samplerate){var m=O(f,x,L,h);if(!m)return;d.config=m.config,d.samplerate=m.samplerate,d.channelCount=m.channelCount,d.codec=m.codec,d.manifestCodec=m.manifestCodec,b.logger.log("parsed codec:"+d.codec+", rate:"+m.samplerate+", channels:"+m.channelCount)}}function T(d){return 9216e4/d}function c(d,f){var x=M(d,f);if(f+x<=d.length){var L=S(d,f)-x;if(L>0)return{headerLength:x,frameLength:L}}}function l(d,f,x,L,h){var m=T(d.samplerate),I=L+h*m,g=c(f,x),E;if(g){var u=g.frameLength,y=g.headerLength,s=y+u,_=Math.max(0,x+s-f.length);_?(E=new Uint8Array(s-y),E.set(f.subarray(x+y,f.length),0)):E=f.subarray(x+y,x+s);var F={unit:E,pts:I};return _||d.samples.push(F),{sample:F,length:s,missing:_}}var P=f.length-x;E=new Uint8Array(P),E.set(f.subarray(x,f.length),0);var B={unit:E,pts:I};return{sample:B,length:P,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>p,initPTSFn:()=>w});var b=o("./src/polyfills/number.ts"),A=o("./src/demux/id3.ts"),N=o("./src/types/demuxer.ts"),O=o("./src/demux/dummy-demuxed-track.ts"),U=o("./src/utils/mp4-tools.ts"),M=o("./src/utils/typed-array.ts"),S=function(){function v(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var a=v.prototype;return a.resetInitSegment=function(T,c,l,d){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},a.resetTimeStamp=function(T){this.initPTS=T,this.resetContiguity()},a.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},a.canParse=function(T,c){return!1},a.appendFrame=function(T,c,l){},a.demux=function(T,c){this.cachedData&&(T=(0,U.appendUint8Array)(this.cachedData,T),this.cachedData=null);var l=A.getID3Data(T,0),d=l?l.length:0,f,x=this._audioTrack,L=this._id3Track,h=l?A.getTimeStamp(l):void 0,m=T.length;for((this.basePTS===null||this.frameIndex===0&&(0,b.isFiniteNumber)(h))&&(this.basePTS=w(h,c,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),l&&l.length>0&&L.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:l,type:N.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});d<m;){if(this.canParse(T,d)){var I=this.appendFrame(x,T,d);I?(this.frameIndex++,this.lastPTS=I.sample.pts,d+=I.length,f=d):d=m}else A.canParse(T,d)?(l=A.getID3Data(T,d),L.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:l,type:N.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),d+=l.length,f=d):d++;if(d===m&&f!==m){var g=(0,M.sliceUint8)(T,f);this.cachedData?this.cachedData=(0,U.appendUint8Array)(this.cachedData,g):this.cachedData=g}}return{audioTrack:x,videoTrack:(0,O.dummyTrack)(),id3Track:L,textTrack:(0,O.dummyTrack)()}},a.demuxSampleAes=function(T,c,l){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},a.flush=function(T){var c=this.cachedData;return c&&(this.cachedData=null,this.demux(c,0)),{audioTrack:this._audioTrack,videoTrack:(0,O.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,O.dummyTrack)()}},a.destroy=function(){},v}(),w=function(a,D,T){return(0,b.isFiniteNumber)(a)?a*90:D*9e4+(T||0)};const p=S},"./src/demux/chunk-cache.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>b});var b=function(){function N(){this.chunks=[],this.dataLength=0}var O=N.prototype;return O.push=function(M){this.chunks.push(M),this.dataLength+=M.length},O.flush=function(){var M=this.chunks,S=this.dataLength,w;if(M.length)M.length===1?w=M[0]:w=A(M,S);else return new Uint8Array(0);return this.reset(),w},O.reset=function(){this.chunks.length=0,this.dataLength=0},N}();function A(N,O){for(var U=new Uint8Array(O),M=0,S=0;S<N.length;S++){var w=N[S];U.set(w,M),M+=w.length}return U}},"./src/demux/dummy-demuxed-track.ts":(k,R,o)=>{o.r(R),o.d(R,{dummyTrack:()=>b});function b(A,N){return A===void 0&&(A=""),N===void 0&&(N=9e4),{type:A,id:-1,pid:-1,inputTimeScale:N,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>N});var b=o("./src/utils/logger.ts"),A=function(){function O(M){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=M,this.bytesAvailable=M.byteLength,this.word=0,this.bitsAvailable=0}var U=O.prototype;return U.loadWord=function(){var S=this.data,w=this.bytesAvailable,p=S.byteLength-w,v=new Uint8Array(4),a=Math.min(4,w);if(a===0)throw new Error("no bytes available");v.set(S.subarray(p,p+a)),this.word=new DataView(v.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a},U.skipBits=function(S){var w;S=Math.min(S,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>S?(this.word<<=S,this.bitsAvailable-=S):(S-=this.bitsAvailable,w=S>>3,S-=w<<3,this.bytesAvailable-=w,this.loadWord(),this.word<<=S,this.bitsAvailable-=S)},U.readBits=function(S){var w=Math.min(this.bitsAvailable,S),p=this.word>>>32-w;if(S>32&&b.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=w,this.bitsAvailable>0)this.word<<=w;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return w=S-w,w>0&&this.bitsAvailable?p<<w|this.readBits(w):p},U.skipLZ=function(){var S;for(S=0;S<this.bitsAvailable;++S)if(this.word&2147483648>>>S)return this.word<<=S,this.bitsAvailable-=S,S;return this.loadWord(),S+this.skipLZ()},U.skipUEG=function(){this.skipBits(1+this.skipLZ())},U.skipEG=function(){this.skipBits(1+this.skipLZ())},U.readUEG=function(){var S=this.skipLZ();return this.readBits(S+1)-1},U.readEG=function(){var S=this.readUEG();return 1&S?1+S>>>1:-1*(S>>>1)},U.readBoolean=function(){return this.readBits(1)===1},U.readUByte=function(){return this.readBits(8)},U.readUShort=function(){return this.readBits(16)},U.readUInt=function(){return this.readBits(32)},U.skipScalingList=function(S){for(var w=8,p=8,v,a=0;a<S;a++)p!==0&&(v=this.readEG(),p=(w+v+256)%256),w=p===0?w:p},U.readSPS=function(){var S=0,w=0,p=0,v=0,a,D,T,c=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),f=this.readBoolean.bind(this),x=this.skipBits.bind(this),L=this.skipEG.bind(this),h=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);c();var I=c();if(l(5),x(3),c(),h(),I===100||I===110||I===122||I===244||I===44||I===83||I===86||I===118||I===128){var g=d();if(g===3&&x(1),h(),h(),x(1),f())for(D=g!==3?8:12,T=0;T<D;T++)f()&&(T<6?m(16):m(64))}h();var E=d();if(E===0)d();else if(E===1)for(x(1),L(),L(),a=d(),T=0;T<a;T++)L();h(),x(1);var u=d(),y=d(),s=l(1);s===0&&x(1),x(1),f()&&(S=d(),w=d(),p=d(),v=d());var _=[1,1];if(f()&&f()){var F=c();switch(F){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:{_=[c()<<8|c(),c()<<8|c()];break}}}return{width:Math.ceil((u+1)*16-S*2-w*2),height:(2-s)*(y+1)*16-(s?2:4)*(p+v),pixelRatio:_}},U.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},O}();const N=A},"./src/demux/id3.ts":(k,R,o)=>{o.r(R),o.d(R,{canParse:()=>U,decodeFrame:()=>v,getID3Data:()=>N,getID3Frames:()=>p,getTimeStamp:()=>M,isFooter:()=>A,isHeader:()=>b,isTimeStampFrame:()=>S,testables:()=>d,utf8ArrayToStr:()=>l});var b=function(h,m){return m+10<=h.length&&h[m]===73&&h[m+1]===68&&h[m+2]===51&&h[m+3]<255&&h[m+4]<255&&h[m+6]<128&&h[m+7]<128&&h[m+8]<128&&h[m+9]<128},A=function(h,m){return m+10<=h.length&&h[m]===51&&h[m+1]===68&&h[m+2]===73&&h[m+3]<255&&h[m+4]<255&&h[m+6]<128&&h[m+7]<128&&h[m+8]<128&&h[m+9]<128},N=function(h,m){for(var I=m,g=0;b(h,m);){g+=10;var E=O(h,m+6);g+=E,A(h,m+10)&&(g+=10),m+=g}if(g>0)return h.subarray(I,I+g)},O=function(h,m){var I=0;return I=(h[m]&127)<<21,I|=(h[m+1]&127)<<14,I|=(h[m+2]&127)<<7,I|=h[m+3]&127,I},U=function(h,m){return b(h,m)&&O(h,m+6)+10<=h.length-m},M=function(h){for(var m=p(h),I=0;I<m.length;I++){var g=m[I];if(S(g))return c(g)}},S=function(h){return h&&h.key==="PRIV"&&h.info==="com.apple.streaming.transportStreamTimestamp"},w=function(h){var m=String.fromCharCode(h[0],h[1],h[2],h[3]),I=O(h,4),g=10;return{type:m,size:I,data:h.subarray(g,g+I)}},p=function(h){for(var m=0,I=[];b(h,m);){var g=O(h,m+6);m+=10;for(var E=m+g;m+8<E;){var u=w(h.subarray(m)),y=v(u);y&&I.push(y),m+=u.size+10}A(h,m)&&(m+=10)}return I},v=function(h){return h.type==="PRIV"?a(h):h.type[0]==="W"?T(h):D(h)},a=function(h){if(!(h.size<2)){var m=l(h.data,!0),I=new Uint8Array(h.data.subarray(m.length+1));return{key:h.type,info:m,data:I.buffer}}},D=function(h){if(!(h.size<2)){if(h.type==="TXXX"){var m=1,I=l(h.data.subarray(m),!0);m+=I.length+1;var g=l(h.data.subarray(m));return{key:h.type,info:I,data:g}}var E=l(h.data.subarray(1));return{key:h.type,data:E}}},T=function(h){if(h.type==="WXXX"){if(h.size<2)return;var m=1,I=l(h.data.subarray(m),!0);m+=I.length+1;var g=l(h.data.subarray(m));return{key:h.type,info:I,data:g}}var E=l(h.data);return{key:h.type,data:E}},c=function(h){if(h.data.byteLength===8){var m=new Uint8Array(h.data),I=m[3]&1,g=(m[4]<<23)+(m[5]<<15)+(m[6]<<7)+m[7];return g/=45,I&&(g+=4772185884e-2),Math.round(g)}},l=function(h,m){m===void 0&&(m=!1);var I=x();if(I){var g=I.decode(h);if(m){var E=g.indexOf("\0");return E!==-1?g.substring(0,E):g}return g.replace(/\0/g,"")}for(var u=h.length,y,s,_,F="",P=0;P<u;){if(y=h[P++],y===0&&m)return F;if(y===0||y===3)continue;switch(y>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:F+=String.fromCharCode(y);break;case 12:case 13:s=h[P++],F+=String.fromCharCode((y&31)<<6|s&63);break;case 14:s=h[P++],_=h[P++],F+=String.fromCharCode((y&15)<<12|(s&63)<<6|(_&63)<<0);break}}return F},d={decodeTextFrame:D},f;function x(){return!f&&typeof self.TextDecoder<"u"&&(f=new self.TextDecoder("utf-8")),f}},"./src/demux/mp3demuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>w});var b=o("./src/demux/base-audio-demuxer.ts"),A=o("./src/demux/id3.ts"),N=o("./src/utils/logger.ts"),O=o("./src/demux/mpegaudio.ts");function U(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,M(p,v)}function M(p,v){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,T){return D.__proto__=T,D},M(p,v)}var S=function(p){U(v,p);function v(){return p.apply(this,arguments)||this}var a=v.prototype;return a.resetInitSegment=function(T,c,l,d){p.prototype.resetInitSegment.call(this,T,c,l,d),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:c,duration:d,inputTimeScale:9e4,dropped:0}},v.probe=function(T){if(!T)return!1;for(var c=A.getID3Data(T,0)||[],l=c.length,d=T.length;l<d;l++)if(O.probe(T,l))return N.logger.log("MPEG Audio sync word found !"),!0;return!1},a.canParse=function(T,c){return O.canParse(T,c)},a.appendFrame=function(T,c,l){if(this.basePTS!==null)return O.appendFrame(T,c,l,this.basePTS,this.frameIndex)},v}(b.default);const w=S},"./src/demux/mp4demuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>S});var b=o("./src/polyfills/number.ts"),A=o("./src/types/demuxer.ts"),N=o("./src/utils/mp4-tools.ts"),O=o("./src/demux/dummy-demuxed-track.ts"),U=/\/emsg[-/]ID3/i,M=function(){function w(v,a){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=a}var p=w.prototype;return p.resetTimeStamp=function(){},p.resetInitSegment=function(a,D,T,c){var l=this.videoTrack=(0,O.dummyTrack)("video",1),d=this.audioTrack=(0,O.dummyTrack)("audio",1),f=this.txtTrack=(0,O.dummyTrack)("text",1);if(this.id3Track=(0,O.dummyTrack)("id3",1),this.timeOffset=0,!(!a||!a.byteLength)){var x=(0,N.parseInitSegment)(a);if(x.video){var L=x.video,h=L.id,m=L.timescale,I=L.codec;l.id=h,l.timescale=f.timescale=m,l.codec=I}if(x.audio){var g=x.audio,E=g.id,u=g.timescale,y=g.codec;d.id=E,d.timescale=u,d.codec=y}f.id=N.RemuxerTrackIdConfig.text,l.sampleDuration=0,l.duration=d.duration=c}},p.resetContiguity=function(){},w.probe=function(a){return a=a.length>16384?a.subarray(0,16384):a,(0,N.findBox)(a,["moof"]).length>0},p.demux=function(a,D){this.timeOffset=D;var T=a,c=this.videoTrack,l=this.txtTrack;if(this.config.progressive){this.remainderData&&(T=(0,N.appendUint8Array)(this.remainderData,a));var d=(0,N.segmentValidRange)(T);this.remainderData=d.remainder,c.samples=d.valid||new Uint8Array}else c.samples=T;var f=this.extractID3Track(c,D);return l.samples=(0,N.parseSamples)(D,c),{videoTrack:c,audioTrack:this.audioTrack,id3Track:f,textTrack:this.txtTrack}},p.flush=function(){var a=this.timeOffset,D=this.videoTrack,T=this.txtTrack;D.samples=this.remainderData||new Uint8Array,this.remainderData=null;var c=this.extractID3Track(D,this.timeOffset);return T.samples=(0,N.parseSamples)(a,D),{videoTrack:D,audioTrack:(0,O.dummyTrack)(),id3Track:c,textTrack:(0,O.dummyTrack)()}},p.extractID3Track=function(a,D){var T=this.id3Track;if(a.samples.length){var c=(0,N.findBox)(a.samples,["emsg"]);c&&c.forEach(function(l){var d=(0,N.parseEmsg)(l);if(U.test(d.schemeIdUri)){var f=(0,b.isFiniteNumber)(d.presentationTime)?d.presentationTime/d.timeScale:D+d.presentationTimeDelta/d.timeScale,x=d.eventDuration===4294967295?Number.POSITIVE_INFINITY:d.eventDuration/d.timeScale;x<=.001&&(x=Number.POSITIVE_INFINITY);var L=d.payload;T.samples.push({data:L,len:L.byteLength,dts:f,pts:f,type:A.MetadataSchema.emsg,duration:x})}})}return T},p.demuxSampleAes=function(a,D,T){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},p.destroy=function(){},w}();const S=M},"./src/demux/mpegaudio.ts":(k,R,o)=>{o.r(R),o.d(R,{appendFrame:()=>M,canParse:()=>v,isHeader:()=>p,isHeaderPattern:()=>w,parseHeader:()=>S,probe:()=>a});var b=null,A=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],N=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],O=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],U=[0,1,1,4];function M(D,T,c,l,d){if(!(c+24>T.length)){var f=S(T,c);if(f&&c+f.frameLength<=T.length){var x=f.samplesPerFrame*9e4/f.sampleRate,L=l+d*x,h={unit:T.subarray(c,c+f.frameLength),pts:L,dts:L};return D.config=[],D.channelCount=f.channelCount,D.samplerate=f.sampleRate,D.samples.push(h),{sample:h,length:f.frameLength,missing:0}}}}function S(D,T){var c=D[T+1]>>3&3,l=D[T+1]>>1&3,d=D[T+2]>>4&15,f=D[T+2]>>2&3;if(c!==1&&d!==0&&d!==15&&f!==3){var x=D[T+2]>>1&1,L=D[T+3]>>6,h=c===3?3-l:l===3?3:4,m=A[h*14+d-1]*1e3,I=c===3?0:c===2?1:2,g=N[I*3+f],E=L===3?1:2,u=O[c][l],y=U[l],s=u*8*y,_=Math.floor(u*m/g+x)*y;if(b===null){var F=navigator.userAgent||"",P=F.match(/Chrome\/(\d+)/i);b=P?parseInt(P[1]):0}var B=!!b&&b<=87;return B&&l===2&&m>=224e3&&L===0&&(D[T+3]=D[T+3]|128),{sampleRate:g,channelCount:E,frameLength:_,samplesPerFrame:s}}}function w(D,T){return D[T]===255&&(D[T+1]&224)===224&&(D[T+1]&6)!==0}function p(D,T){return T+1<D.length&&w(D,T)}function v(D,T){var c=4;return w(D,T)&&c<=D.length-T}function a(D,T){if(T+1<D.length&&w(D,T)){var c=4,l=S(D,T),d=c;l!=null&&l.frameLength&&(d=l.frameLength);var f=T+d;return f===D.length||p(D,f)}return!1}},"./src/demux/sample-aes.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>O});var b=o("./src/crypt/decrypter.ts"),A=o("./src/utils/mp4-tools.ts"),N=function(){function U(S,w,p){this.keyData=void 0,this.decrypter=void 0,this.keyData=p,this.decrypter=new b.default(w,{removePKCS7Padding:!1})}var M=U.prototype;return M.decryptBuffer=function(w){return this.decrypter.decrypt(w,this.keyData.key.buffer,this.keyData.iv.buffer)},M.decryptAacSample=function(w,p,v){var a=this,D=w[p].unit;if(!(D.length<=16)){var T=D.subarray(16,D.length-D.length%16),c=T.buffer.slice(T.byteOffset,T.byteOffset+T.length);this.decryptBuffer(c).then(function(l){var d=new Uint8Array(l);D.set(d,16),a.decrypter.isSync()||a.decryptAacSamples(w,p+1,v)})}},M.decryptAacSamples=function(w,p,v){for(;;p++){if(p>=w.length){v();return}if(!(w[p].unit.length<32)&&(this.decryptAacSample(w,p,v),!this.decrypter.isSync()))return}},M.getAvcEncryptedData=function(w){for(var p=Math.floor((w.length-48)/160)*16+16,v=new Int8Array(p),a=0,D=32;D<w.length-16;D+=160,a+=16)v.set(w.subarray(D,D+16),a);return v},M.getAvcDecryptedUnit=function(w,p){for(var v=new Uint8Array(p),a=0,D=32;D<w.length-16;D+=160,a+=16)w.set(v.subarray(a,a+16),D);return w},M.decryptAvcSample=function(w,p,v,a,D){var T=this,c=(0,A.discardEPB)(D.data),l=this.getAvcEncryptedData(c);this.decryptBuffer(l.buffer).then(function(d){D.data=T.getAvcDecryptedUnit(c,d),T.decrypter.isSync()||T.decryptAvcSamples(w,p,v+1,a)})},M.decryptAvcSamples=function(w,p,v,a){if(w instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;p++,v=0){if(p>=w.length){a();return}for(var D=w[p].units;!(v>=D.length);v++){var T=D[v];if(!(T.data.length<=48||T.type!==1&&T.type!==5)&&(this.decryptAvcSample(w,p,v,a,T),!this.decrypter.isSync()))return}}},U}();const O=N},"./src/demux/transmuxer-interface.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>p});var b=o("./src/demux/webworkify-webpack.js"),A=o("./src/events.ts"),N=o("./src/demux/transmuxer.ts"),O=o("./src/utils/logger.ts"),U=o("./src/errors.ts"),M=o("./src/utils/mediasource-helper.ts"),S=o("./node_modules/eventemitter3/index.js"),w=(0,M.getMediaSource)()||{isTypeSupported:function(){return!1}},p=function(){function v(D,T,c,l){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var f=D.config;this.hls=D,this.id=T,this.useWorker=!!f.enableWorker,this.onTransmuxComplete=c,this.onFlush=l;var x=function(g,E){E=E||{},E.frag=d.frag,E.id=d.id,d.hls.trigger(g,E)};this.observer=new S.EventEmitter,this.observer.on(A.Events.FRAG_DECRYPTED,x),this.observer.on(A.Events.ERROR,x);var L={mp4:w.isTypeSupported("video/mp4"),mpeg:w.isTypeSupported("audio/mpeg"),mp3:w.isTypeSupported('audio/mp4; codecs="mp3"')},h=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){O.logger.log("demuxing in webworker");var m;try{m=this.worker=(0,b.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(I){d.useWorker=!1,O.logger.warn("Exception in webworker, fallback to inline"),d.hls.trigger(A.Events.ERROR,{type:U.ErrorTypes.OTHER_ERROR,details:U.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(I.message+"  ("+I.filename+":"+I.lineno+")")})},m.postMessage({cmd:"init",typeSupported:L,vendor:h,id:T,config:JSON.stringify(f)})}catch(I){O.logger.warn("Error in worker:",I),O.logger.error("Error while initializing DemuxerWorker, fallback to inline"),m&&self.URL.revokeObjectURL(m.objectURL),this.transmuxer=new N.default(this.observer,L,f,h,T),this.worker=null}}else this.transmuxer=new N.default(this.observer,L,f,h,T)}var a=v.prototype;return a.destroy=function(){var T=this.worker;if(T)T.removeEventListener("message",this.onwmsg),T.terminate(),this.worker=null,this.onwmsg=void 0;else{var c=this.transmuxer;c&&(c.destroy(),this.transmuxer=null)}var l=this.observer;l&&l.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},a.push=function(T,c,l,d,f,x,L,h,m,I){var g,E,u=this;m.transmuxing.start=self.performance.now();var y=this.transmuxer,s=this.worker,_=x?x.start:f.start,F=f.decryptdata,P=this.frag,B=!(P&&f.cc===P.cc),K=!(P&&m.level===P.level),j=P?m.sn-P.sn:-1,W=this.part?m.part-this.part.index:-1,H=j===0&&m.id>1&&m.id===(P==null?void 0:P.stats.chunkCount),G=!K&&(j===1||j===0&&(W===1||H&&W<=0)),$=self.performance.now();(K||j||f.stats.parsing.start===0)&&(f.stats.parsing.start=$),x&&(W||!G)&&(x.stats.parsing.start=$);var V=!(P&&((g=f.initSegment)===null||g===void 0?void 0:g.url)===((E=P.initSegment)===null||E===void 0?void 0:E.url)),z=new N.TransmuxState(B,G,h,K,_,V);if(!G||B||V){O.logger.log("[transmuxer-interface, "+f.type+"]: Starting new transmux session for sn: "+m.sn+" p: "+m.part+" level: "+m.level+" id: "+m.id+`
        discontinuity: `+B+`
        trackSwitch: `+K+`
        contiguous: `+G+`
        accurateTimeOffset: `+h+`
        timeOffset: `+_+`
        initSegmentChange: `+V);var Y=new N.TransmuxConfig(l,d,c,L,I);this.configureTransmuxer(Y)}if(this.frag=f,this.part=x,s)s.postMessage({cmd:"demux",data:T,decryptdata:F,chunkMeta:m,state:z},T instanceof ArrayBuffer?[T]:[]);else if(y){var Q=y.push(T,F,m,z);(0,N.isPromise)(Q)?(y.async=!0,Q.then(function(q){u.handleTransmuxComplete(q)}).catch(function(q){u.transmuxerError(q,m,"transmuxer-interface push error")})):(y.async=!1,this.handleTransmuxComplete(Q))}},a.flush=function(T){var c=this;T.transmuxing.start=self.performance.now();var l=this.transmuxer,d=this.worker;if(d)d.postMessage({cmd:"flush",chunkMeta:T});else if(l){var f=l.flush(T),x=(0,N.isPromise)(f);x||l.async?((0,N.isPromise)(f)||(f=Promise.resolve(f)),f.then(function(L){c.handleFlushResult(L,T)}).catch(function(L){c.transmuxerError(L,T,"transmuxer-interface flush error")})):this.handleFlushResult(f,T)}},a.transmuxerError=function(T,c,l){this.hls&&this.hls.trigger(A.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:c,fatal:!1,error:T,err:T,reason:l})},a.handleFlushResult=function(T,c){var l=this;T.forEach(function(d){l.handleTransmuxComplete(d)}),this.onFlush(c)},a.onWorkerMessage=function(T){var c=T.data,l=this.hls;switch(c.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":O.logger[c.data.logType]&&O.logger[c.data.logType](c.data.message);break;default:{c.data=c.data||{},c.data.frag=this.frag,c.data.id=this.id,l.trigger(c.event,c.data);break}}},a.configureTransmuxer=function(T){var c=this.worker,l=this.transmuxer;c?c.postMessage({cmd:"configure",config:T}):l&&l.configure(T)},a.handleTransmuxComplete=function(T){T.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(T)},v}()},"./src/demux/transmuxer-worker.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>M});var b=o("./src/demux/transmuxer.ts"),A=o("./src/events.ts"),N=o("./src/utils/logger.ts"),O=o("./node_modules/eventemitter3/index.js"),U=o("./src/errors.ts");function M(a){var D=new O.EventEmitter,T=function(d,f){a.postMessage({event:d,data:f})};D.on(A.Events.FRAG_DECRYPTED,T),D.on(A.Events.ERROR,T);var c=function(){var d=function(L){var h=function(I){T("workerLog",{logType:L,message:I})};N.logger[L]=h};for(var f in N.logger)d(f)};a.addEventListener("message",function(l){var d=l.data;switch(d.cmd){case"init":{var f=JSON.parse(d.config);a.transmuxer=new b.default(D,d.typeSupported,f,d.vendor,d.id),(0,N.enableLogs)(f.debug,d.id),c(),T("init",null);break}case"configure":{a.transmuxer.configure(d.config);break}case"demux":{var x=a.transmuxer.push(d.data,d.decryptdata,d.chunkMeta,d.state);(0,b.isPromise)(x)?(a.transmuxer.async=!0,x.then(function(I){S(a,I)}).catch(function(I){T(A.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:d.chunkMeta,fatal:!1,error:I,err:I,reason:"transmuxer-worker push error"})})):(a.transmuxer.async=!1,S(a,x));break}case"flush":{var L=d.chunkMeta,h=a.transmuxer.flush(L),m=(0,b.isPromise)(h);m||a.transmuxer.async?((0,b.isPromise)(h)||(h=Promise.resolve(h)),h.then(function(I){p(a,I,L)}).catch(function(I){T(A.Events.ERROR,{type:U.ErrorTypes.MEDIA_ERROR,details:U.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:d.chunkMeta,fatal:!1,error:I,err:I,reason:"transmuxer-worker flush error"})})):p(a,h,L);break}}})}function S(a,D){if(v(D.remuxResult))return!1;var T=[],c=D.remuxResult,l=c.audio,d=c.video;return l&&w(T,l),d&&w(T,d),a.postMessage({event:"transmuxComplete",data:D},T),!0}function w(a,D){D.data1&&a.push(D.data1.buffer),D.data2&&a.push(D.data2.buffer)}function p(a,D,T){var c=D.reduce(function(l,d){return S(a,d)||l},!1);c||a.postMessage({event:"transmuxComplete",data:D[0]}),a.postMessage({event:"flush",data:T})}function v(a){return!a.audio&&!a.video&&!a.text&&!a.id3&&!a.initSegment}},"./src/demux/transmuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{TransmuxConfig:()=>f,TransmuxState:()=>x,default:()=>T,isPromise:()=>d});var b=o("./src/events.ts"),A=o("./src/errors.ts"),N=o("./src/crypt/decrypter.ts"),O=o("./src/demux/aacdemuxer.ts"),U=o("./src/demux/mp4demuxer.ts"),M=o("./src/demux/tsdemuxer.ts"),S=o("./src/demux/mp3demuxer.ts"),w=o("./src/remux/mp4-remuxer.ts"),p=o("./src/remux/passthrough-remuxer.ts"),v=o("./src/utils/logger.ts"),a;try{a=self.performance.now.bind(self.performance)}catch{v.logger.debug("Unable to use Performance API on this environment"),a=self.Date.now}var D=[{demux:U.default,remux:p.default},{demux:M.default,remux:w.default},{demux:O.default,remux:w.default},{demux:S.default,remux:w.default}],T=function(){function L(m,I,g,E,u){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=m,this.typeSupported=I,this.config=g,this.vendor=E,this.id=u}var h=L.prototype;return h.configure=function(I){this.transmuxConfig=I,this.decrypter&&this.decrypter.reset()},h.push=function(I,g,E,u){var y=this,s=E.transmuxing;s.executeStart=a();var _=new Uint8Array(I),F=this.currentTransmuxState,P=this.transmuxConfig;u&&(this.currentTransmuxState=u);var B=u||F,K=B.contiguous,j=B.discontinuity,W=B.trackSwitch,H=B.accurateTimeOffset,G=B.timeOffset,$=B.initSegmentChange,V=P.audioCodec,z=P.videoCodec,Y=P.defaultInitPts,Q=P.duration,q=P.initSegmentData,Z=c(_,g);if(Z&&Z.method==="AES-128"){var J=this.getDecrypter();if(J.isSync()){var ie=J.softwareDecrypt(_,Z.key.buffer,Z.iv.buffer),le=E.part>-1;if(le&&(ie=J.flush()),!ie)return s.executeEnd=a(),l(E);_=new Uint8Array(ie)}else return this.decryptionPromise=J.webCryptoDecrypt(_,Z.key.buffer,Z.iv.buffer).then(function(pe){var ye=y.push(pe,null,E);return y.decryptionPromise=null,ye}),this.decryptionPromise}var oe=this.needsProbing(j,W);oe&&this.configureTransmuxer(_),(j||W||$||oe)&&this.resetInitSegment(q,V,z,Q,g),(j||$||oe)&&this.resetInitialTimestamp(Y),K||this.resetContiguity();var re=this.transmux(_,Z,G,H,E),ne=this.currentTransmuxState;return ne.contiguous=!0,ne.discontinuity=!1,ne.trackSwitch=!1,s.executeEnd=a(),re},h.flush=function(I){var g=this,E=I.transmuxing;E.executeStart=a();var u=this.decrypter,y=this.currentTransmuxState,s=this.decryptionPromise;if(s)return s.then(function(){return g.flush(I)});var _=[],F=y.timeOffset;if(u){var P=u.flush();P&&_.push(this.push(P,null,I))}var B=this.demuxer,K=this.remuxer;if(!B||!K)return this.observer.emit(b.Events.ERROR,b.Events.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),E.executeEnd=a(),[l(I)];var j=B.flush(F);return d(j)?j.then(function(W){return g.flushRemux(_,W,I),_}):(this.flushRemux(_,j,I),_)},h.flushRemux=function(I,g,E){var u=g.audioTrack,y=g.videoTrack,s=g.id3Track,_=g.textTrack,F=this.currentTransmuxState,P=F.accurateTimeOffset,B=F.timeOffset;v.logger.log("[transmuxer.ts]: Flushed fragment "+E.sn+(E.part>-1?" p: "+E.part:"")+" of level "+E.level);var K=this.remuxer.remux(u,y,s,_,B,P,!0,this.id);I.push({remuxResult:K,chunkMeta:E}),E.transmuxing.executeEnd=a()},h.resetInitialTimestamp=function(I){var g=this.demuxer,E=this.remuxer;!g||!E||(g.resetTimeStamp(I),E.resetTimeStamp(I))},h.resetContiguity=function(){var I=this.demuxer,g=this.remuxer;!I||!g||(I.resetContiguity(),g.resetNextTimestamp())},h.resetInitSegment=function(I,g,E,u,y){var s=this.demuxer,_=this.remuxer;!s||!_||(s.resetInitSegment(I,g,E,u),_.resetInitSegment(I,g,E,y))},h.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},h.transmux=function(I,g,E,u,y){var s;return g&&g.method==="SAMPLE-AES"?s=this.transmuxSampleAes(I,g,E,u,y):s=this.transmuxUnencrypted(I,E,u,y),s},h.transmuxUnencrypted=function(I,g,E,u){var y=this.demuxer.demux(I,g,!1,!this.config.progressive),s=y.audioTrack,_=y.videoTrack,F=y.id3Track,P=y.textTrack,B=this.remuxer.remux(s,_,F,P,g,E,!1,this.id);return{remuxResult:B,chunkMeta:u}},h.transmuxSampleAes=function(I,g,E,u,y){var s=this;return this.demuxer.demuxSampleAes(I,g,E).then(function(_){var F=s.remuxer.remux(_.audioTrack,_.videoTrack,_.id3Track,_.textTrack,E,u,!1,s.id);return{remuxResult:F,chunkMeta:y}})},h.configureTransmuxer=function(I){for(var g=this.config,E=this.observer,u=this.typeSupported,y=this.vendor,s,_=0,F=D.length;_<F;_++)if(D[_].demux.probe(I)){s=D[_];break}s||(v.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),s={demux:U.default,remux:p.default});var P=this.demuxer,B=this.remuxer,K=s.remux,j=s.demux;(!B||!(B instanceof K))&&(this.remuxer=new K(E,g,u,y)),(!P||!(P instanceof j))&&(this.demuxer=new j(E,g,u),this.probe=j.probe)},h.needsProbing=function(I,g){return!this.demuxer||!this.remuxer||I||g},h.getDecrypter=function(){var I=this.decrypter;return I||(I=this.decrypter=new N.default(this.config)),I},L}();function c(L,h){var m=null;return L.byteLength>0&&h!=null&&h.key!=null&&h.iv!==null&&h.method!=null&&(m=h),m}var l=function(h){return{remuxResult:{},chunkMeta:h}};function d(L){return"then"in L&&L.then instanceof Function}var f=function(h,m,I,g,E){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=h,this.videoCodec=m,this.initSegmentData=I,this.duration=g,this.defaultInitPts=E},x=function(h,m,I,g,E,u){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=h,this.contiguous=m,this.accurateTimeOffset=I,this.trackSwitch=g,this.timeOffset=E,this.initSegmentChange=u}},"./src/demux/tsdemuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>L});var b=o("./src/demux/adts.ts"),A=o("./src/demux/mpegaudio.ts"),N=o("./src/demux/exp-golomb.ts"),O=o("./src/demux/sample-aes.ts"),U=o("./src/events.ts"),M=o("./src/utils/mp4-tools.ts"),S=o("./src/utils/logger.ts"),w=o("./src/errors.ts"),p=o("./src/types/demuxer.ts");function v(){return v=Object.assign?Object.assign.bind():function(h){for(var m=1;m<arguments.length;m++){var I=arguments[m];for(var g in I)Object.prototype.hasOwnProperty.call(I,g)&&(h[g]=I[g])}return h},v.apply(this,arguments)}var a=188,D=function(){function h(I,g,E){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=I,this.config=g,this.typeSupported=E}h.probe=function(g){var E=h.syncOffset(g);return E>0&&S.logger.warn("MPEG2-TS detected but first sync word found @ offset "+E),E!==-1},h.syncOffset=function(g){for(var E=g.length,u=Math.min(a*5,g.length-a)+1,y=0;y<u;){for(var s=!1,_=y;_<E&&g[_]===71;_+=a)if(!s&&c(g,_)===0&&(s=!0),s&&_+a>u)return y;y++}return-1},h.createTrack=function(g,E){return{container:g==="video"||g==="audio"?"video/mp2t":void 0,type:g,id:M.RemuxerTrackIdConfig[g],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:g==="audio"?E:void 0}};var m=h.prototype;return m.resetInitSegment=function(g,E,u,y){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=h.createTrack("video"),this._audioTrack=h.createTrack("audio",y),this._id3Track=h.createTrack("id3"),this._txtTrack=h.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=E,this.videoCodec=u,this._duration=y},m.resetTimeStamp=function(){},m.resetContiguity=function(){var g=this._audioTrack,E=this._avcTrack,u=this._id3Track;g&&(g.pesData=null),E&&(E.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},m.demux=function(g,E,u,y){u===void 0&&(u=!1),y===void 0&&(y=!1),u||(this.sampleAes=null);var s,_=this._avcTrack,F=this._audioTrack,P=this._id3Track,B=this._txtTrack,K=_.pid,j=_.pesData,W=F.pid,H=P.pid,G=F.pesData,$=P.pesData,V=null,z=this.pmtParsed,Y=this._pmtId,Q=g.length;if(this.remainderData&&(g=(0,M.appendUint8Array)(this.remainderData,g),Q=g.length,this.remainderData=null),Q<a&&!y)return this.remainderData=g,{audioTrack:F,videoTrack:_,id3Track:P,textTrack:B};var q=Math.max(0,h.syncOffset(g));Q-=(Q-q)%a,Q<g.byteLength&&!y&&(this.remainderData=new Uint8Array(g.buffer,Q,g.buffer.byteLength-Q));for(var Z=0,J=q;J<Q;J+=a)if(g[J]===71){var ie=!!(g[J+1]&64),le=c(g,J),oe=(g[J+3]&48)>>4,re=void 0;if(oe>1){if(re=J+5+g[J+4],re===J+a)continue}else re=J+4;switch(le){case K:ie&&(j&&(s=f(j))&&this.parseAVCPES(_,B,s,!1),j={data:[],size:0}),j&&(j.data.push(g.subarray(re,J+a)),j.size+=J+a-re);break;case W:if(ie){if(G&&(s=f(G)))switch(F.segmentCodec){case"aac":this.parseAACPES(F,s);break;case"mp3":this.parseMPEGPES(F,s);break}G={data:[],size:0}}G&&(G.data.push(g.subarray(re,J+a)),G.size+=J+a-re);break;case H:ie&&($&&(s=f($))&&this.parseID3PES(P,s),$={data:[],size:0}),$&&($.data.push(g.subarray(re,J+a)),$.size+=J+a-re);break;case 0:ie&&(re+=g[re]+1),Y=this._pmtId=l(g,re);break;case Y:{ie&&(re+=g[re]+1);var ne=d(g,re,this.typeSupported,u);K=ne.avc,K>0&&(_.pid=K),W=ne.audio,W>0&&(F.pid=W,F.segmentCodec=ne.segmentCodec),H=ne.id3,H>0&&(P.pid=H),V!==null&&!z&&(S.logger.warn("MPEG-TS PMT found at "+J+" after unknown PID '"+V+"'. Backtracking to sync byte @"+q+" to parse all TS packets."),V=null,J=q-188),z=this.pmtParsed=!0;break}case 17:case 8191:break;default:V=le;break}}else Z++;Z>0&&this.observer.emit(U.Events.ERROR,U.Events.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+Z+" TS packet/s that do not start with 0x47"}),_.pesData=j,F.pesData=G,P.pesData=$;var pe={audioTrack:F,videoTrack:_,id3Track:P,textTrack:B};return y&&this.extractRemainingSamples(pe),pe},m.flush=function(){var g=this.remainderData;this.remainderData=null;var E;return g?E=this.demux(g,-1,!1,!0):E={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(E),this.sampleAes?this.decrypt(E,this.sampleAes):E},m.extractRemainingSamples=function(g){var E=g.audioTrack,u=g.videoTrack,y=g.id3Track,s=g.textTrack,_=u.pesData,F=E.pesData,P=y.pesData,B;if(_&&(B=f(_))?(this.parseAVCPES(u,s,B,!0),u.pesData=null):u.pesData=_,F&&(B=f(F))){switch(E.segmentCodec){case"aac":this.parseAACPES(E,B);break;case"mp3":this.parseMPEGPES(E,B);break}E.pesData=null}else F!=null&&F.size&&S.logger.log("last AAC PES packet truncated,might overlap between fragments"),E.pesData=F;P&&(B=f(P))?(this.parseID3PES(y,B),y.pesData=null):y.pesData=P},m.demuxSampleAes=function(g,E,u){var y=this.demux(g,u,!0,!this.config.progressive),s=this.sampleAes=new O.default(this.observer,this.config,E);return this.decrypt(y,s)},m.decrypt=function(g,E){return new Promise(function(u){var y=g.audioTrack,s=g.videoTrack;y.samples&&y.segmentCodec==="aac"?E.decryptAacSamples(y.samples,0,function(){s.samples?E.decryptAvcSamples(s.samples,0,0,function(){u(g)}):u(g)}):s.samples&&E.decryptAvcSamples(s.samples,0,0,function(){u(g)})})},m.destroy=function(){this._duration=0},m.parseAVCPES=function(g,E,u,y){var s=this,_=this.parseAVCNALu(g,u.data),F=this.avcSample,P,B=!1;u.data=null,F&&_.length&&!g.audFound&&(x(F,g),F=this.avcSample=T(!1,u.pts,u.dts,"")),_.forEach(function(K){switch(K.type){case 1:{P=!0,F||(F=s.avcSample=T(!0,u.pts,u.dts,"")),F.frame=!0;var j=K.data;if(B&&j.length>4){var W=new N.default(j).readSliceType();(W===2||W===4||W===7||W===9)&&(F.key=!0)}break}case 5:P=!0,F||(F=s.avcSample=T(!0,u.pts,u.dts,"")),F.key=!0,F.frame=!0;break;case 6:{P=!0,(0,M.parseSEIMessageFromNALu)(K.data,1,u.pts,E.samples);break}case 7:if(P=!0,B=!0,!g.sps){var H=new N.default(K.data),G=H.readSPS();g.width=G.width,g.height=G.height,g.pixelRatio=G.pixelRatio,g.sps=[K.data],g.duration=s._duration;for(var $=K.data.subarray(1,4),V="avc1.",z=0;z<3;z++){var Y=$[z].toString(16);Y.length<2&&(Y="0"+Y),V+=Y}g.codec=V}break;case 8:P=!0,g.pps||(g.pps=[K.data]);break;case 9:P=!1,g.audFound=!0,F&&x(F,g),F=s.avcSample=T(!1,u.pts,u.dts,"");break;case 12:P=!0;break;default:P=!1,F&&(F.debug+="unknown NAL "+K.type+" ");break}if(F&&P){var Q=F.units;Q.push(K)}}),y&&F&&(x(F,g),this.avcSample=null)},m.getLastNalUnit=function(g){var E,u=this.avcSample,y;if((!u||u.units.length===0)&&(u=g[g.length-1]),(E=u)!==null&&E!==void 0&&E.units){var s=u.units;y=s[s.length-1]}return y},m.parseAVCNALu=function(g,E){var u=E.byteLength,y=g.naluState||0,s=y,_=[],F=0,P,B,K,j=-1,W=0;for(y===-1&&(j=0,W=E[0]&31,y=0,F=1);F<u;){if(P=E[F++],!y){y=P?0:1;continue}if(y===1){y=P?0:2;continue}if(!P)y=3;else if(P===1){if(j>=0){var H={data:E.subarray(j,F-y-1),type:W};_.push(H)}else{var G=this.getLastNalUnit(g.samples);if(G&&(s&&F<=4-s&&G.state&&(G.data=G.data.subarray(0,G.data.byteLength-s)),B=F-y-1,B>0)){var $=new Uint8Array(G.data.byteLength+B);$.set(G.data,0),$.set(E.subarray(0,B),G.data.byteLength),G.data=$,G.state=0}}F<u?(K=E[F]&31,j=F,W=K,y=0):y=-1}else y=0}if(j>=0&&y>=0){var V={data:E.subarray(j,u),type:W,state:y};_.push(V)}if(_.length===0){var z=this.getLastNalUnit(g.samples);if(z){var Y=new Uint8Array(z.data.byteLength+E.byteLength);Y.set(z.data,0),Y.set(E,z.data.byteLength),z.data=Y}}return g.naluState=y,_},m.parseAACPES=function(g,E){var u=0,y=this.aacOverFlow,s=E.data;if(y){this.aacOverFlow=null;var _=y.missing,F=y.sample.unit.byteLength;if(_===-1){var P=new Uint8Array(F+s.byteLength);P.set(y.sample.unit,0),P.set(s,F),s=P}else{var B=F-_;y.sample.unit.set(s.subarray(0,_),B),g.samples.push(y.sample),u=y.missing}}var K,j;for(K=u,j=s.length;K<j-1&&!b.isHeader(s,K);K++);if(K!==u){var W,H;if(K<j-1?(W="AAC PES did not start with ADTS header,offset:"+K,H=!1):(W="no ADTS header found in AAC PES",H=!0),S.logger.warn("parsing error:"+W),this.observer.emit(U.Events.ERROR,U.Events.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_PARSING_ERROR,fatal:H,reason:W}),H)return}b.initTrackConfig(g,this.observer,s,K,this.audioCodec);var G;if(E.pts!==void 0)G=E.pts;else if(y){var $=b.getFrameDuration(g.samplerate);G=y.sample.pts+$}else{S.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var V=0,z;K<j;)if(z=b.appendFrame(g,s,K,G,V),K+=z.length,z.missing){this.aacOverFlow=z;break}else for(V++;K<j-1&&!b.isHeader(s,K);K++);},m.parseMPEGPES=function(g,E){var u=E.data,y=u.length,s=0,_=0,F=E.pts;if(F===void 0){S.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;_<y;)if(A.isHeader(u,_)){var P=A.appendFrame(g,u,_,F,s);if(P)_+=P.length,s++;else break}else _++},m.parseID3PES=function(g,E){if(E.pts===void 0){S.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var u=v({},E,{type:this._avcTrack?p.MetadataSchema.emsg:p.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});g.samples.push(u)},h}();function T(h,m,I,g){return{key:h,frame:!1,pts:m,dts:I,units:[],debug:g,length:0}}function c(h,m){return((h[m+1]&31)<<8)+h[m+2]}function l(h,m){return(h[m+10]&31)<<8|h[m+11]}function d(h,m,I,g){var E={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},u=(h[m+1]&15)<<8|h[m+2],y=m+3+u-4,s=(h[m+10]&15)<<8|h[m+11];for(m+=12+s;m<y;){var _=c(h,m);switch(h[m]){case 207:if(!g){S.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:E.audio===-1&&(E.audio=_);break;case 21:E.id3===-1&&(E.id3=_);break;case 219:if(!g){S.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:E.avc===-1&&(E.avc=_);break;case 3:case 4:I.mpeg!==!0&&I.mp3!==!0?S.logger.log("MPEG audio found, not supported in this browser"):E.audio===-1&&(E.audio=_,E.segmentCodec="mp3");break;case 36:S.logger.warn("Unsupported HEVC stream type found");break}m+=((h[m+3]&15)<<8|h[m+4])+5}return E}function f(h){var m=0,I,g,E,u,y,s=h.data;if(!h||h.size===0)return null;for(;s[0].length<19&&s.length>1;){var _=new Uint8Array(s[0].length+s[1].length);_.set(s[0]),_.set(s[1],s[0].length),s[0]=_,s.splice(1,1)}I=s[0];var F=(I[0]<<16)+(I[1]<<8)+I[2];if(F===1){if(g=(I[4]<<8)+I[5],g&&g>h.size-6)return null;var P=I[7];P&192&&(u=(I[9]&14)*536870912+(I[10]&255)*4194304+(I[11]&254)*16384+(I[12]&255)*128+(I[13]&254)/2,P&64?(y=(I[14]&14)*536870912+(I[15]&255)*4194304+(I[16]&254)*16384+(I[17]&255)*128+(I[18]&254)/2,u-y>54e5&&(S.logger.warn(Math.round((u-y)/9e4)+"s delta between PTS and DTS, align them"),u=y)):y=u),E=I[8];var B=E+9;if(h.size<=B)return null;h.size-=B;for(var K=new Uint8Array(h.size),j=0,W=s.length;j<W;j++){I=s[j];var H=I.byteLength;if(B)if(B>H){B-=H;continue}else I=I.subarray(B),H-=B,B=0;K.set(I,m),m+=H}return g&&(g-=E+3),{data:K,pts:u,dts:y,len:g}}return null}function x(h,m){if(h.units.length&&h.frame){if(h.pts===void 0){var I=m.samples,g=I.length;if(g){var E=I[g-1];h.pts=E.pts,h.dts=E.dts}else{m.dropped++;return}}m.samples.push(h)}h.debug.length&&S.logger.log(h.pts+"/"+h.dts+":"+h.debug)}const L=D},"./src/demux/webworkify-webpack.js":(k,R,o)=>{o.r(R),o.d(R,{default:()=>a});var b=function(){var T=ENTRY_MODULE,c={},l=function f(x){var L=c[x];if(L!==void 0)return L.exports;var h=c[x]={exports:{}};return T[x].call(h.exports,h,h.exports,f),h.exports};l.m=T,function(){l.n=function(f){var x=f&&f.__esModule?function(){return f.default}:function(){return f};return l.d(x,{a:x}),x}}(),function(){l.d=function(f,x){for(var L in x)l.o(x,L)&&!l.o(f,L)&&Object.defineProperty(f,L,{enumerable:!0,get:x[L]})}}(),function(){l.o=function(f,x){return Object.prototype.hasOwnProperty.call(f,x)}}(),function(){l.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}();var d=l(ENTRY_MODULE);return d.default||d},A=b.toString().split("ENTRY_MODULE"),N="[\\.|\\-|\\+|\\w|/|@]+",O="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+N+").*?\\)";function U(D){return(D+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function M(D){return!isNaN(1*D)}function S(D,T,c){var l={};l[c]=[];var d=T.toString().replace(/^"[^"]+"/,"function"),f=d.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||d.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!f)return l;for(var x=f[1],L=new RegExp("(\\\\n|\\W)"+U(x)+O,"g"),h;h=L.exec(d);)h[3]!=="dll-reference"&&l[c].push(h[3]);for(L=new RegExp("\\("+U(x)+'\\("(dll-reference\\s('+N+'))"\\)\\)'+O,"g");h=L.exec(d);)D[h[2]]||(l[c].push(h[1]),D[h[2]]=o(h[1]).m),l[h[2]]=l[h[2]]||[],l[h[2]].push(h[4]);for(var m=Object.keys(l),I=0;I<m.length;I++)for(var g=0;g<l[m[I]].length;g++)M(l[m[I]][g])&&(l[m[I]][g]=1*l[m[I]][g]);return l}function w(D){var T=Object.keys(D);return T.reduce(function(c,l){return c||D[l].length>0},!1)}function p(D,T){for(var c={main:[T]},l={main:[]},d={main:{}};w(c);)for(var f=Object.keys(c),x=0;x<f.length;x++){var L=f[x],h=c[L],m=h.pop();if(d[L]=d[L]||{},!(d[L][m]||!D[L][m])){d[L][m]=!0,l[L]=l[L]||[],l[L].push(m);for(var I=S(D,D[L][m],L),g=Object.keys(I),E=0;E<g.length;E++)c[g[E]]=c[g[E]]||[],c[g[E]]=c[g[E]].concat(I[g[E]])}}return l}function v(D,T,c,l){var d=D[l].map(function(f){return'"'+f+'": '+T[l][f].toString().replace(/^"[^"]+"/,"function")}).join(",");return A[0]+"{"+d+"}"+A[1]+'"'+c+'"'+A[2]}function a(D,T){T=T||{};var c={main:o.m},l=T.all?{main:Object.keys(c.main)}:p(c,D),d="";Object.keys(l).filter(function(m){return m!=="main"}).forEach(function(m){for(var I=0;l[m][I];)I++;l[m].push(I),c[m][I]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",d=d+("var "+m+" = ("+v(l,c,I,modules)+`)();
`)}),d=d+("new (("+v(l,c,D,"main")+")())(self);");var f=new window.Blob([d],{type:"text/javascript"}),x=window.URL||window.webkitURL||window.mozURL||window.msURL,L=x.createObjectURL(f),h=new window.Worker(L);return h.objectURL=L,h}},"./src/errors.ts":(k,R,o)=>{o.r(R),o.d(R,{ErrorDetails:()=>A,ErrorTypes:()=>b});var b;(function(N){N.NETWORK_ERROR="networkError",N.MEDIA_ERROR="mediaError",N.KEY_SYSTEM_ERROR="keySystemError",N.MUX_ERROR="muxError",N.OTHER_ERROR="otherError"})(b||(b={}));var A;(function(N){N.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",N.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",N.KEY_SYSTEM_NO_SESSION="keySystemNoSession",N.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",N.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",N.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",N.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",N.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",N.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",N.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",N.MANIFEST_LOAD_ERROR="manifestLoadError",N.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",N.MANIFEST_PARSING_ERROR="manifestParsingError",N.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",N.LEVEL_EMPTY_ERROR="levelEmptyError",N.LEVEL_LOAD_ERROR="levelLoadError",N.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",N.LEVEL_SWITCH_ERROR="levelSwitchError",N.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",N.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",N.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",N.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",N.FRAG_LOAD_ERROR="fragLoadError",N.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",N.FRAG_DECRYPT_ERROR="fragDecryptError",N.FRAG_PARSING_ERROR="fragParsingError",N.REMUX_ALLOC_ERROR="remuxAllocError",N.KEY_LOAD_ERROR="keyLoadError",N.KEY_LOAD_TIMEOUT="keyLoadTimeOut",N.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",N.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",N.BUFFER_APPEND_ERROR="bufferAppendError",N.BUFFER_APPENDING_ERROR="bufferAppendingError",N.BUFFER_STALLED_ERROR="bufferStalledError",N.BUFFER_FULL_ERROR="bufferFullError",N.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",N.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",N.INTERNAL_EXCEPTION="internalException",N.INTERNAL_ABORTED="aborted",N.UNKNOWN="unknown"})(A||(A={}))},"./src/events.ts":(k,R,o)=>{o.r(R),o.d(R,{Events:()=>b});var b;(function(A){A.MEDIA_ATTACHING="hlsMediaAttaching",A.MEDIA_ATTACHED="hlsMediaAttached",A.MEDIA_DETACHING="hlsMediaDetaching",A.MEDIA_DETACHED="hlsMediaDetached",A.BUFFER_RESET="hlsBufferReset",A.BUFFER_CODECS="hlsBufferCodecs",A.BUFFER_CREATED="hlsBufferCreated",A.BUFFER_APPENDING="hlsBufferAppending",A.BUFFER_APPENDED="hlsBufferAppended",A.BUFFER_EOS="hlsBufferEos",A.BUFFER_FLUSHING="hlsBufferFlushing",A.BUFFER_FLUSHED="hlsBufferFlushed",A.MANIFEST_LOADING="hlsManifestLoading",A.MANIFEST_LOADED="hlsManifestLoaded",A.MANIFEST_PARSED="hlsManifestParsed",A.LEVEL_SWITCHING="hlsLevelSwitching",A.LEVEL_SWITCHED="hlsLevelSwitched",A.LEVEL_LOADING="hlsLevelLoading",A.LEVEL_LOADED="hlsLevelLoaded",A.LEVEL_UPDATED="hlsLevelUpdated",A.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",A.LEVELS_UPDATED="hlsLevelsUpdated",A.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",A.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",A.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",A.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",A.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",A.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",A.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",A.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",A.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",A.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",A.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",A.CUES_PARSED="hlsCuesParsed",A.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",A.INIT_PTS_FOUND="hlsInitPtsFound",A.FRAG_LOADING="hlsFragLoading",A.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",A.FRAG_LOADED="hlsFragLoaded",A.FRAG_DECRYPTED="hlsFragDecrypted",A.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",A.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",A.FRAG_PARSING_METADATA="hlsFragParsingMetadata",A.FRAG_PARSED="hlsFragParsed",A.FRAG_BUFFERED="hlsFragBuffered",A.FRAG_CHANGED="hlsFragChanged",A.FPS_DROP="hlsFpsDrop",A.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",A.ERROR="hlsError",A.DESTROYING="hlsDestroying",A.KEY_LOADING="hlsKeyLoading",A.KEY_LOADED="hlsKeyLoaded",A.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",A.BACK_BUFFER_REACHED="hlsBackBufferReached"})(b||(b={}))},"./src/hls.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>h});var b=o("./node_modules/url-toolkit/src/url-toolkit.js"),A=o("./src/loader/playlist-loader.ts"),N=o("./src/controller/id3-track-controller.ts"),O=o("./src/controller/latency-controller.ts"),U=o("./src/controller/level-controller.ts"),M=o("./src/controller/fragment-tracker.ts"),S=o("./src/loader/key-loader.ts"),w=o("./src/controller/stream-controller.ts"),p=o("./src/is-supported.ts"),v=o("./src/utils/logger.ts"),a=o("./src/config.ts"),D=o("./node_modules/eventemitter3/index.js"),T=o("./src/events.ts"),c=o("./src/errors.ts"),l=o("./src/types/level.ts");function d(m,I){for(var g=0;g<I.length;g++){var E=I[g];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,x(E.key),E)}}function f(m,I,g){return I&&d(m.prototype,I),g&&d(m,g),Object.defineProperty(m,"prototype",{writable:!1}),m}function x(m){var I=L(m,"string");return typeof I=="symbol"?I:String(I)}function L(m,I){if(typeof m!="object"||m===null)return m;var g=m[Symbol.toPrimitive];if(g!==void 0){var E=g.call(m,I||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(m)}var h=function(){m.isSupported=function(){return(0,p.isSupported)()};function m(g){g===void 0&&(g={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new D.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var E=this.config=(0,a.mergeConfig)(m.DefaultConfig,g);this.userConfig=g,(0,v.enableLogs)(E.debug,"Hls instance"),this._autoLevelCapping=-1,E.progressive&&(0,a.enableStreamingMode)(E);var u=E.abrController,y=E.bufferController,s=E.capLevelController,_=E.fpsController,F=this.abrController=new u(this),P=this.bufferController=new y(this),B=this.capLevelController=new s(this),K=new _(this),j=new A.default(this),W=new N.default(this),H=this.levelController=new U.default(this),G=new M.FragmentTracker(this),$=new S.default(this.config),V=this.streamController=new w.default(this,G,$);B.setStreamController(V),K.setStreamController(V);var z=[j,H,V];this.networkControllers=z;var Y=[F,P,B,K,W,G];this.audioTrackController=this.createController(E.audioTrackController,z);var Q=E.audioStreamController;Q&&z.push(new Q(this,G,$)),this.subtitleTrackController=this.createController(E.subtitleTrackController,z);var q=E.subtitleStreamController;q&&z.push(new q(this,G,$)),this.createController(E.timelineController,Y),$.emeController=this.emeController=this.createController(E.emeController,Y),this.cmcdController=this.createController(E.cmcdController,Y),this.latencyController=this.createController(O.default,Y),this.coreComponents=Y}var I=m.prototype;return I.createController=function(E,u){if(E){var y=new E(this);return u&&u.push(y),y}return null},I.on=function(E,u,y){y===void 0&&(y=this),this._emitter.on(E,u,y)},I.once=function(E,u,y){y===void 0&&(y=this),this._emitter.once(E,u,y)},I.removeAllListeners=function(E){this._emitter.removeAllListeners(E)},I.off=function(E,u,y,s){y===void 0&&(y=this),this._emitter.off(E,u,y,s)},I.listeners=function(E){return this._emitter.listeners(E)},I.emit=function(E,u,y){return this._emitter.emit(E,u,y)},I.trigger=function(E,u){if(this.config.debug)return this.emit(E,E,u);try{return this.emit(E,E,u)}catch(y){v.logger.error("An internal error happened while handling event "+E+'. Error message: "'+y.message+'". Here is a stacktrace:',y),this.trigger(T.Events.ERROR,{type:c.ErrorTypes.OTHER_ERROR,details:c.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:E,error:y})}return!1},I.listenerCount=function(E){return this._emitter.listenerCount(E)},I.destroy=function(){v.logger.log("destroy"),this.trigger(T.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(E){return E.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(E){return E.destroy()}),this.coreComponents.length=0},I.attachMedia=function(E){v.logger.log("attachMedia"),this._media=E,this.trigger(T.Events.MEDIA_ATTACHING,{media:E})},I.detachMedia=function(){v.logger.log("detachMedia"),this.trigger(T.Events.MEDIA_DETACHING,void 0),this._media=null},I.loadSource=function(E){this.stopLoad();var u=this.media,y=this.url,s=this.url=b.buildAbsoluteURL(self.location.href,E,{alwaysNormalize:!0});v.logger.log("loadSource:"+s),u&&y&&y!==s&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(u)),this.trigger(T.Events.MANIFEST_LOADING,{url:E})},I.startLoad=function(E){E===void 0&&(E=-1),v.logger.log("startLoad("+E+")"),this.networkControllers.forEach(function(u){u.startLoad(E)})},I.stopLoad=function(){v.logger.log("stopLoad"),this.networkControllers.forEach(function(E){E.stopLoad()})},I.swapAudioCodec=function(){v.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},I.recoverMediaError=function(){v.logger.log("recoverMediaError");var E=this._media;this.detachMedia(),E&&this.attachMedia(E)},I.removeLevel=function(E,u){u===void 0&&(u=0),this.levelController.removeLevel(E,u)},f(m,[{key:"levels",get:function(){var E=this.levelController.levels;return E||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(E){v.logger.log("set currentLevel:"+E),this.loadLevel=E,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(E){v.logger.log("set nextLevel:"+E),this.levelController.manualLevel=E,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(E){v.logger.log("set loadLevel:"+E),this.levelController.manualLevel=E}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(E){this.levelController.nextLoadLevel=E}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(E){v.logger.log("set firstLevel:"+E),this.levelController.firstLevel=E}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(E){v.logger.log("set startLevel:"+E),E!==-1&&(E=Math.max(E,this.minAutoLevel)),this.levelController.startLevel=E}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(E){var u=!!E;u!==this.config.capLevelToPlayerSize&&(u?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=u)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(E){this._autoLevelCapping!==E&&(v.logger.log("set autoLevelCapping:"+E),this._autoLevelCapping=E)}},{key:"bandwidthEstimate",get:function(){var E=this.abrController.bwEstimator;return E?E.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(E){l.HdcpLevels.indexOf(E)>-1&&(this._maxHdcpLevel=E)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var E=this.levels,u=this.config.minAutoBitrate;if(!E)return 0;for(var y=E.length,s=0;s<y;s++)if(E[s].maxBitrate>=u)return s;return 0}},{key:"maxAutoLevel",get:function(){var E=this.levels,u=this.autoLevelCapping,y=this.maxHdcpLevel,s;if(u===-1&&E&&E.length?s=E.length-1:s=u,y)for(var _=s;_--;){var F=E[_].attrs["HDCP-LEVEL"];if(F&&F<=y)return _}return s}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(E){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,E)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var E=this.audioTrackController;return E?E.audioTracks:[]}},{key:"audioTrack",get:function(){var E=this.audioTrackController;return E?E.audioTrack:-1},set:function(E){var u=this.audioTrackController;u&&(u.audioTrack=E)}},{key:"subtitleTracks",get:function(){var E=this.subtitleTrackController;return E?E.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var E=this.subtitleTrackController;return E?E.subtitleTrack:-1},set:function(E){var u=this.subtitleTrackController;u&&(u.subtitleTrack=E)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var E=this.subtitleTrackController;return E?E.subtitleDisplay:!1},set:function(E){var u=this.subtitleTrackController;u&&(u.subtitleDisplay=E)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(E){this.config.lowLatencyMode=E}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return T.Events}},{key:"ErrorTypes",get:function(){return c.ErrorTypes}},{key:"ErrorDetails",get:function(){return c.ErrorDetails}},{key:"DefaultConfig",get:function(){return m.defaultConfig?m.defaultConfig:a.hlsDefaultConfig},set:function(E){m.defaultConfig=E}}]),m}();h.defaultConfig=void 0},"./src/is-supported.ts":(k,R,o)=>{o.r(R),o.d(R,{changeTypeSupported:()=>O,isSupported:()=>N});var b=o("./src/utils/mediasource-helper.ts");function A(){return self.SourceBuffer||self.WebKitSourceBuffer}function N(){var U=(0,b.getMediaSource)();if(!U)return!1;var M=A(),S=U&&typeof U.isTypeSupported=="function"&&U.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),w=!M||M.prototype&&typeof M.prototype.appendBuffer=="function"&&typeof M.prototype.remove=="function";return!!S&&!!w}function O(){var U,M=A();return typeof(M==null||(U=M.prototype)===null||U===void 0?void 0:U.changeType)=="function"}},"./src/loader/date-range.ts":(k,R,o)=>{o.r(R),o.d(R,{DateRange:()=>v,DateRangeAttribute:()=>p});var b=o("./src/polyfills/number.ts"),A=o("./src/utils/attr-list.ts"),N=o("./src/utils/logger.ts");function O(){return O=Object.assign?Object.assign.bind():function(a){for(var D=1;D<arguments.length;D++){var T=arguments[D];for(var c in T)Object.prototype.hasOwnProperty.call(T,c)&&(a[c]=T[c])}return a},O.apply(this,arguments)}function U(a,D){for(var T=0;T<D.length;T++){var c=D[T];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,S(c.key),c)}}function M(a,D,T){return D&&U(a.prototype,D),T&&U(a,T),Object.defineProperty(a,"prototype",{writable:!1}),a}function S(a){var D=w(a,"string");return typeof D=="symbol"?D:String(D)}function w(a,D){if(typeof a!="object"||a===null)return a;var T=a[Symbol.toPrimitive];if(T!==void 0){var c=T.call(a,D||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(a)}var p;(function(a){a.ID="ID",a.CLASS="CLASS",a.START_DATE="START-DATE",a.DURATION="DURATION",a.END_DATE="END-DATE",a.END_ON_NEXT="END-ON-NEXT",a.PLANNED_DURATION="PLANNED-DURATION",a.SCTE35_OUT="SCTE35-OUT",a.SCTE35_IN="SCTE35-IN"})(p||(p={}));var v=function(){function a(D,T){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,T){var c=T.attr;for(var l in c)if(Object.prototype.hasOwnProperty.call(D,l)&&D[l]!==c[l]){N.logger.warn('DATERANGE tag attribute: "'+l+'" does not match for tags with ID: "'+D.ID+'"'),this._badValueForSameId=l;break}D=O(new A.AttrList({}),c,D)}if(this.attr=D,this._startDate=new Date(D[p.START_DATE]),p.END_DATE in this.attr){var d=new Date(this.attr[p.END_DATE]);(0,b.isFiniteNumber)(d.getTime())&&(this._endDate=d)}}return M(a,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var T=this.duration;return T!==null?new Date(this._startDate.getTime()+T*1e3):null}},{key:"duration",get:function(){if(p.DURATION in this.attr){var T=this.attr.decimalFloatingPoint(p.DURATION);if((0,b.isFiniteNumber)(T))return T}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return p.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(p.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(p.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,b.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),a}()},"./src/loader/fragment-loader.ts":(k,R,o)=>{o.r(R),o.d(R,{LoadError:()=>T,default:()=>a});var b=o("./src/polyfills/number.ts"),A=o("./src/errors.ts");function N(c,l){c.prototype=Object.create(l.prototype),c.prototype.constructor=c,w(c,l)}function O(c){var l=typeof Map=="function"?new Map:void 0;return O=function(f){if(f===null||!S(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof l<"u"){if(l.has(f))return l.get(f);l.set(f,x)}function x(){return U(f,arguments,p(this).constructor)}return x.prototype=Object.create(f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w(x,f)},O(c)}function U(c,l,d){return M()?U=Reflect.construct.bind():U=function(x,L,h){var m=[null];m.push.apply(m,L);var I=Function.bind.apply(x,m),g=new I;return h&&w(g,h.prototype),g},U.apply(null,arguments)}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(c){return Function.toString.call(c).indexOf("[native code]")!==-1}function w(c,l){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,x){return f.__proto__=x,f},w(c,l)}function p(c){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},p(c)}var v=Math.pow(2,17),a=function(){function c(d){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=d}var l=c.prototype;return l.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},l.abort=function(){this.loader&&this.loader.abort()},l.load=function(f,x){var L=this,h=f.url;if(!h)return Promise.reject(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:f,networkDetails:null},"Fragment does not have a "+(h?"part list":"url")));this.abort();var m=this.config,I=m.fLoader,g=m.loader;return new Promise(function(E,u){L.loader&&L.loader.destroy();var y=L.loader=f.loader=I?new I(m):new g(m),s=D(f),_={timeout:m.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:m.fragLoadingMaxRetryTimeout,highWaterMark:f.sn==="initSegment"?1/0:v};f.stats=y.stats,y.load(s,_,{onSuccess:function(P,B,K,j){L.resetLoader(f,y);var W=P.data;K.resetIV&&f.decryptdata&&(f.decryptdata.iv=new Uint8Array(W.slice(0,16)),W=W.slice(16)),E({frag:f,part:null,payload:W,networkDetails:j})},onError:function(P,B,K){L.resetLoader(f,y),u(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:f,response:P,networkDetails:K}))},onAbort:function(P,B,K){L.resetLoader(f,y),u(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:f,networkDetails:K}))},onTimeout:function(P,B,K){L.resetLoader(f,y),u(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:f,networkDetails:K}))},onProgress:function(P,B,K,j){x&&x({frag:f,part:null,payload:K,networkDetails:j})}})})},l.loadPart=function(f,x,L){var h=this;this.abort();var m=this.config,I=m.fLoader,g=m.loader;return new Promise(function(E,u){h.loader&&h.loader.destroy();var y=h.loader=f.loader=I?new I(m):new g(m),s=D(f,x),_={timeout:m.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:m.fragLoadingMaxRetryTimeout,highWaterMark:v};x.stats=y.stats,y.load(s,_,{onSuccess:function(P,B,K,j){h.resetLoader(f,y),h.updateStatsFromPart(f,x);var W={frag:f,part:x,payload:P.data,networkDetails:j};L(W),E(W)},onError:function(P,B,K){h.resetLoader(f,y),u(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:f,part:x,response:P,networkDetails:K}))},onAbort:function(P,B,K){f.stats.aborted=x.stats.aborted,h.resetLoader(f,y),u(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:f,part:x,networkDetails:K}))},onTimeout:function(P,B,K){h.resetLoader(f,y),u(new T({type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:f,part:x,networkDetails:K}))}})})},l.updateStatsFromPart=function(f,x){var L=f.stats,h=x.stats,m=h.total;if(L.loaded+=h.loaded,m){var I=Math.round(f.duration/x.duration),g=Math.min(Math.round(L.loaded/m),I),E=I-g,u=E*Math.round(L.loaded/g);L.total=L.loaded+u}else L.total=Math.max(L.loaded,L.total);var y=L.loading,s=h.loading;y.start?y.first+=s.first-s.start:(y.start=s.start,y.first=s.first),y.end=s.end},l.resetLoader=function(f,x){f.loader=null,this.loader===x&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),x.destroy()},c}();function D(c,l){l===void 0&&(l=null);var d=l||c,f={frag:c,part:l,responseType:"arraybuffer",url:d.url,headers:{},rangeStart:0,rangeEnd:0},x=d.byteRangeStartOffset,L=d.byteRangeEndOffset;if((0,b.isFiniteNumber)(x)&&(0,b.isFiniteNumber)(L)){var h,m=x,I=L;if(c.sn==="initSegment"&&((h=c.decryptdata)===null||h===void 0?void 0:h.method)==="AES-128"){var g=L-x;g%16&&(I=L+(16-g%16)),x!==0&&(f.resetIV=!0,m=x-16)}f.rangeStart=m,f.rangeEnd=I}return f}var T=function(c){N(l,c);function l(d){for(var f,x=arguments.length,L=new Array(x>1?x-1:0),h=1;h<x;h++)L[h-1]=arguments[h];return f=c.call.apply(c,[this].concat(L))||this,f.data=void 0,f.data=d,f}return l}(O(Error))},"./src/loader/fragment.ts":(k,R,o)=>{o.r(R),o.d(R,{BaseSegment:()=>a,ElementaryStreamTypes:()=>v,Fragment:()=>D,Part:()=>T});var b=o("./src/polyfills/number.ts"),A=o("./node_modules/url-toolkit/src/url-toolkit.js"),N=o("./src/loader/load-stats.ts");function O(c,l){c.prototype=Object.create(l.prototype),c.prototype.constructor=c,U(c,l)}function U(c,l){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,x){return f.__proto__=x,f},U(c,l)}function M(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,w(f.key),f)}}function S(c,l,d){return l&&M(c.prototype,l),d&&M(c,d),Object.defineProperty(c,"prototype",{writable:!1}),c}function w(c){var l=p(c,"string");return typeof l=="symbol"?l:String(l)}function p(c,l){if(typeof c!="object"||c===null)return c;var d=c[Symbol.toPrimitive];if(d!==void 0){var f=d.call(c,l||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(c)}var v;(function(c){c.AUDIO="audio",c.VIDEO="video",c.AUDIOVIDEO="audiovideo"})(v||(v={}));var a=function(){function c(d){var f;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(f={},f[v.AUDIO]=null,f[v.VIDEO]=null,f[v.AUDIOVIDEO]=null,f),this.baseurl=d}var l=c.prototype;return l.setByteRange=function(f,x){var L=f.split("@",2),h=[];L.length===1?h[0]=x?x.byteRangeEndOffset:0:h[0]=parseInt(L[1]),h[1]=parseInt(L[0])+h[0],this._byteRange=h},S(c,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,A.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(f){this._url=f}}]),c}(),D=function(c){O(l,c);function l(f,x){var L;return L=c.call(this,x)||this,L._decryptdata=null,L.rawProgramDateTime=null,L.programDateTime=null,L.tagList=[],L.duration=0,L.sn=0,L.levelkeys=void 0,L.type=void 0,L.loader=null,L.keyLoader=null,L.level=-1,L.cc=0,L.startPTS=void 0,L.endPTS=void 0,L.appendedPTS=void 0,L.startDTS=void 0,L.endDTS=void 0,L.start=0,L.deltaPTS=void 0,L.maxStartPTS=void 0,L.minEndPTS=void 0,L.stats=new N.LoadStats,L.urlId=0,L.data=void 0,L.bitrateTest=!1,L.title=null,L.initSegment=null,L.endList=void 0,L.type=f,L}var d=l.prototype;return d.setKeyFormat=function(x){if(this.levelkeys){var L=this.levelkeys[x];L&&!this._decryptdata&&(this._decryptdata=L.getDecryptData(this.sn))}},d.abortRequests=function(){var x,L;(x=this.loader)===null||x===void 0||x.abort(),(L=this.keyLoader)===null||L===void 0||L.abort()},d.setElementaryStreamInfo=function(x,L,h,m,I,g){g===void 0&&(g=!1);var E=this.elementaryStreams,u=E[x];if(!u){E[x]={startPTS:L,endPTS:h,startDTS:m,endDTS:I,partial:g};return}u.startPTS=Math.min(u.startPTS,L),u.endPTS=Math.max(u.endPTS,h),u.startDTS=Math.min(u.startDTS,m),u.endDTS=Math.max(u.endDTS,I)},d.clearElementaryStreamInfo=function(){var x=this.elementaryStreams;x[v.AUDIO]=null,x[v.VIDEO]=null,x[v.AUDIOVIDEO]=null},S(l,[{key:"decryptdata",get:function(){var x=this.levelkeys;if(!x&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var L=this.levelkeys.identity;if(L)this._decryptdata=L.getDecryptData(this.sn);else{var h=Object.keys(this.levelkeys);if(h.length===1)return this._decryptdata=this.levelkeys[h[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,b.isFiniteNumber)(this.programDateTime))return null;var x=(0,b.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+x*1e3}},{key:"encrypted",get:function(){var x;if((x=this._decryptdata)!==null&&x!==void 0&&x.encrypted)return!0;if(this.levelkeys){var L=Object.keys(this.levelkeys),h=L.length;if(h>1||h===1&&this.levelkeys[L[0]].encrypted)return!0}return!1}}]),l}(a),T=function(c){O(l,c);function l(d,f,x,L,h){var m;m=c.call(this,x)||this,m.fragOffset=0,m.duration=0,m.gap=!1,m.independent=!1,m.relurl=void 0,m.fragment=void 0,m.index=void 0,m.stats=new N.LoadStats,m.duration=d.decimalFloatingPoint("DURATION"),m.gap=d.bool("GAP"),m.independent=d.bool("INDEPENDENT"),m.relurl=d.enumeratedString("URI"),m.fragment=f,m.index=L;var I=d.enumeratedString("BYTERANGE");return I&&m.setByteRange(I,h),h&&(m.fragOffset=h.fragOffset+h.duration),m}return S(l,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var f=this.elementaryStreams;return!!(f.audio||f.video||f.audiovideo)}}]),l}(a)},"./src/loader/key-loader.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>N});var b=o("./src/errors.ts"),A=o("./src/loader/fragment-loader.ts"),N=function(){function O(M){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=M}var U=O.prototype;return U.abort=function(){for(var S in this.keyUriToKeyInfo){var w=this.keyUriToKeyInfo[S].loader;w&&w.abort()}},U.detach=function(){for(var S in this.keyUriToKeyInfo){var w=this.keyUriToKeyInfo[S];(w.mediaKeySessionContext||w.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[S]}},U.destroy=function(){this.detach();for(var S in this.keyUriToKeyInfo){var w=this.keyUriToKeyInfo[S].loader;w&&w.destroy()}this.keyUriToKeyInfo={}},U.createKeyLoadError=function(S,w,p,v){return w===void 0&&(w=b.ErrorDetails.KEY_LOAD_ERROR),new A.LoadError({type:b.ErrorTypes.NETWORK_ERROR,details:w,fatal:!1,frag:S,networkDetails:p})},U.loadClear=function(S,w){var p=this;if(this.emeController&&this.config.emeEnabled)for(var v=S.sn,a=S.cc,D=function(d){var f=w[d];if(a<=f.cc&&(v==="initSegment"||v<f.sn))return p.emeController.selectKeySystemFormat(f).then(function(x){f.setKeyFormat(x)}),"break"},T=0;T<w.length;T++){var c=D(T);if(c==="break")break}},U.load=function(S){var w=this;return!S.decryptdata&&S.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(S).then(function(p){return w.loadInternal(S,p)}):this.loadInternal(S)},U.loadInternal=function(S,w){var p,v;w&&S.setKeyFormat(w);var a=S.decryptdata;if(!a){var D=w?"Expected frag.decryptdata to be defined after setting format "+w:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(S,b.ErrorDetails.KEY_LOAD_ERROR,null,D))}var T=a.uri;if(!T)return Promise.reject(this.createKeyLoadError(S,b.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+T+'"'));var c=this.keyUriToKeyInfo[T];if((p=c)!==null&&p!==void 0&&p.decryptdata.key)return a.key=c.decryptdata.key,Promise.resolve({frag:S,keyInfo:c});if((v=c)!==null&&v!==void 0&&v.keyLoadPromise){var l;switch((l=c.mediaKeySessionContext)===null||l===void 0?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return c.keyLoadPromise.then(function(d){return a.key=d.keyInfo.decryptdata.key,{frag:S,keyInfo:c}})}}switch(c=this.keyUriToKeyInfo[T]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(c,S):this.loadKeyEME(c,S);case"AES-128":return this.loadKeyHTTP(c,S);default:return Promise.reject(this.createKeyLoadError(S,b.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+a.method+'"'))}},U.loadKeyEME=function(S,w){var p={frag:w,keyInfo:S};if(this.emeController&&this.config.emeEnabled){var v=this.emeController.loadKey(p);if(v)return(S.keyLoadPromise=v.then(function(a){return S.mediaKeySessionContext=a,p})).catch(function(a){throw S.keyLoadPromise=null,a})}return Promise.resolve(p)},U.loadKeyHTTP=function(S,w){var p=this,v=this.config,a=v.loader,D=new a(v);return w.keyLoader=S.loader=D,S.keyLoadPromise=new Promise(function(T,c){var l={keyInfo:S,frag:w,responseType:"arraybuffer",url:S.decryptdata.uri},d={timeout:v.fragLoadingTimeOut,maxRetry:0,retryDelay:v.fragLoadingRetryDelay,maxRetryDelay:v.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:function(L,h,m,I){var g=m.frag,E=m.keyInfo,u=m.url;if(!g.decryptdata||E!==p.keyUriToKeyInfo[u])return c(p.createKeyLoadError(g,b.ErrorDetails.KEY_LOAD_ERROR,I,"after key load, decryptdata unset or changed"));E.decryptdata.key=g.decryptdata.key=new Uint8Array(L.data),g.keyLoader=null,E.loader=null,T({frag:g,keyInfo:E})},onError:function(L,h,m){p.resetLoader(h),c(p.createKeyLoadError(w,b.ErrorDetails.KEY_LOAD_ERROR,m))},onTimeout:function(L,h,m){p.resetLoader(h),c(p.createKeyLoadError(w,b.ErrorDetails.KEY_LOAD_TIMEOUT,m))},onAbort:function(L,h,m){p.resetLoader(h),c(p.createKeyLoadError(w,b.ErrorDetails.INTERNAL_ABORTED,m))}};D.load(l,d,f)})},U.resetLoader=function(S){var w=S.frag,p=S.keyInfo,v=S.url,a=p.loader;w.keyLoader===a&&(w.keyLoader=null,p.loader=null),delete this.keyUriToKeyInfo[v],a&&a.destroy()},O}()},"./src/loader/level-details.ts":(k,R,o)=>{o.r(R),o.d(R,{LevelDetails:()=>S});var b=o("./src/polyfills/number.ts");function A(w,p){for(var v=0;v<p.length;v++){var a=p[v];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(w,O(a.key),a)}}function N(w,p,v){return p&&A(w.prototype,p),v&&A(w,v),Object.defineProperty(w,"prototype",{writable:!1}),w}function O(w){var p=U(w,"string");return typeof p=="symbol"?p:String(p)}function U(w,p){if(typeof w!="object"||w===null)return w;var v=w[Symbol.toPrimitive];if(v!==void 0){var a=v.call(w,p||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(w)}var M=10,S=function(){function w(v){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=v}var p=w.prototype;return p.reloaded=function(a){if(!a){this.advanced=!0,this.updated=!0;return}var D=this.lastPartSn-a.lastPartSn,T=this.lastPartIndex-a.lastPartIndex;this.updated=this.endSN!==a.endSN||!!T||!!D,this.advanced=this.endSN>a.endSN||D>0||D===0&&T>0,this.updated||this.advanced?this.misses=Math.floor(a.misses*.6):this.misses=a.misses+1,this.availabilityDelay=a.availabilityDelay},N(w,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?(0,b.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||M}},{key:"drift",get:function(){var a=this.driftEndTime-this.driftStartTime;if(a>0){var D=this.driftEnd-this.driftStart;return D*1e3/a}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var a;return(a=this.partList)!==null&&a!==void 0&&a.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var a;return(a=this.fragments)!==null&&a!==void 0&&a.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var a;return(a=this.partList)!==null&&a!==void 0&&a.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var a;return(a=this.partList)!==null&&a!==void 0&&a.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),w}()},"./src/loader/level-key.ts":(k,R,o)=>{o.r(R),o.d(R,{LevelKey:()=>S});var b=o("./src/utils/keysystem-util.ts"),A=o("./src/utils/mediakeys-helper.ts"),N=o("./src/utils/mp4-tools.ts"),O=o("./src/utils/logger.ts"),U=o("./src/utils/numeric-encoding-utils.ts"),M={},S=function(){p.clearKeyUriToKeyIdMap=function(){M={}};function p(a,D,T,c,l){c===void 0&&(c=[1]),l===void 0&&(l=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=a,this.uri=D,this.keyFormat=T,this.keyFormatVersions=c,this.iv=l,this.encrypted=a?a!=="NONE":!1,this.isCommonEncryption=this.encrypted&&a!=="AES-128"}var v=p.prototype;return v.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;switch(this.keyFormat){case"identity":return this.method==="SAMPLE-AES";case A.KeySystemFormats.FAIRPLAY:case A.KeySystemFormats.WIDEVINE:case A.KeySystemFormats.PLAYREADY:case A.KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},v.getDecryptData=function(D){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof D!="number"&&(this.method==="AES-128"&&!this.iv&&O.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),D=0);var T=w(D),c=new p(this.method,this.uri,"identity",this.keyFormatVersions,T);return c}var l=(0,b.convertDataUriToArrayBytes)(this.uri);if(l)switch(this.keyFormat){case A.KeySystemFormats.WIDEVINE:this.pssh=l,l.length>=22&&(this.keyId=l.subarray(l.length-22,l.length-6));break;case A.KeySystemFormats.PLAYREADY:{var d=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,N.mp4pssh)(d,null,l);var f=new Uint16Array(l.buffer,l.byteOffset,l.byteLength/2),x=String.fromCharCode.apply(null,Array.from(f)),L=x.substring(x.indexOf("<"),x.length),h=new DOMParser,m=h.parseFromString(L,"text/xml"),I=m.getElementsByTagName("KID")[0];if(I){var g=I.childNodes[0]?I.childNodes[0].nodeValue:I.getAttribute("VALUE");if(g){var E=(0,U.base64Decode)(g).subarray(0,16);(0,b.changeEndianness)(E),this.keyId=E}}break}default:{var u=l.subarray(0,16);if(u.length!==16){var y=new Uint8Array(16);y.set(u,16-u.length),u=y}this.keyId=u;break}}if(!this.keyId||this.keyId.byteLength!==16){var s=M[this.uri];if(!s){var _=Object.keys(M).length%Number.MAX_SAFE_INTEGER;s=new Uint8Array(16);var F=new DataView(s.buffer,12,4);F.setUint32(0,_),M[this.uri]=s}this.keyId=s}return this},p}();function w(p){for(var v=new Uint8Array(16),a=12;a<16;a++)v[a]=p>>8*(15-a)&255;return v}},"./src/loader/load-stats.ts":(k,R,o)=>{o.r(R),o.d(R,{LoadStats:()=>b});var b=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>l});var b=o("./src/polyfills/number.ts"),A=o("./node_modules/url-toolkit/src/url-toolkit.js"),N=o("./src/loader/date-range.ts"),O=o("./src/loader/fragment.ts"),U=o("./src/loader/level-details.ts"),M=o("./src/loader/level-key.ts"),S=o("./src/utils/attr-list.ts"),w=o("./src/utils/logger.ts"),p=o("./src/utils/codecs.ts");function v(){return v=Object.assign?Object.assign.bind():function(g){for(var E=1;E<arguments.length;E++){var u=arguments[E];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(g[y]=u[y])}return g},v.apply(this,arguments)}var a=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,D=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),c=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),l=function(){function g(){}return g.findGroup=function(u,y){for(var s=0;s<u.length;s++){var _=u[s];if(_.id===y)return _}},g.convertAVC1ToAVCOTI=function(u){var y=u.split(".");if(y.length>2){var s=y.shift()+".";return s+=parseInt(y.shift()).toString(16),s+=("000"+parseInt(y.shift()).toString(16)).slice(-4),s}return u},g.resolve=function(u,y){return(0,A.buildAbsoluteURL)(y,u,{alwaysNormalize:!0})},g.parseMasterPlaylist=function(u,y){var s=[],_=[],F={},P=[],B=!1;a.lastIndex=0;for(var K;(K=a.exec(u))!=null;)if(K[1]){var j,W=new S.AttrList(K[1]),H={attrs:W,bitrate:W.decimalInteger("AVERAGE-BANDWIDTH")||W.decimalInteger("BANDWIDTH"),name:W.NAME,url:g.resolve(K[2],y)},G=W.decimalResolution("RESOLUTION");G&&(H.width=G.width,H.height=G.height),f((W.CODECS||"").split(/[ ,]+/).filter(function(Q){return Q}),H),H.videoCodec&&H.videoCodec.indexOf("avc1")!==-1&&(H.videoCodec=g.convertAVC1ToAVCOTI(H.videoCodec)),(j=H.unknownCodecs)!==null&&j!==void 0&&j.length||_.push(H),s.push(H)}else if(K[3]){var $=new S.AttrList(K[3]);$["DATA-ID"]&&(B=!0,F[$["DATA-ID"]]=$)}else if(K[4]){var V=K[4],z=d(V,y);z.encrypted&&z.isSupported()?P.push(z):w.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+V+'"')}var Y=_.length>0&&_.length<s.length;return{levels:Y?_:s,sessionData:B?F:null,sessionKeys:P.length?P:null}},g.parseMasterPlaylistMedia=function(u,y,s,_){_===void 0&&(_=[]);var F,P=[],B=0;for(D.lastIndex=0;(F=D.exec(u))!==null;){var K=new S.AttrList(F[1]);if(K.TYPE===s){var j={attrs:K,bitrate:0,id:B++,groupId:K["GROUP-ID"],instreamId:K["INSTREAM-ID"],name:K.NAME||K.LANGUAGE||"",type:s,default:K.bool("DEFAULT"),autoselect:K.bool("AUTOSELECT"),forced:K.bool("FORCED"),lang:K.LANGUAGE,url:K.URI?g.resolve(K.URI,y):""};if(_.length){var W=g.findGroup(_,j.groupId)||_[0];x(j,W,"audioCodec"),x(j,W,"textCodec")}P.push(j)}}return P},g.parseLevelPlaylist=function(u,y,s,_,F){var P=new U.LevelDetails(y),B=P.fragments,K=null,j=0,W=0,H=0,G=0,$=null,V=new O.Fragment(_,y),z,Y,Q,q=-1,Z=!1;for(T.lastIndex=0,P.m3u8=u;(z=T.exec(u))!==null;){Z&&(Z=!1,V=new O.Fragment(_,y),V.start=H,V.sn=j,V.cc=G,V.level=s,K&&(V.initSegment=K,V.rawProgramDateTime=K.rawProgramDateTime,K.rawProgramDateTime=null));var J=z[1];if(J){V.duration=parseFloat(J);var ie=(" "+z[2]).slice(1);V.title=ie||null,V.tagList.push(ie?["INF",J,ie]:["INF",J])}else if(z[3])(0,b.isFiniteNumber)(V.duration)&&(V.start=H,Q&&I(V,Q,P),V.sn=j,V.level=s,V.cc=G,V.urlId=F,B.push(V),V.relurl=(" "+z[3]).slice(1),h(V,$),$=V,H+=V.duration,j++,W=0,Z=!0);else if(z[4]){var le=(" "+z[4]).slice(1);$?V.setByteRange(le,$):V.setByteRange(le)}else if(z[5])V.rawProgramDateTime=(" "+z[5]).slice(1),V.tagList.push(["PROGRAM-DATE-TIME",V.rawProgramDateTime]),q===-1&&(q=B.length);else{if(z=z[0].match(c),!z){w.logger.warn("No matches on slow regex match for level playlist!");continue}for(Y=1;Y<z.length&&!(typeof z[Y]<"u");Y++);var oe=(" "+z[Y]).slice(1),re=(" "+z[Y+1]).slice(1),ne=z[Y+2]?(" "+z[Y+2]).slice(1):"";switch(oe){case"PLAYLIST-TYPE":P.type=re.toUpperCase();break;case"MEDIA-SEQUENCE":j=P.startSN=parseInt(re);break;case"SKIP":{var pe=new S.AttrList(re),ye=pe.decimalInteger("SKIPPED-SEGMENTS");if((0,b.isFiniteNumber)(ye)){P.skippedSegments=ye;for(var be=ye;be--;)B.unshift(null);j+=ye}var Ae=pe.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ae&&(P.recentlyRemovedDateranges=Ae.split("	"));break}case"TARGETDURATION":P.targetduration=parseFloat(re);break;case"VERSION":P.version=parseInt(re);break;case"EXTM3U":break;case"ENDLIST":P.live=!1;break;case"#":(re||ne)&&V.tagList.push(ne?[re,ne]:[re]);break;case"DISCONTINUITY":G++,V.tagList.push(["DIS"]);break;case"GAP":V.tagList.push([oe]);break;case"BITRATE":V.tagList.push([oe,re]);break;case"DATERANGE":{var ke=new S.AttrList(re),Pe=new N.DateRange(ke,P.dateRanges[ke.ID]);Pe.isValid||P.skippedSegments?P.dateRanges[Pe.id]=Pe:w.logger.warn('Ignoring invalid DATERANGE tag: "'+re+'"'),V.tagList.push(["EXT-X-DATERANGE",re]);break}case"DISCONTINUITY-SEQUENCE":G=parseInt(re);break;case"KEY":{var ee=d(re,y);if(ee.isSupported()){if(ee.method==="NONE"){Q=void 0;break}Q||(Q={}),Q[ee.keyFormat]&&(Q=v({},Q)),Q[ee.keyFormat]=ee}else w.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+re+'"');break}case"START":{var te=new S.AttrList(re),se=te.decimalFloatingPoint("TIME-OFFSET");(0,b.isFiniteNumber)(se)&&(P.startTimeOffset=se);break}case"MAP":{var fe=new S.AttrList(re);if(V.duration){var ce=new O.Fragment(_,y);m(ce,fe,s,Q),K=ce,V.initSegment=K,K.rawProgramDateTime&&!V.rawProgramDateTime&&(V.rawProgramDateTime=K.rawProgramDateTime)}else m(V,fe,s,Q),K=V,Z=!0;break}case"SERVER-CONTROL":{var de=new S.AttrList(re);P.canBlockReload=de.bool("CAN-BLOCK-RELOAD"),P.canSkipUntil=de.optionalFloat("CAN-SKIP-UNTIL",0),P.canSkipDateRanges=P.canSkipUntil>0&&de.bool("CAN-SKIP-DATERANGES"),P.partHoldBack=de.optionalFloat("PART-HOLD-BACK",0),P.holdBack=de.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var ge=new S.AttrList(re);P.partTarget=ge.decimalFloatingPoint("PART-TARGET");break}case"PART":{var me=P.partList;me||(me=P.partList=[]);var he=W>0?me[me.length-1]:void 0,Ie=W++,Ee=new O.Part(new S.AttrList(re),V,y,Ie,he);me.push(Ee),V.duration+=Ee.duration;break}case"PRELOAD-HINT":{var Oe=new S.AttrList(re);P.preloadHint=Oe;break}case"RENDITION-REPORT":{var _e=new S.AttrList(re);P.renditionReports=P.renditionReports||[],P.renditionReports.push(_e);break}default:w.logger.warn("line parsed but not handled: "+z);break}}}$&&!$.relurl?(B.pop(),H-=$.duration,P.partList&&(P.fragmentHint=$)):P.partList&&(h(V,$),V.cc=G,P.fragmentHint=V,Q&&I(V,Q,P));var Me=B.length,Ke=B[0],rt=B[Me-1];if(H+=P.skippedSegments*P.targetduration,H>0&&Me&&rt){P.averagetargetduration=H/Me;var Ne=rt.sn;P.endSN=Ne!=="initSegment"?Ne:0,P.live||(rt.endList=!0),Ke&&(P.startCC=Ke.cc)}else P.endSN=0,P.startCC=0;return P.fragmentHint&&(H+=P.fragmentHint.duration),P.totalduration=H,P.endCC=G,q>0&&L(B,q),P},g}();function d(g,E){var u,y,s=new S.AttrList(g),_=(u=s.enumeratedString("METHOD"))!=null?u:"",F=s.URI,P=s.hexadecimalInteger("IV"),B=s.enumeratedString("KEYFORMATVERSIONS"),K=(y=s.enumeratedString("KEYFORMAT"))!=null?y:"identity";F&&s.IV&&!P&&w.logger.error("Invalid IV: "+s.IV);var j=F?l.resolve(F,E):"",W=(B||"1").split("/").map(Number).filter(Number.isFinite);return new M.LevelKey(_,j,K,W,P)}function f(g,E){["video","audio","text"].forEach(function(u){var y=g.filter(function(_){return(0,p.isCodecType)(_,u)});if(y.length){var s=y.filter(function(_){return _.lastIndexOf("avc1",0)===0||_.lastIndexOf("mp4a",0)===0});E[u+"Codec"]=s.length>0?s[0]:y[0],g=g.filter(function(_){return y.indexOf(_)===-1})}}),E.unknownCodecs=g}function x(g,E,u){var y=E[u];y&&(g[u]=y)}function L(g,E){for(var u=g[E],y=E;y--;){var s=g[y];if(!s)return;s.programDateTime=u.programDateTime-s.duration*1e3,u=s}}function h(g,E){g.rawProgramDateTime?g.programDateTime=Date.parse(g.rawProgramDateTime):E!=null&&E.programDateTime&&(g.programDateTime=E.endProgramDateTime),(0,b.isFiniteNumber)(g.programDateTime)||(g.programDateTime=null,g.rawProgramDateTime=null)}function m(g,E,u,y){g.relurl=E.URI,E.BYTERANGE&&g.setByteRange(E.BYTERANGE),g.level=u,g.sn="initSegment",y&&(g.levelkeys=y),g.initSegment=null}function I(g,E,u){g.levelkeys=E;var y=u.encryptedFragments;(!y.length||y[y.length-1].levelkeys!==E)&&Object.keys(E).some(function(s){return E[s].isCommonEncryption})&&y.push(g)}},"./src/loader/playlist-loader.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>a});var b=o("./src/polyfills/number.ts"),A=o("./src/events.ts"),N=o("./src/errors.ts"),O=o("./src/utils/logger.ts"),U=o("./src/loader/m3u8-parser.ts"),M=o("./src/types/loader.ts"),S=o("./src/utils/attr-list.ts");function w(D){var T=D.type;switch(T){case M.PlaylistContextType.AUDIO_TRACK:return M.PlaylistLevelType.AUDIO;case M.PlaylistContextType.SUBTITLE_TRACK:return M.PlaylistLevelType.SUBTITLE;default:return M.PlaylistLevelType.MAIN}}function p(D,T){var c=D.url;return(c===void 0||c.indexOf("data:")===0)&&(c=T.url),c}var v=function(){function D(c){this.hls=void 0,this.loaders=Object.create(null),this.hls=c,this.registerListeners()}var T=D.prototype;return T.startLoad=function(l){},T.stopLoad=function(){this.destroyInternalLoaders()},T.registerListeners=function(){var l=this.hls;l.on(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),l.on(A.Events.LEVEL_LOADING,this.onLevelLoading,this),l.on(A.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),l.on(A.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},T.unregisterListeners=function(){var l=this.hls;l.off(A.Events.MANIFEST_LOADING,this.onManifestLoading,this),l.off(A.Events.LEVEL_LOADING,this.onLevelLoading,this),l.off(A.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),l.off(A.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},T.createInternalLoader=function(l){var d=this.hls.config,f=d.pLoader,x=d.loader,L=f||x,h=new L(d);return l.loader=h,this.loaders[l.type]=h,h},T.getInternalLoader=function(l){return this.loaders[l.type]},T.resetInternalLoader=function(l){this.loaders[l]&&delete this.loaders[l]},T.destroyInternalLoaders=function(){for(var l in this.loaders){var d=this.loaders[l];d&&d.destroy(),this.resetInternalLoader(l)}},T.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},T.onManifestLoading=function(l,d){var f=d.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:M.PlaylistContextType.MANIFEST,url:f,deliveryDirectives:null})},T.onLevelLoading=function(l,d){var f=d.id,x=d.level,L=d.url,h=d.deliveryDirectives;this.load({id:f,groupId:null,level:x,responseType:"text",type:M.PlaylistContextType.LEVEL,url:L,deliveryDirectives:h})},T.onAudioTrackLoading=function(l,d){var f=d.id,x=d.groupId,L=d.url,h=d.deliveryDirectives;this.load({id:f,groupId:x,level:null,responseType:"text",type:M.PlaylistContextType.AUDIO_TRACK,url:L,deliveryDirectives:h})},T.onSubtitleTrackLoading=function(l,d){var f=d.id,x=d.groupId,L=d.url,h=d.deliveryDirectives;this.load({id:f,groupId:x,level:null,responseType:"text",type:M.PlaylistContextType.SUBTITLE_TRACK,url:L,deliveryDirectives:h})},T.load=function(l){var d,f=this.hls.config,x=this.getInternalLoader(l);if(x){var L=x.context;if(L&&L.url===l.url){O.logger.trace("[playlist-loader]: playlist request ongoing");return}O.logger.log("[playlist-loader]: aborting previous loader for type: "+l.type),x.abort()}var h,m,I,g;switch(l.type){case M.PlaylistContextType.MANIFEST:h=f.manifestLoadingMaxRetry,m=f.manifestLoadingTimeOut,I=f.manifestLoadingRetryDelay,g=f.manifestLoadingMaxRetryTimeout;break;case M.PlaylistContextType.LEVEL:case M.PlaylistContextType.AUDIO_TRACK:case M.PlaylistContextType.SUBTITLE_TRACK:h=0,m=f.levelLoadingTimeOut;break;default:h=f.levelLoadingMaxRetry,m=f.levelLoadingTimeOut,I=f.levelLoadingRetryDelay,g=f.levelLoadingMaxRetryTimeout;break}if(x=this.createInternalLoader(l),(d=l.deliveryDirectives)!==null&&d!==void 0&&d.part){var E;if(l.type===M.PlaylistContextType.LEVEL&&l.level!==null?E=this.hls.levels[l.level].details:l.type===M.PlaylistContextType.AUDIO_TRACK&&l.id!==null?E=this.hls.audioTracks[l.id].details:l.type===M.PlaylistContextType.SUBTITLE_TRACK&&l.id!==null&&(E=this.hls.subtitleTracks[l.id].details),E){var u=E.partTarget,y=E.targetduration;u&&y&&(m=Math.min(Math.max(u*3,y*.8)*1e3,m))}}var s={timeout:m,maxRetry:h,retryDelay:I,maxRetryDelay:g,highWaterMark:0},_={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};x.load(l,s,_)},T.loadsuccess=function(l,d,f,x){x===void 0&&(x=null),this.resetInternalLoader(f.type);var L=l.data;if(L.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(l,f,"no EXTM3U delimiter",x);return}d.parsing.start=performance.now(),L.indexOf("#EXTINF:")>0||L.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(l,d,f,x):this.handleMasterPlaylist(l,d,f,x)},T.loaderror=function(l,d,f){f===void 0&&(f=null),this.handleNetworkError(d,f,!1,l)},T.loadtimeout=function(l,d,f){f===void 0&&(f=null),this.handleNetworkError(d,f,!0)},T.handleMasterPlaylist=function(l,d,f,x){var L=this.hls,h=l.data,m=p(l,f),I=U.default.parseMasterPlaylist(h,m),g=I.levels,E=I.sessionData,u=I.sessionKeys;if(!g.length){this.handleManifestParsingError(l,f,"no level found in manifest",x);return}var y=g.map(function(K){return{id:K.attrs.AUDIO,audioCodec:K.audioCodec}}),s=g.map(function(K){return{id:K.attrs.SUBTITLES,textCodec:K.textCodec}}),_=U.default.parseMasterPlaylistMedia(h,m,"AUDIO",y),F=U.default.parseMasterPlaylistMedia(h,m,"SUBTITLES",s),P=U.default.parseMasterPlaylistMedia(h,m,"CLOSED-CAPTIONS");if(_.length){var B=_.some(function(K){return!K.url});!B&&g[0].audioCodec&&!g[0].attrs.AUDIO&&(O.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),_.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new S.AttrList({}),bitrate:0,url:""}))}L.trigger(A.Events.MANIFEST_LOADED,{levels:g,audioTracks:_,subtitles:F,captions:P,url:m,stats:d,networkDetails:x,sessionData:E,sessionKeys:u})},T.handleTrackOrLevelPlaylist=function(l,d,f,x){var L=this.hls,h=f.id,m=f.level,I=f.type,g=p(l,f),E=(0,b.isFiniteNumber)(h)?h:0,u=(0,b.isFiniteNumber)(m)?m:E,y=w(f),s=U.default.parseLevelPlaylist(l.data,g,u,y,E);if(!s.fragments.length){L.trigger(A.Events.ERROR,{type:N.ErrorTypes.NETWORK_ERROR,details:N.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:"no fragments found in level",level:typeof f.level=="number"?f.level:void 0});return}if(I===M.PlaylistContextType.MANIFEST){var _={attrs:new S.AttrList({}),bitrate:0,details:s,name:"",url:g};L.trigger(A.Events.MANIFEST_LOADED,{levels:[_],audioTracks:[],url:g,stats:d,networkDetails:x,sessionData:null,sessionKeys:null})}d.parsing.end=performance.now(),f.levelDetails=s,this.handlePlaylistLoaded(l,d,f,x)},T.handleManifestParsingError=function(l,d,f,x){this.hls.trigger(A.Events.ERROR,{type:N.ErrorTypes.NETWORK_ERROR,details:N.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:d.type===M.PlaylistContextType.MANIFEST,url:l.url,reason:f,response:l,context:d,networkDetails:x})},T.handleNetworkError=function(l,d,f,x){f===void 0&&(f=!1),O.logger.warn("[playlist-loader]: A network "+(f?"timeout":"error")+" occurred while loading "+l.type+" level: "+l.level+" id: "+l.id+' group-id: "'+l.groupId+'"');var L=N.ErrorDetails.UNKNOWN,h=!1,m=this.getInternalLoader(l);switch(l.type){case M.PlaylistContextType.MANIFEST:L=f?N.ErrorDetails.MANIFEST_LOAD_TIMEOUT:N.ErrorDetails.MANIFEST_LOAD_ERROR,h=!0;break;case M.PlaylistContextType.LEVEL:L=f?N.ErrorDetails.LEVEL_LOAD_TIMEOUT:N.ErrorDetails.LEVEL_LOAD_ERROR,h=!1;break;case M.PlaylistContextType.AUDIO_TRACK:L=f?N.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:N.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,h=!1;break;case M.PlaylistContextType.SUBTITLE_TRACK:L=f?N.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:N.ErrorDetails.SUBTITLE_LOAD_ERROR,h=!1;break}m&&this.resetInternalLoader(l.type);var I={type:N.ErrorTypes.NETWORK_ERROR,details:L,fatal:h,url:l.url,loader:m,context:l,networkDetails:d};x&&(I.response=x),this.hls.trigger(A.Events.ERROR,I)},T.handlePlaylistLoaded=function(l,d,f,x){var L=f.type,h=f.level,m=f.id,I=f.groupId,g=f.loader,E=f.levelDetails,u=f.deliveryDirectives;if(!(E!=null&&E.targetduration)){this.handleManifestParsingError(l,f,"invalid target duration",x);return}if(g)switch(E.live&&(g.getCacheAge&&(E.ageHeader=g.getCacheAge()||0),(!g.getCacheAge||isNaN(E.ageHeader))&&(E.ageHeader=0)),L){case M.PlaylistContextType.MANIFEST:case M.PlaylistContextType.LEVEL:this.hls.trigger(A.Events.LEVEL_LOADED,{details:E,level:h||0,id:m||0,stats:d,networkDetails:x,deliveryDirectives:u});break;case M.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(A.Events.AUDIO_TRACK_LOADED,{details:E,id:m||0,groupId:I||"",stats:d,networkDetails:x,deliveryDirectives:u});break;case M.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(A.Events.SUBTITLE_TRACK_LOADED,{details:E,id:m||0,groupId:I||"",stats:d,networkDetails:x,deliveryDirectives:u});break}},D}();const a=v},"./src/polyfills/number.ts":(k,R,o)=>{o.r(R),o.d(R,{MAX_SAFE_INTEGER:()=>A,isFiniteNumber:()=>b});var b=Number.isFinite||function(N){return typeof N=="number"&&isFinite(N)},A=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>A});var b=function(){function N(){}return N.getSilentFrame=function(U,M){switch(U){case"mp4a.40.2":if(M===1)return new Uint8Array([0,200,0,128,35,128]);if(M===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(M===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(M===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(M===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(M===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(M===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(M===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(M===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},N}();const A=b},"./src/remux/mp4-generator.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>N});var b=Math.pow(2,32)-1,A=function(){function O(){}return O.init=function(){O.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var M;for(M in O.types)O.types.hasOwnProperty(M)&&(O.types[M]=[M.charCodeAt(0),M.charCodeAt(1),M.charCodeAt(2),M.charCodeAt(3)]);var S=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),w=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);O.HDLR_TYPES={video:S,audio:w};var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),v=new Uint8Array([0,0,0,0,0,0,0,0]);O.STTS=O.STSC=O.STCO=v,O.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),O.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),O.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),D=new Uint8Array([97,118,99,49]),T=new Uint8Array([0,0,0,1]);O.FTYP=O.box(O.types.ftyp,a,T,a,D),O.DINF=O.box(O.types.dinf,O.box(O.types.dref,p))},O.box=function(M){for(var S=8,w=arguments.length,p=new Array(w>1?w-1:0),v=1;v<w;v++)p[v-1]=arguments[v];for(var a=p.length,D=a;a--;)S+=p[a].byteLength;var T=new Uint8Array(S);for(T[0]=S>>24&255,T[1]=S>>16&255,T[2]=S>>8&255,T[3]=S&255,T.set(M,4),a=0,S=8;a<D;a++)T.set(p[a],S),S+=p[a].byteLength;return T},O.hdlr=function(M){return O.box(O.types.hdlr,O.HDLR_TYPES[M])},O.mdat=function(M){return O.box(O.types.mdat,M)},O.mdhd=function(M,S){S*=M;var w=Math.floor(S/(b+1)),p=Math.floor(S%(b+1));return O.box(O.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,M>>24&255,M>>16&255,M>>8&255,M&255,w>>24,w>>16&255,w>>8&255,w&255,p>>24,p>>16&255,p>>8&255,p&255,85,196,0,0]))},O.mdia=function(M){return O.box(O.types.mdia,O.mdhd(M.timescale,M.duration),O.hdlr(M.type),O.minf(M))},O.mfhd=function(M){return O.box(O.types.mfhd,new Uint8Array([0,0,0,0,M>>24,M>>16&255,M>>8&255,M&255]))},O.minf=function(M){return M.type==="audio"?O.box(O.types.minf,O.box(O.types.smhd,O.SMHD),O.DINF,O.stbl(M)):O.box(O.types.minf,O.box(O.types.vmhd,O.VMHD),O.DINF,O.stbl(M))},O.moof=function(M,S,w){return O.box(O.types.moof,O.mfhd(M),O.traf(w,S))},O.moov=function(M){for(var S=M.length,w=[];S--;)w[S]=O.trak(M[S]);return O.box.apply(null,[O.types.moov,O.mvhd(M[0].timescale,M[0].duration)].concat(w).concat(O.mvex(M)))},O.mvex=function(M){for(var S=M.length,w=[];S--;)w[S]=O.trex(M[S]);return O.box.apply(null,[O.types.mvex].concat(w))},O.mvhd=function(M,S){S*=M;var w=Math.floor(S/(b+1)),p=Math.floor(S%(b+1)),v=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,M>>24&255,M>>16&255,M>>8&255,M&255,w>>24,w>>16&255,w>>8&255,w&255,p>>24,p>>16&255,p>>8&255,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return O.box(O.types.mvhd,v)},O.sdtp=function(M){var S=M.samples||[],w=new Uint8Array(4+S.length),p,v;for(p=0;p<S.length;p++)v=S[p].flags,w[p+4]=v.dependsOn<<4|v.isDependedOn<<2|v.hasRedundancy;return O.box(O.types.sdtp,w)},O.stbl=function(M){return O.box(O.types.stbl,O.stsd(M),O.box(O.types.stts,O.STTS),O.box(O.types.stsc,O.STSC),O.box(O.types.stsz,O.STSZ),O.box(O.types.stco,O.STCO))},O.avc1=function(M){var S=[],w=[],p,v,a;for(p=0;p<M.sps.length;p++)v=M.sps[p],a=v.byteLength,S.push(a>>>8&255),S.push(a&255),S=S.concat(Array.prototype.slice.call(v));for(p=0;p<M.pps.length;p++)v=M.pps[p],a=v.byteLength,w.push(a>>>8&255),w.push(a&255),w=w.concat(Array.prototype.slice.call(v));var D=O.box(O.types.avcC,new Uint8Array([1,S[3],S[4],S[5],255,224|M.sps.length].concat(S).concat([M.pps.length]).concat(w))),T=M.width,c=M.height,l=M.pixelRatio[0],d=M.pixelRatio[1];return O.box(O.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,T>>8&255,T&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),D,O.box(O.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),O.box(O.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,l&255,d>>24,d>>16&255,d>>8&255,d&255])))},O.esds=function(M){var S=M.config.length;return new Uint8Array([0,0,0,0,3,23+S,0,1,0,4,15+S,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([S]).concat(M.config).concat([6,1,2]))},O.mp4a=function(M){var S=M.samplerate;return O.box(O.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,M.channelCount,0,16,0,0,0,0,S>>8&255,S&255,0,0]),O.box(O.types.esds,O.esds(M)))},O.mp3=function(M){var S=M.samplerate;return O.box(O.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,M.channelCount,0,16,0,0,0,0,S>>8&255,S&255,0,0]))},O.stsd=function(M){return M.type==="audio"?M.segmentCodec==="mp3"&&M.codec==="mp3"?O.box(O.types.stsd,O.STSD,O.mp3(M)):O.box(O.types.stsd,O.STSD,O.mp4a(M)):O.box(O.types.stsd,O.STSD,O.avc1(M))},O.tkhd=function(M){var S=M.id,w=M.duration*M.timescale,p=M.width,v=M.height,a=Math.floor(w/(b+1)),D=Math.floor(w%(b+1));return O.box(O.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,S>>24&255,S>>16&255,S>>8&255,S&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,D>>24,D>>16&255,D>>8&255,D&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>8&255,p&255,0,0,v>>8&255,v&255,0,0]))},O.traf=function(M,S){var w=O.sdtp(M),p=M.id,v=Math.floor(S/(b+1)),a=Math.floor(S%(b+1));return O.box(O.types.traf,O.box(O.types.tfhd,new Uint8Array([0,0,0,0,p>>24,p>>16&255,p>>8&255,p&255])),O.box(O.types.tfdt,new Uint8Array([1,0,0,0,v>>24,v>>16&255,v>>8&255,v&255,a>>24,a>>16&255,a>>8&255,a&255])),O.trun(M,w.length+16+20+8+16+8+8),w)},O.trak=function(M){return M.duration=M.duration||4294967295,O.box(O.types.trak,O.tkhd(M),O.mdia(M))},O.trex=function(M){var S=M.id;return O.box(O.types.trex,new Uint8Array([0,0,0,0,S>>24,S>>16&255,S>>8&255,S&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},O.trun=function(M,S){var w=M.samples||[],p=w.length,v=12+16*p,a=new Uint8Array(v),D,T,c,l,d,f;for(S+=8+v,a.set([M.type==="video"?1:0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,p&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255],0),D=0;D<p;D++)T=w[D],c=T.duration,l=T.size,d=T.flags,f=T.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,l>>>24&255,l>>>16&255,l>>>8&255,l&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&240<<8,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*D);return O.box(O.types.trun,a)},O.initSegment=function(M){O.types||O.init();var S=O.moov(M),w=new Uint8Array(O.FTYP.byteLength+S.byteLength);return w.set(O.FTYP),w.set(S,O.FTYP.byteLength),w},O}();A.types=void 0,A.HDLR_TYPES=void 0,A.STTS=void 0,A.STSC=void 0,A.STCO=void 0,A.STSZ=void 0,A.VMHD=void 0,A.SMHD=void 0,A.STSD=void 0,A.FTYP=void 0,A.DINF=void 0;const N=A},"./src/remux/mp4-remuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>l,flushTextTrackMetadataCueSamples:()=>x,flushTextTrackUserdataCueSamples:()=>L,normalizePts:()=>d});var b=o("./src/polyfills/number.ts"),A=o("./src/remux/aac-helper.ts"),N=o("./src/remux/mp4-generator.ts"),O=o("./src/events.ts"),U=o("./src/errors.ts"),M=o("./src/utils/logger.ts"),S=o("./src/types/loader.ts"),w=o("./src/utils/timescale-conversion.ts");function p(){return p=Object.assign?Object.assign.bind():function(I){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var u in E)Object.prototype.hasOwnProperty.call(E,u)&&(I[u]=E[u])}return I},p.apply(this,arguments)}var v=10*1e3,a=1024,D=1152,T=null,c=null,l=function(){function I(E,u,y,s){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=E,this.config=u,this.typeSupported=y,this.ISGenerated=!1,T===null){var _=navigator.userAgent||"",F=_.match(/Chrome\/(\d+)/i);T=F?parseInt(F[1]):0}if(c===null){var P=navigator.userAgent.match(/Safari\/(\d+)/i);c=P?parseInt(P[1]):0}}var g=I.prototype;return g.destroy=function(){},g.resetTimeStamp=function(u){M.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=u},g.resetNextTimestamp=function(){M.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},g.resetInitSegment=function(){M.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},g.getVideoStartPts=function(u){var y=!1,s=u.reduce(function(_,F){var P=F.pts-_;return P<-4294967296?(y=!0,d(_,F.pts)):P>0?_:F.pts},u[0].pts);return y&&M.logger.debug("PTS rollover detected"),s},g.remux=function(u,y,s,_,F,P,B,K){var j,W,H,G,$,V,z=F,Y=F,Q=u.pid>-1,q=y.pid>-1,Z=y.samples.length,J=u.samples.length>0,ie=B&&Z>0||Z>1,le=(!Q||J)&&(!q||ie)||this.ISGenerated||B;if(le){this.ISGenerated||(H=this.generateIS(u,y,F));var oe=this.isVideoContiguous,re=-1,ne;if(ie&&(re=f(y.samples),!oe&&this.config.forceKeyFrameOnDiscontinuity))if(V=!0,re>0){M.logger.warn("[mp4-remuxer]: Dropped "+re+" out of "+Z+" video samples due to a missing keyframe");var pe=this.getVideoStartPts(y.samples);y.samples=y.samples.slice(re),y.dropped+=re,Y+=(y.samples[0].pts-pe)/y.inputTimeScale,ne=Y}else re===-1&&(M.logger.warn("[mp4-remuxer]: No keyframe found out of "+Z+" video samples"),V=!1);if(this.ISGenerated){if(J&&ie){var ye=this.getVideoStartPts(y.samples),be=d(u.samples[0].pts,ye)-ye,Ae=be/y.inputTimeScale;z+=Math.max(0,Ae),Y+=Math.max(0,-Ae)}if(J){if(u.samplerate||(M.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),H=this.generateIS(u,y,F)),W=this.remuxAudio(u,z,this.isAudioContiguous,P,q||ie||K===S.PlaylistLevelType.AUDIO?Y:void 0),ie){var ke=W?W.endPTS-W.startPTS:0;y.inputTimeScale||(M.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),H=this.generateIS(u,y,F)),j=this.remuxVideo(y,Y,oe,ke)}}else ie&&(j=this.remuxVideo(y,Y,oe,0));j&&(j.firstKeyFrame=re,j.independent=re!==-1,j.firstKeyFramePTS=ne)}}return this.ISGenerated&&(s.samples.length&&($=x(s,F,this._initPTS,this._initDTS)),_.samples.length&&(G=L(_,F,this._initPTS))),{audio:W,video:j,initSegment:H,independent:V,text:G,id3:$}},g.generateIS=function(u,y,s){var _=u.samples,F=y.samples,P=this.typeSupported,B={},K=!(0,b.isFiniteNumber)(this._initPTS),j="audio/mp4",W,H,G;if(K&&(W=H=1/0),u.config&&_.length){switch(u.timescale=u.samplerate,u.segmentCodec){case"mp3":P.mpeg?(j="audio/mpeg",u.codec=""):P.mp3&&(u.codec="mp3");break}B.audio={id:"audio",container:j,codec:u.codec,initSegment:u.segmentCodec==="mp3"&&P.mpeg?new Uint8Array(0):N.default.initSegment([u]),metadata:{channelCount:u.channelCount}},K&&(G=u.inputTimeScale,W=H=_[0].pts-Math.round(G*s))}if(y.sps&&y.pps&&F.length&&(y.timescale=y.inputTimeScale,B.video={id:"main",container:"video/mp4",codec:y.codec,initSegment:N.default.initSegment([y]),metadata:{width:y.width,height:y.height}},K)){G=y.inputTimeScale;var $=this.getVideoStartPts(F),V=Math.round(G*s);H=Math.min(H,d(F[0].dts,$)-V),W=Math.min(W,$-V)}if(Object.keys(B).length)return this.ISGenerated=!0,K&&(this._initPTS=W,this._initDTS=H),{tracks:B,initPTS:W,timescale:G}},g.remuxVideo=function(u,y,s,_){var F=u.inputTimeScale,P=u.samples,B=[],K=P.length,j=this._initPTS,W=this.nextAvcDts,H=8,G=this.videoSampleDuration,$,V,z=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,Q=!1;if(!s||W===null){var q=y*F,Z=P[0].pts-d(P[0].dts,P[0].pts);W=q-Z}for(var J=0;J<K;J++){var ie=P[J];ie.pts=d(ie.pts-j,W),ie.dts=d(ie.dts-j,W),ie.dts<P[J>0?J-1:J].dts&&(Q=!0)}Q&&P.sort(function(As,Tu){var Yh=As.dts-Tu.dts,Xh=As.pts-Tu.pts;return Yh||Xh}),$=P[0].dts,V=P[P.length-1].dts;var le=V-$,oe=le?Math.round(le/(K-1)):G||u.inputTimeScale/30;if(s){var re=$-W,ne=re>oe,pe=re<-1;if((ne||pe)&&(ne?M.logger.warn("AVC: "+(0,w.toMsFromMpegTsClock)(re,!0)+" ms ("+re+"dts) hole between fragments detected, filling it"):M.logger.warn("AVC: "+(0,w.toMsFromMpegTsClock)(-re,!0)+" ms ("+re+"dts) overlapping between fragments detected"),!pe||W>P[0].pts)){$=W;var ye=P[0].pts-re;P[0].dts=$,P[0].pts=ye,M.logger.log("Video: First PTS/DTS adjusted: "+(0,w.toMsFromMpegTsClock)(ye,!0)+"/"+(0,w.toMsFromMpegTsClock)($,!0)+", delta: "+(0,w.toMsFromMpegTsClock)(re,!0)+" ms")}}$=Math.max(0,$);for(var be=0,Ae=0,ke=0;ke<K;ke++){for(var Pe=P[ke],ee=Pe.units,te=ee.length,se=0,fe=0;fe<te;fe++)se+=ee[fe].data.length;Ae+=se,be+=te,Pe.length=se,Pe.dts=Math.max(Pe.dts,$),z=Math.min(Pe.pts,z),Y=Math.max(Pe.pts,Y)}V=P[K-1].dts;var ce=Ae+4*be+8,de;try{de=new Uint8Array(ce)}catch{this.observer.emit(O.Events.ERROR,O.Events.ERROR,{type:U.ErrorTypes.MUX_ERROR,details:U.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ce,reason:"fail allocating video mdat "+ce});return}var ge=new DataView(de.buffer);ge.setUint32(0,ce),de.set(N.default.types.mdat,4);for(var me=!1,he=Number.POSITIVE_INFINITY,Ie=Number.POSITIVE_INFINITY,Ee=Number.NEGATIVE_INFINITY,Oe=Number.NEGATIVE_INFINITY,_e=0;_e<K;_e++){for(var Me=P[_e],Ke=Me.units,rt=0,Ne=0,ct=Ke.length;Ne<ct;Ne++){var qe=Ke[Ne],yr=qe.data,je=qe.data.byteLength;ge.setUint32(H,je),H+=4,de.set(yr,H),H+=je,rt+=4+je}var nt=void 0;if(_e<K-1)G=P[_e+1].dts-Me.dts,nt=P[_e+1].pts-Me.pts;else{var Gt=this.config,er=_e>0?Me.dts-P[_e-1].dts:oe;if(nt=_e>0?Me.pts-P[_e-1].pts:oe,Gt.stretchShortVideoTrack&&this.nextAudioPts!==null){var zn=Math.floor(Gt.maxBufferHole*F),$n=(_?z+_*F:this.nextAudioPts)-Me.pts;$n>zn?(G=$n-er,G<0?G=er:me=!0,M.logger.log("[mp4-remuxer]: It is approximately "+$n/90+" ms to the next segment; using duration "+G/90+" ms for the last video frame.")):G=er}else G=er}var Ps=Math.round(Me.pts-Me.dts);he=Math.min(he,G),Ee=Math.max(Ee,G),Ie=Math.min(Ie,nt),Oe=Math.max(Oe,nt),B.push(new h(Me.key,G,rt,Ps))}if(B.length){if(T){if(T<70){var Rt=B[0].flags;Rt.dependsOn=2,Rt.isNonSync=0}}else if(c&&Oe-Ie<Ee-he&&oe/Ee<.025&&B[0].cts===0){M.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Hr=$,pt=0,Zi=B.length;pt<Zi;pt++){var Eu=Hr+B[pt].duration,Hh=Hr+B[pt].cts;if(pt<Zi-1){var Gh=Eu+B[pt+1].cts;B[pt].duration=Gh-Hh}else B[pt].duration=pt?B[pt-1].duration:oe;B[pt].cts=0,Hr=Eu}}}console.assert(G!==null,"mp4SampleDuration must be computed"),G=me||!G?oe:G,this.nextAvcDts=W=V+G,this.videoSampleDuration=G,this.isVideoContiguous=!0;var Vh=N.default.moof(u.sequenceNumber++,$,p({},u,{samples:B})),zh="video",$h={data1:Vh,data2:de,startPTS:z/F,endPTS:(Y+G)/F,startDTS:$/F,endDTS:W/F,type:zh,hasAudio:!1,hasVideo:!0,nb:B.length,dropped:u.dropped};return u.samples=[],u.dropped=0,console.assert(de.length,"MDAT length must not be zero"),$h},g.remuxAudio=function(u,y,s,_,F){var P=u.inputTimeScale,B=u.samplerate?u.samplerate:P,K=P/B,j=u.segmentCodec==="aac"?a:D,W=j*K,H=this._initPTS,G=u.segmentCodec==="mp3"&&this.typeSupported.mpeg,$=[],V=F!==void 0,z=u.samples,Y=G?0:8,Q=this.nextAudioPts||-1,q=y*P;if(this.isAudioContiguous=s=s||z.length&&Q>0&&(_&&Math.abs(q-Q)<9e3||Math.abs(d(z[0].pts-H,q)-Q)<20*W),z.forEach(function(qe){qe.pts=d(qe.pts-H,q)}),!s||Q<0){if(z=z.filter(function(qe){return qe.pts>=0}),!z.length)return;F===0?Q=0:_&&!V?Q=Math.max(0,q):Q=z[0].pts}if(u.segmentCodec==="aac")for(var Z=this.config.maxAudioFramesDrift,J=0,ie=Q;J<z.length;J++){var le=z[J],oe=le.pts,re=oe-ie,ne=Math.abs(1e3*re/P);if(re<=-Z*W&&V)J===0&&(M.logger.warn("Audio frame @ "+(oe/P).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*re/P)+" ms."),this.nextAudioPts=Q=ie=oe);else if(re>=Z*W&&ne<v&&V){var pe=Math.round(re/W);ie=oe-pe*W,ie<0&&(pe--,ie+=W),J===0&&(this.nextAudioPts=Q=ie),M.logger.warn("[mp4-remuxer]: Injecting "+pe+" audio frame @ "+(ie/P).toFixed(3)+"s due to "+Math.round(1e3*re/P)+" ms gap.");for(var ye=0;ye<pe;ye++){var be=Math.max(ie,0),Ae=A.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);Ae||(M.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Ae=le.unit.subarray()),z.splice(J,0,{unit:Ae,pts:be}),ie+=W,J++}}le.pts=ie,ie+=W}for(var ke=null,Pe=null,ee,te=0,se=z.length;se--;)te+=z[se].unit.byteLength;for(var fe=0,ce=z.length;fe<ce;fe++){var de=z[fe],ge=de.unit,me=de.pts;if(Pe!==null){var he=$[fe-1];he.duration=Math.round((me-Pe)/K)}else if(s&&u.segmentCodec==="aac"&&(me=Q),ke=me,te>0){te+=Y;try{ee=new Uint8Array(te)}catch{this.observer.emit(O.Events.ERROR,O.Events.ERROR,{type:U.ErrorTypes.MUX_ERROR,details:U.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:te,reason:"fail allocating audio mdat "+te});return}if(!G){var Ie=new DataView(ee.buffer);Ie.setUint32(0,te),ee.set(N.default.types.mdat,4)}}else return;ee.set(ge,Y);var Ee=ge.byteLength;Y+=Ee,$.push(new h(!0,j,Ee,0)),Pe=me}var Oe=$.length;if(Oe){var _e=$[$.length-1];this.nextAudioPts=Q=Pe+K*_e.duration;var Me=G?new Uint8Array(0):N.default.moof(u.sequenceNumber++,ke/K,p({},u,{samples:$}));u.samples=[];var Ke=ke/P,rt=Q/P,Ne="audio",ct={data1:Me,data2:ee,startPTS:Ke,endPTS:rt,startDTS:Ke,endDTS:rt,type:Ne,hasAudio:!0,hasVideo:!1,nb:Oe};return this.isAudioContiguous=!0,console.assert(ee.length,"MDAT length must not be zero"),ct}},g.remuxEmptyAudio=function(u,y,s,_){var F=u.inputTimeScale,P=u.samplerate?u.samplerate:F,B=F/P,K=this.nextAudioPts,j=(K!==null?K:_.startDTS*F)+this._initDTS,W=_.endDTS*F+this._initDTS,H=B*a,G=Math.ceil((W-j)/H),$=A.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);if(M.logger.warn("[mp4-remuxer]: remux empty Audio"),!$){M.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var V=[],z=0;z<G;z++){var Y=j+z*H;V.push({unit:$,pts:Y,dts:Y})}return u.samples=V,this.remuxAudio(u,y,s,!1)},I}();function d(I,g){var E;if(g===null)return I;for(g<I?E=-8589934592:E=8589934592;Math.abs(I-g)>4294967296;)I+=E;return I}function f(I){for(var g=0;g<I.length;g++)if(I[g].key)return g;return-1}function x(I,g,E,u){var y=I.samples.length;if(y){for(var s=I.inputTimeScale,_=0;_<y;_++){var F=I.samples[_];F.pts=d(F.pts-E,g*s)/s,F.dts=d(F.dts-u,g*s)/s}var P=I.samples;return I.samples=[],{samples:P}}}function L(I,g,E){var u=I.samples.length;if(u){for(var y=I.inputTimeScale,s=0;s<u;s++){var _=I.samples[s];_.pts=d(_.pts-E,g*y)/y}I.samples.sort(function(P,B){return P.pts-B.pts});var F=I.samples;return I.samples=[],{samples:F}}}var h=function(g,E,u,y){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=E,this.size=u,this.cts=y,this.flags=new m(g)},m=function(g){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=g?2:1,this.isNonSync=g?0:1}},"./src/remux/passthrough-remuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>w});var b=o("./src/polyfills/number.ts"),A=o("./src/remux/mp4-remuxer.ts"),N=o("./src/utils/mp4-tools.ts"),O=o("./src/loader/fragment.ts"),U=o("./src/utils/logger.ts"),M=function(){function p(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var v=p.prototype;return v.destroy=function(){},v.resetTimeStamp=function(D){this.initPTS=D,this.lastEndTime=null},v.resetNextTimestamp=function(){this.lastEndTime=null},v.resetInitSegment=function(D,T,c,l){this.audioCodec=T,this.videoCodec=c,this.generateInitSegment((0,N.patchEncyptionData)(D,l)),this.emitInitSegment=!0},v.generateInitSegment=function(D){var T=this.audioCodec,c=this.videoCodec;if(!D||!D.byteLength){this.initTracks=void 0,this.initData=void 0;return}var l=this.initData=(0,N.parseInitSegment)(D);T||(T=S(l.audio,O.ElementaryStreamTypes.AUDIO)),c||(c=S(l.video,O.ElementaryStreamTypes.VIDEO));var d={};l.audio&&l.video?d.audiovideo={container:"video/mp4",codec:T+","+c,initSegment:D,id:"main"}:l.audio?d.audio={container:"audio/mp4",codec:T,initSegment:D,id:"audio"}:l.video?d.video={container:"video/mp4",codec:c,initSegment:D,id:"main"}:U.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=d},v.remux=function(D,T,c,l,d){var f,x=this.initPTS,L=this.lastEndTime,h={audio:void 0,video:void 0,text:l,id3:c,initSegment:void 0};(0,b.isFiniteNumber)(L)||(L=this.lastEndTime=d||0);var m=T.samples;if(!m||!m.length)return h;var I={initPTS:void 0,timescale:1},g=this.initData;if((!g||!g.length)&&(this.generateInitSegment(m),g=this.initData),!g||!g.length)return U.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(I.tracks=this.initTracks,this.emitInitSegment=!1);var E=(0,N.getStartDTS)(g,m);(0,b.isFiniteNumber)(x)||(this.initPTS=I.initPTS=x=E-d);var u=(0,N.getDuration)(m,g),y=D?E-x:L,s=y+u;(0,N.offsetStartDTS)(g,m,x),u>0?this.lastEndTime=s:(U.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var _=!!g.audio,F=!!g.video,P="";_&&(P+="audio"),F&&(P+="video");var B={data1:m,startPTS:y,startDTS:y,endPTS:s,endDTS:s,type:P,hasAudio:_,hasVideo:F,nb:1,dropped:0};h.audio=B.type==="audio"?B:void 0,h.video=B.type!=="audio"?B:void 0,h.initSegment=I;var K=(f=this.initPTS)!=null?f:0;return h.id3=(0,A.flushTextTrackMetadataCueSamples)(c,d,K,K),l.samples.length&&(h.text=(0,A.flushTextTrackUserdataCueSamples)(l,d,K)),h},p}();function S(p,v){var a=p==null?void 0:p.codec;return a&&a.length>4?a:a==="hvc1"||a==="hev1"?"hvc1.1.c.L120.90":a==="av01"?"av01.0.04M.08":a==="avc1"||v===O.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const w=M},"./src/task-loop.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>b});var b=function(){function A(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var N=A.prototype;return N.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},N.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},N.onHandlerDestroyed=function(){},N.hasInterval=function(){return!!this._tickInterval},N.hasNextTick=function(){return!!this._tickTimer},N.setInterval=function(U){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,U),!0)},N.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},N.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},N.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},N.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},N.doTick=function(){},A}()},"./src/types/cmcd.ts":(k,R,o)=>{o.r(R),o.d(R,{CMCDObjectType:()=>A,CMCDStreamType:()=>O,CMCDStreamingFormat:()=>N,CMCDVersion:()=>b});var b=1,A;(function(U){U.MANIFEST="m",U.AUDIO="a",U.VIDEO="v",U.MUXED="av",U.INIT="i",U.CAPTION="c",U.TIMED_TEXT="tt",U.KEY="k",U.OTHER="o"})(A||(A={}));var N;(function(U){U.DASH="d",U.HLS="h",U.SMOOTH="s",U.OTHER="o"})(N||(N={}));var O;(function(U){U.VOD="v",U.LIVE="l"})(O||(O={}))},"./src/types/demuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{MetadataSchema:()=>b});var b;(function(A){A.audioId3="org.id3",A.dateRange="com.apple.quicktime.HLS",A.emsg="https://aomedia.org/emsg/ID3"})(b||(b={}))},"./src/types/level.ts":(k,R,o)=>{o.r(R),o.d(R,{HdcpLevels:()=>U,HlsSkip:()=>M,HlsUrlParameters:()=>w,Level:()=>p,getSkipValue:()=>S});function b(v,a){for(var D=0;D<a.length;D++){var T=a[D];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,N(T.key),T)}}function A(v,a,D){return a&&b(v.prototype,a),D&&b(v,D),Object.defineProperty(v,"prototype",{writable:!1}),v}function N(v){var a=O(v,"string");return typeof a=="symbol"?a:String(a)}function O(v,a){if(typeof v!="object"||v===null)return v;var D=v[Symbol.toPrimitive];if(D!==void 0){var T=D.call(v,a||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(v)}var U=["NONE","TYPE-0","TYPE-1","TYPE-2",null],M;(function(v){v.No="",v.Yes="YES",v.v2="v2"})(M||(M={}));function S(v,a){var D=v.canSkipUntil,T=v.canSkipDateRanges,c=v.endSN,l=a!==void 0?a-c:0;return D&&l<D?T?M.v2:M.Yes:M.No}var w=function(){function v(D,T,c){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=D,this.part=T,this.skip=c}var a=v.prototype;return a.addDirectives=function(T){var c=new self.URL(T);return this.msn!==void 0&&c.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&c.searchParams.set("_HLS_part",this.part.toString()),this.skip&&c.searchParams.set("_HLS_skip",this.skip),c.href},v}(),p=function(){function v(a){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[a.url],this.attrs=a.attrs,this.bitrate=a.bitrate,a.details&&(this.details=a.details),this.id=a.id||0,this.name=a.name,this.width=a.width||0,this.height=a.height||0,this.audioCodec=a.audioCodec,this.videoCodec=a.videoCodec,this.unknownCodecs=a.unknownCodecs,this.codecSet=[a.videoCodec,a.audioCodec].filter(function(D){return D}).join(",").replace(/\.[^.,]+/g,"")}return A(v,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(D){var T=D%this.url.length;this._urlId!==T&&(this.details=void 0,this._urlId=T)}}]),v}()},"./src/types/loader.ts":(k,R,o)=>{o.r(R),o.d(R,{PlaylistContextType:()=>b,PlaylistLevelType:()=>A});var b;(function(N){N.MANIFEST="manifest",N.LEVEL="level",N.AUDIO_TRACK="audioTrack",N.SUBTITLE_TRACK="subtitleTrack"})(b||(b={}));var A;(function(N){N.MAIN="main",N.AUDIO="audio",N.SUBTITLE="subtitle"})(A||(A={}))},"./src/types/transmuxer.ts":(k,R,o)=>{o.r(R),o.d(R,{ChunkMetadata:()=>b});var b=function(O,U,M,S,w,p){S===void 0&&(S=0),w===void 0&&(w=-1),p===void 0&&(p=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=A(),this.buffering={audio:A(),video:A(),audiovideo:A()},this.level=O,this.sn=U,this.id=M,this.size=S,this.part=w,this.partial=p};function A(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":(k,R,o)=>{o.r(R),o.d(R,{AttrList:()=>N});var b=/^(\d+)x(\d+)$/,A=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,N=function(){function O(M){typeof M=="string"&&(M=O.parseAttrList(M));for(var S in M)M.hasOwnProperty(S)&&(this[S]=M[S])}var U=O.prototype;return U.decimalInteger=function(S){var w=parseInt(this[S],10);return w>Number.MAX_SAFE_INTEGER?1/0:w},U.hexadecimalInteger=function(S){if(this[S]){var w=(this[S]||"0x").slice(2);w=(w.length&1?"0":"")+w;for(var p=new Uint8Array(w.length/2),v=0;v<w.length/2;v++)p[v]=parseInt(w.slice(v*2,v*2+2),16);return p}else return null},U.hexadecimalIntegerAsNumber=function(S){var w=parseInt(this[S],16);return w>Number.MAX_SAFE_INTEGER?1/0:w},U.decimalFloatingPoint=function(S){return parseFloat(this[S])},U.optionalFloat=function(S,w){var p=this[S];return p?parseFloat(p):w},U.enumeratedString=function(S){return this[S]},U.bool=function(S){return this[S]==="YES"},U.decimalResolution=function(S){var w=b.exec(this[S]);if(w!==null)return{width:parseInt(w[1],10),height:parseInt(w[2],10)}},O.parseAttrList=function(S){var w,p={},v='"';for(A.lastIndex=0;(w=A.exec(S))!==null;){var a=w[2];a.indexOf(v)===0&&a.lastIndexOf(v)===a.length-1&&(a=a.slice(1,-1)),p[w[1]]=a}return p},O}()},"./src/utils/binary-search.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>A});var b={search:function(O,U){for(var M=0,S=O.length-1,w=null,p=null;M<=S;){w=(M+S)/2|0,p=O[w];var v=U(p);if(v>0)M=w+1;else if(v<0)S=w-1;else return p}return null}};const A=b},"./src/utils/buffer-helper.ts":(k,R,o)=>{o.r(R),o.d(R,{BufferHelper:()=>N});var b=o("./src/utils/logger.ts"),A={length:0,start:function(){return 0},end:function(){return 0}},N=function(){function O(){}return O.isBuffered=function(M,S){try{if(M){for(var w=O.getBuffered(M),p=0;p<w.length;p++)if(S>=w.start(p)&&S<=w.end(p))return!0}}catch{}return!1},O.bufferInfo=function(M,S,w){try{if(M){var p=O.getBuffered(M),v=[],a;for(a=0;a<p.length;a++)v.push({start:p.start(a),end:p.end(a)});return this.bufferedInfo(v,S,w)}}catch{}return{len:0,start:S,end:S,nextStart:void 0}},O.bufferedInfo=function(M,S,w){S=Math.max(0,S),M.sort(function(h,m){var I=h.start-m.start;return I||m.end-h.end});var p=[];if(w)for(var v=0;v<M.length;v++){var a=p.length;if(a){var D=p[a-1].end;M[v].start-D<w?M[v].end>D&&(p[a-1].end=M[v].end):p.push(M[v])}else p.push(M[v])}else p=M;for(var T=0,c,l=S,d=S,f=0;f<p.length;f++){var x=p[f].start,L=p[f].end;if(S+w>=x&&S<L)l=x,d=L,T=d-S;else if(S+w<x){c=x;break}}return{len:T,start:l||0,end:d||0,nextStart:c}},O.getBuffered=function(M){try{return M.buffered}catch(S){return b.logger.log("failed to get media.buffered",S),A}},O}()},"./src/utils/cea-608-parser.ts":(k,R,o)=>{o.r(R),o.d(R,{CaptionScreen:()=>f,Row:()=>d,default:()=>g});var b=o("./src/utils/logger.ts"),A={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},N=function(u){var y=u;return A.hasOwnProperty(u)&&(y=A[u]),String.fromCharCode(y)},O=15,U=100,M={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},S={17:2,18:4,21:6,22:8,23:10,19:13,20:15},w={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},p={25:2,26:4,29:6,30:8,31:10,27:13,28:15},v=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],a;(function(E){E[E.ERROR=0]="ERROR",E[E.TEXT=1]="TEXT",E[E.WARNING=2]="WARNING",E[E.INFO=2]="INFO",E[E.DEBUG=3]="DEBUG",E[E.DATA=3]="DATA"})(a||(a={}));var D=function(){function E(){this.time=null,this.verboseLevel=a.ERROR}var u=E.prototype;return u.log=function(s,_){if(this.verboseLevel>=s){var F=typeof _=="function"?_():_;b.logger.log(this.time+" ["+s+"] "+F)}},E}(),T=function(u){for(var y=[],s=0;s<u.length;s++)y.push(u[s].toString(16));return y},c=function(){function E(y,s,_,F,P){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=y||"white",this.underline=s||!1,this.italics=_||!1,this.background=F||"black",this.flash=P||!1}var u=E.prototype;return u.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},u.setStyles=function(s){for(var _=["foreground","underline","italics","background","flash"],F=0;F<_.length;F++){var P=_[F];s.hasOwnProperty(P)&&(this[P]=s[P])}},u.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},u.equals=function(s){return this.foreground===s.foreground&&this.underline===s.underline&&this.italics===s.italics&&this.background===s.background&&this.flash===s.flash},u.copy=function(s){this.foreground=s.foreground,this.underline=s.underline,this.italics=s.italics,this.background=s.background,this.flash=s.flash},u.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},E}(),l=function(){function E(y,s,_,F,P,B){this.uchar=void 0,this.penState=void 0,this.uchar=y||" ",this.penState=new c(s,_,F,P,B)}var u=E.prototype;return u.reset=function(){this.uchar=" ",this.penState.reset()},u.setChar=function(s,_){this.uchar=s,this.penState.copy(_)},u.setPenState=function(s){this.penState.copy(s)},u.equals=function(s){return this.uchar===s.uchar&&this.penState.equals(s.penState)},u.copy=function(s){this.uchar=s.uchar,this.penState.copy(s.penState)},u.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},E}(),d=function(){function E(y){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var s=0;s<U;s++)this.chars.push(new l);this.logger=y,this.pos=0,this.currPenState=new c}var u=E.prototype;return u.equals=function(s){for(var _=!0,F=0;F<U;F++)if(!this.chars[F].equals(s.chars[F])){_=!1;break}return _},u.copy=function(s){for(var _=0;_<U;_++)this.chars[_].copy(s.chars[_])},u.isEmpty=function(){for(var s=!0,_=0;_<U;_++)if(!this.chars[_].isEmpty()){s=!1;break}return s},u.setCursor=function(s){this.pos!==s&&(this.pos=s),this.pos<0?(this.logger.log(a.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>U&&(this.logger.log(a.DEBUG,"Too large cursor position "+this.pos),this.pos=U)},u.moveCursor=function(s){var _=this.pos+s;if(s>1)for(var F=this.pos+1;F<_+1;F++)this.chars[F].setPenState(this.currPenState);this.setCursor(_)},u.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},u.insertChar=function(s){var _=this;s>=144&&this.backSpace();var F=N(s);if(this.pos>=U){this.logger.log(a.ERROR,function(){return"Cannot insert "+s.toString(16)+" ("+F+") at position "+_.pos+". Skipping it!"});return}this.chars[this.pos].setChar(F,this.currPenState),this.moveCursor(1)},u.clearFromPos=function(s){var _;for(_=s;_<U;_++)this.chars[_].reset()},u.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},u.clearToEndOfRow=function(){this.clearFromPos(this.pos)},u.getTextString=function(){for(var s=[],_=!0,F=0;F<U;F++){var P=this.chars[F].uchar;P!==" "&&(_=!1),s.push(P)}return _?"":s.join("")},u.setPenStyles=function(s){this.currPenState.setStyles(s);var _=this.chars[this.pos];_.setPenState(this.currPenState)},E}(),f=function(){function E(y){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var s=0;s<O;s++)this.rows.push(new d(y));this.logger=y,this.currRow=O-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var u=E.prototype;return u.reset=function(){for(var s=0;s<O;s++)this.rows[s].clear();this.currRow=O-1},u.equals=function(s){for(var _=!0,F=0;F<O;F++)if(!this.rows[F].equals(s.rows[F])){_=!1;break}return _},u.copy=function(s){for(var _=0;_<O;_++)this.rows[_].copy(s.rows[_])},u.isEmpty=function(){for(var s=!0,_=0;_<O;_++)if(!this.rows[_].isEmpty()){s=!1;break}return s},u.backSpace=function(){var s=this.rows[this.currRow];s.backSpace()},u.clearToEndOfRow=function(){var s=this.rows[this.currRow];s.clearToEndOfRow()},u.insertChar=function(s){var _=this.rows[this.currRow];_.insertChar(s)},u.setPen=function(s){var _=this.rows[this.currRow];_.setPenStyles(s)},u.moveCursor=function(s){var _=this.rows[this.currRow];_.moveCursor(s)},u.setCursor=function(s){this.logger.log(a.INFO,"setCursor: "+s);var _=this.rows[this.currRow];_.setCursor(s)},u.setPAC=function(s){this.logger.log(a.INFO,function(){return"pacData = "+JSON.stringify(s)});var _=s.row-1;if(this.nrRollUpRows&&_<this.nrRollUpRows-1&&(_=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==_){for(var F=0;F<O;F++)this.rows[F].clear();var P=this.currRow+1-this.nrRollUpRows,B=this.lastOutputScreen;if(B){var K=B.rows[P].cueStartTime,j=this.logger.time;if(K&&j!==null&&K<j)for(var W=0;W<this.nrRollUpRows;W++)this.rows[_-this.nrRollUpRows+W+1].copy(B.rows[P+W])}}this.currRow=_;var H=this.rows[this.currRow];if(s.indent!==null){var G=s.indent,$=Math.max(G-1,0);H.setCursor(s.indent),s.color=H.chars[$].penState.foreground}var V={foreground:s.color,underline:s.underline,italics:s.italics,background:"black",flash:!1};this.setPen(V)},u.setBkgData=function(s){this.logger.log(a.INFO,function(){return"bkgData = "+JSON.stringify(s)}),this.backSpace(),this.setPen(s),this.insertChar(32)},u.setRollUpRows=function(s){this.nrRollUpRows=s},u.rollUp=function(){var s=this;if(this.nrRollUpRows===null){this.logger.log(a.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(a.TEXT,function(){return s.getDisplayText()});var _=this.currRow+1-this.nrRollUpRows,F=this.rows.splice(_,1)[0];F.clear(),this.rows.splice(this.currRow,0,F),this.logger.log(a.INFO,"Rolling up")},u.getDisplayText=function(s){s=s||!1;for(var _=[],F="",P=-1,B=0;B<O;B++){var K=this.rows[B].getTextString();K&&(P=B+1,s?_.push("Row "+P+": '"+K+"'"):_.push(K.trim()))}return _.length>0&&(s?F="["+_.join(" | ")+"]":F=_.join(`
`)),F},u.getTextAndFormat=function(){return this.rows},E}(),x=function(){function E(y,s,_){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=y,this.outputFilter=s,this.mode=null,this.verbose=0,this.displayedMemory=new f(_),this.nonDisplayedMemory=new f(_),this.lastOutputScreen=new f(_),this.currRollUpRow=this.displayedMemory.rows[O-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=_}var u=E.prototype;return u.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[O-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},u.getHandler=function(){return this.outputFilter},u.setHandler=function(s){this.outputFilter=s},u.setPAC=function(s){this.writeScreen.setPAC(s)},u.setBkgData=function(s){this.writeScreen.setBkgData(s)},u.setMode=function(s){s!==this.mode&&(this.mode=s,this.logger.log(a.INFO,function(){return"MODE="+s}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=s)},u.insertChars=function(s){for(var _=this,F=0;F<s.length;F++)this.writeScreen.insertChar(s[F]);var P=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(a.INFO,function(){return P+": "+_.writeScreen.getDisplayText(!0)}),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(a.TEXT,function(){return"DISPLAYED: "+_.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},u.ccRCL=function(){this.logger.log(a.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},u.ccBS=function(){this.logger.log(a.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},u.ccAOF=function(){},u.ccAON=function(){},u.ccDER=function(){this.logger.log(a.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},u.ccRU=function(s){this.logger.log(a.INFO,"RU("+s+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(s)},u.ccFON=function(){this.logger.log(a.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},u.ccRDC=function(){this.logger.log(a.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},u.ccTR=function(){this.logger.log(a.INFO,"TR"),this.setMode("MODE_TEXT")},u.ccRTD=function(){this.logger.log(a.INFO,"RTD"),this.setMode("MODE_TEXT")},u.ccEDM=function(){this.logger.log(a.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},u.ccCR=function(){this.logger.log(a.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},u.ccENM=function(){this.logger.log(a.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},u.ccEOC=function(){var s=this;if(this.logger.log(a.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var _=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=_,this.writeScreen=this.nonDisplayedMemory,this.logger.log(a.TEXT,function(){return"DISP: "+s.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},u.ccTO=function(s){this.logger.log(a.INFO,"TO("+s+") - Tab Offset"),this.writeScreen.moveCursor(s)},u.ccMIDROW=function(s){var _={flash:!1};if(_.underline=s%2===1,_.italics=s>=46,_.italics)_.foreground="white";else{var F=Math.floor(s/2)-16,P=["white","green","blue","cyan","red","yellow","magenta"];_.foreground=P[F]}this.logger.log(a.INFO,"MIDROW: "+JSON.stringify(_)),this.writeScreen.setPen(_)},u.outputDataUpdate=function(s){s===void 0&&(s=!1);var _=this.logger.time;_!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=_:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,_,this.lastOutputScreen),s&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:_),this.lastOutputScreen.copy(this.displayedMemory))},u.cueSplitAtTime=function(s){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,s,this.displayedMemory),this.cueStartTime=s))},E}(),L=function(){function E(y,s,_){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var F=new D;this.channels=[null,new x(y,s,F),new x(y+1,_,F)],this.cmdHistory=I(),this.logger=F}var u=E.prototype;return u.getHandler=function(s){return this.channels[s].getHandler()},u.setHandler=function(s,_){this.channels[s].setHandler(_)},u.addData=function(s,_){var F,P,B,K=!1;this.logger.time=s;for(var j=0;j<_.length;j+=2)if(P=_[j]&127,B=_[j+1]&127,!(P===0&&B===0)){if(this.logger.log(a.DATA,"["+T([_[j],_[j+1]])+"] -> ("+T([P,B])+")"),F=this.parseCmd(P,B),F||(F=this.parseMidrow(P,B)),F||(F=this.parsePAC(P,B)),F||(F=this.parseBackgroundAttributes(P,B)),!F&&(K=this.parseChars(P,B),K)){var W=this.currentChannel;if(W&&W>0){var H=this.channels[W];H.insertChars(K)}else this.logger.log(a.WARNING,"No channel found yet. TEXT-MODE?")}!F&&!K&&this.logger.log(a.WARNING,"Couldn't parse cleaned data "+T([P,B])+" orig: "+T([_[j],_[j+1]]))}},u.parseCmd=function(s,_){var F=this.cmdHistory,P=(s===20||s===28||s===21||s===29)&&_>=32&&_<=47,B=(s===23||s===31)&&_>=33&&_<=35;if(!(P||B))return!1;if(m(s,_,F))return h(null,null,F),this.logger.log(a.DEBUG,"Repeated command ("+T([s,_])+") is dropped"),!0;var K=s===20||s===21||s===23?1:2,j=this.channels[K];return s===20||s===21||s===28||s===29?_===32?j.ccRCL():_===33?j.ccBS():_===34?j.ccAOF():_===35?j.ccAON():_===36?j.ccDER():_===37?j.ccRU(2):_===38?j.ccRU(3):_===39?j.ccRU(4):_===40?j.ccFON():_===41?j.ccRDC():_===42?j.ccTR():_===43?j.ccRTD():_===44?j.ccEDM():_===45?j.ccCR():_===46?j.ccENM():_===47&&j.ccEOC():j.ccTO(_-32),h(s,_,F),this.currentChannel=K,!0},u.parseMidrow=function(s,_){var F=0;if((s===17||s===25)&&_>=32&&_<=47){if(s===17?F=1:F=2,F!==this.currentChannel)return this.logger.log(a.ERROR,"Mismatch channel in midrow parsing"),!1;var P=this.channels[F];return P?(P.ccMIDROW(_),this.logger.log(a.DEBUG,"MIDROW ("+T([s,_])+")"),!0):!1}return!1},u.parsePAC=function(s,_){var F,P=this.cmdHistory,B=(s>=17&&s<=23||s>=25&&s<=31)&&_>=64&&_<=127,K=(s===16||s===24)&&_>=64&&_<=95;if(!(B||K))return!1;if(m(s,_,P))return h(null,null,P),!0;var j=s<=23?1:2;_>=64&&_<=95?F=j===1?M[s]:w[s]:F=j===1?S[s]:p[s];var W=this.channels[j];return W?(W.setPAC(this.interpretPAC(F,_)),h(s,_,P),this.currentChannel=j,!0):!1},u.interpretPAC=function(s,_){var F,P={color:null,italics:!1,indent:null,underline:!1,row:s};return _>95?F=_-96:F=_-64,P.underline=(F&1)===1,F<=13?P.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(F/2)]:F<=15?(P.italics=!0,P.color="white"):P.indent=Math.floor((F-16)/2)*4,P},u.parseChars=function(s,_){var F,P=null,B=null;if(s>=25?(F=2,B=s-8):(F=1,B=s),B>=17&&B<=19){var K;B===17?K=_+80:B===18?K=_+112:K=_+144,this.logger.log(a.INFO,"Special char '"+N(K)+"' in channel "+F),P=[K]}else s>=32&&s<=127&&(P=_===0?[s]:[s,_]);if(P){var j=T(P);this.logger.log(a.DEBUG,"Char codes =  "+j.join(",")),h(s,_,this.cmdHistory)}return P},u.parseBackgroundAttributes=function(s,_){var F=(s===16||s===24)&&_>=32&&_<=47,P=(s===23||s===31)&&_>=45&&_<=47;if(!(F||P))return!1;var B,K={};s===16||s===24?(B=Math.floor((_-32)/2),K.background=v[B],_%2===1&&(K.background=K.background+"_semi")):_===45?K.background="transparent":(K.foreground="black",_===47&&(K.underline=!0));var j=s<=23?1:2,W=this.channels[j];return W.setBkgData(K),h(s,_,this.cmdHistory),!0},u.reset=function(){for(var s=0;s<Object.keys(this.channels).length;s++){var _=this.channels[s];_&&_.reset()}this.cmdHistory=I()},u.cueSplitAtTime=function(s){for(var _=0;_<this.channels.length;_++){var F=this.channels[_];F&&F.cueSplitAtTime(s)}},E}();function h(E,u,y){y.a=E,y.b=u}function m(E,u,y){return y.a===E&&y.b===u}function I(){return{a:null,b:null}}const g=L},"./src/utils/codecs.ts":(k,R,o)=>{o.r(R),o.d(R,{isCodecSupportedInMp4:()=>N,isCodecType:()=>A});var b={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function A(O,U){var M=b[U];return!!M&&M[O.slice(0,4)]===!0}function N(O,U){return MediaSource.isTypeSupported((U||"video")+'/mp4;codecs="'+O+'"')}},"./src/utils/cues.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>M});var b=o("./src/utils/vttparser.ts"),A=o("./src/utils/webvtt-parser.ts"),N=o("./src/utils/texttrack-utils.ts"),O=/\s/,U={newCue:function(w,p,v,a){for(var D=[],T,c,l,d,f,x=self.VTTCue||self.TextTrackCue,L=0;L<a.rows.length;L++)if(T=a.rows[L],l=!0,d=0,f="",!T.isEmpty()){for(var h=0;h<T.chars.length;h++)O.test(T.chars[h].uchar)&&l?d++:(f+=T.chars[h].uchar,l=!1);T.cueStartTime=p,p===v&&(v+=1e-4),d>=16?d--:d++;var m=(0,b.fixLineBreaks)(f.trim()),I=(0,A.generateCueId)(p,v,m);(!w||!w.cues||!w.cues.getCueById(I))&&(c=new x(p,v,m),c.id=I,c.line=L+1,c.align="left",c.position=10+Math.min(80,Math.floor(d*8/32)*10),D.push(c))}return w&&D.length&&(D.sort(function(g,E){return g.line==="auto"||E.line==="auto"?0:g.line>8&&E.line>8?E.line-g.line:g.line-E.line}),D.forEach(function(g){return(0,N.addCueToTrack)(w,g)})),D}};const M=U},"./src/utils/discontinuities.ts":(k,R,o)=>{o.r(R),o.d(R,{adjustSlidingStart:()=>w,alignMediaPlaylistByPDT:()=>D,alignPDT:()=>a,alignStream:()=>p,findDiscontinuousReferenceFrag:()=>M,findFirstFragWithCC:()=>O,shouldAlignOnDiscontinuities:()=>U});var b=o("./src/polyfills/number.ts"),A=o("./src/utils/logger.ts"),N=o("./src/controller/level-helper.ts");function O(T,c){for(var l=null,d=0,f=T.length;d<f;d++){var x=T[d];if(x&&x.cc===c){l=x;break}}return l}function U(T,c,l){return!!(c.details&&(l.endCC>l.startCC||T&&T.cc<l.startCC))}function M(T,c,l){var d=T.fragments,f=c.fragments;if(!f.length||!d.length){A.logger.log("No fragments to align");return}var x=O(d,f[0].cc);if(!x||x&&!x.startPTS){A.logger.log("No frag in previous level to align on");return}return x}function S(T,c){if(T){var l=T.start+c;T.start=T.startPTS=l,T.endPTS=l+T.duration}}function w(T,c){for(var l=c.fragments,d=0,f=l.length;d<f;d++)S(l[d],T);c.fragmentHint&&S(c.fragmentHint,T),c.alignedSliding=!0}function p(T,c,l){c&&(v(T,l,c),!l.alignedSliding&&c.details&&a(l,c.details),!l.alignedSliding&&c.details&&!l.skippedSegments&&(0,N.adjustSliding)(c.details,l))}function v(T,c,l){if(U(T,l,c)){var d=M(l.details,c);d&&(0,b.isFiniteNumber)(d.start)&&(A.logger.log("Adjusting PTS using last level due to CC increase within current level "+c.url),w(d.start,c))}}function a(T,c){if(!(!c.fragments.length||!T.hasProgramDateTime||!c.hasProgramDateTime)){var l=c.fragments[0].programDateTime,d=T.fragments[0].programDateTime,f=(d-l)/1e3+c.fragments[0].start;f&&(0,b.isFiniteNumber)(f)&&(A.logger.log("Adjusting PTS using programDateTime delta "+(d-l)+"ms, sliding:"+f.toFixed(3)+" "+T.url+" "),w(f,T))}}function D(T,c){if(!(!T.hasProgramDateTime||!c.hasProgramDateTime)){var l=T.fragments,d=c.fragments;if(!(!l.length||!d.length)){var f=Math.round(d.length/2)-1,x=d[f],L=O(l,x.cc)||l[Math.round(l.length/2)-1],h=x.programDateTime,m=L.programDateTime;if(!(h===null||m===null)){var I=(m-h)/1e3-(L.start-x.start);w(I,T)}}}}},"./src/utils/ewma-bandwidth-estimator.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>N});var b=o("./src/utils/ewma.ts"),A=function(){function O(M,S,w){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=w,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new b.default(M),this.fast_=new b.default(S)}var U=O.prototype;return U.update=function(S,w){var p=this.slow_,v=this.fast_;this.slow_.halfLife!==S&&(this.slow_=new b.default(S,p.getEstimate(),p.getTotalWeight())),this.fast_.halfLife!==w&&(this.fast_=new b.default(w,v.getEstimate(),v.getTotalWeight()))},U.sample=function(S,w){S=Math.max(S,this.minDelayMs_);var p=8*w,v=S/1e3,a=p/v;this.fast_.sample(v,a),this.slow_.sample(v,a)},U.canEstimate=function(){var S=this.fast_;return S&&S.getTotalWeight()>=this.minWeight_},U.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},U.destroy=function(){},O}();const N=A},"./src/utils/ewma.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>A});var b=function(){function N(U,M,S){M===void 0&&(M=0),S===void 0&&(S=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=U,this.alpha_=U?Math.exp(Math.log(.5)/U):0,this.estimate_=M,this.totalWeight_=S}var O=N.prototype;return O.sample=function(M,S){var w=Math.pow(this.alpha_,M);this.estimate_=S*(1-w)+w*this.estimate_,this.totalWeight_+=M},O.getTotalWeight=function(){return this.totalWeight_},O.getEstimate=function(){if(this.alpha_){var M=1-Math.pow(this.alpha_,this.totalWeight_);if(M)return this.estimate_/M}return this.estimate_},N}();const A=b},"./src/utils/fetch-loader.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>f,fetchSupported:()=>D});var b=o("./src/polyfills/number.ts"),A=o("./src/loader/load-stats.ts"),N=o("./src/demux/chunk-cache.ts");function O(x,L){x.prototype=Object.create(L.prototype),x.prototype.constructor=x,p(x,L)}function U(x){var L=typeof Map=="function"?new Map:void 0;return U=function(m){if(m===null||!w(m))return m;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(typeof L<"u"){if(L.has(m))return L.get(m);L.set(m,I)}function I(){return M(m,arguments,v(this).constructor)}return I.prototype=Object.create(m.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),p(I,m)},U(x)}function M(x,L,h){return S()?M=Reflect.construct.bind():M=function(I,g,E){var u=[null];u.push.apply(u,g);var y=Function.bind.apply(I,u),s=new y;return E&&p(s,E.prototype),s},M.apply(null,arguments)}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(x){return Function.toString.call(x).indexOf("[native code]")!==-1}function p(x,L){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,I){return m.__proto__=I,m},p(x,L)}function v(x){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},v(x)}function a(){return a=Object.assign?Object.assign.bind():function(x){for(var L=1;L<arguments.length;L++){var h=arguments[L];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(x[m]=h[m])}return x},a.apply(this,arguments)}function D(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var T=function(){function x(h){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=h.fetchSetup||l,this.controller=new self.AbortController,this.stats=new A.LoadStats}var L=x.prototype;return L.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},L.abortInternal=function(){var m=this.response;(!m||!m.ok)&&(this.stats.aborted=!0,this.controller.abort())},L.abort=function(){var m;this.abortInternal(),(m=this.callbacks)!==null&&m!==void 0&&m.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},L.load=function(m,I,g){var E=this,u=this.stats;if(u.loading.start)throw new Error("Loader can only be used once.");u.loading.start=self.performance.now();var y=c(m,this.controller.signal),s=g.onProgress,_=m.responseType==="arraybuffer",F=_?"byteLength":"length";this.context=m,this.config=I,this.callbacks=g,this.request=this.fetchSetup(m,y),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){E.abortInternal(),g.onTimeout(u,m,E.response)},I.timeout),self.fetch(this.request).then(function(P){if(E.response=E.loader=P,!P.ok){var B=P.status,K=P.statusText;throw new d(K||"fetch, bad network response",B,P)}return u.loading.first=Math.max(self.performance.now(),u.loading.start),u.total=parseInt(P.headers.get("Content-Length")||"0"),s&&(0,b.isFiniteNumber)(I.highWaterMark)?E.loadProgressively(P,u,m,I.highWaterMark,s):_?P.arrayBuffer():P.text()}).then(function(P){var B=E.response;self.clearTimeout(E.requestTimeout),u.loading.end=Math.max(self.performance.now(),u.loading.first);var K=P[F];K&&(u.loaded=u.total=K);var j={url:B.url,data:P};s&&!(0,b.isFiniteNumber)(I.highWaterMark)&&s(u,m,P,B),g.onSuccess(j,u,m,B)}).catch(function(P){if(self.clearTimeout(E.requestTimeout),!u.aborted){var B=P&&P.code||0,K=P?P.message:null;g.onError({code:B,text:K},m,P?P.details:null)}})},L.getCacheAge=function(){var m=null;if(this.response){var I=this.response.headers.get("age");m=I?parseFloat(I):null}return m},L.loadProgressively=function(m,I,g,E,u){E===void 0&&(E=0);var y=new N.default,s=m.body.getReader(),_=function F(){return s.read().then(function(P){if(P.done)return y.dataLength&&u(I,g,y.flush(),m),Promise.resolve(new ArrayBuffer(0));var B=P.value,K=B.length;return I.loaded+=K,K<E||y.dataLength?(y.push(B),y.dataLength>=E&&u(I,g,y.flush(),m)):u(I,g,B,m),F()}).catch(function(){return Promise.reject()})};return _()},x}();function c(x,L){var h={method:"GET",mode:"cors",credentials:"same-origin",signal:L,headers:new self.Headers(a({},x.headers))};return x.rangeEnd&&h.headers.set("Range","bytes="+x.rangeStart+"-"+String(x.rangeEnd-1)),h}function l(x,L){return new self.Request(x.url,L)}var d=function(x){O(L,x);function L(h,m,I){var g;return g=x.call(this,h)||this,g.code=void 0,g.details=void 0,g.code=m,g.details=I,g}return L}(U(Error));const f=T},"./src/utils/hex.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>A});var b={hexDump:function(O){for(var U="",M=0;M<O.length;M++){var S=O[M].toString(16);S.length<2&&(S="0"+S),U+=S}return U}};const A=b},"./src/utils/imsc1-ttml-parser.ts":(k,R,o)=>{o.r(R),o.d(R,{IMSC1_CODEC:()=>w,parseIMSC1:()=>D});var b=o("./src/utils/mp4-tools.ts"),A=o("./src/utils/vttparser.ts"),N=o("./src/utils/vttcue.ts"),O=o("./src/demux/id3.ts"),U=o("./src/utils/timescale-conversion.ts"),M=o("./src/utils/webvtt-parser.ts");function S(){return S=Object.assign?Object.assign.bind():function(g){for(var E=1;E<arguments.length;E++){var u=arguments[E];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(g[y]=u[y])}return g},S.apply(this,arguments)}var w="stpp.ttml.im1t",p=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,v=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,a={left:"start",center:"center",right:"end",start:"start",end:"end"};function D(g,E,u,y,s){var _=(0,b.findBox)(new Uint8Array(g),["mdat"]);if(_.length===0){s(new Error("Could not parse IMSC1 mdat"));return}var F=_.map(function(B){return(0,O.utf8ArrayToStr)(B)}),P=(0,U.toTimescaleFromScale)(E,1,u);try{F.forEach(function(B){return y(T(B,P))})}catch(B){s(B)}}function T(g,E){var u=new DOMParser,y=u.parseFromString(g,"text/xml"),s=y.getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");var _={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},F=Object.keys(_).reduce(function(W,H){return W[H]=s.getAttribute("ttp:"+H)||_[H],W},{}),P=s.getAttribute("xml:space")!=="preserve",B=l(c(s,"styling","style")),K=l(c(s,"layout","region")),j=c(s,"body","[begin]");return[].map.call(j,function(W){var H=d(W,P);if(!H||!W.hasAttribute("begin"))return null;var G=h(W.getAttribute("begin"),F),$=h(W.getAttribute("dur"),F),V=h(W.getAttribute("end"),F);if(G===null)throw L(W);if(V===null){if($===null)throw L(W);V=G+$}var z=new N.default(G-E,V-E,H);z.id=(0,M.generateCueId)(z.startTime,z.endTime,z.text);var Y=K[W.getAttribute("region")],Q=B[W.getAttribute("style")],q=f(Y,Q,B),Z=q.textAlign;if(Z){var J=a[Z];J&&(z.lineAlign=J),z.align=Z}return S(z,q),z}).filter(function(W){return W!==null})}function c(g,E,u){var y=g.getElementsByTagName(E)[0];return y?[].slice.call(y.querySelectorAll(u)):[]}function l(g){return g.reduce(function(E,u){var y=u.getAttribute("xml:id");return y&&(E[y]=u),E},{})}function d(g,E){return[].slice.call(g.childNodes).reduce(function(u,y,s){var _;return y.nodeName==="br"&&s?u+`
`:(_=y.childNodes)!==null&&_!==void 0&&_.length?d(y,E):E?u+y.textContent.trim().replace(/\s+/g," "):u+y.textContent},"")}function f(g,E,u){var y="http://www.w3.org/ns/ttml#styling",s=null,_=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],F=g!=null&&g.hasAttribute("style")?g.getAttribute("style"):null;return F&&u.hasOwnProperty(F)&&(s=u[F]),_.reduce(function(P,B){var K=x(E,y,B)||x(g,y,B)||x(s,y,B);return K&&(P[B]=K),P},{})}function x(g,E,u){return g&&g.hasAttributeNS(E,u)?g.getAttributeNS(E,u):null}function L(g){return new Error("Could not parse ttml timestamp "+g)}function h(g,E){if(!g)return null;var u=(0,A.parseTimeStamp)(g);return u===null&&(p.test(g)?u=m(g,E):v.test(g)&&(u=I(g,E))),u}function m(g,E){var u=p.exec(g),y=(u[4]|0)+(u[5]|0)/E.subFrameRate;return(u[1]|0)*3600+(u[2]|0)*60+(u[3]|0)+y/E.frameRate}function I(g,E){var u=v.exec(g),y=Number(u[1]),s=u[2];switch(s){case"h":return y*3600;case"m":return y*60;case"ms":return y*1e3;case"f":return y/E.frameRate;case"t":return y/E.tickRate}return y}},"./src/utils/keysystem-util.ts":(k,R,o)=>{o.r(R),o.d(R,{changeEndianness:()=>N,convertDataUriToArrayBytes:()=>O,strToUtf8array:()=>U});var b=o("./src/utils/numeric-encoding-utils.ts");function A(M){var S=U(M).subarray(0,16),w=new Uint8Array(16);return w.set(S,16-S.length),w}function N(M){var S=function(p,v,a){var D=p[v];p[v]=p[a],p[a]=D};S(M,0,3),S(M,1,2),S(M,4,5),S(M,6,7)}function O(M){var S=M.split(":"),w=null;if(S[0]==="data"&&S.length===2){var p=S[1].split(";"),v=p[p.length-1].split(",");if(v.length===2){var a=v[0]==="base64",D=v[1];a?(p.splice(-1,1),w=(0,b.base64Decode)(D)):w=A(D)}}return w}function U(M){return Uint8Array.from(unescape(encodeURIComponent(M)),function(S){return S.charCodeAt(0)})}},"./src/utils/logger.ts":(k,R,o)=>{o.r(R),o.d(R,{enableLogs:()=>M,logger:()=>S});var b=function(){},A={trace:b,debug:b,log:b,warn:b,info:b,error:b},N=A;function O(w){var p=self.console[w];return p?p.bind(self.console,"["+w+"] >"):b}function U(w){for(var p=arguments.length,v=new Array(p>1?p-1:0),a=1;a<p;a++)v[a-1]=arguments[a];v.forEach(function(D){N[D]=w[D]?w[D].bind(w):O(D)})}function M(w,p){if(self.console&&w===!0||typeof w=="object"){U(w,"debug","log","info","warn","error");try{N.log('Debug logs enabled for "'+p+'"')}catch{N=A}}else N=A}var S=N},"./src/utils/mediakeys-helper.ts":(k,R,o)=>{o.r(R),o.d(R,{KeySystemFormats:()=>A,KeySystemIds:()=>O,KeySystems:()=>b,getKeySystemsForConfig:()=>S,getSupportedMediaKeySystemConfigurations:()=>p,keySystemDomainToKeySystemFormat:()=>M,keySystemFormatToKeySystemDomain:()=>N,keySystemIdToKeySystemDomain:()=>U,requestMediaKeySystemAccess:()=>w});var b;(function(a){a.CLEARKEY="org.w3.clearkey",a.FAIRPLAY="com.apple.fps",a.PLAYREADY="com.microsoft.playready",a.WIDEVINE="com.widevine.alpha"})(b||(b={}));var A;(function(a){a.CLEARKEY="org.w3.clearkey",a.FAIRPLAY="com.apple.streamingkeydelivery",a.PLAYREADY="com.microsoft.playready",a.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"})(A||(A={}));function N(a){switch(a){case A.FAIRPLAY:return b.FAIRPLAY;case A.PLAYREADY:return b.PLAYREADY;case A.WIDEVINE:return b.WIDEVINE;case A.CLEARKEY:return b.CLEARKEY}}var O;(function(a){a.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"})(O||(O={}));function U(a){if(a===O.WIDEVINE)return b.WIDEVINE}function M(a){switch(a){case b.FAIRPLAY:return A.FAIRPLAY;case b.PLAYREADY:return A.PLAYREADY;case b.WIDEVINE:return A.WIDEVINE;case b.CLEARKEY:return A.CLEARKEY}}function S(a){var D=a.drmSystems,T=a.widevineLicenseUrl,c=D?[b.FAIRPLAY,b.WIDEVINE,b.PLAYREADY,b.CLEARKEY].filter(function(l){return!!D[l]}):[];return!c[b.WIDEVINE]&&T&&c.push(b.WIDEVINE),c}var w=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function p(a,D,T,c){var l;switch(a){case b.FAIRPLAY:l=["cenc","sinf"];break;case b.WIDEVINE:case b.PLAYREADY:l=["cenc"];break;case b.CLEARKEY:l=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+a)}return v(l,D,T,c)}function v(a,D,T,c){var l={initDataTypes:a,persistentState:c.persistentState||"not-allowed",distinctiveIdentifier:c.distinctiveIdentifier||"not-allowed",sessionTypes:c.sessionTypes||[c.sessionType||"temporary"],audioCapabilities:D.map(function(d){return{contentType:'audio/mp4; codecs="'+d+'"',robustness:c.audioRobustness||"",encryptionScheme:c.audioEncryptionScheme||null}}),videoCapabilities:T.map(function(d){return{contentType:'video/mp4; codecs="'+d+'"',robustness:c.videoRobustness||"",encryptionScheme:c.videoEncryptionScheme||null}})};return[l]}},"./src/utils/mediasource-helper.ts":(k,R,o)=>{o.r(R),o.d(R,{getMediaSource:()=>b});function b(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":(k,R,o)=>{o.r(R),o.d(R,{RemuxerTrackIdConfig:()=>w,appendUint8Array:()=>E,bin2str:()=>p,computeRawDurationFromSamples:()=>m,discardEPB:()=>F,findBox:()=>c,getDuration:()=>h,getStartDTS:()=>L,mp4Box:()=>B,mp4pssh:()=>K,offsetStartDTS:()=>I,parseEmsg:()=>P,parseInitSegment:()=>d,parsePssh:()=>j,parseSEIMessageFromNALu:()=>_,parseSamples:()=>u,parseSegmentIndex:()=>l,parseSinf:()=>x,patchEncyptionData:()=>f,readSint32:()=>D,readUint16:()=>v,readUint32:()=>a,segmentValidRange:()=>g,writeUint32:()=>T});var b=o("./src/loader/fragment.ts"),A=o("./src/utils/typed-array.ts"),N=o("./src/demux/id3.ts"),O=o("./src/utils/logger.ts"),U=o("./src/utils/hex.ts"),M=Math.pow(2,32)-1,S=[].push,w={video:1,audio:2,id3:3,text:4};function p(W){return String.fromCharCode.apply(null,W)}function v(W,H){var G=W[H]<<8|W[H+1];return G<0?65536+G:G}function a(W,H){var G=D(W,H);return G<0?4294967296+G:G}function D(W,H){return W[H]<<24|W[H+1]<<16|W[H+2]<<8|W[H+3]}function T(W,H,G){W[H]=G>>24,W[H+1]=G>>16&255,W[H+2]=G>>8&255,W[H+3]=G&255}function c(W,H){var G=[];if(!H.length)return G;for(var $=W.byteLength,V=0;V<$;){var z=a(W,V),Y=p(W.subarray(V+4,V+8)),Q=z>1?V+z:$;if(Y===H[0])if(H.length===1)G.push(W.subarray(V+8,Q));else{var q=c(W.subarray(V+8,Q),H.slice(1));q.length&&S.apply(G,q)}V=Q}return G}function l(W){var H=[],G=W[0],$=8,V=a(W,$);$+=4;var z=0,Y=0;G===0?$+=8:$+=16,$+=2;var Q=W.length+Y,q=v(W,$);$+=2;for(var Z=0;Z<q;Z++){var J=$,ie=a(W,J);J+=4;var le=ie&2147483647,oe=(ie&2147483648)>>>31;if(oe===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var re=a(W,J);J+=4,H.push({referenceSize:le,subsegmentDuration:re,info:{duration:re/V,start:Q,end:Q+le-1}}),Q+=le,J+=4,$=J}return{earliestPresentationTime:z,timescale:V,version:G,referencesCount:q,references:H}}function d(W){for(var H=[],G=c(W,["moov","trak"]),$=0;$<G.length;$++){var V=G[$],z=c(V,["tkhd"])[0];if(z){var Y=z[0],Q=Y===0?12:20,q=a(z,Q),Z=c(V,["mdia","mdhd"])[0];if(Z){Y=Z[0],Q=Y===0?12:20;var J=a(Z,Q),ie=c(V,["mdia","hdlr"])[0];if(ie){var le=p(ie.subarray(8,12)),oe={soun:b.ElementaryStreamTypes.AUDIO,vide:b.ElementaryStreamTypes.VIDEO}[le];if(oe){var re=c(V,["mdia","minf","stbl","stsd"])[0],ne=void 0;re&&(ne=p(re.subarray(12,16))),H[q]={timescale:J,type:oe},H[oe]={timescale:J,id:q,codec:ne}}}}}}var pe=c(W,["moov","mvex","trex"]);return pe.forEach(function(ye){var be=a(ye,4),Ae=H[be];Ae&&(Ae.default={duration:a(ye,12),flags:a(ye,20)})}),H}function f(W,H){if(!W||!H)return W;var G=H.keyId;if(G&&H.isCommonEncryption){var $=c(W,["moov","trak"]);$.forEach(function(V){var z=c(V,["mdia","minf","stbl","stsd"])[0],Y=z.subarray(8),Q=c(Y,["enca"]),q=Q.length>0;q||(Q=c(Y,["encv"])),Q.forEach(function(Z){var J=q?Z.subarray(28):Z.subarray(78),ie=c(J,["sinf"]);ie.forEach(function(le){var oe=x(le);if(oe){var re=oe.subarray(8,24);re.some(function(ne){return ne!==0})||(O.logger.log("[eme] Patching keyId in 'enc"+(q?"a":"v")+">sinf>>tenc' box: "+U.default.hexDump(re)+" -> "+U.default.hexDump(G)),oe.set(G,8))}})})})}return W}function x(W){var H=c(W,["schm"])[0];if(H){var G=p(H.subarray(4,8));if(G==="cbcs"||G==="cenc")return c(W,["schi","tenc"])[0]}return O.logger.error("[eme] missing 'schm' box"),null}function L(W,H){return c(H,["moof","traf"]).reduce(function(G,$){var V=c($,["tfdt"])[0],z=V[0],Y=c($,["tfhd"]).reduce(function(Q,q){var Z=a(q,4),J=W[Z];if(J){var ie=a(V,4);z===1&&(ie*=Math.pow(2,32),ie+=a(V,8));var le=J.timescale||9e4,oe=ie/le;if(isFinite(oe)&&(Q===null||oe<Q))return oe}return Q},null);return Y!==null&&isFinite(Y)&&(G===null||Y<G)?Y:G},null)||0}function h(W,H){for(var G=0,$=0,V=0,z=c(W,["moof","traf"]),Y=0;Y<z.length;Y++){var Q=z[Y],q=c(Q,["tfhd"])[0],Z=a(q,4),J=H[Z];if(J){var ie=J.default,le=a(q,0)|(ie==null?void 0:ie.flags),oe=ie==null?void 0:ie.duration;le&8&&(le&2?oe=a(q,12):oe=a(q,8));for(var re=J.timescale||9e4,ne=c(Q,["trun"]),pe=0;pe<ne.length;pe++){if(G=m(ne[pe]),!G&&oe){var ye=a(ne[pe],4);G=oe*ye}J.type===b.ElementaryStreamTypes.VIDEO?$+=G/re:J.type===b.ElementaryStreamTypes.AUDIO&&(V+=G/re)}}}if($===0&&V===0){for(var be=0,Ae=c(W,["sidx"]),ke=0;ke<Ae.length;ke++){var Pe=l(Ae[ke]);Pe!=null&&Pe.references&&(be+=Pe.references.reduce(function(ee,te){return ee+te.info.duration||0},0))}return be}return $||V}function m(W){var H=a(W,0),G=8;H&1&&(G+=4),H&4&&(G+=4);for(var $=0,V=a(W,4),z=0;z<V;z++){if(H&256){var Y=a(W,G);$+=Y,G+=4}H&512&&(G+=4),H&1024&&(G+=4),H&2048&&(G+=4)}return $}function I(W,H,G){c(H,["moof","traf"]).forEach(function($){c($,["tfhd"]).forEach(function(V){var z=a(V,4),Y=W[z];if(Y){var Q=Y.timescale||9e4;c($,["tfdt"]).forEach(function(q){var Z=q[0],J=a(q,4);if(Z===0)J-=G*Q,J=Math.max(J,0),T(q,4,J);else{J*=Math.pow(2,32),J+=a(q,8),J-=G*Q,J=Math.max(J,0);var ie=Math.floor(J/(M+1)),le=Math.floor(J%(M+1));T(q,4,ie),T(q,8,le)}})}})})}function g(W){var H={valid:null,remainder:null},G=c(W,["moof"]);if(G){if(G.length<2)return H.remainder=W,H}else return H;var $=G[G.length-1];return H.valid=(0,A.sliceUint8)(W,0,$.byteOffset-8),H.remainder=(0,A.sliceUint8)(W,$.byteOffset-8),H}function E(W,H){var G=new Uint8Array(W.length+H.length);return G.set(W),G.set(H,W.length),G}function u(W,H){var G=[],$=H.samples,V=H.timescale,z=H.id,Y=!1,Q=c($,["moof"]);return Q.map(function(q){var Z=q.byteOffset-8,J=c(q,["traf"]);J.map(function(ie){var le=c(ie,["tfdt"]).map(function(oe){var re=oe[0],ne=a(oe,4);return re===1&&(ne*=Math.pow(2,32),ne+=a(oe,8)),ne/V})[0];return le!==void 0&&(W=le),c(ie,["tfhd"]).map(function(oe){var re=a(oe,4),ne=a(oe,0)&16777215,pe=(ne&1)!==0,ye=(ne&2)!==0,be=(ne&8)!==0,Ae=0,ke=(ne&16)!==0,Pe=0,ee=(ne&32)!==0,te=8;re===z&&(pe&&(te+=8),ye&&(te+=4),be&&(Ae=a(oe,te),te+=4),ke&&(Pe=a(oe,te),te+=4),ee&&(te+=4),H.type==="video"&&(Y=y(H.codec)),c(ie,["trun"]).map(function(se){var fe=se[0],ce=a(se,0)&16777215,de=(ce&1)!==0,ge=0,me=(ce&4)!==0,he=(ce&256)!==0,Ie=0,Ee=(ce&512)!==0,Oe=0,_e=(ce&1024)!==0,Me=(ce&2048)!==0,Ke=0,rt=a(se,4),Ne=8;de&&(ge=a(se,Ne),Ne+=4),me&&(Ne+=4);for(var ct=ge+Z,qe=0;qe<rt;qe++){if(he?(Ie=a(se,Ne),Ne+=4):Ie=Ae,Ee?(Oe=a(se,Ne),Ne+=4):Oe=Pe,_e&&(Ne+=4),Me&&(fe===0?Ke=a(se,Ne):Ke=D(se,Ne),Ne+=4),H.type===b.ElementaryStreamTypes.VIDEO)for(var yr=0;yr<Oe;){var je=a($,ct);if(ct+=4,s(Y,$[ct])){var nt=$.subarray(ct,ct+je);_(nt,Y?2:1,W+Ke/V,G)}ct+=je,yr+=je+4}W+=Ie/V}}))})})}),G}function y(W){if(!W)return!1;var H=W.indexOf("."),G=H<0?W:W.substring(0,H);return G==="hvc1"||G==="hev1"||G==="dvh1"||G==="dvhe"}function s(W,H){if(W){var G=H>>1&63;return G===39||G===40}else{var $=H&31;return $===6}}function _(W,H,G,$){var V=F(W),z=0;z+=H;for(var Y=0,Q=0,q=!1,Z=0;z<V.length;){Y=0;do{if(z>=V.length)break;Z=V[z++],Y+=Z}while(Z===255);Q=0;do{if(z>=V.length)break;Z=V[z++],Q+=Z}while(Z===255);var J=V.length-z;if(!q&&Y===4&&z<V.length){q=!0;var ie=V[z++];if(ie===181){var le=v(V,z);if(z+=2,le===49){var oe=a(V,z);if(z+=4,oe===1195456820){var re=V[z++];if(re===3){var ne=V[z++],pe=31&ne,ye=64&ne,be=ye?2+pe*3:0,Ae=new Uint8Array(be);if(ye){Ae[0]=ne;for(var ke=1;ke<be;ke++)Ae[ke]=V[z++]}$.push({type:re,payloadType:Y,pts:G,bytes:Ae})}}}}}else if(Y===5&&Q<J){if(q=!0,Q>16){for(var Pe=[],ee=0;ee<16;ee++){var te=V[z++].toString(16);Pe.push(te.length==1?"0"+te:te),(ee===3||ee===5||ee===7||ee===9)&&Pe.push("-")}for(var se=Q-16,fe=new Uint8Array(se),ce=0;ce<se;ce++)fe[ce]=V[z++];$.push({payloadType:Y,pts:G,uuid:Pe.join(""),userData:(0,N.utf8ArrayToStr)(fe),userDataBytes:fe})}}else if(Q<J)z+=Q;else if(Q>J)break}}function F(W){for(var H=W.byteLength,G=[],$=1;$<H-2;)W[$]===0&&W[$+1]===0&&W[$+2]===3?(G.push($+2),$+=2):$++;if(G.length===0)return W;var V=H-G.length,z=new Uint8Array(V),Y=0;for($=0;$<V;Y++,$++)Y===G[0]&&(Y++,G.shift()),z[$]=W[Y];return z}function P(W){var H=W[0],G="",$="",V=0,z=0,Y=0,Q=0,q=0,Z=0;if(H===0){for(;p(W.subarray(Z,Z+1))!=="\0";)G+=p(W.subarray(Z,Z+1)),Z+=1;for(G+=p(W.subarray(Z,Z+1)),Z+=1;p(W.subarray(Z,Z+1))!=="\0";)$+=p(W.subarray(Z,Z+1)),Z+=1;$+=p(W.subarray(Z,Z+1)),Z+=1,V=a(W,12),z=a(W,16),Q=a(W,20),q=a(W,24),Z=28}else if(H===1){Z+=4,V=a(W,Z),Z+=4;var J=a(W,Z);Z+=4;var ie=a(W,Z);for(Z+=4,Y=Math.pow(2,32)*J+ie,Number.isSafeInteger(Y)||(Y=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Q=a(W,Z),Z+=4,q=a(W,Z),Z+=4;p(W.subarray(Z,Z+1))!=="\0";)G+=p(W.subarray(Z,Z+1)),Z+=1;for(G+=p(W.subarray(Z,Z+1)),Z+=1;p(W.subarray(Z,Z+1))!=="\0";)$+=p(W.subarray(Z,Z+1)),Z+=1;$+=p(W.subarray(Z,Z+1)),Z+=1}var le=W.subarray(Z,W.byteLength);return{schemeIdUri:G,value:$,timeScale:V,presentationTime:Y,presentationTimeDelta:z,eventDuration:Q,id:q,payload:le}}function B(W){for(var H=arguments.length,G=new Array(H>1?H-1:0),$=1;$<H;$++)G[$-1]=arguments[$];for(var V=G.length,z=8,Y=V;Y--;)z+=G[Y].byteLength;var Q=new Uint8Array(z);for(Q[0]=z>>24&255,Q[1]=z>>16&255,Q[2]=z>>8&255,Q[3]=z&255,Q.set(W,4),Y=0,z=8;Y<V;Y++)Q.set(G[Y],z),z+=G[Y].byteLength;return Q}function K(W,H,G){if(W.byteLength!==16)throw new RangeError("Invalid system id");var $,V;if(H){$=1,V=new Uint8Array(H.length*16);for(var z=0;z<H.length;z++){var Y=H[z];if(Y.byteLength!==16)throw new RangeError("Invalid key");V.set(Y,z*16)}}else $=0,V=new Uint8Array;var Q;$>0?(Q=new Uint8Array(4),H.length>0&&new DataView(Q.buffer).setUint32(0,H.length,!1)):Q=new Uint8Array;var q=new Uint8Array(4);return G&&G.byteLength>0&&new DataView(q.buffer).setUint32(0,G.byteLength,!1),B([112,115,115,104],new Uint8Array([$,0,0,0]),W,Q,V,q,G||new Uint8Array)}function j(W){if(!(W instanceof ArrayBuffer)||W.byteLength<32)return null;var H={version:0,systemId:"",kids:null,data:null},G=new DataView(W),$=G.getUint32(0);if(W.byteLength!==$&&$>44)return null;var V=G.getUint32(4);if(V!==1886614376||(H.version=G.getUint32(8)>>>24,H.version>1))return null;H.systemId=U.default.hexDump(new Uint8Array(W,12,16));var z=G.getUint32(28);if(H.version===0){if($-32<z)return null;H.data=new Uint8Array(W,32,z)}else if(H.version===1){H.kids=[];for(var Y=0;Y<z;Y++)H.kids.push(new Uint8Array(W,32+Y*16,16))}return H}},"./src/utils/numeric-encoding-utils.ts":(k,R,o)=>{o.r(R),o.d(R,{base64Decode:()=>M,base64DecodeToStr:()=>N,base64Encode:()=>O,base64ToBase64Url:()=>b,base64UrlEncode:()=>U,strToBase64Encode:()=>A});function b(S){return S.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function A(S){return btoa(S)}function N(S){return atob(S)}function O(S){return btoa(String.fromCharCode.apply(String,S))}function U(S){return b(O(S))}function M(S){return Uint8Array.from(atob(S),function(w){return w.charCodeAt(0)})}},"./src/utils/output-filter.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>b});var b=function(){function A(O,U){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=O,this.trackName=U}var N=A.prototype;return N.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},N.newCue=function(U,M,S){(this.startTime===null||this.startTime>U)&&(this.startTime=U),this.endTime=M,this.screen=S,this.timelineController.createCaptionsTrack(this.trackName)},N.reset=function(){this.cueRanges=[],this.startTime=null},A}()},"./src/utils/texttrack-utils.ts":(k,R,o)=>{o.r(R),o.d(R,{addCueToTrack:()=>N,clearCurrentCues:()=>O,getCuesInRange:()=>S,removeCuesInRange:()=>U,sendAddTrackEvent:()=>A});var b=o("./src/utils/logger.ts");function A(w,p){var v;try{v=new Event("addtrack")}catch{v=document.createEvent("Event"),v.initEvent("addtrack",!1,!1)}v.track=w,p.dispatchEvent(v)}function N(w,p){var v=w.mode;if(v==="disabled"&&(w.mode="hidden"),w.cues&&!w.cues.getCueById(p.id))try{if(w.addCue(p),!w.cues.getCueById(p.id))throw new Error("addCue is failed for: "+p)}catch(D){b.logger.debug("[texttrack-utils]: "+D);var a=new self.TextTrackCue(p.startTime,p.endTime,p.text);a.id=p.id,w.addCue(a)}v==="disabled"&&(w.mode=v)}function O(w){var p=w.mode;if(p==="disabled"&&(w.mode="hidden"),w.cues)for(var v=w.cues.length;v--;)w.removeCue(w.cues[v]);p==="disabled"&&(w.mode=p)}function U(w,p,v,a){var D=w.mode;if(D==="disabled"&&(w.mode="hidden"),w.cues&&w.cues.length>0)for(var T=S(w.cues,p,v),c=0;c<T.length;c++)(!a||a(T[c]))&&w.removeCue(T[c]);D==="disabled"&&(w.mode=D)}function M(w,p){if(p<w[0].startTime)return 0;var v=w.length-1;if(p>w[v].endTime)return-1;for(var a=0,D=v;a<=D;){var T=Math.floor((D+a)/2);if(p<w[T].startTime)D=T-1;else if(p>w[T].startTime&&a<v)a=T+1;else return T}return w[a].startTime-p<p-w[D].startTime?a:D}function S(w,p,v){var a=[],D=M(w,p);if(D>-1)for(var T=D,c=w.length;T<c;T++){var l=w[T];if(l.startTime>=p&&l.endTime<=v)a.push(l);else if(l.startTime>v)return a}return a}},"./src/utils/time-ranges.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>A});var b={toString:function(O){for(var U="",M=O.length,S=0;S<M;S++)U+="["+O.start(S).toFixed(3)+"-"+O.end(S).toFixed(3)+"]";return U}};const A=b},"./src/utils/timescale-conversion.ts":(k,R,o)=>{o.r(R),o.d(R,{toMpegTsClockFromTimescale:()=>U,toMsFromMpegTsClock:()=>O,toTimescaleFromBase:()=>A,toTimescaleFromScale:()=>N});var b=9e4;function A(M,S,w,p){w===void 0&&(w=1),p===void 0&&(p=!1);var v=M*S*w;return p?Math.round(v):v}function N(M,S,w,p){return w===void 0&&(w=1),p===void 0&&(p=!1),A(M,S,1/w,p)}function O(M,S){return S===void 0&&(S=!1),A(M,1e3,1/b,S)}function U(M,S){return S===void 0&&(S=1),A(M,b,1/S)}},"./src/utils/typed-array.ts":(k,R,o)=>{o.r(R),o.d(R,{sliceUint8:()=>b});function b(A,N,O){return Uint8Array.prototype.slice?A.slice(N,O):new Uint8Array(Array.prototype.slice.call(A,N,O))}},"./src/utils/vttcue.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>b});const b=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var A=["","lr","rl"],N=["start","middle","end","left","right"];function O(p,v){if(typeof v!="string"||!Array.isArray(p))return!1;var a=v.toLowerCase();return~p.indexOf(a)?a:!1}function U(p){return O(A,p)}function M(p){return O(N,p)}function S(p){for(var v=arguments.length,a=new Array(v>1?v-1:0),D=1;D<v;D++)a[D-1]=arguments[D];for(var T=1;T<arguments.length;T++){var c=arguments[T];for(var l in c)p[l]=c[l]}return p}function w(p,v,a){var D=this,T={enumerable:!0};D.hasBeenReset=!1;var c="",l=!1,d=p,f=v,x=a,L=null,h="",m=!0,I="auto",g="start",E=50,u="middle",y=50,s="middle";Object.defineProperty(D,"id",S({},T,{get:function(){return c},set:function(F){c=""+F}})),Object.defineProperty(D,"pauseOnExit",S({},T,{get:function(){return l},set:function(F){l=!!F}})),Object.defineProperty(D,"startTime",S({},T,{get:function(){return d},set:function(F){if(typeof F!="number")throw new TypeError("Start time must be set to a number.");d=F,this.hasBeenReset=!0}})),Object.defineProperty(D,"endTime",S({},T,{get:function(){return f},set:function(F){if(typeof F!="number")throw new TypeError("End time must be set to a number.");f=F,this.hasBeenReset=!0}})),Object.defineProperty(D,"text",S({},T,{get:function(){return x},set:function(F){x=""+F,this.hasBeenReset=!0}})),Object.defineProperty(D,"region",S({},T,{get:function(){return L},set:function(F){L=F,this.hasBeenReset=!0}})),Object.defineProperty(D,"vertical",S({},T,{get:function(){return h},set:function(F){var P=U(F);if(P===!1)throw new SyntaxError("An invalid or illegal string was specified.");h=P,this.hasBeenReset=!0}})),Object.defineProperty(D,"snapToLines",S({},T,{get:function(){return m},set:function(F){m=!!F,this.hasBeenReset=!0}})),Object.defineProperty(D,"line",S({},T,{get:function(){return I},set:function(F){if(typeof F!="number"&&F!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");I=F,this.hasBeenReset=!0}})),Object.defineProperty(D,"lineAlign",S({},T,{get:function(){return g},set:function(F){var P=M(F);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");g=P,this.hasBeenReset=!0}})),Object.defineProperty(D,"position",S({},T,{get:function(){return E},set:function(F){if(F<0||F>100)throw new Error("Position must be between 0 and 100.");E=F,this.hasBeenReset=!0}})),Object.defineProperty(D,"positionAlign",S({},T,{get:function(){return u},set:function(F){var P=M(F);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");u=P,this.hasBeenReset=!0}})),Object.defineProperty(D,"size",S({},T,{get:function(){return y},set:function(F){if(F<0||F>100)throw new Error("Size must be between 0 and 100.");y=F,this.hasBeenReset=!0}})),Object.defineProperty(D,"align",S({},T,{get:function(){return s},set:function(F){var P=M(F);if(!P)throw new SyntaxError("An invalid or illegal string was specified.");s=P,this.hasBeenReset=!0}})),D.displayState=void 0}return w.prototype.getCueAsHTML=function(){var p=self.WebVTT;return p.convertCueToDOMTree(self,this.text)},w}()},"./src/utils/vttparser.ts":(k,R,o)=>{o.r(R),o.d(R,{VTTParser:()=>v,fixLineBreaks:()=>p,parseTimeStamp:()=>N});var b=o("./src/utils/vttcue.ts"),A=function(){function a(){}var D=a.prototype;return D.decode=function(c,l){if(!c)return"";if(typeof c!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(c))},a}();function N(a){function D(c,l,d,f){return(c|0)*3600+(l|0)*60+(d|0)+parseFloat(f||0)}var T=a.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return T?parseFloat(T[2])>59?D(T[2],T[3],0,T[4]):D(T[1],T[2],T[3],T[4]):null}var O=function(){function a(){this.values=Object.create(null)}var D=a.prototype;return D.set=function(c,l){!this.get(c)&&l!==""&&(this.values[c]=l)},D.get=function(c,l,d){return d?this.has(c)?this.values[c]:l[d]:this.has(c)?this.values[c]:l},D.has=function(c){return c in this.values},D.alt=function(c,l,d){for(var f=0;f<d.length;++f)if(l===d[f]){this.set(c,l);break}},D.integer=function(c,l){/^-?\d+$/.test(l)&&this.set(c,parseInt(l,10))},D.percent=function(c,l){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(l)){var d=parseFloat(l);if(d>=0&&d<=100)return this.set(c,d),!0}return!1},a}();function U(a,D,T,c){var l=c?a.split(c):[a];for(var d in l)if(typeof l[d]=="string"){var f=l[d].split(T);if(f.length===2){var x=f[0],L=f[1];D(x,L)}}}var M=new b.default(0,0,""),S=M.align==="middle"?"middle":"center";function w(a,D,T){var c=a;function l(){var x=N(a);if(x===null)throw new Error("Malformed timestamp: "+c);return a=a.replace(/^[^\sa-zA-Z-]+/,""),x}function d(x,L){var h=new O;U(x,function(g,E){var u;switch(g){case"region":for(var y=T.length-1;y>=0;y--)if(T[y].id===E){h.set(g,T[y].region);break}break;case"vertical":h.alt(g,E,["rl","lr"]);break;case"line":u=E.split(","),h.integer(g,u[0]),h.percent(g,u[0])&&h.set("snapToLines",!1),h.alt(g,u[0],["auto"]),u.length===2&&h.alt("lineAlign",u[1],["start",S,"end"]);break;case"position":u=E.split(","),h.percent(g,u[0]),u.length===2&&h.alt("positionAlign",u[1],["start",S,"end","line-left","line-right","auto"]);break;case"size":h.percent(g,E);break;case"align":h.alt(g,E,["start",S,"end","left","right"]);break}},/:/,/\s/),L.region=h.get("region",null),L.vertical=h.get("vertical","");var m=h.get("line","auto");m==="auto"&&M.line===-1&&(m=-1),L.line=m,L.lineAlign=h.get("lineAlign","start"),L.snapToLines=h.get("snapToLines",!0),L.size=h.get("size",100),L.align=h.get("align",S);var I=h.get("position","auto");I==="auto"&&M.position===50&&(I=L.align==="start"||L.align==="left"?0:L.align==="end"||L.align==="right"?100:50),L.position=I}function f(){a=a.replace(/^\s+/,"")}if(f(),D.startTime=l(),f(),a.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+c);a=a.slice(3),f(),D.endTime=l(),f(),d(a,D)}function p(a){return a.replace(/<br(?: \/)?>/gi,`
`)}var v=function(){function a(){this.state="INITIAL",this.buffer="",this.decoder=new A,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var D=a.prototype;return D.parse=function(c){var l=this;c&&(l.buffer+=l.decoder.decode(c,{stream:!0}));function d(){var I=l.buffer,g=0;for(I=p(I);g<I.length&&I[g]!=="\r"&&I[g]!==`
`;)++g;var E=I.slice(0,g);return I[g]==="\r"&&++g,I[g]===`
`&&++g,l.buffer=I.slice(g),E}function f(I){U(I,function(g,E){},/:/)}try{var x="";if(l.state==="INITIAL"){if(!/\r\n|\n/.test(l.buffer))return this;x=d();var L=x.match(/^()?WEBVTT([ \t].*)?$/);if(!L||!L[0])throw new Error("Malformed WebVTT signature.");l.state="HEADER"}for(var h=!1;l.buffer;){if(!/\r\n|\n/.test(l.buffer))return this;switch(h?h=!1:x=d(),l.state){case"HEADER":/:/.test(x)?f(x):x||(l.state="ID");continue;case"NOTE":x||(l.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(x)){l.state="NOTE";break}if(!x)continue;if(l.cue=new b.default(0,0,""),l.state="CUE",x.indexOf("-->")===-1){l.cue.id=x;continue}case"CUE":if(!l.cue){l.state="BADCUE";continue}try{w(x,l.cue,l.regionList)}catch{l.cue=null,l.state="BADCUE";continue}l.state="CUETEXT";continue;case"CUETEXT":{var m=x.indexOf("-->")!==-1;if(!x||m&&(h=!0)){l.oncue&&l.cue&&l.oncue(l.cue),l.cue=null,l.state="ID";continue}if(l.cue===null)continue;l.cue.text&&(l.cue.text+=`
`),l.cue.text+=x}continue;case"BADCUE":x||(l.state="ID")}}}catch{l.state==="CUETEXT"&&l.cue&&l.oncue&&l.oncue(l.cue),l.cue=null,l.state=l.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},D.flush=function(){var c=this;try{if((c.cue||c.state==="HEADER")&&(c.buffer+=`

`,c.parse()),c.state==="INITIAL"||c.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(l){c.onparsingerror&&c.onparsingerror(l)}return c.onflush&&c.onflush(),this},a}()},"./src/utils/webvtt-parser.ts":(k,R,o)=>{o.r(R),o.d(R,{generateCueId:()=>v,parseWebVTT:()=>D});var b=o("./src/polyfills/number.ts"),A=o("./src/utils/vttparser.ts"),N=o("./src/demux/id3.ts"),O=o("./src/utils/timescale-conversion.ts"),U=o("./src/remux/mp4-remuxer.ts"),M=/\r\n|\n\r|\n|\r/g,S=function(c,l,d){return d===void 0&&(d=0),c.slice(d,d+l.length)===l},w=function(c){var l=parseInt(c.slice(-3)),d=parseInt(c.slice(-6,-4)),f=parseInt(c.slice(-9,-7)),x=c.length>9?parseInt(c.substring(0,c.indexOf(":"))):0;if(!(0,b.isFiniteNumber)(l)||!(0,b.isFiniteNumber)(d)||!(0,b.isFiniteNumber)(f)||!(0,b.isFiniteNumber)(x))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+c);return l+=1e3*d,l+=60*1e3*f,l+=60*60*1e3*x,l},p=function(c){for(var l=5381,d=c.length;d;)l=l*33^c.charCodeAt(--d);return(l>>>0).toString()};function v(T,c,l){return p(T.toString())+p(c.toString())+p(l)}var a=function(c,l,d){var f=c[l],x=c[f.prevCC];if(!x||!x.new&&f.new){c.ccOffset=c.presentationOffset=f.start,f.new=!1;return}for(;(L=x)!==null&&L!==void 0&&L.new;){var L;c.ccOffset+=f.start-x.start,f.new=!1,f=x,x=c[f.prevCC]}c.presentationOffset=d};function D(T,c,l,d,f,x,L,h){var m=new A.VTTParser,I=(0,N.utf8ArrayToStr)(new Uint8Array(T)).trim().replace(M,`
`).split(`
`),g=[],E=(0,O.toMpegTsClockFromTimescale)(c,l),u="00:00.000",y=0,s=0,_,F=!0;m.oncue=function(P){var B=d[f],K=d.ccOffset,j=(y-E)/9e4;B!=null&&B.new&&(s!==void 0?K=d.ccOffset=B.start:a(d,f,j)),j&&(K=j-d.presentationOffset);var W=P.endTime-P.startTime,H=(0,U.normalizePts)((P.startTime+K-s)*9e4,x*9e4)/9e4;P.startTime=Math.max(H,0),P.endTime=Math.max(H+W,0);var G=P.text.trim();P.text=decodeURIComponent(encodeURIComponent(G)),P.id||(P.id=v(P.startTime,P.endTime,G)),P.endTime>0&&g.push(P)},m.onparsingerror=function(P){_=P},m.onflush=function(){if(_){h(_);return}L(g)},I.forEach(function(P){if(F)if(S(P,"X-TIMESTAMP-MAP=")){F=!1,P.slice(16).split(",").forEach(function(B){S(B,"LOCAL:")?u=B.slice(6):S(B,"MPEGTS:")&&(y=parseInt(B.slice(7)))});try{s=w(u)/1e3}catch(B){_=B}return}else P===""&&(F=!1);m.parse(P+`
`)}),m.flush()}},"./src/utils/xhr-loader.ts":(k,R,o)=>{o.r(R),o.d(R,{default:()=>U});var b=o("./src/utils/logger.ts"),A=o("./src/loader/load-stats.ts"),N=/^age:\s*[\d.]+\s*$/m,O=function(){function M(w){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=w?w.xhrSetup:null,this.stats=new A.LoadStats,this.retryDelay=0}var S=M.prototype;return S.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},S.abortInternal=function(){var p=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),p&&(p.onreadystatechange=null,p.onprogress=null,p.readyState!==4&&(this.stats.aborted=!0,p.abort()))},S.abort=function(){var p;this.abortInternal(),(p=this.callbacks)!==null&&p!==void 0&&p.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},S.load=function(p,v,a){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=p,this.config=v,this.callbacks=a,this.retryDelay=v.retryDelay,this.loadInternal()},S.loadInternal=function(){var p=this.config,v=this.context;if(p){var a=this.loader=new self.XMLHttpRequest,D=this.stats;D.loading.first=0,D.loaded=0;var T=this.xhrSetup;try{if(T)try{T(a,v.url)}catch{a.open("GET",v.url,!0),T(a,v.url)}a.readyState||a.open("GET",v.url,!0);var c=this.context.headers;if(c)for(var l in c)a.setRequestHeader(l,c[l])}catch(d){this.callbacks.onError({code:a.status,text:d.message},v,a);return}v.rangeEnd&&a.setRequestHeader("Range","bytes="+v.rangeStart+"-"+(v.rangeEnd-1)),a.onreadystatechange=this.readystatechange.bind(this),a.onprogress=this.loadprogress.bind(this),a.responseType=v.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),p.timeout),a.send()}},S.readystatechange=function(){var p=this.context,v=this.loader,a=this.stats;if(!(!p||!v)){var D=v.readyState,T=this.config;if(!a.aborted&&D>=2)if(self.clearTimeout(this.requestTimeout),a.loading.first===0&&(a.loading.first=Math.max(self.performance.now(),a.loading.start)),D===4){v.onreadystatechange=null,v.onprogress=null;var c=v.status,l=v.responseType==="arraybuffer";if(c>=200&&c<300&&(l&&v.response||v.responseText!==null)){a.loading.end=Math.max(self.performance.now(),a.loading.first);var d,f;if(l?(d=v.response,f=d.byteLength):(d=v.responseText,f=d.length),a.loaded=a.total=f,!this.callbacks)return;var x=this.callbacks.onProgress;if(x&&x(a,p,d,v),!this.callbacks)return;var L={url:v.responseURL,data:d};this.callbacks.onSuccess(L,a,p,v)}else a.retry>=T.maxRetry||c>=400&&c<499?(b.logger.error(c+" while loading "+p.url),this.callbacks.onError({code:c,text:v.statusText},p,v)):(b.logger.warn(c+" while loading "+p.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,T.maxRetryDelay),a.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),T.timeout)}},S.loadtimeout=function(){b.logger.warn("timeout while loading "+this.context.url);var p=this.callbacks;p&&(this.abortInternal(),p.onTimeout(this.stats,this.context,this.loader))},S.loadprogress=function(p){var v=this.stats;v.loaded=p.loaded,p.lengthComputable&&(v.total=p.total)},S.getCacheAge=function(){var p=null;if(this.loader&&N.test(this.loader.getAllResponseHeaders())){var v=this.loader.getResponseHeader("age");p=v?parseFloat(v):null}return p},M}();const U=O},"./node_modules/eventemitter3/index.js":k=>{var R=Object.prototype.hasOwnProperty,o="~";function b(){}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(o=!1));function A(M,S,w){this.fn=M,this.context=S,this.once=w||!1}function N(M,S,w,p,v){if(typeof w!="function")throw new TypeError("The listener must be a function");var a=new A(w,p||M,v),D=o?o+S:S;return M._events[D]?M._events[D].fn?M._events[D]=[M._events[D],a]:M._events[D].push(a):(M._events[D]=a,M._eventsCount++),M}function O(M,S){--M._eventsCount===0?M._events=new b:delete M._events[S]}function U(){this._events=new b,this._eventsCount=0}U.prototype.eventNames=function(){var S=[],w,p;if(this._eventsCount===0)return S;for(p in w=this._events)R.call(w,p)&&S.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(w)):S},U.prototype.listeners=function(S){var w=o?o+S:S,p=this._events[w];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,a=p.length,D=new Array(a);v<a;v++)D[v]=p[v].fn;return D},U.prototype.listenerCount=function(S){var w=o?o+S:S,p=this._events[w];return p?p.fn?1:p.length:0},U.prototype.emit=function(S,w,p,v,a,D){var T=o?o+S:S;if(!this._events[T])return!1;var c=this._events[T],l=arguments.length,d,f;if(c.fn){switch(c.once&&this.removeListener(S,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,w),!0;case 3:return c.fn.call(c.context,w,p),!0;case 4:return c.fn.call(c.context,w,p,v),!0;case 5:return c.fn.call(c.context,w,p,v,a),!0;case 6:return c.fn.call(c.context,w,p,v,a,D),!0}for(f=1,d=new Array(l-1);f<l;f++)d[f-1]=arguments[f];c.fn.apply(c.context,d)}else{var x=c.length,L;for(f=0;f<x;f++)switch(c[f].once&&this.removeListener(S,c[f].fn,void 0,!0),l){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,w);break;case 3:c[f].fn.call(c[f].context,w,p);break;case 4:c[f].fn.call(c[f].context,w,p,v);break;default:if(!d)for(L=1,d=new Array(l-1);L<l;L++)d[L-1]=arguments[L];c[f].fn.apply(c[f].context,d)}}return!0},U.prototype.on=function(S,w,p){return N(this,S,w,p,!1)},U.prototype.once=function(S,w,p){return N(this,S,w,p,!0)},U.prototype.removeListener=function(S,w,p,v){var a=o?o+S:S;if(!this._events[a])return this;if(!w)return O(this,a),this;var D=this._events[a];if(D.fn)D.fn===w&&(!v||D.once)&&(!p||D.context===p)&&O(this,a);else{for(var T=0,c=[],l=D.length;T<l;T++)(D[T].fn!==w||v&&!D[T].once||p&&D[T].context!==p)&&c.push(D[T]);c.length?this._events[a]=c.length===1?c[0]:c:O(this,a)}return this},U.prototype.removeAllListeners=function(S){var w;return S?(w=o?o+S:S,this._events[w]&&O(this,w)):(this._events=new b,this._eventsCount=0),this},U.prototype.off=U.prototype.removeListener,U.prototype.addListener=U.prototype.on,U.prefixed=o,U.EventEmitter=U,k.exports=U},"./node_modules/url-toolkit/src/url-toolkit.js":function(k){(function(R){var o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,b=/^(?=([^\/?#]*))\1([^]*)$/,A=/(?:\/|^)\.(?=\/)/g,N=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,O={buildAbsoluteURL:function(U,M,S){if(S=S||{},U=U.trim(),M=M.trim(),!M){if(!S.alwaysNormalize)return U;var w=O.parseURL(U);if(!w)throw new Error("Error trying to parse base URL.");return w.path=O.normalizePath(w.path),O.buildURLFromParts(w)}var p=O.parseURL(M);if(!p)throw new Error("Error trying to parse relative URL.");if(p.scheme)return S.alwaysNormalize?(p.path=O.normalizePath(p.path),O.buildURLFromParts(p)):M;var v=O.parseURL(U);if(!v)throw new Error("Error trying to parse base URL.");if(!v.netLoc&&v.path&&v.path[0]!=="/"){var a=b.exec(v.path);v.netLoc=a[1],v.path=a[2]}v.netLoc&&!v.path&&(v.path="/");var D={scheme:v.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};if(!p.netLoc&&(D.netLoc=v.netLoc,p.path[0]!=="/"))if(!p.path)D.path=v.path,p.params||(D.params=v.params,p.query||(D.query=v.query));else{var T=v.path,c=T.substring(0,T.lastIndexOf("/")+1)+p.path;D.path=O.normalizePath(c)}return D.path===null&&(D.path=S.alwaysNormalize?O.normalizePath(p.path):p.path),O.buildURLFromParts(D)},parseURL:function(U){var M=o.exec(U);return M?{scheme:M[1]||"",netLoc:M[2]||"",path:M[3]||"",params:M[4]||"",query:M[5]||"",fragment:M[6]||""}:null},normalizePath:function(U){for(U=U.split("").reverse().join("").replace(A,"");U.length!==(U=U.replace(N,"")).length;);return U.split("").reverse().join("")},buildURLFromParts:function(U){return U.scheme+U.netLoc+U.path+U.params+U.query+U.fragment}};k.exports=O})()}},n={};function i(k){var R=n[k];if(R!==void 0)return R.exports;var o=n[k]={exports:{}};return r[k].call(o.exports,o,o.exports,i),o.exports}i.m=r,i.n=k=>{var R=k&&k.__esModule?()=>k.default:()=>k;return i.d(R,{a:R}),R},i.d=(k,R)=>{for(var o in R)i.o(R,o)&&!i.o(k,o)&&Object.defineProperty(k,o,{enumerable:!0,get:R[o]})},i.o=(k,R)=>Object.prototype.hasOwnProperty.call(k,R),i.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})};var C=i("./src/hls.ts");return C=C.default,C})())})(zy);const ai=ss(dl);function Ra(e,t){console.error(`${Xi.NAME} ERROR >`,`${e}:
`,t)}const Qi=ae.forwardRef(({className:e,src:t,alt:r,fallbackScr:n,onError:i,...C},k)=>{const[R,o]=ae.useState(t),b=A=>{n&&o(n),i&&i(A)};return X.jsx("img",{className:e,src:R,alt:r,onError:b,ref:k,...C})});Qi.displayName="Img";const $y="_fallback_18igs_1",Yy="_emptyBlock_18igs_7",oo={fallback:$y,emptyBlock:Yy},lo="src/App/components/Player.tsx",mu=ae.forwardRef(({src:e,fallbackSrc:t,currentTime:r,children:n,className:i,...C},k)=>{const[R,o]=ae.useState(!0),b=ae.useRef(null);return ae.useEffect(()=>{if(b.current&&e){const A=b.current;if(ai.isSupported()){const N=new ai({enableWorker:!1});N.on(ai.Events.ERROR,(O,U)=>{if(U.fatal)switch(o(!1),U.type){case ai.ErrorTypes.NETWORK_ERROR:Ra(lo,"Fatal network error encountered, try to recover");break;case ai.ErrorTypes.MEDIA_ERROR:Ra(lo,"Fatal media error encountered, try to recover"),N.recoverMediaError();break;default:Ra(lo,"Fatal player error"),N.destroy();break}}),N.loadSource(e),N.attachMedia(A),r&&(b.current.currentTime=r)}}else o(!1)},[r,e]),X.jsxs(X.Fragment,{children:[R&&X.jsx("video",{className:we.join(oo.Player,i),ref:Fh([k,b]),...C,children:n}),!R&&t&&X.jsx(Qi,{className:we.join(oo.fallback,i),src:t,alt:"fallback"}),!R&&!t&&X.jsx(Se,{className:we.join(oo.emptyBlock,i)})]})});mu.displayName="Player";const Xy="_ResizingContainer_16avh_1",Qy="_outer_16avh_5",Zy="_inner_16avh_11",uo={ResizingContainer:Xy,outer:Qy,inner:Zy};function yu({width:e,className:t,children:r}){const n=e?{width:e}:{};return X.jsx(Se,{className:we.join(uo.ResizingContainer,t),style:{...n},children:X.jsx(Se,{className:uo.outer,children:X.jsx(Se,{className:uo.inner,children:r})})})}function Bh(e){const t=e*1e3,r=new Date(t).toISOString().slice(11,19);return r.match(/^00/)?r.slice(3):r}function Jy(){const e=ae.useCallback(()=>{const r=window.innerWidth-document.body.offsetWidth;document.body.style.overflow="hidden",document.body.style.width="100%",document.body.style.paddingRight=`${r}px`},[]),t=ae.useCallback(()=>{document.body.style.overflow="",document.body.style.width="auto",document.body.style.paddingRight="0px"},[]);return{lockScroll:e,unlockScroll:t}}const qy="_Button_o0t9u_100",eE="_tiny_o0t9u_113",tE="_small_o0t9u_116",rE="_medium_o0t9u_122",nE="_large_o0t9u_125",iE="_extra_o0t9u_128",aE="_clickable_o0t9u_131",sE="_disabled_o0t9u_141",oE="_label_o0t9u_156",lE="_icon_o0t9u_183",uE="_secondary_o0t9u_207",fE="_text_o0t9u_224",Qt={Button:qy,tiny:eE,small:tE,default:"_default_o0t9u_119",medium:rE,large:nE,extra:iE,clickable:aE,disabled:sE,label:oE,icon:lE,secondary:uE,text:fE},Pr=ae.forwardRef(({size:e="default",type:t="primary",submit:r,children:n,className:i,...C},k)=>{const R=Array.isArray(n)?n==null?void 0:n.some(A=>typeof A=="string"):typeof n=="string",o=e&&Qt[e],b=[t&&Qt[t],!R&&Qt.icon];return X.jsx("button",{type:r?"submit":"button",className:we.join(Qt.Button,i,o,b),ref:k,...C,children:X.jsx("span",{className:we.join(Qt.label,o,"button"),children:n})})});Pr.displayName="Button";const Kh=ae.forwardRef(({size:e="default",width:t,height:r,type:n="primary",blank:i,customStyle:C,children:k,className:R,style:o,...b},A)=>{const N=Array.isArray(k)?k==null?void 0:k.some(S=>typeof S=="string"):typeof k=="string",O=[e&&Qt[e],n&&Qt[n],!N&&Qt.icon,Qt.Button],U=i&&{target:"_blank",rel:"noreferrer noopener"},M=e==="custom"?{width:t,height:r}:{};return X.jsx("a",{className:we.join(R,!C&&O),ref:A,style:{...o,...M},...U,...b,children:X.jsx("span",{className:we.join(Qt.label,"button"),children:k})})});Kh.displayName="ButtonLink";const cE="_VideoHelp_q9ea5_46",dE="_container_q9ea5_58",hE="_text_q9ea5_64",St={VideoHelp:cE,container:dE,text:hE};function vE({currentSpeed:e,onMinusClick:t,onEqualClick:r,onZeroClick:n,className:i}){return X.jsxs(Se,{className:we.join(St.VideoHelp,i),children:[X.jsxs(Se,{className:St.container,children:[X.jsx(Le,{component:"p2",className:St.text,children:"Current speed:"}),X.jsx(Le,{component:"p1",className:St.text,children:e})]}),X.jsxs(Se,{className:St.container,children:[X.jsx(Pr,{className:St.text,onClick:t,children:"-"}),X.jsx(Le,{component:"p2",className:St.text,children:" increase "})]}),X.jsxs(Se,{className:St.container,children:[X.jsx(Pr,{className:St.text,onClick:r,children:"="}),X.jsx(Le,{component:"p2",className:St.text,children:" decrease"})]}),X.jsxs(Se,{className:St.container,children:[X.jsx(Pr,{className:St.text,onClick:n,children:"0"}),X.jsx(Le,{component:"p2",className:St.text,children:" reset"})]})]})}const jh="/genesis-front-end-school/assets/no-cover-140be5a7.svg",gE="/genesis-front-end-school/assets/not-available-1aa8b881.svg",pE="_CurrentLesson_1ldu8_46",mE="_imageContainer_1ldu8_57",yE="_previewImg_1ldu8_75",EE="_textContent_1ldu8_80",TE="_contentItem_1ldu8_86",_E="_videoLesson_1ldu8_91",SE="_backdrop_1ldu8_105",xE="_player_1ldu8_110",CE="_videoHelp_1ldu8_116",tr={CurrentLesson:pE,imageContainer:mE,previewImg:yE,textContent:EE,contentItem:TE,videoLesson:_E,backdrop:SE,player:xE,videoHelp:CE};function LE({lesson:e,currentTime:t,onCurrentTimeChange:r,grid:n,className:i}){const C=ae.useRef(null),[k,R]=ae.useState(!1),[o,b]=ae.useState(1),A=a=>{b(Math.round(a*10)/10)},{lockScroll:N,unlockScroll:O}=Jy(),U=()=>{N(),R(!0),b(1)},M=()=>{O(),R(!1),C.current&&r(Math.trunc(C.current.currentTime))},S=a=>{a.preventDefault(),a.code==="Minus"&&o>.2&&A(o-.2),a.code==="Equal"&&o<4&&A(o+.2),a.code==="Digit0"&&A(1)};ae.useEffect(()=>{C!=null&&C.current&&(C.current.playbackRate=o)},[o]);const w=()=>{o>.2&&A(o-.2)},p=()=>{o<4&&A(o+.2)},v=()=>{A(1)};return X.jsxs(Se,{className:we.join(tr.CurrentLesson,i),grid:n,children:[X.jsx(yu,{className:tr.imageContainer,children:X.jsx(Qi,{className:tr.previewImg,src:e.previewImageLink||"",alt:`Thumb ${e.title}`,fallbackScr:jh,onClick:U})}),X.jsxs(Se,{className:tr.textContent,children:[X.jsx(Le,{component:"h4",children:`${e.order||1}. ${e.title}`}),e.duration&&X.jsxs(Se,{className:tr.contentItem,children:[X.jsx(Le,{component:"h5",children:"Duration:"}),X.jsx(Le,{component:"p1",children:Bh(e.duration)})]})]}),k&&e.videoLink&&X.jsxs(Se,{className:tr.videoLesson,children:[X.jsx(pu,{show:k,onClick:M,className:tr.backdrop}),X.jsx(mu,{className:tr.player,src:e.videoLink,fallbackSrc:gE,preload:"metadata",currentTime:t,controls:!0,onKeyUp:S,ref:C}),X.jsx(vE,{className:tr.videoHelp,currentSpeed:o,onMinusClick:w,onEqualClick:p,onZeroClick:v})]})]})}const DE="_LessonCard_1q22d_46",PE="_current_1q22d_56",AE="_disabled_1q22d_62",RE="_imageContainer_1q22d_75",IE="_previewImg_1q22d_89",OE="_textContent_1q22d_95",ME="_contentItem_1q22d_101",wE="_lock_1q22d_110",Tr={LessonCard:DE,current:PE,disabled:AE,imageContainer:RE,previewImg:IE,textContent:OE,contentItem:ME,lock:wE};function kE({lesson:e,current:t,onClick:r,className:n}){const i=[t&&Tr.current,!e.unlocked&&Tr.disabled],C=()=>{t||r(e.order||1,e.id||"")};return X.jsxs(Se,{onClick:C,className:we.join(Tr.LessonCard,n,i),children:[X.jsx(yu,{className:Tr.imageContainer,children:X.jsx(Qi,{className:Tr.previewImg,src:e.previewImageLink||"",alt:`Thumb ${e.title}`,fallbackScr:jh})}),X.jsxs(Se,{className:Tr.textContent,children:[X.jsx(Le,{component:"h5",children:`${e.order}. ${e.title}`}),e.duration&&X.jsxs(Se,{className:Tr.contentItem,children:[X.jsx(Le,{component:"h6",children:"Duration:"}),X.jsx(Le,{component:"p2",children:Bh(e.duration)})]})]}),!e.unlocked&&X.jsx(Se,{className:Tr.lock,children:X.jsx(Le,{component:"p1",display:"h4",children:"LOCKED"})})]})}const bE="_CoursePage_18dka_1",FE="_container_18dka_1",NE="_course_18dka_8",UE="_lessonsContainer_18dka_15",BE="_courseTextContent_18dka_22",KE="_courseDetailsContent_18dka_29",Vr={CoursePage:bE,container:FE,course:NE,lessonsContainer:UE,courseTextContent:BE,courseDetailsContent:KE};function jE(){const e=Bi(a=>a.token),t=Bi(a=>a.error),{course:r,lessons:n,currentLessonId:i,setCurrentLessonId:C,currentLessonNumber:k,setCurrentLessonNumber:R,loading:o,error:b,fetchCourse:A}=My(a=>({course:a.course,lessons:a.lessons,currentLessonId:a.currentLessonId,setCurrentLessonId:a.setCurrentLessonId,currentLessonNumber:a.currentLessonNumber,setCurrentLessonNumber:a.setCurrentLessonNumber,loading:a.loading,error:a.error,fetchCourse:a.fetchCourse})),[N,O]=rm(),U=N.get("id")||"",M=Number(N.get("lesson")||1)-1,S=Number(N.get("time"));ae.useEffect(()=>{e&&A({token:e,id:U||""})},[e]),ae.useEffect(()=>{},[n]),ae.useEffect(()=>{var D;M>=0&&R(M);const a=(D=n[k])==null?void 0:D.id;a&&C(a)},[M]);const w=({id:a,lesson:D,time:T})=>{const c=N.get("id"),l=N.get("lesson"),d={};(a||c)&&(d.id=a||c||""),(D||l)&&(d.lesson=D||l||""),T&&(d.time=T||""),we.isObjectEmpty(d)||O(d)},p=a=>{w({time:a.toString()}),i&&qf(i,"time",a)};ae.useEffect(()=>{if(i){const a=ny(i,"time");a&&p(a)}},[i]),nm(ae.useCallback(()=>{i&&S&&qf(i,"time",S)},[i,S]));const v=(a,D)=>{C(D),w({lesson:a.toString()})};return b||t?X.jsx(Oh,{children:b||t}):X.jsxs(Se,{component:"main",className:Vr.CoursePage,children:[X.jsx(qt,{container:!0,component:"section",className:Vr.container,children:!we.isObjectEmpty(r)&&n.length>0&&X.jsxs(X.Fragment,{children:[X.jsx(Ah,{to:`${du.COURSES}/1`,children:X.jsx(Rh,{underline:!1,display:"h4",children:"Courses /"})}),X.jsxs(qt,{row:!0,component:"section",className:Vr.course,children:[X.jsxs(Se,{className:Vr.courseTextContent,children:[X.jsx(Le,{component:"h3",children:r.title}),X.jsx(Le,{component:"p1",children:r.description}),X.jsxs(Se,{className:Vr.courseDetailsContent,children:[X.jsxs(Le,{component:"p1",children:[X.jsx("b",{children:"Lessons: "}),r.lessonsCount]}),X.jsxs(Le,{component:"p1",children:[X.jsx("b",{children:"Rating: "}),`${r.rating} / 5`]}),r.skills&&r.skills.length>0&&X.jsxs(Le,{component:"p1",children:[X.jsx("b",{children:"Skills: "}),Mh(", ",r.skills)]})]})]}),X.jsx(LE,{lesson:n[k],currentTime:S,onCurrentTimeChange:p,grid:{xx:12}},n[k].id),X.jsxs(Se,{className:Vr.lessonsContainer,children:[X.jsx(Le,{component:"h3",className:"col-xx-12",children:"Other lessons"}),n.map(a=>X.jsx(kE,{lesson:a,current:(a.order||1)===k+1,onClick:v,className:Vr.lesson},a.id))]})]})]})}),o===!0&&X.jsx(Uh,{})]})}function WE(e){return X.jsx(mr,{fill:"none",...e,children:X.jsx("path",{d:"M15 18L9 12L15 6",strokeLinecap:"round",strokeLinejoin:"round"})})}function HE(e){return X.jsx(mr,{fill:"none",...e,children:X.jsx("path",{d:"M9 18L15 12L9 6",strokeLinecap:"round",strokeLinejoin:"round"})})}function GE(e){return X.jsxs(mr,{fill:"none",...e,children:[X.jsx("path",{d:"M11 17L6 12L11 7",strokeLinecap:"round",strokeLinejoin:"round"}),X.jsx("path",{d:"M18 17L13 12L18 7",strokeLinecap:"round",strokeLinejoin:"round"})]})}function VE(e){return X.jsxs(mr,{fill:"none",...e,children:[X.jsx("path",{d:"M13 17L18 12L13 7",strokeLinecap:"round",strokeLinejoin:"round"}),X.jsx("path",{d:"M6 17L11 12L6 7",strokeLinecap:"round",strokeLinejoin:"round"})]})}const zE="_Pagination_1ynbt_46",$E="_pages_1ynbt_60",YE="_button_1ynbt_67",fn={Pagination:zE,pages:$E,button:YE};function XE({setCurrentPage:e,currentPageNumber:t,firstPageNumber:r,lastPageNumber:n}){const[i,C]=ae.useState(!1),[k,R]=ae.useState(!1);ae.useEffect(()=>{C(!1),R(!1),t<=r?C(!0):t>=n&&R(!0)},[t,r,n]);const o=()=>{t>r&&e(t-1)},b=()=>{t<n&&e(t+1)},A=()=>{e(r)},N=()=>{e(n)};return X.jsxs(Se,{className:fn.Pagination,children:[X.jsx(Pr,{type:"secondary",disabled:i,className:fn.button,onClick:A,children:X.jsx(GE,{})}),X.jsx(Pr,{type:"secondary",disabled:i,className:fn.button,onClick:o,children:X.jsx(WE,{})}),X.jsxs(Se,{className:fn.pages,children:[X.jsx(Le,{component:"p1",display:"h5",children:t+1}),X.jsx(Le,{component:"p1",children:"/"}),X.jsx(Le,{component:"p1",children:n+1})]}),X.jsx(Pr,{type:"secondary",disabled:k,className:fn.button,onClick:b,children:X.jsx(HE,{})}),X.jsx(Pr,{type:"secondary",disabled:k,className:fn.button,onClick:N,children:X.jsx(VE,{})})]})}const QE="_container_1pesx_1",ZE="_title_1pesx_9",JE="_title40_1pesx_13",qE="_title4_1pesx_13",e1="_description_1pesx_22",si={container:QE,title:ZE,title40:JE,title4:qE,"char-animation":"_char-animation_1pesx_1",description:e1};function Wh(){return X.jsx(Se,{component:"main",children:X.jsxs(qt,{container:!0,component:"section",className:si.container,children:[X.jsxs(Se,{className:si.title,children:[X.jsx(Le,{component:"p1",display:"h1",className:si.title40,children:"40"}),X.jsx(Le,{component:"p1",display:"h1",className:si.title4,children:"4"})]}),X.jsx(Se,{className:si.description,children:X.jsxs(Le,{component:"p2",children:["Page not found",X.jsx("br",{}),"\\_()_/"]})})]})})}const t1="core/preview-courses";function r1(e,t){const r=e.map(i=>{var C,k,R,o;return{id:(i==null?void 0:i.id)||"",title:(i==null?void 0:i.title)||"",previewImageLink:i!=null&&i.previewImageLink?`${i.previewImageLink}/cover.webp`:"",videoLink:((k=(C=i==null?void 0:i.meta)==null?void 0:C.courseVideoPreview)==null?void 0:k.link)||"",description:(i==null?void 0:i.description)||"",lessonsCount:(i==null?void 0:i.lessonsCount)||0,skills:Array.isArray((R=i==null?void 0:i.meta)==null?void 0:R.skills)?(o=i==null?void 0:i.meta)==null?void 0:o.skills:null,rating:(i==null?void 0:i.rating)||null}}),n=[];for(let i=0;i<r.length;i+=t)n.push(r.slice(i,i+t));return n}const n1=hu()(vu(e=>({courses:[],currentPage:0,firstPageNumber:0,lastPageNumber:1/0,setCurrentPage:t=>{e({currentPage:t})},loading:!1,error:null,fetchCourses:async({token:t,coursesPerPage:r=10})=>{e({loading:!0});try{const n=`${gu}${t1}`,i=new Headers({Authorization:`Bearer ${t}`}),k=await(await fetch(n,{headers:i})).json();if("statusCode"in k)throw new Error(k.statusCode.toString());const R=r1(k.courses,r);e({courses:R,lastPageNumber:R.length-1,error:null})}catch(n){if(n instanceof Error)switch(n.message){case"401":e({error:Xt("useCoursesState","Authorization error")});break;case"504":e({error:Xt("useCoursesState","Sorry, gateway time out. Try again later!")});break;default:e({error:Xt("useCoursesState",n)});break}else e({error:Xt("useCoursesState",n)})}finally{e({loading:!1})}}})));function i1(){const e=Ls();return function(r,n){return e({pathname:r,search:`?${is(n)}`})}}const a1="_CardPlayer_k79wy_1",s1="_player_k79wy_10",rc={CardPlayer:a1,player:s1},o1="src/App/pages/CoursesPage/CourseCard/CardPlayer/CardPlayer.tsx";function l1({src:e,fallbackSrc:t,preload:r,loop:n,muted:i,className:C}){const[k,R]=ae.useState(!0),o=ae.useRef(null),b=N=>{const O=N.currentTarget.play();O!==void 0&&O.then().catch(()=>{Ra(o1,`Can't play video. Check link: ${e}`),R(!1)})},A=N=>{N.currentTarget.pause()};return X.jsx(Se,{className:we.join(rc.CardPlayer,C),children:X.jsx(mu,{className:rc.player,src:k?e:"",fallbackSrc:t,preload:r,loop:n,muted:i,ref:o,onMouseEnter:b,onMouseLeave:A})})}const u1="_CourseCard_1yuew_46",f1="_playerContainer_1yuew_52",c1="_previewImg_1yuew_65",d1="_textContent_1yuew_77",h1="_detailsContent_1yuew_84",cn={CourseCard:u1,playerContainer:f1,previewImg:c1,textContent:d1,detailsContent:h1};function v1({id:e,title:t,description:r,previewImg:n,video:i,lessonsCount:C,skills:k,rating:R,className:o,grid:b}){const[A,N]=ae.useState(!0),O=i1(),U=()=>{O("/course",{id:e,lesson:"1"})};return X.jsxs(Se,{className:we.join(cn.CourseCard,o),grid:b,children:[X.jsx(Kh,{onClick:U,onMouseEnter:()=>N(!1),onMouseLeave:()=>N(!0),customStyle:!0,children:X.jsxs(yu,{className:cn.playerContainer,children:[X.jsx(l1,{className:cn.player,src:i,fallbackSrc:n,preload:"metadata",loop:!0,muted:!0}),X.jsx(Qi,{style:{visibility:A?"visible":"hidden"},className:cn.previewImg,src:n,alt:`Thumb ${t}`})]})}),X.jsxs(Se,{className:cn.textContent,children:[X.jsx(Le,{component:"h4",children:t}),X.jsx(Le,{component:"p1",children:r}),X.jsxs(Se,{className:cn.detailsContent,children:[X.jsxs(Le,{component:"p1",children:[X.jsx("b",{children:"Lessons: "}),C]}),X.jsxs(Le,{component:"p1",children:[X.jsx("b",{children:"Rating: "}),`${R} / 5`]}),k&&(k==null?void 0:k.length)>0&&X.jsxs(Le,{component:"p1",children:[X.jsx("b",{children:"Skills: "}),Mh(", ",k)]})]})]})]})}const g1="_CoursesPage_1sjix_1",p1="_container_1sjix_1",m1="_courses_1sjix_8",fo={CoursesPage:g1,container:p1,courses:m1};function nc(){const e=Bi(U=>U.token),t=Bi(U=>U.error),{courses:r,currentPage:n,firstPageNumber:i,lastPageNumber:C,setCurrentPage:k,loading:R,error:o,fetchCourses:b}=n1(U=>({courses:U.courses,currentPage:U.currentPage,firstPageNumber:U.firstPageNumber,lastPageNumber:U.lastPageNumber,setCurrentPage:U.setCurrentPage,loading:U.loading,error:U.error,fetchCourses:U.fetchCourses})),A=Ls(),{pageNumber:N}=Ip();ae.useEffect(()=>{e&&b({token:e})},[e]),ae.useEffect(()=>{N&&k(Number(N)-1)},[]);const O=U=>{k(U),A(`${du.COURSES}/${U+1}`)};return n<i||n>C?X.jsx(Wh,{}):o||t?X.jsx(Oh,{children:o||t}):X.jsxs(Se,{component:"main",className:fo.CoursesPage,children:[X.jsx(qt,{container:!0,component:"section",className:fo.container,children:r.length>0&&X.jsxs(X.Fragment,{children:[X.jsx(Le,{component:"h2",children:"Courses"}),X.jsx(qt,{row:!0,component:"section",className:fo.courses,children:r[n].map(U=>X.jsx(v1,{id:U.id,title:U.title,previewImg:U.previewImageLink,video:U.videoLink,description:U.description,lessonsCount:U.lessonsCount,skills:U.skills,rating:U.rating,grid:{xx:6,md:12}},U.id))}),X.jsx(XE,{setCurrentPage:O,currentPageNumber:n,firstPageNumber:i,lastPageNumber:C})]})}),R===!0&&X.jsx(Uh,{})]})}function y1(){const[e,t]=ae.useState(!1),{loading:r,error:n,fetchToken:i}=Bi(C=>({loading:C.loading,error:C.error,fetchToken:C.fetchToken}));return ae.useEffect(()=>{i()},[]),ae.useEffect(()=>{r||t(!0)},[r]),{isInit:e,error:n}}const E1=Qp(rs(X.jsxs(dn,{path:"/",element:X.jsx(Qm,{}),children:[X.jsx(dn,{index:!0,element:X.jsx(nc,{})}),X.jsx(dn,{path:"courses/:pageNumber",element:X.jsx(nc,{})}),X.jsx(dn,{path:"course",element:X.jsx(jE,{})}),X.jsx(dn,{path:"*",element:X.jsx(Wh,{})})]})));function T1(){const{isInit:e}=y1();return e?X.jsx(Kp,{router:E1}):X.jsx(qm,{})}const _1=document.getElementById("root"),S1=hh(_1);S1.render(X.jsx(ae.StrictMode,{children:X.jsx(T1,{})}));
